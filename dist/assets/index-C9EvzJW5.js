const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-KuV02_Rf.js","assets/vendor-Dxs-n5AA.js","assets/charts-ThUKYqVy.js","assets/utils-BPjSJNJF.js"])))=>i.map(i=>d[i]);
var NN=Object.defineProperty;var _N=(s,t,a)=>t in s?NN(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;var zg=(s,t,a)=>_N(s,typeof t!="symbol"?t+"":t,a);import{r as j,a as CN,b as BN,c as Lr,u as ys,d as zu,L as dn,O as Bv,e as Sv,f as Gu,R as ed,h as SN,i as tt,B as kN}from"./vendor-Dxs-n5AA.js";import{C as Wu,a as Ju,L as Yu,B as rp,p as Xu,b as Zu,c as em,A as np,P as ip,d as op,i as lp,e as au,f as Lx,g as fh,R as EN,h as FN,j as tm,k as UN,l as DN,m as kv,T as sm,n as cp,o as dp,X as Ap,Y as up,q as ml,r as Ev,D as IN}from"./charts-ThUKYqVy.js";import{f as Zt,b as bh,a as hc,d as xc,e as LN,s as TN,g as QN,h as PN}from"./utils-BPjSJNJF.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();var Fv={exports:{}},am={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MN=j,RN=Symbol.for("react.element"),ON=Symbol.for("react.fragment"),HN=Object.prototype.hasOwnProperty,qN=MN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$N={key:!0,ref:!0,__self:!0,__source:!0};function Uv(s,t,a){var r,n={},i=null,o=null;a!==void 0&&(i=""+a),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)HN.call(t,r)&&!$N.hasOwnProperty(r)&&(n[r]=t[r]);if(s&&s.defaultProps)for(r in t=s.defaultProps,t)n[r]===void 0&&(n[r]=t[r]);return{$$typeof:RN,type:s,key:i,ref:o,props:n,_owner:qN.current}}am.Fragment=ON;am.jsx=Uv;am.jsxs=Uv;Fv.exports=am;var e=Fv.exports,Tx={},Gg=CN;Tx.createRoot=Gg.createRoot,Tx.hydrateRoot=Gg.hydrateRoot;const mp=j.createContext({});function hp(s){const t=j.useRef(null);return t.current===null&&(t.current=s()),t.current}const xp=typeof window<"u",Dv=xp?j.useLayoutEffect:j.useEffect,rm=j.createContext(null);function pp(s,t){s.indexOf(t)===-1&&s.push(t)}function gp(s,t){const a=s.indexOf(t);a>-1&&s.splice(a,1)}const Dn=(s,t,a)=>a>t?t:a<s?s:a;let fp=()=>{};const In={},Iv=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s);function Lv(s){return typeof s=="object"&&s!==null}const Tv=s=>/^0[^.\s]+$/u.test(s);function bp(s){let t;return()=>(t===void 0&&(t=s()),t)}const Dr=s=>s,VN=(s,t)=>a=>t(s(a)),gd=(...s)=>s.reduce(VN),td=(s,t,a)=>{const r=t-s;return r===0?1:(a-s)/r};class yp{constructor(){this.subscriptions=[]}add(t){return pp(this.subscriptions,t),()=>gp(this.subscriptions,t)}notify(t,a,r){const n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](t,a,r);else for(let i=0;i<n;i++){const o=this.subscriptions[i];o&&o(t,a,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const on=s=>s*1e3,kr=s=>s/1e3;function Qv(s,t){return t?s*(1e3/t):0}const Pv=(s,t,a)=>(((1-3*a+3*t)*s+(3*a-6*t))*s+3*t)*s,KN=1e-7,zN=12;function GN(s,t,a,r,n){let i,o,l=0;do o=t+(a-t)/2,i=Pv(o,r,n)-s,i>0?a=o:t=o;while(Math.abs(i)>KN&&++l<zN);return o}function fd(s,t,a,r){if(s===t&&a===r)return Dr;const n=i=>GN(i,0,1,s,a);return i=>i===0||i===1?i:Pv(n(i),t,r)}const Mv=s=>t=>t<=.5?s(2*t)/2:(2-s(2*(1-t)))/2,Rv=s=>t=>1-s(1-t),Ov=fd(.33,1.53,.69,.99),vp=Rv(Ov),Hv=Mv(vp),qv=s=>(s*=2)<1?.5*vp(s):.5*(2-Math.pow(2,-10*(s-1))),wp=s=>1-Math.sin(Math.acos(s)),$v=Rv(wp),Vv=Mv(wp),WN=fd(.42,0,1,1),JN=fd(0,0,.58,1),Kv=fd(.42,0,.58,1),YN=s=>Array.isArray(s)&&typeof s[0]!="number",zv=s=>Array.isArray(s)&&typeof s[0]=="number",XN={linear:Dr,easeIn:WN,easeInOut:Kv,easeOut:JN,circIn:wp,circInOut:Vv,circOut:$v,backIn:vp,backInOut:Hv,backOut:Ov,anticipate:qv},ZN=s=>typeof s=="string",Wg=s=>{if(zv(s)){fp(s.length===4);const[t,a,r,n]=s;return fd(t,a,r,n)}else if(ZN(s))return XN[s];return s},bA=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function e5(s,t){let a=new Set,r=new Set,n=!1,i=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(A){o.has(A)&&(d.schedule(A),s()),A(l)}const d={schedule:(A,u=!1,x=!1)=>{const y=x&&n?a:r;return u&&o.add(A),y.has(A)||y.add(A),A},cancel:A=>{r.delete(A),o.delete(A)},process:A=>{if(l=A,n){i=!0;return}n=!0,[a,r]=[r,a],a.forEach(c),a.clear(),n=!1,i&&(i=!1,d.process(A))}};return d}const t5=40;function Gv(s,t){let a=!1,r=!0;const n={delta:0,timestamp:0,isProcessing:!1},i=()=>a=!0,o=bA.reduce((N,D)=>(N[D]=e5(i),N),{}),{setup:l,read:c,resolveKeyframes:d,preUpdate:A,update:u,preRender:x,render:m,postRender:y}=o,g=()=>{const N=In.useManualTiming?n.timestamp:performance.now();a=!1,In.useManualTiming||(n.delta=r?1e3/60:Math.max(Math.min(N-n.timestamp,t5),1)),n.timestamp=N,n.isProcessing=!0,l.process(n),c.process(n),d.process(n),A.process(n),u.process(n),x.process(n),m.process(n),y.process(n),n.isProcessing=!1,a&&t&&(r=!1,s(g))},b=()=>{a=!0,r=!0,n.isProcessing||s(g)};return{schedule:bA.reduce((N,D)=>{const S=o[D];return N[D]=(E,R=!1,_=!1)=>(a||b(),S.schedule(E,R,_)),N},{}),cancel:N=>{for(let D=0;D<bA.length;D++)o[bA[D]].cancel(N)},state:n,steps:o}}const{schedule:ks,cancel:xi,state:_a,steps:yh}=Gv(typeof requestAnimationFrame<"u"?requestAnimationFrame:Dr,!0);let ru;function s5(){ru=void 0}const ar={now:()=>(ru===void 0&&ar.set(_a.isProcessing||In.useManualTiming?_a.timestamp:performance.now()),ru),set:s=>{ru=s,queueMicrotask(s5)}},Wv=s=>t=>typeof t=="string"&&t.startsWith(s),jp=Wv("--"),a5=Wv("var(--"),Np=s=>a5(s)?r5.test(s.split("/*")[0].trim()):!1,r5=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,El={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},sd={...El,transform:s=>Dn(0,1,s)},yA={...El,default:1},Qc=s=>Math.round(s*1e5)/1e5,_p=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function n5(s){return s==null}const i5=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Cp=(s,t)=>a=>!!(typeof a=="string"&&i5.test(a)&&a.startsWith(s)||t&&!n5(a)&&Object.prototype.hasOwnProperty.call(a,t)),Jv=(s,t,a)=>r=>{if(typeof r!="string")return r;const[n,i,o,l]=r.match(_p);return{[s]:parseFloat(n),[t]:parseFloat(i),[a]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},o5=s=>Dn(0,255,s),vh={...El,transform:s=>Math.round(o5(s))},Ki={test:Cp("rgb","red"),parse:Jv("red","green","blue"),transform:({red:s,green:t,blue:a,alpha:r=1})=>"rgba("+vh.transform(s)+", "+vh.transform(t)+", "+vh.transform(a)+", "+Qc(sd.transform(r))+")"};function l5(s){let t="",a="",r="",n="";return s.length>5?(t=s.substring(1,3),a=s.substring(3,5),r=s.substring(5,7),n=s.substring(7,9)):(t=s.substring(1,2),a=s.substring(2,3),r=s.substring(3,4),n=s.substring(4,5),t+=t,a+=a,r+=r,n+=n),{red:parseInt(t,16),green:parseInt(a,16),blue:parseInt(r,16),alpha:n?parseInt(n,16)/255:1}}const Qx={test:Cp("#"),parse:l5,transform:Ki.transform},bd=s=>({test:t=>typeof t=="string"&&t.endsWith(s)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${s}`}),ei=bd("deg"),ln=bd("%"),Lt=bd("px"),c5=bd("vh"),d5=bd("vw"),Jg={...ln,parse:s=>ln.parse(s)/100,transform:s=>ln.transform(s*100)},rl={test:Cp("hsl","hue"),parse:Jv("hue","saturation","lightness"),transform:({hue:s,saturation:t,lightness:a,alpha:r=1})=>"hsla("+Math.round(s)+", "+ln.transform(Qc(t))+", "+ln.transform(Qc(a))+", "+Qc(sd.transform(r))+")"},oa={test:s=>Ki.test(s)||Qx.test(s)||rl.test(s),parse:s=>Ki.test(s)?Ki.parse(s):rl.test(s)?rl.parse(s):Qx.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?Ki.transform(s):rl.transform(s),getAnimatableNone:s=>{const t=oa.parse(s);return t.alpha=0,oa.transform(t)}},A5=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function u5(s){var t,a;return isNaN(s)&&typeof s=="string"&&(((t=s.match(_p))==null?void 0:t.length)||0)+(((a=s.match(A5))==null?void 0:a.length)||0)>0}const Yv="number",Xv="color",m5="var",h5="var(",Yg="${}",x5=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ad(s){const t=s.toString(),a=[],r={color:[],number:[],var:[]},n=[];let i=0;const l=t.replace(x5,c=>(oa.test(c)?(r.color.push(i),n.push(Xv),a.push(oa.parse(c))):c.startsWith(h5)?(r.var.push(i),n.push(m5),a.push(c)):(r.number.push(i),n.push(Yv),a.push(parseFloat(c))),++i,Yg)).split(Yg);return{values:a,split:l,indexes:r,types:n}}function Zv(s){return ad(s).values}function ew(s){const{split:t,types:a}=ad(s),r=t.length;return n=>{let i="";for(let o=0;o<r;o++)if(i+=t[o],n[o]!==void 0){const l=a[o];l===Yv?i+=Qc(n[o]):l===Xv?i+=oa.transform(n[o]):i+=n[o]}return i}}const p5=s=>typeof s=="number"?0:oa.test(s)?oa.getAnimatableNone(s):s;function g5(s){const t=Zv(s);return ew(s)(t.map(p5))}const pi={test:u5,parse:Zv,createTransformer:ew,getAnimatableNone:g5};function wh(s,t,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?s+(t-s)*6*a:a<1/2?t:a<2/3?s+(t-s)*(2/3-a)*6:s}function f5({hue:s,saturation:t,lightness:a,alpha:r}){s/=360,t/=100,a/=100;let n=0,i=0,o=0;if(!t)n=i=o=a;else{const l=a<.5?a*(1+t):a+t-a*t,c=2*a-l;n=wh(c,l,s+1/3),i=wh(c,l,s),o=wh(c,l,s-1/3)}return{red:Math.round(n*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function fu(s,t){return a=>a>0?t:s}const Is=(s,t,a)=>s+(t-s)*a,jh=(s,t,a)=>{const r=s*s,n=a*(t*t-r)+r;return n<0?0:Math.sqrt(n)},b5=[Qx,Ki,rl],y5=s=>b5.find(t=>t.test(s));function Xg(s){const t=y5(s);if(!t)return!1;let a=t.parse(s);return t===rl&&(a=f5(a)),a}const Zg=(s,t)=>{const a=Xg(s),r=Xg(t);if(!a||!r)return fu(s,t);const n={...a};return i=>(n.red=jh(a.red,r.red,i),n.green=jh(a.green,r.green,i),n.blue=jh(a.blue,r.blue,i),n.alpha=Is(a.alpha,r.alpha,i),Ki.transform(n))},Px=new Set(["none","hidden"]);function v5(s,t){return Px.has(s)?a=>a<=0?s:t:a=>a>=1?t:s}function w5(s,t){return a=>Is(s,t,a)}function Bp(s){return typeof s=="number"?w5:typeof s=="string"?Np(s)?fu:oa.test(s)?Zg:_5:Array.isArray(s)?tw:typeof s=="object"?oa.test(s)?Zg:j5:fu}function tw(s,t){const a=[...s],r=a.length,n=s.map((i,o)=>Bp(i)(i,t[o]));return i=>{for(let o=0;o<r;o++)a[o]=n[o](i);return a}}function j5(s,t){const a={...s,...t},r={};for(const n in a)s[n]!==void 0&&t[n]!==void 0&&(r[n]=Bp(s[n])(s[n],t[n]));return n=>{for(const i in r)a[i]=r[i](n);return a}}function N5(s,t){const a=[],r={color:0,var:0,number:0};for(let n=0;n<t.values.length;n++){const i=t.types[n],o=s.indexes[i][r[i]],l=s.values[o]??0;a[n]=l,r[i]++}return a}const _5=(s,t)=>{const a=pi.createTransformer(t),r=ad(s),n=ad(t);return r.indexes.var.length===n.indexes.var.length&&r.indexes.color.length===n.indexes.color.length&&r.indexes.number.length>=n.indexes.number.length?Px.has(s)&&!n.values.length||Px.has(t)&&!r.values.length?v5(s,t):gd(tw(N5(r,n),n.values),a):fu(s,t)};function sw(s,t,a){return typeof s=="number"&&typeof t=="number"&&typeof a=="number"?Is(s,t,a):Bp(s)(s,t)}const C5=s=>{const t=({timestamp:a})=>s(a);return{start:(a=!0)=>ks.update(t,a),stop:()=>xi(t),now:()=>_a.isProcessing?_a.timestamp:ar.now()}},aw=(s,t,a=10)=>{let r="";const n=Math.max(Math.round(t/a),2);for(let i=0;i<n;i++)r+=Math.round(s(i/(n-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},bu=2e4;function Sp(s){let t=0;const a=50;let r=s.next(t);for(;!r.done&&t<bu;)t+=a,r=s.next(t);return t>=bu?1/0:t}function B5(s,t=100,a){const r=a({...s,keyframes:[0,t]}),n=Math.min(Sp(r),bu);return{type:"keyframes",ease:i=>r.next(n*i).value/t,duration:kr(n)}}const S5=5;function rw(s,t,a){const r=Math.max(t-S5,0);return Qv(a-s(r),t-r)}const Hs={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Nh=.001;function k5({duration:s=Hs.duration,bounce:t=Hs.bounce,velocity:a=Hs.velocity,mass:r=Hs.mass}){let n,i,o=1-t;o=Dn(Hs.minDamping,Hs.maxDamping,o),s=Dn(Hs.minDuration,Hs.maxDuration,kr(s)),o<1?(n=d=>{const A=d*o,u=A*s,x=A-a,m=Mx(d,o),y=Math.exp(-u);return Nh-x/m*y},i=d=>{const u=d*o*s,x=u*a+a,m=Math.pow(o,2)*Math.pow(d,2)*s,y=Math.exp(-u),g=Mx(Math.pow(d,2),o);return(-n(d)+Nh>0?-1:1)*((x-m)*y)/g}):(n=d=>{const A=Math.exp(-d*s),u=(d-a)*s+1;return-Nh+A*u},i=d=>{const A=Math.exp(-d*s),u=(a-d)*(s*s);return A*u});const l=5/s,c=F5(n,i,l);if(s=on(s),isNaN(c))return{stiffness:Hs.stiffness,damping:Hs.damping,duration:s};{const d=Math.pow(c,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:s}}}const E5=12;function F5(s,t,a){let r=a;for(let n=1;n<E5;n++)r=r-s(r)/t(r);return r}function Mx(s,t){return s*Math.sqrt(1-t*t)}const U5=["duration","bounce"],D5=["stiffness","damping","mass"];function ef(s,t){return t.some(a=>s[a]!==void 0)}function I5(s){let t={velocity:Hs.velocity,stiffness:Hs.stiffness,damping:Hs.damping,mass:Hs.mass,isResolvedFromDuration:!1,...s};if(!ef(s,D5)&&ef(s,U5))if(s.visualDuration){const a=s.visualDuration,r=2*Math.PI/(a*1.2),n=r*r,i=2*Dn(.05,1,1-(s.bounce||0))*Math.sqrt(n);t={...t,mass:Hs.mass,stiffness:n,damping:i}}else{const a=k5(s);t={...t,...a,mass:Hs.mass},t.isResolvedFromDuration=!0}return t}function yu(s=Hs.visualDuration,t=Hs.bounce){const a=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:t}:s;let{restSpeed:r,restDelta:n}=a;const i=a.keyframes[0],o=a.keyframes[a.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:d,mass:A,duration:u,velocity:x,isResolvedFromDuration:m}=I5({...a,velocity:-kr(a.velocity||0)}),y=x||0,g=d/(2*Math.sqrt(c*A)),b=o-i,p=kr(Math.sqrt(c/A)),v=Math.abs(b)<5;r||(r=v?Hs.restSpeed.granular:Hs.restSpeed.default),n||(n=v?Hs.restDelta.granular:Hs.restDelta.default);let N;if(g<1){const S=Mx(p,g);N=E=>{const R=Math.exp(-g*p*E);return o-R*((y+g*p*b)/S*Math.sin(S*E)+b*Math.cos(S*E))}}else if(g===1)N=S=>o-Math.exp(-p*S)*(b+(y+p*b)*S);else{const S=p*Math.sqrt(g*g-1);N=E=>{const R=Math.exp(-g*p*E),_=Math.min(S*E,300);return o-R*((y+g*p*b)*Math.sinh(_)+S*b*Math.cosh(_))/S}}const D={calculatedDuration:m&&u||null,next:S=>{const E=N(S);if(m)l.done=S>=u;else{let R=S===0?y:0;g<1&&(R=S===0?on(y):rw(N,S,E));const _=Math.abs(R)<=r,C=Math.abs(o-E)<=n;l.done=_&&C}return l.value=l.done?o:E,l},toString:()=>{const S=Math.min(Sp(D),bu),E=aw(R=>D.next(S*R).value,S,30);return S+"ms "+E},toTransition:()=>{}};return D}yu.applyToOptions=s=>{const t=B5(s,100,yu);return s.ease=t.ease,s.duration=on(t.duration),s.type="keyframes",s};function Rx({keyframes:s,velocity:t=0,power:a=.8,timeConstant:r=325,bounceDamping:n=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:A}){const u=s[0],x={done:!1,value:u},m=_=>l!==void 0&&_<l||c!==void 0&&_>c,y=_=>l===void 0?c:c===void 0||Math.abs(l-_)<Math.abs(c-_)?l:c;let g=a*t;const b=u+g,p=o===void 0?b:o(b);p!==b&&(g=p-u);const v=_=>-g*Math.exp(-_/r),N=_=>p+v(_),D=_=>{const C=v(_),L=N(_);x.done=Math.abs(C)<=d,x.value=x.done?p:L};let S,E;const R=_=>{m(x.value)&&(S=_,E=yu({keyframes:[x.value,y(x.value)],velocity:rw(N,_,x.value),damping:n,stiffness:i,restDelta:d,restSpeed:A}))};return R(0),{calculatedDuration:null,next:_=>{let C=!1;return!E&&S===void 0&&(C=!0,D(_),R(_)),S!==void 0&&_>=S?E.next(_-S):(!C&&D(_),x)}}}function L5(s,t,a){const r=[],n=a||In.mix||sw,i=s.length-1;for(let o=0;o<i;o++){let l=n(s[o],s[o+1]);if(t){const c=Array.isArray(t)?t[o]||Dr:t;l=gd(c,l)}r.push(l)}return r}function T5(s,t,{clamp:a=!0,ease:r,mixer:n}={}){const i=s.length;if(fp(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=s[0]===s[1];s[0]>s[i-1]&&(s=[...s].reverse(),t=[...t].reverse());const l=L5(t,r,n),c=l.length,d=A=>{if(o&&A<s[0])return t[0];let u=0;if(c>1)for(;u<s.length-2&&!(A<s[u+1]);u++);const x=td(s[u],s[u+1],A);return l[u](x)};return a?A=>d(Dn(s[0],s[i-1],A)):d}function Q5(s,t){const a=s[s.length-1];for(let r=1;r<=t;r++){const n=td(0,t,r);s.push(Is(a,1,n))}}function P5(s){const t=[0];return Q5(t,s.length-1),t}function M5(s,t){return s.map(a=>a*t)}function R5(s,t){return s.map(()=>t||Kv).splice(0,s.length-1)}function Pc({duration:s=300,keyframes:t,times:a,ease:r="easeInOut"}){const n=YN(r)?r.map(Wg):Wg(r),i={done:!1,value:t[0]},o=M5(a&&a.length===t.length?a:P5(t),s),l=T5(o,t,{ease:Array.isArray(n)?n:R5(t,n)});return{calculatedDuration:s,next:c=>(i.value=l(c),i.done=c>=s,i)}}const O5=s=>s!==null;function kp(s,{repeat:t,repeatType:a="loop"},r,n=1){const i=s.filter(O5),l=n<0||t&&a!=="loop"&&t%2===1?0:i.length-1;return!l||r===void 0?i[l]:r}const H5={decay:Rx,inertia:Rx,tween:Pc,keyframes:Pc,spring:yu};function nw(s){typeof s.type=="string"&&(s.type=H5[s.type])}class Ep{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,a){return this.finished.then(t,a)}}const q5=s=>s/100;class Fp extends Ep{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,n;const{motionValue:a}=this.options;a&&a.updatedAt!==ar.now()&&this.tick(ar.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(n=(r=this.options).onStop)==null||n.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;nw(t);const{type:a=Pc,repeat:r=0,repeatDelay:n=0,repeatType:i,velocity:o=0}=t;let{keyframes:l}=t;const c=a||Pc;c!==Pc&&typeof l[0]!="number"&&(this.mixKeyframes=gd(q5,sw(l[0],l[1])),l=[0,100]);const d=c({...t,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=Sp(d));const{calculatedDuration:A}=d;this.calculatedDuration=A,this.resolvedDuration=A+n,this.totalDuration=this.resolvedDuration*(r+1)-n,this.generator=d}updateTime(t){const a=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=a}tick(t,a=!1){const{generator:r,totalDuration:n,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:A,repeat:u,repeatType:x,repeatDelay:m,type:y,onUpdate:g,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-n/this.speed,this.startTime)),a?this.currentTime=t:this.updateTime(t);const p=this.currentTime-d*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?p<0:p>n;this.currentTime=Math.max(p,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=n);let N=this.currentTime,D=r;if(u){const _=Math.min(this.currentTime,n)/l;let C=Math.floor(_),L=_%1;!L&&_>=1&&(L=1),L===1&&C--,C=Math.min(C,u+1),!!(C%2)&&(x==="reverse"?(L=1-L,m&&(L-=m/l)):x==="mirror"&&(D=o)),N=Dn(0,1,L)*l}const S=v?{done:!1,value:A[0]}:D.next(N);i&&(S.value=i(S.value));let{done:E}=S;!v&&c!==null&&(E=this.playbackSpeed>=0?this.currentTime>=n:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return R&&y!==Rx&&(S.value=kp(A,this.options,b,this.speed)),g&&g(S.value),R&&this.finish(),S}then(t,a){return this.finished.then(t,a)}get duration(){return kr(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+kr(t)}get time(){return kr(this.currentTime)}set time(t){var a;t=on(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(a=this.driver)==null||a.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(ar.now());const a=this.playbackSpeed!==t;this.playbackSpeed=t,a&&(this.time=kr(this.currentTime))}play(){var n,i;if(this.isStopped)return;const{driver:t=C5,startTime:a}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(i=(n=this.options).onPlay)==null||i.call(n);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=a??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ar.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,a;this.notifyFinished(),this.teardown(),this.state="finished",(a=(t=this.options).onComplete)==null||a.call(t)}cancel(){var t,a;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(a=(t=this.options).onCancel)==null||a.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var a;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(a=this.driver)==null||a.stop(),t.observe(this)}}function $5(s){for(let t=1;t<s.length;t++)s[t]??(s[t]=s[t-1])}const zi=s=>s*180/Math.PI,Ox=s=>{const t=zi(Math.atan2(s[1],s[0]));return Hx(t)},V5={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:s=>(Math.abs(s[0])+Math.abs(s[3]))/2,rotate:Ox,rotateZ:Ox,skewX:s=>zi(Math.atan(s[1])),skewY:s=>zi(Math.atan(s[2])),skew:s=>(Math.abs(s[1])+Math.abs(s[2]))/2},Hx=s=>(s=s%360,s<0&&(s+=360),s),tf=Ox,sf=s=>Math.sqrt(s[0]*s[0]+s[1]*s[1]),af=s=>Math.sqrt(s[4]*s[4]+s[5]*s[5]),K5={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:sf,scaleY:af,scale:s=>(sf(s)+af(s))/2,rotateX:s=>Hx(zi(Math.atan2(s[6],s[5]))),rotateY:s=>Hx(zi(Math.atan2(-s[2],s[0]))),rotateZ:tf,rotate:tf,skewX:s=>zi(Math.atan(s[4])),skewY:s=>zi(Math.atan(s[1])),skew:s=>(Math.abs(s[1])+Math.abs(s[4]))/2};function qx(s){return s.includes("scale")?1:0}function $x(s,t){if(!s||s==="none")return qx(t);const a=s.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,n;if(a)r=K5,n=a;else{const l=s.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=V5,n=l}if(!n)return qx(t);const i=r[t],o=n[1].split(",").map(G5);return typeof i=="function"?i(o):o[i]}const z5=(s,t)=>{const{transform:a="none"}=getComputedStyle(s);return $x(a,t)};function G5(s){return parseFloat(s.trim())}const Fl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ul=new Set(Fl),rf=s=>s===El||s===Lt,W5=new Set(["x","y","z"]),J5=Fl.filter(s=>!W5.has(s));function Y5(s){const t=[];return J5.forEach(a=>{const r=s.getValue(a);r!==void 0&&(t.push([a,r.get()]),r.set(a.startsWith("scale")?1:0))}),t}const Yi={width:({x:s},{paddingLeft:t="0",paddingRight:a="0"})=>s.max-s.min-parseFloat(t)-parseFloat(a),height:({y:s},{paddingTop:t="0",paddingBottom:a="0"})=>s.max-s.min-parseFloat(t)-parseFloat(a),top:(s,{top:t})=>parseFloat(t),left:(s,{left:t})=>parseFloat(t),bottom:({y:s},{top:t})=>parseFloat(t)+(s.max-s.min),right:({x:s},{left:t})=>parseFloat(t)+(s.max-s.min),x:(s,{transform:t})=>$x(t,"x"),y:(s,{transform:t})=>$x(t,"y")};Yi.translateX=Yi.x;Yi.translateY=Yi.y;const Xi=new Set;let Vx=!1,Kx=!1,zx=!1;function iw(){if(Kx){const s=Array.from(Xi).filter(r=>r.needsMeasurement),t=new Set(s.map(r=>r.element)),a=new Map;t.forEach(r=>{const n=Y5(r);n.length&&(a.set(r,n),r.render())}),s.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const n=a.get(r);n&&n.forEach(([i,o])=>{var l;(l=r.getValue(i))==null||l.set(o)})}),s.forEach(r=>r.measureEndState()),s.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Kx=!1,Vx=!1,Xi.forEach(s=>s.complete(zx)),Xi.clear()}function ow(){Xi.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&(Kx=!0)})}function X5(){zx=!0,ow(),iw(),zx=!1}class Up{constructor(t,a,r,n,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=a,this.name=r,this.motionValue=n,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Xi.add(this),Vx||(Vx=!0,ks.read(ow),ks.resolveKeyframes(iw))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:a,element:r,motionValue:n}=this;if(t[0]===null){const i=n==null?void 0:n.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&a){const l=r.readValue(a,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),n&&i===void 0&&n.set(t[0])}$5(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Xi.delete(this)}cancel(){this.state==="scheduled"&&(Xi.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Z5=s=>s.startsWith("--");function e4(s,t,a){Z5(t)?s.style.setProperty(t,a):s.style[t]=a}const t4=bp(()=>window.ScrollTimeline!==void 0),s4={};function a4(s,t){const a=bp(s);return()=>s4[t]??a()}const lw=a4(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Sc=([s,t,a,r])=>`cubic-bezier(${s}, ${t}, ${a}, ${r})`,nf={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Sc([0,.65,.55,1]),circOut:Sc([.55,0,1,.45]),backIn:Sc([.31,.01,.66,-.59]),backOut:Sc([.33,1.53,.69,.99])};function cw(s,t){if(s)return typeof s=="function"?lw()?aw(s,t):"ease-out":zv(s)?Sc(s):Array.isArray(s)?s.map(a=>cw(a,t)||nf.easeOut):nf[s]}function r4(s,t,a,{delay:r=0,duration:n=300,repeat:i=0,repeatType:o="loop",ease:l="easeOut",times:c}={},d=void 0){const A={[t]:a};c&&(A.offset=c);const u=cw(l,n);Array.isArray(u)&&(A.easing=u);const x={delay:r,duration:n,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return d&&(x.pseudoElement=d),s.animate(A,x)}function dw(s){return typeof s=="function"&&"applyToOptions"in s}function n4({type:s,...t}){return dw(s)&&lw()?s.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class i4 extends Ep{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:a,name:r,keyframes:n,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,fp(typeof t.type!="string");const d=n4(t);this.animation=r4(a,r,n,d,i),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const A=kp(n,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(A):e4(a,r,A),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,a;(a=(t=this.animation).finish)==null||a.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,a;this.isPseudoElement||(a=(t=this.animation).commitStyles)==null||a.call(t)}get duration(){var a,r;const t=((r=(a=this.animation.effect)==null?void 0:a.getComputedTiming)==null?void 0:r.call(a).duration)||0;return kr(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+kr(t)}get time(){return kr(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=on(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:a}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&t4()?(this.animation.timeline=t,Dr):a(this)}}const Aw={anticipate:qv,backInOut:Hv,circInOut:Vv};function o4(s){return s in Aw}function l4(s){typeof s.ease=="string"&&o4(s.ease)&&(s.ease=Aw[s.ease])}const of=10;class c4 extends i4{constructor(t){l4(t),nw(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:a,onUpdate:r,onComplete:n,element:i,...o}=this.options;if(!a)return;if(t!==void 0){a.set(t);return}const l=new Fp({...o,autoplay:!1}),c=on(this.finishedTime??this.time);a.setWithVelocity(l.sample(c-of).value,l.sample(c).value,of),l.stop()}}const lf=(s,t)=>t==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(pi.test(s)||s==="0")&&!s.startsWith("url("));function d4(s){const t=s[0];if(s.length===1)return!0;for(let a=0;a<s.length;a++)if(s[a]!==t)return!0}function A4(s,t,a,r){const n=s[0];if(n===null)return!1;if(t==="display"||t==="visibility")return!0;const i=s[s.length-1],o=lf(n,t),l=lf(i,t);return!o||!l?!1:d4(s)||(a==="spring"||dw(a))&&r}function Gx(s){s.duration=0,s.type="keyframes"}const u4=new Set(["opacity","clipPath","filter","transform"]),m4=bp(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function h4(s){var A;const{motionValue:t,name:a,repeatDelay:r,repeatType:n,damping:i,type:o}=s;if(!(((A=t==null?void 0:t.owner)==null?void 0:A.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=t.owner.getProps();return m4()&&a&&u4.has(a)&&(a!=="transform"||!d)&&!c&&!r&&n!=="mirror"&&i!==0&&o!=="inertia"}const x4=40;class p4 extends Ep{constructor({autoplay:t=!0,delay:a=0,type:r="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:c,motionValue:d,element:A,...u}){var y;super(),this.stop=()=>{var g,b;this._animation&&(this._animation.stop(),(g=this.stopTimeline)==null||g.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=ar.now();const x={autoplay:t,delay:a,type:r,repeat:n,repeatDelay:i,repeatType:o,name:c,motionValue:d,element:A,...u},m=(A==null?void 0:A.KeyframeResolver)||Up;this.keyframeResolver=new m(l,(g,b,p)=>this.onKeyframesResolved(g,b,x,!p),c,d,A),(y=this.keyframeResolver)==null||y.scheduleResolve()}onKeyframesResolved(t,a,r,n){this.keyframeResolver=void 0;const{name:i,type:o,velocity:l,delay:c,isHandoff:d,onUpdate:A}=r;this.resolvedAt=ar.now(),A4(t,i,o,l)||((In.instantAnimations||!c)&&(A==null||A(kp(t,r,a))),t[0]=t[t.length-1],Gx(r),r.repeat=0);const x={startTime:n?this.resolvedAt?this.resolvedAt-this.createdAt>x4?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:a,...r,keyframes:t},m=!d&&h4(x)?new c4({...x,element:x.motionValue.owner.current}):new Fp(x);m.finished.then(()=>this.notifyFinished()).catch(Dr),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(t,a){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),X5()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const g4=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function f4(s){const t=g4.exec(s);if(!t)return[,];const[,a,r,n]=t;return[`--${a??r}`,n]}function uw(s,t,a=1){const[r,n]=f4(s);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return Iv(o)?parseFloat(o):o}return Np(n)?uw(n,t,a+1):n}function Dp(s,t){return(s==null?void 0:s[t])??(s==null?void 0:s.default)??s}const mw=new Set(["width","height","top","left","right","bottom",...Fl]),b4={test:s=>s==="auto",parse:s=>s},hw=s=>t=>t.test(s),xw=[El,Lt,ln,ei,d5,c5,b4],cf=s=>xw.find(hw(s));function y4(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||Tv(s):!0}const v4=new Set(["brightness","contrast","saturate","opacity"]);function w4(s){const[t,a]=s.slice(0,-1).split("(");if(t==="drop-shadow")return s;const[r]=a.match(_p)||[];if(!r)return s;const n=a.replace(r,"");let i=v4.has(t)?1:0;return r!==a&&(i*=100),t+"("+i+n+")"}const j4=/\b([a-z-]*)\(.*?\)/gu,Wx={...pi,getAnimatableNone:s=>{const t=s.match(j4);return t?t.map(w4).join(" "):s}},df={...El,transform:Math.round},N4={rotate:ei,rotateX:ei,rotateY:ei,rotateZ:ei,scale:yA,scaleX:yA,scaleY:yA,scaleZ:yA,skew:ei,skewX:ei,skewY:ei,distance:Lt,translateX:Lt,translateY:Lt,translateZ:Lt,x:Lt,y:Lt,z:Lt,perspective:Lt,transformPerspective:Lt,opacity:sd,originX:Jg,originY:Jg,originZ:Lt},Ip={borderWidth:Lt,borderTopWidth:Lt,borderRightWidth:Lt,borderBottomWidth:Lt,borderLeftWidth:Lt,borderRadius:Lt,radius:Lt,borderTopLeftRadius:Lt,borderTopRightRadius:Lt,borderBottomRightRadius:Lt,borderBottomLeftRadius:Lt,width:Lt,maxWidth:Lt,height:Lt,maxHeight:Lt,top:Lt,right:Lt,bottom:Lt,left:Lt,padding:Lt,paddingTop:Lt,paddingRight:Lt,paddingBottom:Lt,paddingLeft:Lt,margin:Lt,marginTop:Lt,marginRight:Lt,marginBottom:Lt,marginLeft:Lt,backgroundPositionX:Lt,backgroundPositionY:Lt,...N4,zIndex:df,fillOpacity:sd,strokeOpacity:sd,numOctaves:df},_4={...Ip,color:oa,backgroundColor:oa,outlineColor:oa,fill:oa,stroke:oa,borderColor:oa,borderTopColor:oa,borderRightColor:oa,borderBottomColor:oa,borderLeftColor:oa,filter:Wx,WebkitFilter:Wx},pw=s=>_4[s];function gw(s,t){let a=pw(s);return a!==Wx&&(a=pi),a.getAnimatableNone?a.getAnimatableNone(t):void 0}const C4=new Set(["auto","none","0"]);function B4(s,t,a){let r=0,n;for(;r<s.length&&!n;){const i=s[r];typeof i=="string"&&!C4.has(i)&&ad(i).values.length&&(n=s[r]),r++}if(n&&a)for(const i of t)s[i]=gw(a,n)}class S4 extends Up{constructor(t,a,r,n,i){super(t,a,r,n,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:a,name:r}=this;if(!a||!a.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let d=t[c];if(typeof d=="string"&&(d=d.trim(),Np(d))){const A=uw(d,a.current);A!==void 0&&(t[c]=A),c===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!mw.has(r)||t.length!==2)return;const[n,i]=t,o=cf(n),l=cf(i);if(o!==l)if(rf(o)&&rf(l))for(let c=0;c<t.length;c++){const d=t[c];typeof d=="string"&&(t[c]=parseFloat(d))}else Yi[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:a}=this,r=[];for(let n=0;n<t.length;n++)(t[n]===null||y4(t[n]))&&r.push(n);r.length&&B4(t,r,a)}measureInitialState(){const{element:t,unresolvedKeyframes:a,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Yi[r](t.measureViewportBox(),window.getComputedStyle(t.current)),a[0]=this.measuredOrigin;const n=a[a.length-1];n!==void 0&&t.getValue(r,n).jump(n,!1)}measureEndState(){var l;const{element:t,name:a,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const n=t.getValue(a);n&&n.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=Yi[a](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,d])=>{t.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function k4(s,t,a){if(s instanceof EventTarget)return[s];if(typeof s=="string"){let r=document;const n=(a==null?void 0:a[s])??r.querySelectorAll(s);return n?Array.from(n):[]}return Array.from(s)}const fw=(s,t)=>t&&typeof s=="number"?t.transform(s):s;function bw(s){return Lv(s)&&"offsetHeight"in s}const Af=30,E4=s=>!isNaN(parseFloat(s));class F4{constructor(t,a={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const n=ar.now();if(this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=a.owner}setCurrent(t){this.current=t,this.updatedAt=ar.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=E4(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,a){this.events[t]||(this.events[t]=new yp);const r=this.events[t].add(a);return t==="change"?()=>{r(),ks.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,a){this.passiveEffect=t,this.stopPassiveEffect=a}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,a,r){this.set(a),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,a=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=ar.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Af)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,Af);return Qv(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(t){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=t(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,a;(t=this.dependents)==null||t.clear(),(a=this.events.destroy)==null||a.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function _l(s,t){return new F4(s,t)}const{schedule:Lp}=Gv(queueMicrotask,!1),Vr={x:!1,y:!1};function yw(){return Vr.x||Vr.y}function U4(s){return s==="x"||s==="y"?Vr[s]?null:(Vr[s]=!0,()=>{Vr[s]=!1}):Vr.x||Vr.y?null:(Vr.x=Vr.y=!0,()=>{Vr.x=Vr.y=!1})}function vw(s,t){const a=k4(s),r=new AbortController,n={passive:!0,...t,signal:r.signal};return[a,n,()=>r.abort()]}function uf(s){return!(s.pointerType==="touch"||yw())}function D4(s,t,a={}){const[r,n,i]=vw(s,a),o=l=>{if(!uf(l))return;const{target:c}=l,d=t(c,l);if(typeof d!="function"||!c)return;const A=u=>{uf(u)&&(d(u),c.removeEventListener("pointerleave",A))};c.addEventListener("pointerleave",A,n)};return r.forEach(l=>{l.addEventListener("pointerenter",o,n)}),i}const ww=(s,t)=>t?s===t?!0:ww(s,t.parentElement):!1,Tp=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,I4=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function L4(s){return I4.has(s.tagName)||s.tabIndex!==-1}const nu=new WeakSet;function mf(s){return t=>{t.key==="Enter"&&s(t)}}function _h(s,t){s.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const T4=(s,t)=>{const a=s.currentTarget;if(!a)return;const r=mf(()=>{if(nu.has(a))return;_h(a,"down");const n=mf(()=>{_h(a,"up")}),i=()=>_h(a,"cancel");a.addEventListener("keyup",n,t),a.addEventListener("blur",i,t)});a.addEventListener("keydown",r,t),a.addEventListener("blur",()=>a.removeEventListener("keydown",r),t)};function hf(s){return Tp(s)&&!yw()}function Q4(s,t,a={}){const[r,n,i]=vw(s,a),o=l=>{const c=l.currentTarget;if(!hf(l))return;nu.add(c);const d=t(c,l),A=(m,y)=>{window.removeEventListener("pointerup",u),window.removeEventListener("pointercancel",x),nu.has(c)&&nu.delete(c),hf(m)&&typeof d=="function"&&d(m,{success:y})},u=m=>{A(m,c===window||c===document||a.useGlobalTarget||ww(c,m.target))},x=m=>{A(m,!1)};window.addEventListener("pointerup",u,n),window.addEventListener("pointercancel",x,n)};return r.forEach(l=>{(a.useGlobalTarget?window:l).addEventListener("pointerdown",o,n),bw(l)&&(l.addEventListener("focus",d=>T4(d,n)),!L4(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function jw(s){return Lv(s)&&"ownerSVGElement"in s}function P4(s){return jw(s)&&s.tagName==="svg"}const Qa=s=>!!(s&&s.getVelocity),M4=[...xw,oa,pi],R4=s=>M4.find(hw(s)),Qp=j.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"});function xf(s,t){if(typeof s=="function")return s(t);s!=null&&(s.current=t)}function O4(...s){return t=>{let a=!1;const r=s.map(n=>{const i=xf(n,t);return!a&&typeof i=="function"&&(a=!0),i});if(a)return()=>{for(let n=0;n<r.length;n++){const i=r[n];typeof i=="function"?i():xf(s[n],null)}}}}function H4(...s){return j.useCallback(O4(...s),s)}class q4 extends j.Component{getSnapshotBeforeUpdate(t){const a=this.props.childRef.current;if(a&&t.isPresent&&!this.props.isPresent){const r=a.offsetParent,n=bw(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=a.offsetHeight||0,i.width=a.offsetWidth||0,i.top=a.offsetTop,i.left=a.offsetLeft,i.right=n-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function $4({children:s,isPresent:t,anchorX:a,root:r}){const n=j.useId(),i=j.useRef(null),o=j.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=j.useContext(Qp),c=H4(i,s==null?void 0:s.ref);return j.useInsertionEffect(()=>{const{width:d,height:A,top:u,left:x,right:m}=o.current;if(t||!i.current||!d||!A)return;const y=a==="left"?`left: ${x}`:`right: ${m}`;i.current.dataset.motionPopId=n;const g=document.createElement("style");l&&(g.nonce=l);const b=r??document.head;return b.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${A}px !important;
            ${y}px !important;
            top: ${u}px !important;
          }
        `),()=>{b.contains(g)&&b.removeChild(g)}},[t]),e.jsx(q4,{isPresent:t,childRef:i,sizeRef:o,children:j.cloneElement(s,{ref:c})})}const V4=({children:s,initial:t,isPresent:a,onExitComplete:r,custom:n,presenceAffectsLayout:i,mode:o,anchorX:l,root:c})=>{const d=hp(K4),A=j.useId();let u=!0,x=j.useMemo(()=>(u=!1,{id:A,initial:t,isPresent:a,custom:n,onExitComplete:m=>{d.set(m,!0);for(const y of d.values())if(!y)return;r&&r()},register:m=>(d.set(m,!1),()=>d.delete(m))}),[a,d,r]);return i&&u&&(x={...x}),j.useMemo(()=>{d.forEach((m,y)=>d.set(y,!1))},[a]),j.useEffect(()=>{!a&&!d.size&&r&&r()},[a]),o==="popLayout"&&(s=e.jsx($4,{isPresent:a,anchorX:l,root:c,children:s})),e.jsx(rm.Provider,{value:x,children:s})};function K4(){return new Map}function Nw(s=!0){const t=j.useContext(rm);if(t===null)return[!0,null];const{isPresent:a,onExitComplete:r,register:n}=t,i=j.useId();j.useEffect(()=>{if(s)return n(i)},[s]);const o=j.useCallback(()=>s&&r&&r(i),[i,r,s]);return!a&&r?[!1,o]:[!0]}const vA=s=>s.key||"";function pf(s){const t=[];return j.Children.forEach(s,a=>{j.isValidElement(a)&&t.push(a)}),t}const rt=({children:s,custom:t,initial:a=!0,onExitComplete:r,presenceAffectsLayout:n=!0,mode:i="sync",propagate:o=!1,anchorX:l="left",root:c})=>{const[d,A]=Nw(o),u=j.useMemo(()=>pf(s),[s]),x=o&&!d?[]:u.map(vA),m=j.useRef(!0),y=j.useRef(u),g=hp(()=>new Map),[b,p]=j.useState(u),[v,N]=j.useState(u);Dv(()=>{m.current=!1,y.current=u;for(let E=0;E<v.length;E++){const R=vA(v[E]);x.includes(R)?g.delete(R):g.get(R)!==!0&&g.set(R,!1)}},[v,x.length,x.join("-")]);const D=[];if(u!==b){let E=[...u];for(let R=0;R<v.length;R++){const _=v[R],C=vA(_);x.includes(C)||(E.splice(R,0,_),D.push(_))}return i==="wait"&&D.length&&(E=D),N(pf(E)),p(u),null}const{forceRender:S}=j.useContext(mp);return e.jsx(e.Fragment,{children:v.map(E=>{const R=vA(E),_=o&&!d?!1:u===v||x.includes(R),C=()=>{if(g.has(R))g.set(R,!0);else return;let L=!0;g.forEach(f=>{f||(L=!1)}),L&&(S==null||S(),N(y.current),o&&(A==null||A()),r&&r())};return e.jsx(V4,{isPresent:_,initial:!m.current||a?void 0:!1,custom:t,presenceAffectsLayout:n,mode:i,root:c,onExitComplete:_?void 0:C,anchorX:l,children:E},R)})})},_w=j.createContext({strict:!1}),gf={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Cl={};for(const s in gf)Cl[s]={isEnabled:t=>gf[s].some(a=>!!t[a])};function z4(s){for(const t in s)Cl[t]={...Cl[t],...s[t]}}const G4=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function vu(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||G4.has(s)}let Cw=s=>!vu(s);function W4(s){typeof s=="function"&&(Cw=t=>t.startsWith("on")?!vu(t):s(t))}try{W4(require("@emotion/is-prop-valid").default)}catch{}function J4(s,t,a){const r={};for(const n in s)n==="values"&&typeof s.values=="object"||(Cw(n)||a===!0&&vu(n)||!t&&!vu(n)||s.draggable&&n.startsWith("onDrag"))&&(r[n]=s[n]);return r}const nm=j.createContext({});function im(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}function rd(s){return typeof s=="string"||Array.isArray(s)}const Pp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Mp=["initial",...Pp];function om(s){return im(s.animate)||Mp.some(t=>rd(s[t]))}function Bw(s){return!!(om(s)||s.variants)}function Y4(s,t){if(om(s)){const{initial:a,animate:r}=s;return{initial:a===!1||rd(a)?a:void 0,animate:rd(r)?r:void 0}}return s.inherit!==!1?t:{}}function X4(s){const{initial:t,animate:a}=Y4(s,j.useContext(nm));return j.useMemo(()=>({initial:t,animate:a}),[ff(t),ff(a)])}function ff(s){return Array.isArray(s)?s.join(" "):s}const nd={};function Z4(s){for(const t in s)nd[t]=s[t],jp(t)&&(nd[t].isCSSVariable=!0)}function Sw(s,{layout:t,layoutId:a}){return Ul.has(s)||s.startsWith("origin")||(t||a!==void 0)&&(!!nd[s]||s==="opacity")}const e_={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},t_=Fl.length;function s_(s,t,a){let r="",n=!0;for(let i=0;i<t_;i++){const o=Fl[i],l=s[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||a){const d=fw(l,Ip[o]);if(!c){n=!1;const A=e_[o]||o;r+=`${A}(${d}) `}a&&(t[o]=d)}}return r=r.trim(),a?r=a(t,n?"":r):n&&(r="none"),r}function Rp(s,t,a){const{style:r,vars:n,transformOrigin:i}=s;let o=!1,l=!1;for(const c in t){const d=t[c];if(Ul.has(c)){o=!0;continue}else if(jp(c)){n[c]=d;continue}else{const A=fw(d,Ip[c]);c.startsWith("origin")?(l=!0,i[c]=A):r[c]=A}}if(t.transform||(o||a?r.transform=s_(t,s.transform,a):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:A=0}=i;r.transformOrigin=`${c} ${d} ${A}`}}const Op=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function kw(s,t,a){for(const r in t)!Qa(t[r])&&!Sw(r,a)&&(s[r]=t[r])}function a_({transformTemplate:s},t){return j.useMemo(()=>{const a=Op();return Rp(a,t,s),Object.assign({},a.vars,a.style)},[t])}function r_(s,t){const a=s.style||{},r={};return kw(r,a,s),Object.assign(r,a_(s,t)),r}function n_(s,t){const a={},r=r_(s,t);return s.drag&&s.dragListener!==!1&&(a.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(a.tabIndex=0),a.style=r,a}const i_={offset:"stroke-dashoffset",array:"stroke-dasharray"},o_={offset:"strokeDashoffset",array:"strokeDasharray"};function l_(s,t,a=1,r=0,n=!0){s.pathLength=1;const i=n?i_:o_;s[i.offset]=Lt.transform(-r);const o=Lt.transform(t),l=Lt.transform(a);s[i.array]=`${o} ${l}`}function Ew(s,{attrX:t,attrY:a,attrScale:r,pathLength:n,pathSpacing:i=1,pathOffset:o=0,...l},c,d,A){if(Rp(s,l,d),c){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:u,style:x}=s;u.transform&&(x.transform=u.transform,delete u.transform),(x.transform||u.transformOrigin)&&(x.transformOrigin=u.transformOrigin??"50% 50%",delete u.transformOrigin),x.transform&&(x.transformBox=(A==null?void 0:A.transformBox)??"fill-box",delete u.transformBox),t!==void 0&&(u.x=t),a!==void 0&&(u.y=a),r!==void 0&&(u.scale=r),n!==void 0&&l_(u,n,i,o,!1)}const Fw=()=>({...Op(),attrs:{}}),Uw=s=>typeof s=="string"&&s.toLowerCase()==="svg";function c_(s,t,a,r){const n=j.useMemo(()=>{const i=Fw();return Ew(i,t,Uw(r),s.transformTemplate,s.style),{...i.attrs,style:{...i.style}}},[t]);if(s.style){const i={};kw(i,s.style,s),n.style={...i,...n.style}}return n}const d_=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Hp(s){return typeof s!="string"||s.includes("-")?!1:!!(d_.indexOf(s)>-1||/[A-Z]/u.test(s))}function A_(s,t,a,{latestValues:r},n,i=!1){const l=(Hp(s)?c_:n_)(t,r,n,s),c=J4(t,typeof s=="string",i),d=s!==j.Fragment?{...c,...l,ref:a}:{},{children:A}=t,u=j.useMemo(()=>Qa(A)?A.get():A,[A]);return j.createElement(s,{...d,children:u})}function bf(s){const t=[{},{}];return s==null||s.values.forEach((a,r)=>{t[0][r]=a.get(),t[1][r]=a.getVelocity()}),t}function qp(s,t,a,r){if(typeof t=="function"){const[n,i]=bf(r);t=t(a!==void 0?a:s.custom,n,i)}if(typeof t=="string"&&(t=s.variants&&s.variants[t]),typeof t=="function"){const[n,i]=bf(r);t=t(a!==void 0?a:s.custom,n,i)}return t}function iu(s){return Qa(s)?s.get():s}function u_({scrapeMotionValuesFromProps:s,createRenderState:t},a,r,n){return{latestValues:m_(a,r,n,s),renderState:t()}}function m_(s,t,a,r){const n={},i=r(s,{});for(const x in i)n[x]=iu(i[x]);let{initial:o,animate:l}=s;const c=om(s),d=Bw(s);t&&d&&!c&&s.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let A=a?a.initial===!1:!1;A=A||o===!1;const u=A?l:o;if(u&&typeof u!="boolean"&&!im(u)){const x=Array.isArray(u)?u:[u];for(let m=0;m<x.length;m++){const y=qp(s,x[m]);if(y){const{transitionEnd:g,transition:b,...p}=y;for(const v in p){let N=p[v];if(Array.isArray(N)){const D=A?N.length-1:0;N=N[D]}N!==null&&(n[v]=N)}for(const v in g)n[v]=g[v]}}}return n}const Dw=s=>(t,a)=>{const r=j.useContext(nm),n=j.useContext(rm),i=()=>u_(s,t,r,n);return a?i():hp(i)};function $p(s,t,a){var i;const{style:r}=s,n={};for(const o in r)(Qa(r[o])||t.style&&Qa(t.style[o])||Sw(o,s)||((i=a==null?void 0:a.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(n[o]=r[o]);return n}const h_=Dw({scrapeMotionValuesFromProps:$p,createRenderState:Op});function Iw(s,t,a){const r=$p(s,t,a);for(const n in s)if(Qa(s[n])||Qa(t[n])){const i=Fl.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[i]=s[n]}return r}const x_=Dw({scrapeMotionValuesFromProps:Iw,createRenderState:Fw}),p_=Symbol.for("motionComponentSymbol");function nl(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function g_(s,t,a){return j.useCallback(r=>{r&&s.onMount&&s.onMount(r),t&&(r?t.mount(r):t.unmount()),a&&(typeof a=="function"?a(r):nl(a)&&(a.current=r))},[t])}const Vp=s=>s.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),f_="framerAppearId",Lw="data-"+Vp(f_),Tw=j.createContext({});function b_(s,t,a,r,n){var g,b;const{visualElement:i}=j.useContext(nm),o=j.useContext(_w),l=j.useContext(rm),c=j.useContext(Qp).reducedMotion,d=j.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(s,{visualState:t,parent:i,props:a,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const A=d.current,u=j.useContext(Tw);A&&!A.projection&&n&&(A.type==="html"||A.type==="svg")&&y_(d.current,a,n,u);const x=j.useRef(!1);j.useInsertionEffect(()=>{A&&x.current&&A.update(a,l)});const m=a[Lw],y=j.useRef(!!m&&!((g=window.MotionHandoffIsComplete)!=null&&g.call(window,m))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,m)));return Dv(()=>{A&&(x.current=!0,window.MotionIsMounted=!0,A.updateFeatures(),A.scheduleRenderMicrotask(),y.current&&A.animationState&&A.animationState.animateChanges())}),j.useEffect(()=>{A&&(!y.current&&A.animationState&&A.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var p;(p=window.MotionHandoffMarkAsComplete)==null||p.call(window,m)}),y.current=!1),A.enteringChildren=void 0)}),A}function y_(s,t,a,r){const{layoutId:n,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d,layoutCrossfade:A}=t;s.projection=new a(s.latestValues,t["data-framer-portal-id"]?void 0:Qw(s.parent)),s.projection.setOptions({layoutId:n,layout:i,alwaysMeasureLayout:!!o||l&&nl(l),visualElement:s,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:A,layoutScroll:c,layoutRoot:d})}function Qw(s){if(s)return s.options.allowProjection!==!1?s.projection:Qw(s.parent)}function Ch(s,{forwardMotionProps:t=!1}={},a,r){a&&z4(a);const n=Hp(s)?x_:h_;function i(l,c){let d;const A={...j.useContext(Qp),...l,layoutId:v_(l)},{isStatic:u}=A,x=X4(l),m=n(l,u);if(!u&&xp){w_();const y=j_(A);d=y.MeasureLayout,x.visualElement=b_(s,m,A,r,y.ProjectionNode)}return e.jsxs(nm.Provider,{value:x,children:[d&&x.visualElement?e.jsx(d,{visualElement:x.visualElement,...A}):null,A_(s,l,g_(m,x.visualElement,c),m,u,t)]})}i.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const o=j.forwardRef(i);return o[p_]=s,o}function v_({layoutId:s}){const t=j.useContext(mp).id;return t&&s!==void 0?t+"-"+s:s}function w_(s,t){j.useContext(_w).strict}function j_(s){const{drag:t,layout:a}=Cl;if(!t&&!a)return{};const r={...t,...a};return{MeasureLayout:t!=null&&t.isEnabled(s)||a!=null&&a.isEnabled(s)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function N_(s,t){if(typeof Proxy>"u")return Ch;const a=new Map,r=(i,o)=>Ch(i,o,s,t),n=(i,o)=>r(i,o);return new Proxy(n,{get:(i,o)=>o==="create"?r:(a.has(o)||a.set(o,Ch(o,void 0,s,t)),a.get(o))})}function Pw({top:s,left:t,right:a,bottom:r}){return{x:{min:t,max:a},y:{min:s,max:r}}}function __({x:s,y:t}){return{top:t.min,right:s.max,bottom:t.max,left:s.min}}function C_(s,t){if(!t)return s;const a=t({x:s.left,y:s.top}),r=t({x:s.right,y:s.bottom});return{top:a.y,left:a.x,bottom:r.y,right:r.x}}function Bh(s){return s===void 0||s===1}function Jx({scale:s,scaleX:t,scaleY:a}){return!Bh(s)||!Bh(t)||!Bh(a)}function Pi(s){return Jx(s)||Mw(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function Mw(s){return yf(s.x)||yf(s.y)}function yf(s){return s&&s!=="0%"}function wu(s,t,a){const r=s-a,n=t*r;return a+n}function vf(s,t,a,r,n){return n!==void 0&&(s=wu(s,n,r)),wu(s,a,r)+t}function Yx(s,t=0,a=1,r,n){s.min=vf(s.min,t,a,r,n),s.max=vf(s.max,t,a,r,n)}function Rw(s,{x:t,y:a}){Yx(s.x,t.translate,t.scale,t.originPoint),Yx(s.y,a.translate,a.scale,a.originPoint)}const wf=.999999999999,jf=1.0000000000001;function B_(s,t,a,r=!1){const n=a.length;if(!n)return;t.x=t.y=1;let i,o;for(let l=0;l<n;l++){i=a[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ol(s,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Rw(s,o)),r&&Pi(i.latestValues)&&ol(s,i.latestValues))}t.x<jf&&t.x>wf&&(t.x=1),t.y<jf&&t.y>wf&&(t.y=1)}function il(s,t){s.min=s.min+t,s.max=s.max+t}function Nf(s,t,a,r,n=.5){const i=Is(s.min,s.max,n);Yx(s,t,a,i,r)}function ol(s,t){Nf(s.x,t.x,t.scaleX,t.scale,t.originX),Nf(s.y,t.y,t.scaleY,t.scale,t.originY)}function Ow(s,t){return Pw(C_(s.getBoundingClientRect(),t))}function S_(s,t,a){const r=Ow(s,a),{scroll:n}=t;return n&&(il(r.x,n.offset.x),il(r.y,n.offset.y)),r}const _f=()=>({translate:0,scale:1,origin:0,originPoint:0}),ll=()=>({x:_f(),y:_f()}),Cf=()=>({min:0,max:0}),Ws=()=>({x:Cf(),y:Cf()}),Xx={current:null},Hw={current:!1};function k_(){if(Hw.current=!0,!!xp)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),t=()=>Xx.current=s.matches;s.addEventListener("change",t),t()}else Xx.current=!1}const E_=new WeakMap;function F_(s,t,a){for(const r in t){const n=t[r],i=a[r];if(Qa(n))s.addValue(r,n);else if(Qa(i))s.addValue(r,_l(n,{owner:s}));else if(i!==n)if(s.hasValue(r)){const o=s.getValue(r);o.liveStyle===!0?o.jump(n):o.hasAnimated||o.set(n)}else{const o=s.getStaticValue(r);s.addValue(r,_l(o!==void 0?o:n,{owner:s}))}}for(const r in a)t[r]===void 0&&s.removeValue(r);return t}const Bf=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class U_{scrapeMotionValuesFromProps(t,a,r){return{}}constructor({parent:t,props:a,presenceContext:r,reducedMotionConfig:n,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Up,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=ar.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,ks.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=a.initial?{...c}:{},this.renderState=d,this.parent=t,this.props=a,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=n,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=om(a),this.isVariantNode=Bw(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:A,...u}=this.scrapeMotionValuesFromProps(a,{},this);for(const x in u){const m=u[x];c[x]!==void 0&&Qa(m)&&m.set(c[x])}}mount(t){var a;this.current=t,E_.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),Hw.current||k_(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Xx.current,(a=this.parent)==null||a.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),xi(this.notifyUpdate),xi(this.render),this.valueSubscriptions.forEach(a=>a()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const a in this.events)this.events[a].clear();for(const a in this.features){const r=this.features[a];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,a){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Ul.has(t);r&&this.onBindTransform&&this.onBindTransform();const n=a.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&ks.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,a)),this.valueSubscriptions.set(t,()=>{n(),i&&i(),a.owner&&a.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Cl){const a=Cl[t];if(!a)continue;const{isEnabled:r,Feature:n}=a;if(!this.features[t]&&n&&r(this.props)&&(this.features[t]=new n(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ws()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,a){this.latestValues[t]=a}update(t,a){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let r=0;r<Bf.length;r++){const n=Bf[r];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const i="on"+n,o=t[i];o&&(this.propEventSubscriptions[n]=this.on(n,o))}this.prevMotionValues=F_(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(t),()=>a.variantChildren.delete(t)}addValue(t,a){const r=this.values.get(t);a!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,a),this.values.set(t,a),this.latestValues[t]=a.get())}removeValue(t){this.values.delete(t);const a=this.valueSubscriptions.get(t);a&&(a(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,a){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&a!==void 0&&(r=_l(a===null?void 0:a,{owner:this}),this.addValue(t,r)),r}readValue(t,a){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(Iv(r)||Tv(r))?r=parseFloat(r):!R4(r)&&pi.test(a)&&(r=gw(t,a)),this.setBaseTarget(t,Qa(r)?r.get():r)),Qa(r)?r.get():r}setBaseTarget(t,a){this.baseTarget[t]=a}getBaseTarget(t){var i;const{initial:a}=this.props;let r;if(typeof a=="string"||typeof a=="object"){const o=qp(this.props,a,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[t])}if(a&&r!==void 0)return r;const n=this.getBaseTargetFromProps(this.props,t);return n!==void 0&&!Qa(n)?n:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,a){return this.events[t]||(this.events[t]=new yp),this.events[t].add(a)}notify(t,...a){this.events[t]&&this.events[t].notify(...a)}scheduleRenderMicrotask(){Lp.render(this.render)}}class qw extends U_{constructor(){super(...arguments),this.KeyframeResolver=S4}sortInstanceNodePosition(t,a){return t.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(t,a){return t.style?t.style[a]:void 0}removeValueFromRenderState(t,{vars:a,style:r}){delete a[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Qa(t)&&(this.childSubscription=t.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function $w(s,{style:t,vars:a},r,n){const i=s.style;let o;for(o in t)i[o]=t[o];n==null||n.applyProjectionStyles(i,r);for(o in a)i.setProperty(o,a[o])}function D_(s){return window.getComputedStyle(s)}class I_ extends qw{constructor(){super(...arguments),this.type="html",this.renderInstance=$w}readValueFromInstance(t,a){var r;if(Ul.has(a))return(r=this.projection)!=null&&r.isProjecting?qx(a):z5(t,a);{const n=D_(t),i=(jp(a)?n.getPropertyValue(a):n[a])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:a}){return Ow(t,a)}build(t,a,r){Rp(t,a,r.transformTemplate)}scrapeMotionValuesFromProps(t,a,r){return $p(t,a,r)}}const Vw=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function L_(s,t,a,r){$w(s,t,void 0,r);for(const n in t.attrs)s.setAttribute(Vw.has(n)?n:Vp(n),t.attrs[n])}class T_ extends qw{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ws}getBaseTargetFromProps(t,a){return t[a]}readValueFromInstance(t,a){if(Ul.has(a)){const r=pw(a);return r&&r.default||0}return a=Vw.has(a)?a:Vp(a),t.getAttribute(a)}scrapeMotionValuesFromProps(t,a,r){return Iw(t,a,r)}build(t,a,r){Ew(t,a,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,a,r,n){L_(t,a,r,n)}mount(t){this.isSVGTag=Uw(t.tagName),super.mount(t)}}const Q_=(s,t)=>Hp(s)?new T_(t):new I_(t,{allowProjection:s!==j.Fragment});function hl(s,t,a){const r=s.getProps();return qp(r,t,a!==void 0?a:r.custom,s)}const Zx=s=>Array.isArray(s);function P_(s,t,a){s.hasValue(t)?s.getValue(t).set(a):s.addValue(t,_l(a))}function M_(s){return Zx(s)?s[s.length-1]||0:s}function R_(s,t){const a=hl(s,t);let{transitionEnd:r={},transition:n={},...i}=a||{};i={...i,...r};for(const o in i){const l=M_(i[o]);P_(s,o,l)}}function O_(s){return!!(Qa(s)&&s.add)}function e0(s,t){const a=s.getValue("willChange");if(O_(a))return a.add(t);if(!a&&In.WillChange){const r=new In.WillChange("auto");s.addValue("willChange",r),r.add(t)}}function Kw(s){return s.props[Lw]}const H_=s=>s!==null;function q_(s,{repeat:t,repeatType:a="loop"},r){const n=s.filter(H_),i=t&&a!=="loop"&&t%2===1?0:n.length-1;return n[i]}const $_={type:"spring",stiffness:500,damping:25,restSpeed:10},V_=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),K_={type:"keyframes",duration:.8},z_={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},G_=(s,{keyframes:t})=>t.length>2?K_:Ul.has(s)?s.startsWith("scale")?V_(t[1]):$_:z_;function W_({when:s,delay:t,delayChildren:a,staggerChildren:r,staggerDirection:n,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d,...A}){return!!Object.keys(A).length}const Kp=(s,t,a,r={},n,i)=>o=>{const l=Dp(r,s)||{},c=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-on(c);const A={keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-d,onUpdate:x=>{t.set(x),l.onUpdate&&l.onUpdate(x)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:s,motionValue:t,element:i?void 0:n};W_(l)||Object.assign(A,G_(s,A)),A.duration&&(A.duration=on(A.duration)),A.repeatDelay&&(A.repeatDelay=on(A.repeatDelay)),A.from!==void 0&&(A.keyframes[0]=A.from);let u=!1;if((A.type===!1||A.duration===0&&!A.repeatDelay)&&(Gx(A),A.delay===0&&(u=!0)),(In.instantAnimations||In.skipAnimations)&&(u=!0,Gx(A),A.delay=0),A.allowFlatten=!l.type&&!l.ease,u&&!i&&t.get()!==void 0){const x=q_(A.keyframes,l);if(x!==void 0){ks.update(()=>{A.onUpdate(x),A.onComplete()});return}}return l.isSync?new Fp(A):new p4(A)};function J_({protectedKeys:s,needsAnimating:t},a){const r=s.hasOwnProperty(a)&&t[a]!==!0;return t[a]=!1,r}function zw(s,t,{delay:a=0,transitionOverride:r,type:n}={}){let{transition:i=s.getDefaultTransition(),transitionEnd:o,...l}=t;r&&(i=r);const c=[],d=n&&s.animationState&&s.animationState.getState()[n];for(const A in l){const u=s.getValue(A,s.latestValues[A]??null),x=l[A];if(x===void 0||d&&J_(d,A))continue;const m={delay:a,...Dp(i||{},A)},y=u.get();if(y!==void 0&&!u.isAnimating&&!Array.isArray(x)&&x===y&&!m.velocity)continue;let g=!1;if(window.MotionHandoffAnimation){const p=Kw(s);if(p){const v=window.MotionHandoffAnimation(p,A,ks);v!==null&&(m.startTime=v,g=!0)}}e0(s,A),u.start(Kp(A,u,x,s.shouldReduceMotion&&mw.has(A)?{type:!1}:m,s,g));const b=u.animation;b&&c.push(b)}return o&&Promise.all(c).then(()=>{ks.update(()=>{o&&R_(s,o)})}),c}function Gw(s,t,a,r=0,n=1){const i=Array.from(s).sort((d,A)=>d.sortNodePosition(A)).indexOf(t),o=s.size,l=(o-1)*r;return typeof a=="function"?a(i,o):n===1?i*r:l-i*r}function t0(s,t,a={}){var c;const r=hl(s,t,a.type==="exit"?(c=s.presenceContext)==null?void 0:c.custom:void 0);let{transition:n=s.getDefaultTransition()||{}}=r||{};a.transitionOverride&&(n=a.transitionOverride);const i=r?()=>Promise.all(zw(s,r,a)):()=>Promise.resolve(),o=s.variantChildren&&s.variantChildren.size?(d=0)=>{const{delayChildren:A=0,staggerChildren:u,staggerDirection:x}=n;return Y_(s,t,d,A,u,x,a)}:()=>Promise.resolve(),{when:l}=n;if(l){const[d,A]=l==="beforeChildren"?[i,o]:[o,i];return d().then(()=>A())}else return Promise.all([i(),o(a.delay)])}function Y_(s,t,a=0,r=0,n=0,i=1,o){const l=[];for(const c of s.variantChildren)c.notify("AnimationStart",t),l.push(t0(c,t,{...o,delay:a+(typeof r=="function"?0:r)+Gw(s.variantChildren,c,r,n,i)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(l)}function X_(s,t,a={}){s.notify("AnimationStart",t);let r;if(Array.isArray(t)){const n=t.map(i=>t0(s,i,a));r=Promise.all(n)}else if(typeof t=="string")r=t0(s,t,a);else{const n=typeof t=="function"?hl(s,t,a.custom):t;r=Promise.all(zw(s,n,a))}return r.then(()=>{s.notify("AnimationComplete",t)})}function Ww(s,t){if(!Array.isArray(t))return!1;const a=t.length;if(a!==s.length)return!1;for(let r=0;r<a;r++)if(t[r]!==s[r])return!1;return!0}const Z_=Mp.length;function Jw(s){if(!s)return;if(!s.isControllingVariants){const a=s.parent?Jw(s.parent)||{}:{};return s.props.initial!==void 0&&(a.initial=s.props.initial),a}const t={};for(let a=0;a<Z_;a++){const r=Mp[a],n=s.props[r];(rd(n)||n===!1)&&(t[r]=n)}return t}const eC=[...Pp].reverse(),tC=Pp.length;function sC(s){return t=>Promise.all(t.map(({animation:a,options:r})=>X_(s,a,r)))}function aC(s){let t=sC(s),a=Sf(),r=!0;const n=c=>(d,A)=>{var x;const u=hl(s,A,c==="exit"?(x=s.presenceContext)==null?void 0:x.custom:void 0);if(u){const{transition:m,transitionEnd:y,...g}=u;d={...d,...g,...y}}return d};function i(c){t=c(s)}function o(c){const{props:d}=s,A=Jw(s.parent)||{},u=[],x=new Set;let m={},y=1/0;for(let b=0;b<tC;b++){const p=eC[b],v=a[p],N=d[p]!==void 0?d[p]:A[p],D=rd(N),S=p===c?v.isActive:null;S===!1&&(y=b);let E=N===A[p]&&N!==d[p]&&D;if(E&&r&&s.manuallyAnimateOnMount&&(E=!1),v.protectedKeys={...m},!v.isActive&&S===null||!N&&!v.prevProp||im(N)||typeof N=="boolean")continue;const R=rC(v.prevProp,N);let _=R||p===c&&v.isActive&&!E&&D||b>y&&D,C=!1;const L=Array.isArray(N)?N:[N];let f=L.reduce(n(p),{});S===!1&&(f={});const{prevResolvedValues:F={}}=v,M={...F,...f},P=X=>{_=!0,x.has(X)&&(C=!0,x.delete(X)),v.needsAnimating[X]=!0;const q=s.getValue(X);q&&(q.liveStyle=!1)};for(const X in M){const q=f[X],V=F[X];if(m.hasOwnProperty(X))continue;let oe=!1;Zx(q)&&Zx(V)?oe=!Ww(q,V):oe=q!==V,oe?q!=null?P(X):x.add(X):q!==void 0&&x.has(X)?P(X):v.protectedKeys[X]=!0}v.prevProp=N,v.prevResolvedValues=f,v.isActive&&(m={...m,...f}),r&&s.blockInitialAnimation&&(_=!1);const Z=E&&R;_&&(!Z||C)&&u.push(...L.map(X=>{const q={type:p};if(typeof X=="string"&&r&&!Z&&s.manuallyAnimateOnMount&&s.parent){const{parent:V}=s,oe=hl(V,X);if(V.enteringChildren&&oe){const{delayChildren:H}=oe.transition||{};q.delay=Gw(V.enteringChildren,s,H)}}return{animation:X,options:q}}))}if(x.size){const b={};if(typeof d.initial!="boolean"){const p=hl(s,Array.isArray(d.initial)?d.initial[0]:d.initial);p&&p.transition&&(b.transition=p.transition)}x.forEach(p=>{const v=s.getBaseTarget(p),N=s.getValue(p);N&&(N.liveStyle=!0),b[p]=v??null}),u.push({animation:b})}let g=!!u.length;return r&&(d.initial===!1||d.initial===d.animate)&&!s.manuallyAnimateOnMount&&(g=!1),r=!1,g?t(u):Promise.resolve()}function l(c,d){var u;if(a[c].isActive===d)return Promise.resolve();(u=s.variantChildren)==null||u.forEach(x=>{var m;return(m=x.animationState)==null?void 0:m.setActive(c,d)}),a[c].isActive=d;const A=o(c);for(const x in a)a[x].protectedKeys={};return A}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>a,reset:()=>{a=Sf()}}}function rC(s,t){return typeof t=="string"?t!==s:Array.isArray(t)?!Ww(t,s):!1}function Ii(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Sf(){return{animate:Ii(!0),whileInView:Ii(),whileHover:Ii(),whileTap:Ii(),whileDrag:Ii(),whileFocus:Ii(),exit:Ii()}}class wi{constructor(t){this.isMounted=!1,this.node=t}update(){}}class nC extends wi{constructor(t){super(t),t.animationState||(t.animationState=aC(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();im(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:a}=this.node.prevProps||{};t!==a&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let iC=0;class oC extends wi{constructor(){super(...arguments),this.id=iC++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:a}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const n=this.node.animationState.setActive("exit",!t);a&&!t&&n.then(()=>{a(this.id)})}mount(){const{register:t,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const lC={animation:{Feature:nC},exit:{Feature:oC}};function id(s,t,a,r={passive:!0}){return s.addEventListener(t,a,r),()=>s.removeEventListener(t,a)}function yd(s){return{point:{x:s.pageX,y:s.pageY}}}const cC=s=>t=>Tp(t)&&s(t,yd(t));function Mc(s,t,a,r){return id(s,t,cC(a),r)}const Yw=1e-4,dC=1-Yw,AC=1+Yw,Xw=.01,uC=0-Xw,mC=0+Xw;function Ka(s){return s.max-s.min}function hC(s,t,a){return Math.abs(s-t)<=a}function kf(s,t,a,r=.5){s.origin=r,s.originPoint=Is(t.min,t.max,s.origin),s.scale=Ka(a)/Ka(t),s.translate=Is(a.min,a.max,s.origin)-s.originPoint,(s.scale>=dC&&s.scale<=AC||isNaN(s.scale))&&(s.scale=1),(s.translate>=uC&&s.translate<=mC||isNaN(s.translate))&&(s.translate=0)}function Rc(s,t,a,r){kf(s.x,t.x,a.x,r?r.originX:void 0),kf(s.y,t.y,a.y,r?r.originY:void 0)}function Ef(s,t,a){s.min=a.min+t.min,s.max=s.min+Ka(t)}function xC(s,t,a){Ef(s.x,t.x,a.x),Ef(s.y,t.y,a.y)}function Ff(s,t,a){s.min=t.min-a.min,s.max=s.min+Ka(t)}function Oc(s,t,a){Ff(s.x,t.x,a.x),Ff(s.y,t.y,a.y)}function Cr(s){return[s("x"),s("y")]}const Zw=({current:s})=>s?s.ownerDocument.defaultView:null,Uf=(s,t)=>Math.abs(s-t);function pC(s,t){const a=Uf(s.x,t.x),r=Uf(s.y,t.y);return Math.sqrt(a**2+r**2)}class ej{constructor(t,a,{transformPagePoint:r,contextWindow:n=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=kh(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,y=pC(x.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!y)return;const{point:g}=x,{timestamp:b}=_a;this.history.push({...g,timestamp:b});const{onStart:p,onMove:v}=this.handlers;m||(p&&p(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,x)},this.handlePointerMove=(x,m)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=Sh(m,this.transformPagePoint),ks.update(this.updatePoint,!0)},this.handlePointerUp=(x,m)=>{this.end();const{onEnd:y,onSessionEnd:g,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=kh(x.type==="pointercancel"?this.lastMoveEventInfo:Sh(m,this.transformPagePoint),this.history);this.startEvent&&y&&y(x,p),g&&g(x,p)},!Tp(t))return;this.dragSnapToOrigin=i,this.handlers=a,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=n||window;const l=yd(t),c=Sh(l,this.transformPagePoint),{point:d}=c,{timestamp:A}=_a;this.history=[{...d,timestamp:A}];const{onSessionStart:u}=a;u&&u(t,kh(c,this.history)),this.removeListeners=gd(Mc(this.contextWindow,"pointermove",this.handlePointerMove),Mc(this.contextWindow,"pointerup",this.handlePointerUp),Mc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),xi(this.updatePoint)}}function Sh(s,t){return t?{point:t(s.point)}:s}function Df(s,t){return{x:s.x-t.x,y:s.y-t.y}}function kh({point:s},t){return{point:s,delta:Df(s,tj(t)),offset:Df(s,gC(t)),velocity:fC(t,.1)}}function gC(s){return s[0]}function tj(s){return s[s.length-1]}function fC(s,t){if(s.length<2)return{x:0,y:0};let a=s.length-1,r=null;const n=tj(s);for(;a>=0&&(r=s[a],!(n.timestamp-r.timestamp>on(t)));)a--;if(!r)return{x:0,y:0};const i=kr(n.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(n.x-r.x)/i,y:(n.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function bC(s,{min:t,max:a},r){return t!==void 0&&s<t?s=r?Is(t,s,r.min):Math.max(s,t):a!==void 0&&s>a&&(s=r?Is(a,s,r.max):Math.min(s,a)),s}function If(s,t,a){return{min:t!==void 0?s.min+t:void 0,max:a!==void 0?s.max+a-(s.max-s.min):void 0}}function yC(s,{top:t,left:a,bottom:r,right:n}){return{x:If(s.x,a,n),y:If(s.y,t,r)}}function Lf(s,t){let a=t.min-s.min,r=t.max-s.max;return t.max-t.min<s.max-s.min&&([a,r]=[r,a]),{min:a,max:r}}function vC(s,t){return{x:Lf(s.x,t.x),y:Lf(s.y,t.y)}}function wC(s,t){let a=.5;const r=Ka(s),n=Ka(t);return n>r?a=td(t.min,t.max-r,s.min):r>n&&(a=td(s.min,s.max-n,t.min)),Dn(0,1,a)}function jC(s,t){const a={};return t.min!==void 0&&(a.min=t.min-s.min),t.max!==void 0&&(a.max=t.max-s.min),a}const s0=.35;function NC(s=s0){return s===!1?s=0:s===!0&&(s=s0),{x:Tf(s,"left","right"),y:Tf(s,"top","bottom")}}function Tf(s,t,a){return{min:Qf(s,t),max:Qf(s,a)}}function Qf(s,t){return typeof s=="number"?s:s[t]||0}const _C=new WeakMap;class CC{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ws(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:a=!1,distanceThreshold:r}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:x}=this.getProps();x?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(yd(u).point)},o=(u,x)=>{const{drag:m,dragPropagation:y,onDragStart:g}=this.getProps();if(m&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=U4(m),!this.openDragLock))return;this.latestPointerEvent=u,this.latestPanInfo=x,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Cr(p=>{let v=this.getAxisMotionValue(p).get()||0;if(ln.test(v)){const{projection:N}=this.visualElement;if(N&&N.layout){const D=N.layout.layoutBox[p];D&&(v=Ka(D)*(parseFloat(v)/100))}}this.originPoint[p]=v}),g&&ks.postRender(()=>g(u,x)),e0(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},l=(u,x)=>{this.latestPointerEvent=u,this.latestPanInfo=x;const{dragPropagation:m,dragDirectionLock:y,onDirectionLock:g,onDrag:b}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:p}=x;if(y&&this.currentDirection===null){this.currentDirection=BC(p),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",x.point,p),this.updateAxis("y",x.point,p),this.visualElement.render(),b&&b(u,x)},c=(u,x)=>{this.latestPointerEvent=u,this.latestPanInfo=x,this.stop(u,x),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>Cr(u=>{var x;return this.getAnimationState(u)==="paused"&&((x=this.getAxisMotionValue(u).animation)==null?void 0:x.play())}),{dragSnapToOrigin:A}=this.getProps();this.panSession=new ej(t,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:A,distanceThreshold:r,contextWindow:Zw(this.visualElement)})}stop(t,a){const r=t||this.latestPointerEvent,n=a||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!n||!r)return;const{velocity:o}=n;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&ks.postRender(()=>l(r,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:a}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(t,a,r){const{drag:n}=this.getProps();if(!r||!wA(t,n,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=bC(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:a}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,n=this.constraints;t&&nl(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=yC(r.layoutBox,t):this.constraints=!1,this.elastic=NC(a),n!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Cr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=jC(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:a}=this.getProps();if(!t||!nl(t))return!1;const r=t.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const i=S_(r,n.root,this.visualElement.getTransformPagePoint());let o=vC(n.layout.layoutBox,i);if(a){const l=a(__(o));this.hasMutatedConstraints=!!l,l&&(o=Pw(l))}return o}startAnimation(t){const{drag:a,dragMomentum:r,dragElastic:n,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=Cr(A=>{if(!wA(A,a,this.currentDirection))return;let u=c&&c[A]||{};o&&(u={min:0,max:0});const x=n?200:1e6,m=n?40:1e7,y={type:"inertia",velocity:r?t[A]:0,bounceStiffness:x,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...u};return this.startAxisValueAnimation(A,y)});return Promise.all(d).then(l)}startAxisValueAnimation(t,a){const r=this.getAxisMotionValue(t);return e0(this.visualElement,t),r.start(Kp(t,r,0,a,this.visualElement,!1))}stopAnimation(){Cr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Cr(t=>{var a;return(a=this.getAxisMotionValue(t).animation)==null?void 0:a.pause()})}getAnimationState(t){var a;return(a=this.getAxisMotionValue(t).animation)==null?void 0:a.state}getAxisMotionValue(t){const a=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),n=r[a];return n||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Cr(a=>{const{drag:r}=this.getProps();if(!wA(a,r,this.currentDirection))return;const{projection:n}=this.visualElement,i=this.getAxisMotionValue(a);if(n&&n.layout){const{min:o,max:l}=n.layout.layoutBox[a];i.set(t[a]-Is(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:a}=this.getProps(),{projection:r}=this.visualElement;if(!nl(a)||!r||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};Cr(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();n[o]=wC({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Cr(o=>{if(!wA(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(Is(c,d,n[o]))})}addListeners(){if(!this.visualElement.current)return;_C.set(this.visualElement,this);const t=this.visualElement.current,a=Mc(t,"pointerdown",c=>{const{drag:d,dragListener:A=!0}=this.getProps();d&&A&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();nl(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,i=n.addEventListener("measure",r);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),ks.read(r);const o=id(window,"resize",()=>this.scalePositionWithinConstraints()),l=n.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(Cr(A=>{const u=this.getAxisMotionValue(A);u&&(this.originPoint[A]+=c[A].translate,u.set(u.get()+c[A].translate))}),this.visualElement.render())});return()=>{o(),a(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:r=!1,dragPropagation:n=!1,dragConstraints:i=!1,dragElastic:o=s0,dragMomentum:l=!0}=t;return{...t,drag:a,dragDirectionLock:r,dragPropagation:n,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function wA(s,t,a){return(t===!0||t===s)&&(a===null||a===s)}function BC(s,t=10){let a=null;return Math.abs(s.y)>t?a="y":Math.abs(s.x)>t&&(a="x"),a}class SC extends wi{constructor(t){super(t),this.removeGroupControls=Dr,this.removeListeners=Dr,this.controls=new CC(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Dr}unmount(){this.removeGroupControls(),this.removeListeners()}}const Pf=s=>(t,a)=>{s&&ks.postRender(()=>s(t,a))};class kC extends wi{constructor(){super(...arguments),this.removePointerDownListener=Dr}onPointerDown(t){this.session=new ej(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Zw(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:a,onPan:r,onPanEnd:n}=this.node.getProps();return{onSessionStart:Pf(t),onStart:Pf(a),onMove:r,onEnd:(i,o)=>{delete this.session,n&&ks.postRender(()=>n(i,o))}}}mount(){this.removePointerDownListener=Mc(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ou={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Mf(s,t){return t.max===t.min?0:s/(t.max-t.min)*100}const pc={correct:(s,t)=>{if(!t.target)return s;if(typeof s=="string")if(Lt.test(s))s=parseFloat(s);else return s;const a=Mf(s,t.target.x),r=Mf(s,t.target.y);return`${a}% ${r}%`}},EC={correct:(s,{treeScale:t,projectionDelta:a})=>{const r=s,n=pi.parse(s);if(n.length>5)return r;const i=pi.createTransformer(s),o=typeof n[0]!="number"?1:0,l=a.x.scale*t.x,c=a.y.scale*t.y;n[0+o]/=l,n[1+o]/=c;const d=Is(l,c,.5);return typeof n[2+o]=="number"&&(n[2+o]/=d),typeof n[3+o]=="number"&&(n[3+o]/=d),i(n)}};let Eh=!1;class FC extends j.Component{componentDidMount(){const{visualElement:t,layoutGroup:a,switchLayoutGroup:r,layoutId:n}=this.props,{projection:i}=t;Z4(UC),i&&(a.group&&a.group.add(i),r&&r.register&&n&&r.register(i),Eh&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),ou.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:a,visualElement:r,drag:n,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,Eh=!0,n||t.layoutDependency!==a||a===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||ks.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Lp.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:a,switchLayoutGroup:r}=this.props,{projection:n}=t;Eh=!0,n&&(n.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(n),r&&r.deregister&&r.deregister(n))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function sj(s){const[t,a]=Nw(),r=j.useContext(mp);return e.jsx(FC,{...s,layoutGroup:r,switchLayoutGroup:j.useContext(Tw),isPresent:t,safeToRemove:a})}const UC={borderRadius:{...pc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:pc,borderTopRightRadius:pc,borderBottomLeftRadius:pc,borderBottomRightRadius:pc,boxShadow:EC};function DC(s,t,a){const r=Qa(s)?s:_l(s);return r.start(Kp("",r,t,a)),r.animation}const IC=(s,t)=>s.depth-t.depth;class LC{constructor(){this.children=[],this.isDirty=!1}add(t){pp(this.children,t),this.isDirty=!0}remove(t){gp(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(IC),this.isDirty=!1,this.children.forEach(t)}}function TC(s,t){const a=ar.now(),r=({timestamp:n})=>{const i=n-a;i>=t&&(xi(r),s(i-t))};return ks.setup(r,!0),()=>xi(r)}const aj=["TopLeft","TopRight","BottomLeft","BottomRight"],QC=aj.length,Rf=s=>typeof s=="string"?parseFloat(s):s,Of=s=>typeof s=="number"||Lt.test(s);function PC(s,t,a,r,n,i){n?(s.opacity=Is(0,a.opacity??1,MC(r)),s.opacityExit=Is(t.opacity??1,0,RC(r))):i&&(s.opacity=Is(t.opacity??1,a.opacity??1,r));for(let o=0;o<QC;o++){const l=`border${aj[o]}Radius`;let c=Hf(t,l),d=Hf(a,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||Of(c)===Of(d)?(s[l]=Math.max(Is(Rf(c),Rf(d),r),0),(ln.test(d)||ln.test(c))&&(s[l]+="%")):s[l]=d}(t.rotate||a.rotate)&&(s.rotate=Is(t.rotate||0,a.rotate||0,r))}function Hf(s,t){return s[t]!==void 0?s[t]:s.borderRadius}const MC=rj(0,.5,$v),RC=rj(.5,.95,Dr);function rj(s,t,a){return r=>r<s?0:r>t?1:a(td(s,t,r))}function qf(s,t){s.min=t.min,s.max=t.max}function _r(s,t){qf(s.x,t.x),qf(s.y,t.y)}function $f(s,t){s.translate=t.translate,s.scale=t.scale,s.originPoint=t.originPoint,s.origin=t.origin}function Vf(s,t,a,r,n){return s-=t,s=wu(s,1/a,r),n!==void 0&&(s=wu(s,1/n,r)),s}function OC(s,t=0,a=1,r=.5,n,i=s,o=s){if(ln.test(t)&&(t=parseFloat(t),t=Is(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=Is(i.min,i.max,r);s===i&&(l-=t),s.min=Vf(s.min,t,a,l,n),s.max=Vf(s.max,t,a,l,n)}function Kf(s,t,[a,r,n],i,o){OC(s,t[a],t[r],t[n],t.scale,i,o)}const HC=["x","scaleX","originX"],qC=["y","scaleY","originY"];function zf(s,t,a,r){Kf(s.x,t,HC,a?a.x:void 0,r?r.x:void 0),Kf(s.y,t,qC,a?a.y:void 0,r?r.y:void 0)}function Gf(s){return s.translate===0&&s.scale===1}function nj(s){return Gf(s.x)&&Gf(s.y)}function Wf(s,t){return s.min===t.min&&s.max===t.max}function $C(s,t){return Wf(s.x,t.x)&&Wf(s.y,t.y)}function Jf(s,t){return Math.round(s.min)===Math.round(t.min)&&Math.round(s.max)===Math.round(t.max)}function ij(s,t){return Jf(s.x,t.x)&&Jf(s.y,t.y)}function Yf(s){return Ka(s.x)/Ka(s.y)}function Xf(s,t){return s.translate===t.translate&&s.scale===t.scale&&s.originPoint===t.originPoint}class VC{constructor(){this.members=[]}add(t){pp(this.members,t),t.scheduleRender()}remove(t){if(gp(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(t){const a=this.members.findIndex(n=>t===n);if(a===0)return!1;let r;for(let n=a;n>=0;n--){const i=this.members[n];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,a){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,a&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:n}=t.options;n===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:a,resumingFrom:r}=t;a.onExitComplete&&a.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function KC(s,t,a){let r="";const n=s.x.translate/t.x,i=s.y.translate/t.y,o=(a==null?void 0:a.z)||0;if((n||i||o)&&(r=`translate3d(${n}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),a){const{transformPerspective:d,rotate:A,rotateX:u,rotateY:x,skewX:m,skewY:y}=a;d&&(r=`perspective(${d}px) ${r}`),A&&(r+=`rotate(${A}deg) `),u&&(r+=`rotateX(${u}deg) `),x&&(r+=`rotateY(${x}deg) `),m&&(r+=`skewX(${m}deg) `),y&&(r+=`skewY(${y}deg) `)}const l=s.x.scale*t.x,c=s.y.scale*t.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const Fh=["","X","Y","Z"],zC=1e3;let GC=0;function Uh(s,t,a,r){const{latestValues:n}=t;n[s]&&(a[s]=n[s],t.setStaticValue(s,0),r&&(r[s]=0))}function oj(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:t}=s.options;if(!t)return;const a=Kw(t);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:n,layoutId:i}=s.options;window.MotionCancelOptimisedAnimation(a,"transform",ks,!(n||i))}const{parent:r}=s;r&&!r.hasCheckedOptimisedAppear&&oj(r)}function lj({attachResizeListener:s,defaultParent:t,measureScroll:a,checkIsScrollRoot:r,resetTransform:n}){return class{constructor(o={},l=t==null?void 0:t()){this.id=GC++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(YC),this.nodes.forEach(tB),this.nodes.forEach(sB),this.nodes.forEach(XC)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new LC)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new yp),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=jw(o)&&!P4(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),s){let A,u=0;const x=()=>this.root.updateBlockedByResize=!1;ks.read(()=>{u=window.innerWidth}),s(o,()=>{const m=window.innerWidth;m!==u&&(u=m,this.root.updateBlockedByResize=!0,A&&A(),A=TC(x,250),ou.hasAnimatedSinceResize&&(ou.hasAnimatedSinceResize=!1,this.nodes.forEach(tb)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:A,hasLayoutChanged:u,hasRelativeLayoutChanged:x,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||d.getDefaultTransition()||oB,{onLayoutAnimationStart:g,onLayoutAnimationComplete:b}=d.getProps(),p=!this.targetLayout||!ij(this.targetLayout,m),v=!u&&x;if(this.options.layoutRoot||this.resumeFrom||v||u&&(p||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N={...Dp(y,"layout"),onPlay:g,onComplete:b};(d.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(A,v)}else u||tb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),xi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(aB),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&oj(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let A=0;A<this.path.length;A++){const u=this.path[A];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Zf);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(eb);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(eB),this.nodes.forEach(WC),this.nodes.forEach(JC)):this.nodes.forEach(eb),this.clearAllSnapshots();const l=ar.now();_a.delta=Dn(0,1e3/60,l-_a.timestamp),_a.timestamp=l,_a.isProcessing=!0,yh.update.process(_a),yh.preRender.process(_a),yh.render.process(_a),_a.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Lp.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(ZC),this.sharedNodes.forEach(rB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ks.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ks.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ka(this.snapshot.measuredBox.x)&&!Ka(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ws(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!n)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!nj(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,A=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||Pi(this.latestValues)||A)&&(n(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),lB(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:o}=this.options;if(!o)return Ws();const l=o.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(cB))){const{scroll:A}=this.root;A&&(il(l.x,A.offset.x),il(l.y,A.offset.y))}return l}removeElementScroll(o){var c;const l=Ws();if(_r(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let d=0;d<this.path.length;d++){const A=this.path[d],{scroll:u,options:x}=A;A!==this.root&&u&&x.layoutScroll&&(u.wasRoot&&_r(l,o),il(l.x,u.offset.x),il(l.y,u.offset.y))}return l}applyTransform(o,l=!1){const c=Ws();_r(c,o);for(let d=0;d<this.path.length;d++){const A=this.path[d];!l&&A.options.layoutScroll&&A.scroll&&A!==A.root&&ol(c,{x:-A.scroll.offset.x,y:-A.scroll.offset.y}),Pi(A.latestValues)&&ol(c,A.latestValues)}return Pi(this.latestValues)&&ol(c,this.latestValues),c}removeTransform(o){const l=Ws();_r(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!Pi(d.latestValues))continue;Jx(d.latestValues)&&d.updateSnapshot();const A=Ws(),u=d.measurePageBox();_r(A,u),zf(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,A)}return Pi(this.latestValues)&&zf(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_a.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var x;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:A,layoutId:u}=this.options;if(!(!this.layout||!(A||u))){if(this.resolvedRelativeTargetAt=_a.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ws(),this.relativeTargetOrigin=Ws(),Oc(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),_r(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ws(),this.targetWithTransforms=Ws()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),xC(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):_r(this.target,this.layout.layoutBox),Rw(this.target,this.targetDelta)):_r(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ws(),this.relativeTargetOrigin=Ws(),Oc(this.relativeTargetOrigin,this.target,m.target),_r(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Jx(this.parent.latestValues)||Mw(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var y;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===_a.timestamp&&(c=!1),c)return;const{layout:d,layoutId:A}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||A))return;_r(this.layoutCorrected,this.layout.layoutBox);const u=this.treeScale.x,x=this.treeScale.y;B_(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Ws());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():($f(this.prevProjectionDelta.x,this.projectionDelta.x),$f(this.prevProjectionDelta.y,this.projectionDelta.y)),Rc(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==u||this.treeScale.y!==x||!Xf(this.projectionDelta.x,this.prevProjectionDelta.x)||!Xf(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ll(),this.projectionDelta=ll(),this.projectionDeltaWithTransform=ll()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},A={...this.latestValues},u=ll();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const x=Ws(),m=c?c.source:void 0,y=this.layout?this.layout.source:void 0,g=m!==y,b=this.getStack(),p=!b||b.members.length<=1,v=!!(g&&!p&&this.options.crossfade===!0&&!this.path.some(iB));this.animationProgress=0;let N;this.mixTargetDelta=D=>{const S=D/1e3;sb(u.x,o.x,S),sb(u.y,o.y,S),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Oc(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),nB(this.relativeTarget,this.relativeTargetOrigin,x,S),N&&$C(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=Ws()),_r(N,this.relativeTarget)),g&&(this.animationValues=A,PC(A,d,this.latestValues,S,v,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,d;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(d=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||d.stop(),this.pendingAnimation&&(xi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ks.update(()=>{ou.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=_l(0)),this.currentAnimation=DC(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:A=>{this.mixTargetDelta(A),o.onUpdate&&o.onUpdate(A)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(zC),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:A}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&cj(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||Ws();const u=Ka(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+u;const x=Ka(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+x}_r(l,c),ol(l,A),Rc(this.projectionDeltaWithTransform,this.layoutCorrected,l,A)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new VC),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&Uh("z",o,d,this.animationValues);for(let A=0;A<Fh.length;A++)Uh(`rotate${Fh[A]}`,o,d,this.animationValues),Uh(`skew${Fh[A]}`,o,d,this.animationValues);o.render();for(const A in d)o.setStaticValue(A,d[A]),this.animationValues&&(this.animationValues[A]=d[A]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=iu(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=iu(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Pi(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const A=d.animationValues||d.latestValues;this.applyTransformsToTarget();let u=KC(this.projectionDeltaWithTransform,this.treeScale,A);c&&(u=c(A,u)),o.transform=u;const{x,y:m}=this.projectionDelta;o.transformOrigin=`${x.origin*100}% ${m.origin*100}% 0`,d.animationValues?o.opacity=d===this?A.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:A.opacityExit:o.opacity=d===this?A.opacity!==void 0?A.opacity:"":A.opacityExit!==void 0?A.opacityExit:0;for(const y in nd){if(A[y]===void 0)continue;const{correct:g,applyTo:b,isCSSVariable:p}=nd[y],v=u==="none"?A[y]:g(A[y],d);if(b){const N=b.length;for(let D=0;D<N;D++)o[b[D]]=v}else p?this.options.visualElement.renderState.vars[y]=v:o[y]=v}this.options.layoutId&&(o.pointerEvents=d===this?iu(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(Zf),this.root.sharedNodes.clear()}}}function WC(s){s.updateLayout()}function JC(s){var a;const t=((a=s.resumeFrom)==null?void 0:a.snapshot)||s.snapshot;if(s.isLead()&&s.layout&&t&&s.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:n}=s.layout,{animationType:i}=s.options,o=t.source!==s.layout.source;i==="size"?Cr(u=>{const x=o?t.measuredBox[u]:t.layoutBox[u],m=Ka(x);x.min=r[u].min,x.max=x.min+m}):cj(i,t.layoutBox,r)&&Cr(u=>{const x=o?t.measuredBox[u]:t.layoutBox[u],m=Ka(r[u]);x.max=x.min+m,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[u].max=s.relativeTarget[u].min+m)});const l=ll();Rc(l,r,t.layoutBox);const c=ll();o?Rc(c,s.applyTransform(n,!0),t.measuredBox):Rc(c,r,t.layoutBox);const d=!nj(l);let A=!1;if(!s.resumeFrom){const u=s.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:x,layout:m}=u;if(x&&m){const y=Ws();Oc(y,t.layoutBox,x.layoutBox);const g=Ws();Oc(g,r,m.layoutBox),ij(y,g)||(A=!0),u.options.layoutRoot&&(s.relativeTarget=g,s.relativeTargetOrigin=y,s.relativeParent=u)}}}s.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:A})}else if(s.isLead()){const{onExitComplete:r}=s.options;r&&r()}s.options.transition=void 0}function YC(s){s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function XC(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function ZC(s){s.clearSnapshot()}function Zf(s){s.clearMeasurements()}function eb(s){s.isLayoutDirty=!1}function eB(s){const{visualElement:t}=s.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),s.resetTransform()}function tb(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function tB(s){s.resolveTargetDelta()}function sB(s){s.calcProjection()}function aB(s){s.resetSkewAndRotation()}function rB(s){s.removeLeadSnapshot()}function sb(s,t,a){s.translate=Is(t.translate,0,a),s.scale=Is(t.scale,1,a),s.origin=t.origin,s.originPoint=t.originPoint}function ab(s,t,a,r){s.min=Is(t.min,a.min,r),s.max=Is(t.max,a.max,r)}function nB(s,t,a,r){ab(s.x,t.x,a.x,r),ab(s.y,t.y,a.y,r)}function iB(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const oB={duration:.45,ease:[.4,0,.1,1]},rb=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),nb=rb("applewebkit/")&&!rb("chrome/")?Math.round:Dr;function ib(s){s.min=nb(s.min),s.max=nb(s.max)}function lB(s){ib(s.x),ib(s.y)}function cj(s,t,a){return s==="position"||s==="preserve-aspect"&&!hC(Yf(t),Yf(a),.2)}function cB(s){var t;return s!==s.root&&((t=s.scroll)==null?void 0:t.wasRoot)}const dB=lj({attachResizeListener:(s,t)=>id(s,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Dh={current:void 0},dj=lj({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!Dh.current){const s=new dB({});s.mount(window),s.setOptions({layoutScroll:!0}),Dh.current=s}return Dh.current},resetTransform:(s,t)=>{s.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),AB={pan:{Feature:kC},drag:{Feature:SC,ProjectionNode:dj,MeasureLayout:sj}};function ob(s,t,a){const{props:r}=s;s.animationState&&r.whileHover&&s.animationState.setActive("whileHover",a==="Start");const n="onHover"+a,i=r[n];i&&ks.postRender(()=>i(t,yd(t)))}class uB extends wi{mount(){const{current:t}=this.node;t&&(this.unmount=D4(t,(a,r)=>(ob(this.node,r,"Start"),n=>ob(this.node,n,"End"))))}unmount(){}}class mB extends wi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=gd(id(this.node.current,"focus",()=>this.onFocus()),id(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function lb(s,t,a){const{props:r}=s;if(s.current instanceof HTMLButtonElement&&s.current.disabled)return;s.animationState&&r.whileTap&&s.animationState.setActive("whileTap",a==="Start");const n="onTap"+(a==="End"?"":a),i=r[n];i&&ks.postRender(()=>i(t,yd(t)))}class hB extends wi{mount(){const{current:t}=this.node;t&&(this.unmount=Q4(t,(a,r)=>(lb(this.node,r,"Start"),(n,{success:i})=>lb(this.node,n,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const a0=new WeakMap,Ih=new WeakMap,xB=s=>{const t=a0.get(s.target);t&&t(s)},pB=s=>{s.forEach(xB)};function gB({root:s,...t}){const a=s||document;Ih.has(a)||Ih.set(a,{});const r=Ih.get(a),n=JSON.stringify(t);return r[n]||(r[n]=new IntersectionObserver(pB,{root:s,...t})),r[n]}function fB(s,t,a){const r=gB(t);return a0.set(s,a),r.observe(s),()=>{a0.delete(s),r.unobserve(s)}}const bB={some:0,all:1};class yB extends wi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:a,margin:r,amount:n="some",once:i}=t,o={root:a?a.current:void 0,rootMargin:r,threshold:typeof n=="number"?n:bB[n]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:A,onViewportLeave:u}=this.node.getProps(),x=d?A:u;x&&x(c)};return fB(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:a}=this.node;["amount","margin","root"].some(vB(t,a))&&this.startObserver()}unmount(){}}function vB({viewport:s={}},{viewport:t={}}={}){return a=>s[a]!==t[a]}const wB={inView:{Feature:yB},tap:{Feature:hB},focus:{Feature:mB},hover:{Feature:uB}},jB={layout:{ProjectionNode:dj,MeasureLayout:sj}},NB={...lC,...wB,...AB,...jB},W=N_(NB,Q_);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),CB=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,a,r)=>r?r.toUpperCase():a.toLowerCase()),cb=s=>{const t=CB(s);return t.charAt(0).toUpperCase()+t.slice(1)},Aj=(...s)=>s.filter((t,a,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===a).join(" ").trim(),BB=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var SB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=j.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:n="",children:i,iconNode:o,...l},c)=>j.createElement("svg",{ref:c,...SB,width:t,height:t,stroke:s,strokeWidth:r?Number(a)*24/Number(t):a,className:Aj("lucide",n),...!i&&!BB(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,A])=>j.createElement(d,A)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=(s,t)=>{const a=j.forwardRef(({className:r,...n},i)=>j.createElement(kB,{ref:i,iconNode:t,className:Aj(`lucide-${_B(cb(s))}`,`lucide-${s}`,r),...n}));return a.displayName=cb(s),a};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],gi=Se("activity",EB);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FB=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],r0=Se("archive",FB);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],zp=Se("arrow-down-right",UB);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Gp=Se("arrow-down",DB);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IB=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],An=Se("arrow-left",IB);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],za=Se("arrow-right",LB);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],ii=Se("arrow-up-right",TB);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QB=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Hc=Se("arrow-up",QB);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Wp=Se("award",PB);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MB=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],En=Se("bell",MB);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],db=Se("book-open",RB);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OB=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],HB=Se("book",OB);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],jA=Se("bot",qB);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $B=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Jp=Se("box",$B);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],xl=Se("brain",VB);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KB=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Ab=Se("briefcase",KB);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zB=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Er=Se("building-2",zB);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Zi=Se("building",GB);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],ub=Se("calculator",WB);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ot=Se("calendar",JB);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Mi=Se("camera",YB);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],uj=Se("car",XB);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZB=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 16h8",key:"srdodz"}],["path",{d:"M7 11h12",key:"127s9w"}],["path",{d:"M7 6h3",key:"w9rmul"}]],Yp=Se("chart-bar",ZB);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Ls=Se("chart-column",e3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"M10 6h8",key:"zvc2xc"}],["path",{d:"M12 16h6",key:"yi5mkt"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M8 11h7",key:"wz2hg0"}]],mb=Se("chart-gantt",t3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],a3=Se("chart-line",s3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],mj=Se("chart-pie",r3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],i3=Se("check-check",n3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],As=Se("check",o3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ir=Se("chevron-down",l3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],od=Se("chevron-left",c3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],vd=Se("chevron-right",d3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Fn=Se("chevron-up",A3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],es=Se("circle-alert",u3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],is=Se("circle-check-big",m3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Aa=Se("circle-check",h3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]],p3=Se("circle-pause",x3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ld=Se("circle-play",g3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],b3=Se("circle-question-mark",f3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],v3=Se("circle-user",y3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],eo=Se("circle-x",w3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ai=Se("circle",j3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],_3=Se("clipboard-check",N3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],ea=Se("clipboard-list",C3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],vt=Se("clock",B3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],k3=Se("cloud-off",S3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],hj=Se("cloud",E3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],U3=Se("code",F3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],I3=Se("command",D3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Gr=Se("copy",L3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Es=Se("credit-card",T3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],wd=Se("crown",Q3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],jd=Se("database",P3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Ut=Se("dollar-sign",M3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],wa=Se("download",R3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],xj=Se("ellipsis-vertical",O3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ju=Se("external-link",H3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Bl=Se("eye-off",q3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],$s=Se("eye",$3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],Nu=Se("file-check",V3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],z3=Se("file-down",K3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]],W3=Se("file-pen-line",G3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ut=Se("file-text",J3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],pj=Se("file",Y3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],lu=Se("flag",X3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]],e6=Se("folder-kanban",Z3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],NA=Se("folder-open",t6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],a6=Se("folder-plus",s6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],hb=Se("folder",r6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],lm=Se("funnel",n6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],xb=Se("git-branch",i6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],cm=Se("globe",o6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],c6=Se("grid-3x3",l6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],A6=Se("grip-vertical",d6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],m6=Se("heart",u6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],dm=Se("history",h6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],gj=Se("house",x6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],pb=Se("image-plus",p6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],f6=Se("inbox",g6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],pl=Se("info",b6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],ui=Se("key",y6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],w6=Se("layout-grid",v6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],N6=Se("library",j6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],C6=Se("link-2",_6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],n0=Se("link",B6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=[["path",{d:"M2 5h20",key:"1fs1ex"}],["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M9 19h6",key:"456am0"}]],io=Se("list-filter",S6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Lh=Se("list",k6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ro=Se("loader-circle",E6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Dl=Se("loader",F6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],D6=Se("lock-open",U6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Va=Se("lock",I6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],i0=Se("log-out",L6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Cs=Se("mail",T6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],da=Se("map-pin",Q6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Th=Se("map",P6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],R6=Se("maximize-2",M6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],H6=Se("menu",O6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],gl=Se("message-circle",q6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],o0=Se("message-square",$6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],K6=Se("mic-off",V6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],G6=Se("mic",z6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W6=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],J6=Se("minimize-2",W6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=[["path",{d:"M5 12h14",key:"1ays0h"}]],_u=Se("minus",Y6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Z6=Se("monitor",X6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Xp=Se("moon",eS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],sS=Se("mouse-pointer",tS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],no=Se("navigation",aS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],wt=Se("package",rS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]],iS=Se("paintbrush",nS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Il=Se("palette",oS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],cS=Se("paperclip",lS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],Qh=Se("panels-top-left",dS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],fj=Se("pause",AS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Cu=Se("pen",uS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=[["path",{d:"M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272",key:"1wngk7"}],["path",{d:"M22 2 2 22",key:"y4kqgn"}],["path",{d:"M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473",key:"10hv5p"}]],hS=Se("phone-off",mS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],la=Se("phone",xS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],cd=Se("play",pS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],bt=Se("plus",gS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Bu=Se("printer",fS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],bs=Se("refresh-cw",bS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Zp=Se("rotate-ccw",yS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Gt=Se("save",vS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wS=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Qt=Se("search",wS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ma=Se("send",jS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],_S=Se("server",NS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CS=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xr=Se("settings",CS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],os=Se("shield",BS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SS=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Sn=Se("shopping-cart",SS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],eg=Se("sliders-vertical",kS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ES=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Nd=Se("smartphone",ES);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],US=Se("smile",FS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=[["path",{d:"m10 20-1.25-2.5L6 18",key:"18frcb"}],["path",{d:"M10 4 8.75 6.5 6 6",key:"7mghy3"}],["path",{d:"m14 20 1.25-2.5L18 18",key:"1chtki"}],["path",{d:"m14 4 1.25 2.5L18 6",key:"1b4wsy"}],["path",{d:"m17 21-3-6h-4",key:"15hhxa"}],["path",{d:"m17 3-3 6 1.5 3",key:"11697g"}],["path",{d:"M2 12h6.5L10 9",key:"kv9z4n"}],["path",{d:"m20 10-1.5 2 1.5 2",key:"1swlpi"}],["path",{d:"M22 12h-6.5L14 15",key:"1mxi28"}],["path",{d:"m4 10 1.5 2L4 14",key:"k9enpj"}],["path",{d:"m7 21 3-6-1.5-3",key:"j8hb9u"}],["path",{d:"m7 3 3 6h4",key:"1otusx"}]],gb=Se("snowflake",DS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],hr=Se("sparkles",IS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],l0=Se("square-check-big",LS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],rr=Se("square-pen",TS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],PS=Se("square",QS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],qs=Se("star",MS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],tg=Se("sun",RS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],HS=Se("table",OS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]],$S=Se("tablet",qS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Su=Se("tag",VS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Pa=Se("target",KS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],GS=Se("thumbs-down",zS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],JS=Se("thumbs-up",WS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Vt=Se("trash-2",YS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],nr=Se("trending-down",XS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],zt=Se("trending-up",ZS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],cs=Se("triangle-alert",ek);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],sg=Se("truck",tk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Ph=Se("type",sk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],qc=Se("upload",ak);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],bj=Se("user-plus",rk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Jt=Se("user",nk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Nt=Se("users",ik);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Mh=Se("video",ok);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],fb=Se("video-off",lk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],dk=Se("volume-2",ck);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],_A=Se("wallet",Ak);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],mk=Se("wand-sparkles",uk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hk=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],c0=Se("wifi-off",hk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xk=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],yj=Se("wifi",xk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],dd=Se("wrench",pk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ht=Se("x",gk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Fs=Se("zap",fk),bk=()=>e.jsxs("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-700 flex items-center justify-center z-50",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white rounded-full blur-xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-20 right-20 w-40 h-40 bg-white rounded-full blur-xl animate-pulse",style:{animationDelay:"1s"}}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-24 h-24 bg-white rounded-full blur-xl animate-pulse",style:{animationDelay:"0.5s"}})]}),e.jsxs("div",{className:"text-center z-10",children:[e.jsx(W.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{duration:1.2,ease:"easeOut",type:"spring",stiffness:100},className:"flex items-center justify-center mb-8",children:e.jsxs("div",{className:"relative",children:[e.jsx(W.div,{animate:{rotate:360,scale:[1,1.1,1]},transition:{rotate:{duration:2,repeat:1/0,ease:"linear"},scale:{duration:2,repeat:1/0,ease:"easeInOut"}},className:"w-24 h-24 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm border border-white/30",children:e.jsx(ea,{className:"h-10 w-10 text-white"})}),e.jsx(W.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.5,duration:.5},className:"absolute -bottom-2 -right-2 w-8 h-8 bg-gradient-to-r from-pink-400 to-purple-400 rounded-full flex items-center justify-center",children:e.jsx(wt,{className:"h-4 w-4 text-white"})})]})}),e.jsx(W.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.6},className:"text-4xl font-bold text-white mb-4",children:"Sistema OS"}),e.jsx(W.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1,duration:.6},className:"text-lg text-white/80 mb-8",children:"Gesto integrada de ordens de servio"}),e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2,duration:.4},className:"w-64 h-1 bg-white/20 rounded-full overflow-hidden mx-auto",children:e.jsx(W.div,{initial:{width:0},animate:{width:"100%"},transition:{delay:1.4,duration:1,ease:"easeInOut"},className:"h-full bg-gradient-to-r from-pink-400 to-purple-400 rounded-full"})}),e.jsx(W.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.6,duration:.4},className:"text-sm text-white/60 mt-4",children:"Carregando o sistema..."})]})]}),yk=async()=>({success:!0,metrics:{totalDocuments:0,totalChunks:0},errors:[]}),vk="modulepreload",wk=function(s){return"/"+s},bb={},fi=function(t,a,r){let n=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=Promise.allSettled(a.map(c=>{if(c=wk(c),c in bb)return;bb[c]=!0;const d=c.endsWith(".css"),A=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${A}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":vk,d||(u.as="script"),u.crossOrigin="",u.href=c,l&&u.setAttribute("nonce",l),document.head.appendChild(u),d)return new Promise((x,m)=>{u.addEventListener("load",x),u.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return n.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},jk=s=>{let t;return s?t=s:typeof fetch>"u"?t=(...a)=>fi(async()=>{const{default:r}=await Promise.resolve().then(()=>Ll);return{default:r}},void 0).then(({default:r})=>r(...a)):t=fetch,(...a)=>t(...a)};class ag extends Error{constructor(t,a="FunctionsError",r){super(t),this.name=a,this.context=r}}class yb extends ag{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class vb extends ag{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class wb extends ag{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var d0;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(d0||(d0={}));var Nk=function(s,t,a,r){function n(i){return i instanceof a?i:new a(function(o){o(i)})}return new(a||(a=Promise))(function(i,o){function l(A){try{d(r.next(A))}catch(u){o(u)}}function c(A){try{d(r.throw(A))}catch(u){o(u)}}function d(A){A.done?i(A.value):n(A.value).then(l,c)}d((r=r.apply(s,t||[])).next())})};class _k{constructor(t,{headers:a={},customFetch:r,region:n=d0.Any}={}){this.url=t,this.headers=a,this.region=n,this.fetch=jk(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Nk(this,arguments,void 0,function*(a,r={}){var n;try{const{headers:i,method:o,body:l,signal:c}=r;let d={},{region:A}=r;A||(A=this.region);const u=new URL(`${this.url}/${a}`);A&&A!=="any"&&(d["x-region"]=A,u.searchParams.set("forceFunctionRegion",A));let x;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",x=l):typeof l=="string"?(d["Content-Type"]="text/plain",x=l):typeof FormData<"u"&&l instanceof FormData?x=l:(d["Content-Type"]="application/json",x=JSON.stringify(l)));const m=yield this.fetch(u.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),i),body:x,signal:c}).catch(p=>{throw p.name==="AbortError"?p:new yb(p)}),y=m.headers.get("x-relay-error");if(y&&y==="true")throw new vb(m);if(!m.ok)throw new wb(m);let g=((n=m.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),b;return g==="application/json"?b=yield m.json():g==="application/octet-stream"?b=yield m.blob():g==="text/event-stream"?b=m:g==="multipart/form-data"?b=yield m.formData():b=yield m.text(),{data:b,error:null,response:m}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new yb(i)}:{data:null,error:i,response:i instanceof wb||i instanceof vb?i.context:void 0}}})}}var sr={},rg={},Am={},_d={},um={},mm={},Ck=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Sl=Ck();const Bk=Sl.fetch,vj=Sl.fetch.bind(Sl),wj=Sl.Headers,Sk=Sl.Request,kk=Sl.Response,Ll=Object.freeze(Object.defineProperty({__proto__:null,Headers:wj,Request:Sk,Response:kk,default:vj,fetch:Bk},Symbol.toStringTag,{value:"Module"})),Ek=BN(Ll);var hm={};Object.defineProperty(hm,"__esModule",{value:!0});let Fk=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};hm.default=Fk;var jj=Lr&&Lr.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(mm,"__esModule",{value:!0});const Uk=jj(Ek),Dk=jj(hm);let Ik=class{constructor(t){var a,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(a=t.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Uk.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,a){return this.headers=new Headers(this.headers),this.headers.set(t,a),this}then(t,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c,d;let A=null,u=null,x=null,m=i.status,y=i.statusText;if(i.ok){if(this.method!=="HEAD"){const v=await i.text();v===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?u=v:u=JSON.parse(v))}const b=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),p=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");b&&p&&p.length>1&&(x=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(A={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,x=null,m=406,y="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const b=await i.text();try{A=JSON.parse(b),Array.isArray(A)&&i.status===404&&(u=[],A=null,m=200,y="OK")}catch{i.status===404&&b===""?(m=204,y="No Content"):A={message:b}}if(A&&this.isMaybeSingle&&(!((d=A==null?void 0:A.details)===null||d===void 0)&&d.includes("0 rows"))&&(A=null,m=200,y="OK"),A&&this.shouldThrowOnError)throw new Dk.default(A)}return{error:A,data:u,count:x,status:m,statusText:y}});return this.shouldThrowOnError||(n=n.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(t,a)}returns(){return this}overrideTypes(){return this}};mm.default=Ik;var Lk=Lr&&Lr.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(um,"__esModule",{value:!0});const Tk=Lk(mm);let Qk=class extends Tk.default{select(t){let a=!1;const r=(t??"*").split("").map(n=>/\s/.test(n)&&!a?"":(n==='"'&&(a=!a),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:a=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${a?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:a,referencedTable:r=a}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,a,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${a-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:a=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,a?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};um.default=Qk;var Pk=Lr&&Lr.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(_d,"__esModule",{value:!0});const Mk=Pk(um);let Rk=class extends Mk.default{eq(t,a){return this.url.searchParams.append(t,`eq.${a}`),this}neq(t,a){return this.url.searchParams.append(t,`neq.${a}`),this}gt(t,a){return this.url.searchParams.append(t,`gt.${a}`),this}gte(t,a){return this.url.searchParams.append(t,`gte.${a}`),this}lt(t,a){return this.url.searchParams.append(t,`lt.${a}`),this}lte(t,a){return this.url.searchParams.append(t,`lte.${a}`),this}like(t,a){return this.url.searchParams.append(t,`like.${a}`),this}likeAllOf(t,a){return this.url.searchParams.append(t,`like(all).{${a.join(",")}}`),this}likeAnyOf(t,a){return this.url.searchParams.append(t,`like(any).{${a.join(",")}}`),this}ilike(t,a){return this.url.searchParams.append(t,`ilike.${a}`),this}ilikeAllOf(t,a){return this.url.searchParams.append(t,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(t,a){return this.url.searchParams.append(t,`ilike(any).{${a.join(",")}}`),this}is(t,a){return this.url.searchParams.append(t,`is.${a}`),this}in(t,a){const r=Array.from(new Set(a)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,a){return typeof a=="string"?this.url.searchParams.append(t,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(t,`cs.{${a.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(a)}`),this}containedBy(t,a){return typeof a=="string"?this.url.searchParams.append(t,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(t,`cd.{${a.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(a)}`),this}rangeGt(t,a){return this.url.searchParams.append(t,`sr.${a}`),this}rangeGte(t,a){return this.url.searchParams.append(t,`nxl.${a}`),this}rangeLt(t,a){return this.url.searchParams.append(t,`sl.${a}`),this}rangeLte(t,a){return this.url.searchParams.append(t,`nxr.${a}`),this}rangeAdjacent(t,a){return this.url.searchParams.append(t,`adj.${a}`),this}overlaps(t,a){return typeof a=="string"?this.url.searchParams.append(t,`ov.${a}`):this.url.searchParams.append(t,`ov.{${a.join(",")}}`),this}textSearch(t,a,{config:r,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${a}`),this}match(t){return Object.entries(t).forEach(([a,r])=>{this.url.searchParams.append(a,`eq.${r}`)}),this}not(t,a,r){return this.url.searchParams.append(t,`not.${a}.${r}`),this}or(t,{foreignTable:a,referencedTable:r=a}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,a,r){return this.url.searchParams.append(t,`${a}.${r}`),this}};_d.default=Rk;var Ok=Lr&&Lr.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Am,"__esModule",{value:!0});const gc=Ok(_d);let Hk=class{constructor(t,{headers:a={},schema:r,fetch:n}){this.url=t,this.headers=new Headers(a),this.schema=r,this.fetch=n}select(t,a){const{head:r=!1,count:n}=a??{},i=r?"HEAD":"GET";let o=!1;const l=(t??"*").split("").map(c=>/\s/.test(c)&&!o?"":(c==='"'&&(o=!o),c)).join("");return this.url.searchParams.set("select",l),n&&this.headers.append("Prefer",`count=${n}`),new gc.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:a,defaultToNull:r=!0}={}){var n;const i="POST";if(a&&this.headers.append("Prefer",`count=${a}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new gc.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(t,{onConflict:a,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),n&&this.headers.append("Prefer",`count=${n}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((d,A)=>d.concat(Object.keys(A)),[]);if(c.length>0){const d=[...new Set(c)].map(A=>`"${A}"`);this.url.searchParams.set("columns",d.join(","))}}return new gc.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:a}={}){var r;const n="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new gc.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var a;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new gc.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};Am.default=Hk;var Nj=Lr&&Lr.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(rg,"__esModule",{value:!0});const qk=Nj(Am),$k=Nj(_d);let Vk=class _j{constructor(t,{headers:a={},schema:r,fetch:n}={}){this.url=t,this.headers=new Headers(a),this.schemaName=r,this.fetch=n}from(t){const a=new URL(`${this.url}/${t}`);return new qk.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new _j(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,a={},{head:r=!1,get:n=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let d;r||n?(l=r?"HEAD":"GET",Object.entries(a).filter(([u,x])=>x!==void 0).map(([u,x])=>[u,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([u,x])=>{c.searchParams.append(u,x)})):(l="POST",d=a);const A=new Headers(this.headers);return i&&A.set("Prefer",`count=${i}`),new $k.default({method:l,url:c,headers:A,schema:this.schemaName,body:d,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};rg.default=Vk;var Tl=Lr&&Lr.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(sr,"__esModule",{value:!0});sr.PostgrestError=sr.PostgrestBuilder=sr.PostgrestTransformBuilder=sr.PostgrestFilterBuilder=sr.PostgrestQueryBuilder=sr.PostgrestClient=void 0;const Cj=Tl(rg);sr.PostgrestClient=Cj.default;const Bj=Tl(Am);sr.PostgrestQueryBuilder=Bj.default;const Sj=Tl(_d);sr.PostgrestFilterBuilder=Sj.default;const kj=Tl(um);sr.PostgrestTransformBuilder=kj.default;const Ej=Tl(mm);sr.PostgrestBuilder=Ej.default;const Fj=Tl(hm);sr.PostgrestError=Fj.default;var Kk=sr.default={PostgrestClient:Cj.default,PostgrestQueryBuilder:Bj.default,PostgrestFilterBuilder:Sj.default,PostgrestTransformBuilder:kj.default,PostgrestBuilder:Ej.default,PostgrestError:Fj.default};const{PostgrestClient:zk,PostgrestQueryBuilder:o9,PostgrestFilterBuilder:l9,PostgrestTransformBuilder:c9,PostgrestBuilder:d9,PostgrestError:A9}=Kk;class Gk{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const a=process.versions;if(a&&a.node){const r=a.node,n=parseInt(r.replace(/^v/,"").split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let a=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(a+=`

Suggested solution: ${t.workaround}`),new Error(a)}static createWebSocket(t,a){const r=this.getWebSocketConstructor();return new r(t,a)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Wk="2.75.0",Jk=`realtime-js/${Wk}`,Yk="1.0.0",A0=1e4,Xk=1e3,Zk=100;var $c;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})($c||($c={}));var ha;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(ha||(ha={}));var zr;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(zr||(zr={}));var u0;(function(s){s.websocket="websocket"})(u0||(u0={}));var Hi;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Hi||(Hi={}));class eE{constructor(){this.HEADER_LENGTH=1}decode(t,a){return t.constructor===ArrayBuffer?a(this._binaryDecode(t)):a(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const a=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,a,r)}_decodeBroadcast(t,a,r){const n=a.getUint8(1),i=a.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(t.slice(o,o+n));o=o+n;const c=r.decode(t.slice(o,o+i));o=o+i;const d=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class Uj{constructor(t,a){this.callback=t,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var js;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(js||(js={}));const jb=(s,t,a={})=>{var r;const n=(r=a.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=tE(o,s,t,n),i),{}):{}},tE=(s,t,a,r)=>{const n=t.find(l=>l.name===s),i=n==null?void 0:n.type,o=a[s];return i&&!r.includes(i)?Dj(i,o):m0(o)},Dj=(s,t)=>{if(s.charAt(0)==="_"){const a=s.slice(1,s.length);return nE(t,a)}switch(s){case js.bool:return sE(t);case js.float4:case js.float8:case js.int2:case js.int4:case js.int8:case js.numeric:case js.oid:return aE(t);case js.json:case js.jsonb:return rE(t);case js.timestamp:return iE(t);case js.abstime:case js.date:case js.daterange:case js.int4range:case js.int8range:case js.money:case js.reltime:case js.text:case js.time:case js.timestamptz:case js.timetz:case js.tsrange:case js.tstzrange:return m0(t);default:return m0(t)}},m0=s=>s,sE=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},aE=s=>{if(typeof s=="string"){const t=parseFloat(s);if(!Number.isNaN(t))return t}return s},rE=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(t){return console.log(`JSON parse error: ${t}`),s}return s},nE=(s,t)=>{if(typeof s!="string")return s;const a=s.length-1,r=s[a];if(s[0]==="{"&&r==="}"){let i;const o=s.slice(1,a);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Dj(t,l))}return s},iE=s=>typeof s=="string"?s.replace(" ","T"):s,Ij=s=>{let t=s;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Rh{constructor(t,a,r={},n=A0){this.channel=t,this.event=a,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,a){var r;return this._hasReceived(t)&&a((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:a}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(a))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Nb;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Nb||(Nb={}));class Vc{constructor(t,a){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(a==null?void 0:a.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Vc.syncState(this.state,n,i,o),this.pendingDiffs.forEach(c=>{this.state=Vc.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Vc.syncDiff(this.state,n,i,o),l())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,a,r,n){const i=this.cloneDeep(t),o=this.transformState(a),l={},c={};return this.map(i,(d,A)=>{o[d]||(c[d]=A)}),this.map(o,(d,A)=>{const u=i[d];if(u){const x=A.map(b=>b.presence_ref),m=u.map(b=>b.presence_ref),y=A.filter(b=>m.indexOf(b.presence_ref)<0),g=u.filter(b=>x.indexOf(b.presence_ref)<0);y.length>0&&(l[d]=y),g.length>0&&(c[d]=g)}else l[d]=A}),this.syncDiff(i,{joins:l,leaves:c},r,n)}static syncDiff(t,a,r,n){const{joins:i,leaves:o}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(l,c)=>{var d;const A=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),A.length>0){const u=t[l].map(m=>m.presence_ref),x=A.filter(m=>u.indexOf(m.presence_ref)<0);t[l].unshift(...x)}r(l,A,c)}),this.map(o,(l,c)=>{let d=t[l];if(!d)return;const A=c.map(u=>u.presence_ref);d=d.filter(u=>A.indexOf(u.presence_ref)<0),t[l]=d,n(l,d,c),d.length===0&&delete t[l]}),t}static map(t,a){return Object.getOwnPropertyNames(t).map(r=>a(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((a,r)=>{const n=t[r];return"metas"in n?a[r]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):a[r]=n,a},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _b;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(_b||(_b={}));var Kc;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(Kc||(Kc={}));var Bn;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(Bn||(Bn={}));class ng{constructor(t,a={config:{}},r){var n,i;if(this.topic=t,this.params=a,this.socket=r,this.bindings={},this.state=ha.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new Rh(this,zr.join,this.params,this.timeout),this.rejoinTimer=new Uj(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ha.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ha.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ha.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ha.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ha.errored,this.rejoinTimer.scheduleTimeout())}),this._on(zr.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new Vc(this),this.broadcastEndpointURL=Ij(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(n=this.params.config)===null||n===void 0?void 0:n.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,a=this.timeout){var r,n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ha.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,d=(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&n!==void 0?n:[],A=!!this.bindings[Kc.PRESENCE]&&this.bindings[Kc.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,u={},x={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:A}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(Bn.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(Bn.CLOSED)),this.updateJoinPayload(Object.assign({config:x},u)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:m})=>{var y;if(this.socket.setAuth(),m===void 0){t==null||t(Bn.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,b=(y=g==null?void 0:g.length)!==null&&y!==void 0?y:0,p=[];for(let v=0;v<b;v++){const N=g[v],{filter:{event:D,schema:S,table:E,filter:R}}=N,_=m&&m[v];if(_&&_.event===D&&_.schema===S&&_.table===E&&_.filter===R)p.push(Object.assign(Object.assign({},N),{id:_.id}));else{this.unsubscribe(),this.state=ha.errored,t==null||t(Bn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,t&&t(Bn.SUBSCRIBED);return}}).receive("error",m=>{this.state=ha.errored,t==null||t(Bn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Bn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,a={}){return await this.send({type:"presence",event:"track",payload:t},a.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,a,r){return this.state===ha.joined&&t===Kc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,a,r)}async send(t,a={}){var r,n;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=a.timeout)!==null&&r!==void 0?r:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(t.type,t,a.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ha.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(zr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new Rh(this,zr.leave,{},t),r.receive("ok",()=>{a(),n("ok")}).receive("timeout",()=>{a(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ha.closed,this.bindings={}}async _fetchWithTimeout(t,a,r){const n=new AbortController,i=setTimeout(()=>n.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},a),{signal:n.signal}));return clearTimeout(i),o}_push(t,a,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Rh(this,t,a,r);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Zk){const a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(t,a,r){return a}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,a,r){var n,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:A}=zr;if(r&&[l,c,d,A].indexOf(o)>=0&&r!==this._joinRef())return;let x=this._onMessage(o,a,r);if(a&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(m=>{var y,g,b;return((y=m.filter)===null||y===void 0?void 0:y.event)==="*"||((b=(g=m.filter)===null||g===void 0?void 0:g.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(m=>m.callback(x,r)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var y,g,b,p,v,N;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const D=m.id,S=(y=m.filter)===null||y===void 0?void 0:y.event;return D&&((g=a.ids)===null||g===void 0?void 0:g.includes(D))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((b=a.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const D=(v=(p=m==null?void 0:m.filter)===null||p===void 0?void 0:p.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return D==="*"||D===((N=a==null?void 0:a.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof x=="object"&&"ids"in x){const y=x.data,{schema:g,table:b,commit_timestamp:p,type:v,errors:N}=y;x=Object.assign(Object.assign({},{schema:g,table:b,commit_timestamp:p,eventType:v,new:{},old:{},errors:N}),this._getPayloadRecords(y))}m.callback(x,r)})}_isClosed(){return this.state===ha.closed}_isJoined(){return this.state===ha.joined}_isJoining(){return this.state===ha.joining}_isLeaving(){return this.state===ha.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,a,r){const n=t.toLocaleLowerCase(),i={type:n,filter:a,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(t,a){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&ng.isEqual(n.filter,a))})),this}static isEqual(t,a){if(Object.keys(t).length!==Object.keys(a).length)return!1;for(const r in t)if(t[r]!==a[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(zr.close,{},t)}_onError(t){this._on(zr.error,{},a=>t(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ha.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const a={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(a.new=jb(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(a.old=jb(t.columns,t.old_record)),a}}const Oh=()=>{},CA={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},oE=[1e3,2e3,5e3,1e4],lE=1e4,cE=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class dE{constructor(t,a){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=A0,this.transport=null,this.heartbeatIntervalMs=CA.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Oh,this.ref=0,this.reconnectTimer=null,this.logger=Oh,this.conn=null,this.sendBuffer=[],this.serializer=new eE,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>{let i;return n?i=n:typeof fetch>"u"?i=(...o)=>fi(async()=>{const{default:l}=await Promise.resolve().then(()=>Ll);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=a==null?void 0:a.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=a.params.apikey,this.endPoint=`${t}/${u0.websocket}`,this.httpEndpoint=Ij(t),this._initializeOptions(a),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(a==null?void 0:a.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Gk.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const a=t.message;throw a.includes("Node.js")?new Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Yk}))}disconnect(t,a){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,a??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const a=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const t=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,a,r){this.logger(t,a,r)}connectionState(){switch(this.conn&&this.conn.readyState){case $c.connecting:return Hi.Connecting;case $c.open:return Hi.Open;case $c.closing:return Hi.Closing;default:return Hi.Closed}}isConnected(){return this.connectionState()===Hi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,a={config:{}}){const r=`realtime:${t}`,n=this.getChannels().find(i=>i.topic===r);if(n)return n;{const i=new ng(`realtime:${t}`,a,this);return this.channels.push(i),i}}push(t){const{topic:a,event:r,payload:n,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${a} ${r} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(a){this.log("error","error in heartbeat callback",a)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(a){this.log("error","error in heartbeat callback",a)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Xk,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout()},CA.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(a){this.log("error","error in heartbeat callback",a)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let a=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${t}"`),a.unsubscribe())}_remove(t){this.channels=this.channels.filter(a=>a.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,a=>{if(a.topic==="phoenix"&&a.event==="phx_reply")try{this.heartbeatCallback(a.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}a.ref&&a.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:n,payload:i,ref:o}=a,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${n} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(n,i,o)),this._triggerStateCallbacks("message",a)})}_clearTimer(t){var a;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((a=this.reconnectTimer)===null||a===void 0||a.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this.workerRef.terminate()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var a;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(zr.error))}_appendParams(t,a){if(Object.keys(a).length===0)return t;const r=t.match(/\?/)?"&":"?",n=new URLSearchParams(a);return`${t}${r}${n}`}_workerObjectUrl(t){let a;if(t)a=t;else{const r=new Blob([cE],{type:"application/javascript"});a=URL.createObjectURL(r)}return a}_setConnectionState(t,a=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=a)}async _performAuth(t=null){let a;t?a=t:this.accessToken?a=await this.accessToken():a=this.accessTokenValue,this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(r=>{const n={access_token:a,version:Jk};a&&r.updateJoinPayload(n),r.joinedOnce&&r._isJoined()&&r._push(zr.access_token,{access_token:a})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(a=>{this.log("error",`error setting auth in ${t}`,a)})}_triggerStateCallbacks(t,a){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(a)}catch(n){this.log("error",`error in ${t} callback`,n)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Uj(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},CA.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var a,r,n,i,o,l,c,d,A;if(this.transport=(a=t==null?void 0:t.transport)!==null&&a!==void 0?a:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:A0,this.heartbeatIntervalMs=(n=t==null?void 0:t.heartbeatIntervalMs)!==null&&n!==void 0?n:CA.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Oh,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:u=>oE[u-1]||lE,this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(u,x)=>x(JSON.stringify(u)),this.decode=(A=t==null?void 0:t.decode)!==null&&A!==void 0?A:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class ig extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ia(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class AE extends ig{constructor(t,a,r){super(t),this.name="StorageApiError",this.status=a,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class h0 extends ig{constructor(t,a){super(t),this.name="StorageUnknownError",this.originalError=a}}var uE=function(s,t,a,r){function n(i){return i instanceof a?i:new a(function(o){o(i)})}return new(a||(a=Promise))(function(i,o){function l(A){try{d(r.next(A))}catch(u){o(u)}}function c(A){try{d(r.throw(A))}catch(u){o(u)}}function d(A){A.done?i(A.value):n(A.value).then(l,c)}d((r=r.apply(s,t||[])).next())})};const Lj=s=>{let t;return s?t=s:typeof fetch>"u"?t=(...a)=>fi(async()=>{const{default:r}=await Promise.resolve().then(()=>Ll);return{default:r}},void 0).then(({default:r})=>r(...a)):t=fetch,(...a)=>t(...a)},mE=()=>uE(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield fi(()=>Promise.resolve().then(()=>Ll),void 0)).Response:Response}),x0=s=>{if(Array.isArray(s))return s.map(a=>x0(a));if(typeof s=="function"||s!==Object(s))return s;const t={};return Object.entries(s).forEach(([a,r])=>{const n=a.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[n]=x0(r)}),t},hE=s=>{if(typeof s!="object"||s===null)return!1;const t=Object.getPrototypeOf(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)};var oo=function(s,t,a,r){function n(i){return i instanceof a?i:new a(function(o){o(i)})}return new(a||(a=Promise))(function(i,o){function l(A){try{d(r.next(A))}catch(u){o(u)}}function c(A){try{d(r.throw(A))}catch(u){o(u)}}function d(A){A.done?i(A.value):n(A.value).then(l,c)}d((r=r.apply(s,t||[])).next())})};const Hh=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),xE=(s,t,a)=>oo(void 0,void 0,void 0,function*(){const r=yield mE();s instanceof r&&!(a!=null&&a.noResolveJson)?s.json().then(n=>{const i=s.status||500,o=(n==null?void 0:n.statusCode)||i+"";t(new AE(Hh(n),i,o))}).catch(n=>{t(new h0(Hh(n),n))}):t(new h0(Hh(s),s))}),pE=(s,t,a,r)=>{const n={method:s,headers:(t==null?void 0:t.headers)||{}};return s==="GET"||!r?n:(hE(r)?(n.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n.body=JSON.stringify(r)):n.body=r,t!=null&&t.duplex&&(n.duplex=t.duplex),Object.assign(Object.assign({},n),a))};function Cd(s,t,a,r,n,i){return oo(this,void 0,void 0,function*(){return new Promise((o,l)=>{s(a,pE(t,r,n,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>xE(c,l,r))})})}function ku(s,t,a,r){return oo(this,void 0,void 0,function*(){return Cd(s,"GET",t,a,r)})}function rn(s,t,a,r,n){return oo(this,void 0,void 0,function*(){return Cd(s,"POST",t,r,n,a)})}function p0(s,t,a,r,n){return oo(this,void 0,void 0,function*(){return Cd(s,"PUT",t,r,n,a)})}function gE(s,t,a,r){return oo(this,void 0,void 0,function*(){return Cd(s,"HEAD",t,Object.assign(Object.assign({},a),{noResolveJson:!0}),r)})}function Tj(s,t,a,r,n){return oo(this,void 0,void 0,function*(){return Cd(s,"DELETE",t,r,n,a)})}var fE=function(s,t,a,r){function n(i){return i instanceof a?i:new a(function(o){o(i)})}return new(a||(a=Promise))(function(i,o){function l(A){try{d(r.next(A))}catch(u){o(u)}}function c(A){try{d(r.throw(A))}catch(u){o(u)}}function d(A){A.done?i(A.value):n(A.value).then(l,c)}d((r=r.apply(s,t||[])).next())})};class bE{constructor(t,a){this.downloadFn=t,this.shouldThrowOnError=a}then(t,a){return this.execute().then(t,a)}execute(){return fE(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ia(t))return{data:null,error:t};throw t}})}}var yE=function(s,t,a,r){function n(i){return i instanceof a?i:new a(function(o){o(i)})}return new(a||(a=Promise))(function(i,o){function l(A){try{d(r.next(A))}catch(u){o(u)}}function c(A){try{d(r.throw(A))}catch(u){o(u)}}function d(A){A.done?i(A.value):n(A.value).then(l,c)}d((r=r.apply(s,t||[])).next())})};class vE{constructor(t,a){this.downloadFn=t,this.shouldThrowOnError=a}asStream(){return new bE(this.downloadFn,this.shouldThrowOnError)}then(t,a){return this.execute().then(t,a)}execute(){return yE(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ia(t))return{data:null,error:t};throw t}})}}var er=function(s,t,a,r){function n(i){return i instanceof a?i:new a(function(o){o(i)})}return new(a||(a=Promise))(function(i,o){function l(A){try{d(r.next(A))}catch(u){o(u)}}function c(A){try{d(r.throw(A))}catch(u){o(u)}}function d(A){A.done?i(A.value):n(A.value).then(l,c)}d((r=r.apply(s,t||[])).next())})};const wE={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Cb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class jE{constructor(t,a={},r,n){this.shouldThrowOnError=!1,this.url=t,this.headers=a,this.bucketId=r,this.fetch=Lj(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,a,r,n){return er(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Cb),n);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n!=null&&n.headers&&(l=Object.assign(Object.assign({},l),n.headers));const d=this._removeEmptyFolders(a),A=this._getFinalPath(d),u=yield(t=="PUT"?p0:rn)(this.fetch,`${this.url}/object/${A}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:u.Id,fullPath:u.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ia(i))return{data:null,error:i};throw i}})}upload(t,a,r){return er(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,a,r)})}uploadToSignedUrl(t,a,r,n){return er(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",a);try{let c;const d=Object.assign({upsert:Cb.upsert},n),A=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",d.cacheControl)):(c=r,A["cache-control"]=`max-age=${d.cacheControl}`,A["content-type"]=d.contentType);const u=yield p0(this.fetch,l.toString(),c,{headers:A});return{data:{path:i,fullPath:u.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(ia(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,a){return er(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const n=Object.assign({},this.headers);a!=null&&a.upsert&&(n["x-upsert"]="true");const i=yield rn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new ig("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ia(r))return{data:null,error:r};throw r}})}update(t,a,r){return er(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,a,r)})}move(t,a,r){return er(this,void 0,void 0,function*(){try{return{data:yield rn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:a,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ia(n))return{data:null,error:n};throw n}})}copy(t,a,r){return er(this,void 0,void 0,function*(){try{return{data:{path:(yield rn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:a,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ia(n))return{data:null,error:n};throw n}})}createSignedUrl(t,a,r){return er(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t),i=yield rn(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:a},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ia(n))return{data:null,error:n};throw n}})}createSignedUrls(t,a,r){return er(this,void 0,void 0,function*(){try{const n=yield rn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:a,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ia(n))return{data:null,error:n};throw n}})}download(t,a){const n=typeof(a==null?void 0:a.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((a==null?void 0:a.transform)||{}),o=i?`?${i}`:"",l=this._getFinalPath(t),c=()=>ku(this.fetch,`${this.url}/${n}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new vE(c,this.shouldThrowOnError)}info(t){return er(this,void 0,void 0,function*(){const a=this._getFinalPath(t);try{const r=yield ku(this.fetch,`${this.url}/object/info/${a}`,{headers:this.headers});return{data:x0(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ia(r))return{data:null,error:r};throw r}})}exists(t){return er(this,void 0,void 0,function*(){const a=this._getFinalPath(t);try{return yield gE(this.fetch,`${this.url}/object/${a}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ia(r)&&r instanceof h0){const n=r.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,a){const r=this._getFinalPath(t),n=[],i=a!=null&&a.download?`download=${a.download===!0?"":a.download}`:"";i!==""&&n.push(i);const l=typeof(a==null?void 0:a.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((a==null?void 0:a.transform)||{});c!==""&&n.push(c);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${d}`)}}}remove(t){return er(this,void 0,void 0,function*(){try{return{data:yield Tj(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ia(a))return{data:null,error:a};throw a}})}list(t,a,r){return er(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},wE),a),{prefix:t||""});return{data:yield rn(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ia(n))return{data:null,error:n};throw n}})}listV2(t,a){return er(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield rn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},a),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ia(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const a=[];return t.width&&a.push(`width=${t.width}`),t.height&&a.push(`height=${t.height}`),t.resize&&a.push(`resize=${t.resize}`),t.format&&a.push(`format=${t.format}`),t.quality&&a.push(`quality=${t.quality}`),a.join("&")}}const NE="2.75.0",_E={"X-Client-Info":`storage-js/${NE}`};var Po=function(s,t,a,r){function n(i){return i instanceof a?i:new a(function(o){o(i)})}return new(a||(a=Promise))(function(i,o){function l(A){try{d(r.next(A))}catch(u){o(u)}}function c(A){try{d(r.throw(A))}catch(u){o(u)}}function d(A){A.done?i(A.value):n(A.value).then(l,c)}d((r=r.apply(s,t||[])).next())})};class CE{constructor(t,a={},r,n){this.shouldThrowOnError=!1;const i=new URL(t);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_E),a),this.fetch=Lj(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Po(this,void 0,void 0,function*(){try{return{data:yield ku(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ia(t))return{data:null,error:t};throw t}})}getBucket(t){return Po(this,void 0,void 0,function*(){try{return{data:yield ku(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ia(a))return{data:null,error:a};throw a}})}createBucket(t){return Po(this,arguments,void 0,function*(a,r={public:!1}){try{return{data:yield rn(this.fetch,`${this.url}/bucket`,{id:a,name:a,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ia(n))return{data:null,error:n};throw n}})}updateBucket(t,a){return Po(this,void 0,void 0,function*(){try{return{data:yield p0(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ia(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Po(this,void 0,void 0,function*(){try{return{data:yield rn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ia(a))return{data:null,error:a};throw a}})}deleteBucket(t){return Po(this,void 0,void 0,function*(){try{return{data:yield Tj(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ia(a))return{data:null,error:a};throw a}})}}class BE extends CE{constructor(t,a={},r,n){super(t,a,r,n)}from(t){return new jE(this.url,this.headers,t,this.fetch)}}const SE="2.75.0";let kc="";typeof Deno<"u"?kc="deno":typeof document<"u"?kc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?kc="react-native":kc="node";const kE={"X-Client-Info":`supabase-js-${kc}/${SE}`},EE={headers:kE},FE={schema:"public"},UE={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},DE={};var IE=function(s,t,a,r){function n(i){return i instanceof a?i:new a(function(o){o(i)})}return new(a||(a=Promise))(function(i,o){function l(A){try{d(r.next(A))}catch(u){o(u)}}function c(A){try{d(r.throw(A))}catch(u){o(u)}}function d(A){A.done?i(A.value):n(A.value).then(l,c)}d((r=r.apply(s,t||[])).next())})};const LE=s=>{let t;return s?t=s:typeof fetch>"u"?t=vj:t=fetch,(...a)=>t(...a)},TE=()=>typeof Headers>"u"?wj:Headers,QE=(s,t,a)=>{const r=LE(a),n=TE();return(i,o)=>IE(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:s;let d=new n(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",s),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:d}))})};var PE=function(s,t,a,r){function n(i){return i instanceof a?i:new a(function(o){o(i)})}return new(a||(a=Promise))(function(i,o){function l(A){try{d(r.next(A))}catch(u){o(u)}}function c(A){try{d(r.throw(A))}catch(u){o(u)}}function d(A){A.done?i(A.value):n(A.value).then(l,c)}d((r=r.apply(s,t||[])).next())})};function ME(s){return s.endsWith("/")?s:s+"/"}function RE(s,t){var a,r;const{db:n,auth:i,realtime:o,global:l}=s,{db:c,auth:d,realtime:A,global:u}=t,x={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},A),o),storage:{},global:Object.assign(Object.assign(Object.assign({},u),l),{headers:Object.assign(Object.assign({},(a=u==null?void 0:u.headers)!==null&&a!==void 0?a:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>PE(this,void 0,void 0,function*(){return""})};return s.accessToken?x.accessToken=s.accessToken:delete x.accessToken,x}function OE(s){const t=s==null?void 0:s.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ME(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Qj="2.75.0",Xo=30*1e3,g0=3,qh=g0*Xo,HE="http://localhost:9999",qE="supabase.auth.token",$E={"X-Client-Info":`gotrue-js/${Qj}`},f0="X-Supabase-Api-Version",Pj={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},VE=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,KE=10*60*1e3;class Ad extends Error{constructor(t,a,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=r}}function Et(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class zE extends Ad{constructor(t,a,r){super(t,a,r),this.name="AuthApiError",this.status=a,this.code=r}}function GE(s){return Et(s)&&s.name==="AuthApiError"}class qi extends Ad{constructor(t,a){super(t),this.name="AuthUnknownError",this.originalError=a}}class ji extends Ad{constructor(t,a,r,n){super(t,r,n),this.name=a,this.status=r}}class ti extends ji{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function WE(s){return Et(s)&&s.name==="AuthSessionMissingError"}class Mo extends ji{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class BA extends ji{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class SA extends ji{constructor(t,a=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function JE(s){return Et(s)&&s.name==="AuthImplicitGrantRedirectError"}class Bb extends ji{constructor(t,a=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class b0 extends ji{constructor(t,a){super(t,"AuthRetryableFetchError",a,void 0)}}function $h(s){return Et(s)&&s.name==="AuthRetryableFetchError"}class Sb extends ji{constructor(t,a,r){super(t,"AuthWeakPasswordError",a,"weak_password"),this.reasons=r}}class y0 extends ji{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Eu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),kb=` 	
\r=`.split(""),YE=(()=>{const s=new Array(128);for(let t=0;t<s.length;t+=1)s[t]=-1;for(let t=0;t<kb.length;t+=1)s[kb[t].charCodeAt(0)]=-2;for(let t=0;t<Eu.length;t+=1)s[Eu[t].charCodeAt(0)]=t;return s})();function Eb(s,t,a){if(s!==null)for(t.queue=t.queue<<8|s,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;a(Eu[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;a(Eu[r]),t.queuedBits-=6}}function Mj(s,t,a){const r=YE[s];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)a(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function Fb(s){const t=[],a=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=o=>{eF(o,r,a)};for(let o=0;o<s.length;o+=1)Mj(s.charCodeAt(o),n,i);return t.join("")}function XE(s,t){if(s<=127){t(s);return}else if(s<=2047){t(192|s>>6),t(128|s&63);return}else if(s<=65535){t(224|s>>12),t(128|s>>6&63),t(128|s&63);return}else if(s<=1114111){t(240|s>>18),t(128|s>>12&63),t(128|s>>6&63),t(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function ZE(s,t){for(let a=0;a<s.length;a+=1){let r=s.charCodeAt(a);if(r>55295&&r<=56319){const n=(r-55296)*1024&65535;r=(s.charCodeAt(a+1)-56320&65535|n)+65536,a+=1}XE(r,t)}}function eF(s,t,a){if(t.utf8seq===0){if(s<=127){a(s);return}for(let r=1;r<6;r+=1)if(!(s>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=s&31;else if(t.utf8seq===3)t.codepoint=s&15;else if(t.utf8seq===4)t.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|s&63,t.utf8seq-=1,t.utf8seq===0&&a(t.codepoint)}}function fl(s){const t=[],a={queue:0,queuedBits:0},r=n=>{t.push(n)};for(let n=0;n<s.length;n+=1)Mj(s.charCodeAt(n),a,r);return new Uint8Array(t)}function tF(s){const t=[];return ZE(s,a=>t.push(a)),new Uint8Array(t)}function Gi(s){const t=[],a={queue:0,queuedBits:0},r=n=>{t.push(n)};return s.forEach(n=>Eb(n,a,r)),Eb(null,a,r),t.join("")}function sF(s){return Math.round(Date.now()/1e3)+s}function aF(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const t=Math.random()*16|0;return(s=="x"?t:t&3|8).toString(16)})}const ur=()=>typeof window<"u"&&typeof document<"u",Li={tested:!1,writable:!1},Rj=()=>{if(!ur())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Li.tested)return Li.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Li.tested=!0,Li.writable=!0}catch{Li.tested=!0,Li.writable=!1}return Li.writable};function rF(s){const t={},a=new URL(s);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((n,i)=>{t[i]=n})}catch{}return a.searchParams.forEach((r,n)=>{t[n]=r}),t}const Oj=s=>{let t;return s?t=s:typeof fetch>"u"?t=(...a)=>fi(async()=>{const{default:r}=await Promise.resolve().then(()=>Ll);return{default:r}},void 0).then(({default:r})=>r(...a)):t=fetch,(...a)=>t(...a)},nF=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Zo=async(s,t,a)=>{await s.setItem(t,JSON.stringify(a))},Ti=async(s,t)=>{const a=await s.getItem(t);if(!a)return null;try{return JSON.parse(a)}catch{return a}},Yn=async(s,t)=>{await s.removeItem(t)};class xm{constructor(){this.promise=new xm.promiseConstructor((t,a)=>{this.resolve=t,this.reject=a})}}xm.promiseConstructor=Promise;function Vh(s){const t=s.split(".");if(t.length!==3)throw new y0("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!VE.test(t[r]))throw new y0("JWT not in base64url format");return{header:JSON.parse(Fb(t[0])),payload:JSON.parse(Fb(t[1])),signature:fl(t[2]),raw:{header:t[0],payload:t[1]}}}async function iF(s){return await new Promise(t=>{setTimeout(()=>t(null),s)})}function oF(s,t){return new Promise((r,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await s(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){n(o);return}}})()})}function lF(s){return("0"+s.toString(16)).substr(-2)}function cF(){const t=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=a.length;let n="";for(let i=0;i<56;i++)n+=a.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(t),Array.from(t,lF).join("")}async function dF(s){const a=new TextEncoder().encode(s),r=await crypto.subtle.digest("SHA-256",a),n=new Uint8Array(r);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function AF(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const a=await dF(s);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ro(s,t,a=!1){const r=cF();let n=r;a&&(n+="/PASSWORD_RECOVERY"),await Zo(s,`${t}-code-verifier`,n);const i=await AF(r);return[i,r===i?"plain":"s256"]}const uF=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function mF(s){const t=s.headers.get(f0);if(!t||!t.match(uF))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function hF(s){if(!s)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(s<=t)throw new Error("JWT has expired")}function xF(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const pF=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Oo(s){if(!pF.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Kh(){const s={};return new Proxy(s,{get:(t,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const r=a.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ub(s){return JSON.parse(JSON.stringify(s))}var gF=function(s,t){var a={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&t.indexOf(r)<0&&(a[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(s);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(s,r[n])&&(a[r[n]]=s[r[n]]);return a};const Ri=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),fF=[502,503,504];async function Db(s){var t;if(!nF(s))throw new b0(Ri(s),0);if(fF.includes(s.status))throw new b0(Ri(s),s.status);let a;try{a=await s.json()}catch(i){throw new qi(Ri(i),i)}let r;const n=mF(s);if(n&&n.getTime()>=Pj["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?r=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(r=a.error_code),r){if(r==="weak_password")throw new Sb(Ri(a),s.status,((t=a.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new ti}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Sb(Ri(a),s.status,a.weak_password.reasons);throw new zE(Ri(a),s.status||500,r)}const bF=(s,t,a,r)=>{const n={method:s,headers:(t==null?void 0:t.headers)||{}};return s==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),a))};async function $t(s,t,a,r){var n;const i=Object.assign({},r==null?void 0:r.headers);i[f0]||(i[f0]=Pj["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(n=r==null?void 0:r.query)!==null&&n!==void 0?n:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await yF(s,t,a+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function yF(s,t,a,r,n,i){const o=bF(t,r,n,i);let l;try{l=await s(a,Object.assign({},o))}catch(c){throw console.error(c),new b0(Ri(c),0)}if(l.ok||await Db(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Db(c)}}function qr(s){var t;let a=null;jF(s)&&(a=Object.assign({},s),s.expires_at||(a.expires_at=sF(s.expires_in)));const r=(t=s.user)!==null&&t!==void 0?t:s;return{data:{session:a,user:r},error:null}}function Ib(s){const t=qr(s);return!t.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((a,r)=>a&&typeof r=="string",!0)&&(t.data.weak_password=s.weak_password),t}function ni(s){var t;return{data:{user:(t=s.user)!==null&&t!==void 0?t:s},error:null}}function vF(s){return{data:s,error:null}}function wF(s){const{action_link:t,email_otp:a,hashed_token:r,redirect_to:n,verification_type:i}=s,o=gF(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:a,hashed_token:r,redirect_to:n,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Lb(s){return s}function jF(s){return s.access_token&&s.refresh_token&&s.expires_in}const zh=["global","local","others"];var NF=function(s,t){var a={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&t.indexOf(r)<0&&(a[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(s);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(s,r[n])&&(a[r[n]]=s[r[n]]);return a};class _F{constructor({url:t="",headers:a={},fetch:r}){this.url=t,this.headers=a,this.fetch=Oj(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,a=zh[0]){if(zh.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${zh.join(", ")}`);try{return await $t(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Et(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,a={}){try{return await $t(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:ni})}catch(r){if(Et(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:a}=t,r=NF(t,["options"]),n=Object.assign(Object.assign({},r),a);return"newEmail"in r&&(n.new_email=r==null?void 0:r.newEmail,delete n.newEmail),await $t(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:wF,redirectTo:a==null?void 0:a.redirectTo})}catch(a){if(Et(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(t){try{return await $t(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ni})}catch(a){if(Et(a))return{data:{user:null},error:a};throw a}}async listUsers(t){var a,r,n,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},A=await $t(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(a=t==null?void 0:t.page)===null||a===void 0?void 0:a.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Lb});if(A.error)throw A.error;const u=await A.json(),x=(o=A.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=A.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);d[`${b}Page`]=g}),d.total=parseInt(x)),{data:Object.assign(Object.assign({},u),d),error:null}}catch(d){if(Et(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){Oo(t);try{return await $t(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ni})}catch(a){if(Et(a))return{data:{user:null},error:a};throw a}}async updateUserById(t,a){Oo(t);try{return await $t(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:a,headers:this.headers,xform:ni})}catch(r){if(Et(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,a=!1){Oo(t);try{return await $t(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:a},xform:ni})}catch(r){if(Et(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Oo(t.userId);try{const{data:a,error:r}=await $t(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:a,error:r}}catch(a){if(Et(a))return{data:null,error:a};throw a}}async _deleteFactor(t){Oo(t.userId),Oo(t.id);try{return{data:await $t(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(a){if(Et(a))return{data:null,error:a};throw a}}async _listOAuthClients(t){var a,r,n,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},A=await $t(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(a=t==null?void 0:t.page)===null||a===void 0?void 0:a.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Lb});if(A.error)throw A.error;const u=await A.json(),x=(o=A.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=A.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);d[`${b}Page`]=g}),d.total=parseInt(x)),{data:Object.assign(Object.assign({},u),d),error:null}}catch(d){if(Et(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await $t(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(Et(a))return{data:null,error:a};throw a}}async _getOAuthClient(t){try{return await $t(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(Et(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(t){try{return await $t(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(Et(a))return{data:null,error:a};throw a}}async _regenerateOAuthClientSecret(t){try{return await $t(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(Et(a))return{data:null,error:a};throw a}}}function Tb(s={}){return{getItem:t=>s[t]||null,setItem:(t,a)=>{s[t]=a},removeItem:t=>{delete s[t]}}}const Ho={debug:!!(globalThis&&Rj()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Hj extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class CF extends Hj{}async function BF(s,t,a){Ho.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Ho.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){Ho.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,n.name);try{return await a()}finally{Ho.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,n.name)}}else{if(t===0)throw Ho.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new CF(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Ho.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}}))}function SF(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function qj(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function kF(s){return parseInt(s,16)}function EF(s){const t=new TextEncoder().encode(s);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function FF(s){var t;const{chainId:a,domain:r,expirationTime:n,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:d,scheme:A,uri:u,version:x}=s;{if(!Number.isInteger(a))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${a}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!u)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((t=s.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const m=qj(s.address),y=A?`${A}://${r}`:r,g=s.statement?`${s.statement}
`:"",b=`${y} wants you to sign in with your Ethereum account:
${m}

${g}`;let p=`URI: ${u}
Version: ${x}
Chain ID: ${a}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(n&&(p+=`
Expiration Time: ${n.toISOString()}`),l&&(p+=`
Not Before: ${l.toISOString()}`),c&&(p+=`
Request ID: ${c}`),d){let v=`
Resources:`;for(const N of d){if(!N||typeof N!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);v+=`
- ${N}`}p+=v}return`${b}
${p}`}class na extends Error{constructor({message:t,code:a,cause:r,name:n}){var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=n??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=a}}class Fu extends na{constructor(t,a){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a,message:t}),this.name="WebAuthnUnknownError",this.originalError=a}}function UF({error:s,options:t}){var a,r,n;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(t.signal instanceof AbortSignal)return new na({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.requireResidentKey)===!0)return new na({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(t.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new na({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new na({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new na({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new na({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new na({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new na({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const o=window.location.hostname;if(Vj(o)){if(i.rp.id!==o)return new na({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new na({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new na({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new na({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new na({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function DF({error:s,options:t}){const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(t.signal instanceof AbortSignal)return new na({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new na({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const r=window.location.hostname;if(Vj(r)){if(a.rpId!==r)return new na({message:`The RP ID "${a.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new na({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new na({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new na({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}var $j=function(s,t){var a={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&t.indexOf(r)<0&&(a[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(s);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(s,r[n])&&(a[r[n]]=s[r[n]]);return a};class IF{createNewAbortSignal(){if(this.controller){const a=new Error("Cancelling existing WebAuthn API call for new one");a.name="AbortError",this.controller.abort(a)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const LF=new IF;function TF(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:t,user:a,excludeCredentials:r}=s,n=$j(s,["challenge","user","excludeCredentials"]),i=fl(t).buffer,o=Object.assign(Object.assign({},a),{id:fl(a.id).buffer}),l=Object.assign(Object.assign({},n),{challenge:i,user:o});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const d=r[c];l.excludeCredentials[c]=Object.assign(Object.assign({},d),{id:fl(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function QF(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:t,allowCredentials:a}=s,r=$j(s,["challenge","allowCredentials"]),n=fl(t).buffer,i=Object.assign(Object.assign({},r),{challenge:n});if(a&&a.length>0){i.allowCredentials=new Array(a.length);for(let o=0;o<a.length;o++){const l=a[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:fl(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function PF(s){var t;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const a=s;return{id:s.id,rawId:s.id,response:{attestationObject:Gi(new Uint8Array(s.response.attestationObject)),clientDataJSON:Gi(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(t=a.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function MF(s){var t;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const a=s,r=s.getClientExtensionResults(),n=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:Gi(new Uint8Array(n.authenticatorData)),clientDataJSON:Gi(new Uint8Array(n.clientDataJSON)),signature:Gi(new Uint8Array(n.signature)),userHandle:n.userHandle?Gi(new Uint8Array(n.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=a.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Vj(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function Qb(){var s,t;return!!(ur()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator==null?void 0:navigator.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function RF(s){try{const t=await navigator.credentials.create(s);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Fu("Browser returned unexpected credential type",t)}:{data:null,error:new Fu("Empty credential response",t)}}catch(t){return{data:null,error:UF({error:t,options:s})}}}async function OF(s){try{const t=await navigator.credentials.get(s);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Fu("Browser returned unexpected credential type",t)}:{data:null,error:new Fu("Empty credential response",t)}}catch(t){return{data:null,error:DF({error:t,options:s})}}}const HF={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},qF={userVerification:"preferred",hints:["security-key"]};function Uu(...s){const t=n=>n!==null&&typeof n=="object"&&!Array.isArray(n),a=n=>n instanceof ArrayBuffer||ArrayBuffer.isView(n),r={};for(const n of s)if(n)for(const i in n){const o=n[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(a(o))r[i]=o;else if(t(o)){const l=r[i];t(l)?r[i]=Uu(l,o):r[i]=Uu(o)}else r[i]=o}return r}function $F(s,t){return Uu(HF,s,t||{})}function VF(s,t){return Uu(qF,s,t||{})}class KF{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:a,friendlyName:r,signal:n},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:a});if(!o)return{data:null,error:l};const c=n??LF.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:d}=o.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${r}`),d.displayName||(d.displayName=d.name)}switch(o.webauthn.type){case"create":{const d=$F(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:A,error:u}=await RF({publicKey:d,signal:c});return A?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:A}},error:null}:{data:null,error:u}}case"request":{const d=VF(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:A,error:u}=await OF(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:d,signal:c}));return A?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:A}},error:null}:{data:null,error:u}}}}catch(o){return Et(o)?{data:null,error:o}:{data:null,error:new qi("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:a,webauthn:r}){return this.client.mfa.verify({factorId:a,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:n}},i){if(!a)return{data:null,error:new Ad("rpId is required for WebAuthn authentication")};try{if(!Qb())return{data:null,error:new qi("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:a,rpOrigins:r},signal:n},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:a,rpOrigins:r,credential_response:c.credential_response}})}catch(o){return Et(o)?{data:null,error:o}:{data:null,error:new qi("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:n},i){if(!a)return{data:null,error:new Ad("rpId is required for WebAuthn registration")};try{if(!Qb())return{data:null,error:new qi("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(A=>{var u;return(u=A.data)===null||u===void 0?void 0:u.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===t&&x.status!=="unverified")}).then(A=>A?this.client.mfa.unenroll({factorId:A==null?void 0:A.id}):void 0),{data:null,error:l};const{data:c,error:d}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:a,rpOrigins:r},signal:n},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:a,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:d}}catch(o){return Et(o)?{data:null,error:o}:{data:null,error:new qi("Unexpected error in register",o)}}}}SF();const zF={url:HE,storageKey:qE,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:$E,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Pb(s,t,a){return await a()}const qo={};class ud{get jwks(){var t,a;return(a=(t=qo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(t){qo[this.storageKey]=Object.assign(Object.assign({},qo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,a;return(a=(t=qo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){qo[this.storageKey]=Object.assign(Object.assign({},qo[this.storageKey]),{cachedAt:t})}constructor(t){var a,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ud.nextInstanceID,ud.nextInstanceID+=1,this.instanceID>0&&ur()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},zF),t);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new _F({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Oj(n.fetch),this.lock=n.lock||Pb,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:ur()&&(!((a=globalThis==null?void 0:globalThis.navigator)===null||a===void 0)&&a.locks)?this.lock=BF:this.lock=Pb,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new KF(this)},this.persistSession?(n.storage?this.storage=n.storage:Rj()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Tb(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=Tb(this.memoryStorage)),ur()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Qj}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const a=rF(window.location.href);let r="none";if(this._isImplicitGrantCallback(a)?r="implicit":await this._isPKCECallback(a)&&(r="pkce"),ur()&&this.detectSessionInUrl&&r!=="none"){const{data:n,error:i}=await this._getSessionFromURL(a,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),JE(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return Et(a)?{error:a}:{error:new qi("Unexpected error during initialization",a)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var a,r,n;try{const i=await $t(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.captchaToken}},xform:qr}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(Et(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var a,r,n;try{let i;if("email"in t){const{email:A,password:u,options:x}=t;let m=null,y=null;this.flowType==="pkce"&&([m,y]=await Ro(this.storage,this.storageKey)),i=await $t(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:A,password:u,data:(a=x==null?void 0:x.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:m,code_challenge_method:y},xform:qr})}else if("phone"in t){const{phone:A,password:u,options:x}=t;i=await $t(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:A,password:u,data:(r=x==null?void 0:x.data)!==null&&r!==void 0?r:{},channel:(n=x==null?void 0:x.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:qr})}else throw new BA("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(Et(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let a;if("email"in t){const{email:i,password:o,options:l}=t;a=await $t(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ib})}else if("phone"in t){const{phone:i,password:o,options:l}=t;a=await $t(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ib})}else throw new BA("You must provide either an email or phone number and a password");const{data:r,error:n}=a;return n?{data:{user:null,session:null},error:n}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Mo}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(a){if(Et(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOAuth(t){var a,r,n,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:a}=t;switch(a){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}}async signInWithEthereum(t){var a,r,n,i,o,l,c,d,A,u,x;let m,y;if("message"in t)m=t.message,y=t.signature;else{const{chain:g,wallet:b,statement:p,options:v}=t;let N;if(ur())if(typeof b=="object")N=b;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")N=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=b}const D=new URL((a=v==null?void 0:v.url)!==null&&a!==void 0?a:window.location.href),S=await N.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=qj(S[0]);let R=(r=v==null?void 0:v.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!R){const C=await N.request({method:"eth_chainId"});R=kF(C)}const _={domain:D.host,address:E,statement:p,uri:D.href,version:"1",chainId:R,nonce:(n=v==null?void 0:v.signInWithEthereum)===null||n===void 0?void 0:n.nonce,issuedAt:(o=(i=v==null?void 0:v.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=v==null?void 0:v.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=v==null?void 0:v.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=v==null?void 0:v.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(A=v==null?void 0:v.signInWithEthereum)===null||A===void 0?void 0:A.resources};m=FF(_),y=await N.request({method:"personal_sign",params:[EF(m),E]})}try{const{data:g,error:b}=await $t(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:y},!((u=t.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:qr});if(b)throw b;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new Mo}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:b})}catch(g){if(Et(g))return{data:{user:null,session:null},error:g};throw g}}async signInWithSolana(t){var a,r,n,i,o,l,c,d,A,u,x,m;let y,g;if("message"in t)y=t.message,g=t.signature;else{const{chain:b,wallet:p,statement:v,options:N}=t;let D;if(ur())if(typeof p=="object")D=p;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))D=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=p}const S=new URL((a=N==null?void 0:N.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in D&&D.signIn){const E=await D.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N==null?void 0:N.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),v?{statement:v}:null));let R;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")R=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)R=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)y=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),g=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in D)||typeof D.signMessage!="function"||!("publicKey"in D)||typeof D!="object"||!D.publicKey||!("toBase58"in D.publicKey)||typeof D.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${S.host} wants you to sign in with your Solana account:`,D.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(n=(r=N==null?void 0:N.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=N==null?void 0:N.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((o=N==null?void 0:N.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((l=N==null?void 0:N.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((c=N==null?void 0:N.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((d=N==null?void 0:N.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((u=(A=N==null?void 0:N.signInWithSolana)===null||A===void 0?void 0:A.resources)===null||u===void 0)&&u.length?["Resources",...N.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const E=await D.signMessage(new TextEncoder().encode(y),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=E}}try{const{data:b,error:p}=await $t(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Gi(g)},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:qr});if(p)throw p;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Mo}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:p})}catch(b){if(Et(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const a=await Ti(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(a??"").split("/");try{const{data:i,error:o}=await $t(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:qr});if(await Yn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Mo}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}catch(i){if(Et(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:a,provider:r,token:n,access_token:i,nonce:o}=t,l=await $t(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:qr}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Mo}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(a){if(Et(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOtp(t){var a,r,n,i,o;try{if("email"in t){const{email:l,options:c}=t;let d=null,A=null;this.flowType==="pkce"&&([d,A]=await Ro(this.storage,this.storageKey));const{error:u}=await $t(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:A},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:u}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:A}=await $t(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:A}}throw new BA("You must provide either an email or phone number.")}catch(l){if(Et(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var a,r;try{let n,i;"options"in t&&(n=(a=t.options)===null||a===void 0?void 0:a.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await $t(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:qr});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(Et(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(t){var a,r,n;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Ro(this.storage,this.storageKey)),await $t(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(a=t.options)===null||a===void 0?void 0:a.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=t==null?void 0:t.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:vF})}catch(i){if(Et(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:a},error:r}=t;if(r)throw r;if(!a)throw new ti;const{error:n}=await $t(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return{data:{user:null,session:null},error:n}})}catch(t){if(Et(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const a=`${this.url}/resend`;if("email"in t){const{email:r,type:n,options:i}=t,{error:o}=await $t(this.fetch,"POST",a,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:n,options:i}=t,{data:o,error:l}=await $t(this.fetch,"POST",a,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new BA("You must provide either an email or phone number and a type")}catch(a){if(Et(a))return{data:{user:null,session:null},error:a};throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(t,a){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await a()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=a();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await t(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const a=await Ti(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?t=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<qh:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await Ti(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Kh()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,A)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,A))})}return{data:{session:t},error:null}}const{data:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await $t(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:ni}):await this._useSession(async a=>{var r,n,i;const{data:o,error:l}=a;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ti}:await $t(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:ni})})}catch(a){if(Et(a))return WE(a)&&(await this._removeSession(),await Yn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:a};throw a}}async updateUser(t,a={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,a))}async _updateUser(t,a={}){try{return await this._useSession(async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new ti;const o=n.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Ro(this.storage,this.storageKey));const{data:d,error:A}=await $t(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a==null?void 0:a.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:ni});if(A)throw A;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Et(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ti;const a=Date.now()/1e3;let r=a,n=!0,i=null;const{payload:o}=Vh(t.access_token);if(o.exp&&(r=o.exp,n=r<=a),n){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-a,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(a){if(Et(a))return{data:{session:null,user:null},error:a};throw a}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async a=>{var r;if(!t){const{data:o,error:l}=a;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new ti;const{data:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(a){if(Et(a))return{data:{user:null,session:null},error:a};throw a}}async _getSessionFromURL(t,a){try{if(!ur())throw new SA("No browser detected.");if(t.error||t.error_description||t.error_code)throw new SA(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new Bb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new SA("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Bb("No code detected.");const{data:v,error:N}=await this._exchangeCodeForSession(t.code);if(N)throw N;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=t;if(!i||!l||!o||!d)throw new SA("No session defined in URL");const A=Math.round(Date.now()/1e3),u=parseInt(l);let x=A+u;c&&(x=parseInt(c));const m=x-A;m*1e3<=Xo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${u}s`);const y=x-u;A-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,x,A):A-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,x,A);const{data:g,error:b}=await this._getUser(i);if(b)throw b;const p={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:u,expires_at:x,refresh_token:o,token_type:d,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:t.type},error:null}}catch(r){if(Et(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const a=await Ti(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&a)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async a=>{var r;const{data:n,error:i}=a;if(i)return{error:i};const o=(r=n.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(GE(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Yn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const a=aF(),r={id:a,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async a=>{var r,n;try{const{data:{session:i},error:o}=a;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,a={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await Ro(this.storage,this.storageKey,!0));try{return await $t(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(i){if(Et(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:a,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=a.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(a){if(Et(a))return{data:null,error:a};throw a}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var a;try{const{data:r,error:n}=await this._useSession(async i=>{var o,l,c,d,A;const{data:u,error:x}=i;if(x)throw x;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await $t(this.fetch,"GET",m,{headers:this.headers,jwt:(A=(d=u.session)===null||d===void 0?void 0:d.access_token)!==null&&A!==void 0?A:void 0})});if(n)throw n;return ur()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Et(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async linkIdentityIdToken(t){return await this._useSession(async a=>{var r;try{const{error:n,data:{session:i}}=a;if(n)throw n;const{options:o,provider:l,token:c,access_token:d,nonce:A}=t,u=await $t(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:c,access_token:d,nonce:A,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:qr}),{data:x,error:m}=u;return m?{data:{user:null,session:null},error:m}:!x||!x.session||!x.user?{data:{user:null,session:null},error:new Mo}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),{data:x,error:m})}catch(n){if(Et(n))return{data:{user:null,session:null},error:n};throw n}})}async unlinkIdentity(t){try{return await this._useSession(async a=>{var r,n;const{data:i,error:o}=a;if(o)throw o;return await $t(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(a){if(Et(a))return{data:null,error:a};throw a}}async _refreshAccessToken(t){const a=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{const r=Date.now();return await oF(async n=>(n>0&&await iF(200*Math.pow(2,n-1)),this._debug(a,"refreshing attempt",n),await $t(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:qr})),(n,i)=>{const o=200*Math.pow(2,n);return i&&$h(i)&&Date.now()+o-r<Xo})}catch(r){if(this._debug(a,"error",r),Et(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(a,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,a){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",a,"url",r),ur()&&!a.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,a;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Ti(this.storage,this.storageKey);if(n&&this.userStorage){let o=await Ti(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:n.user},await Zo(this.userStorage,this.storageKey+"-user",o)),n.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Kh()}else if(n&&!n.user&&!n.user){const o=await Ti(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(n.user=o.user,await Yn(this.storage,this.storageKey+"-user"),await Zo(this.storage,this.storageKey,n)):n.user=Kh()}if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const i=((a=n.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<qh;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${qh}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),$h(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(n.access_token);!l&&(o!=null&&o.user)?(n.user=o.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var a,r;if(!t)throw new ti;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new xm;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new ti;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(n,"error",i),Et(i)){const o={data:null,error:i};return $h(i)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,a,r=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",a,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:a});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,a)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const a=Object.assign({},t),r=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&a.user&&await Zo(this.userStorage,this.storageKey+"-user",{user:a.user});const n=Object.assign({},a);delete n.user;const i=Ub(n);await Zo(this.storage,this.storageKey,i)}else{const n=Ub(a);await Zo(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await Yn(this.storage,this.storageKey),await Yn(this.storage,this.storageKey+"-code-verifier"),await Yn(this.storage,this.storageKey+"-user"),this.userStorage&&await Yn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ur()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Xo);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async a=>{const{data:{session:r}}=a;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-t)/Xo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Xo}ms, refresh threshold is ${g0} ticks`),n<=g0&&await this._callRefreshToken(r.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Hj)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ur()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const a=`#_onVisibilityChanged(${t})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,a,r){const n=[`provider=${encodeURIComponent(a)}`];if(r!=null&&r.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ro(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);n.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async a=>{var r;const{data:n,error:i}=a;return i?{data:null,error:i}:await $t(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(a){if(Et(a))return{data:null,error:a};throw a}}async _enroll(t){try{return await this._useSession(async a=>{var r,n;const{data:i,error:o}=a;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:d}=await $t(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&c.type==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(a){if(Et(a))return{data:null,error:a};throw a}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var r;const{data:n,error:i}=a;if(i)return{data:null,error:i};const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?PF(t.webauthn.credential_response):MF(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await $t(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(a){if(Et(a))return{data:null,error:a};throw a}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var r;const{data:n,error:i}=a;if(i)return{data:null,error:i};const o=await $t(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:TF(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:QF(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(a){if(Et(a))return{data:null,error:a};throw a}})}async _challengeAndVerify(t){const{data:a,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:a.id,code:t.code})}async _listFactors(){var t;const{data:{user:a},error:r}=await this.getUser();if(r)return{data:null,error:r};const n={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=a==null?void 0:a.factors)!==null&&t!==void 0?t:[])n.all.push(i),i.status==="verified"&&n[i.factor_type].push(i);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var a,r;const{data:{session:n},error:i}=t;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Vh(n.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(a=n.user.factors)===null||a===void 0?void 0:a.filter(u=>u.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const A=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:A},error:null}}))}async fetchJwk(t,a={keys:[]}){let r=a.keys.find(l=>l.kid===t);if(r)return r;const n=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+KE>n)return r;const{data:i,error:o}=await $t(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=n,r=i.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,a={}){try{let r=t;if(!r){const{data:m,error:y}=await this.getSession();if(y||!m.session)return{data:null,error:y};r=m.session.access_token}const{header:n,payload:i,signature:o,raw:{header:l,payload:c}}=Vh(r);a!=null&&a.allowExpired||hF(i.exp);const d=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,a!=null&&a.keys?{keys:a.keys}:a==null?void 0:a.jwks);if(!d){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:i,header:n,signature:o},error:null}}const A=xF(n.alg),u=await crypto.subtle.importKey("jwk",d,A,!0,["verify"]);if(!await crypto.subtle.verify(A,u,o,tF(`${l}.${c}`)))throw new y0("Invalid JWT signature");return{data:{claims:i,header:n,signature:o},error:null}}catch(r){if(Et(r))return{data:null,error:r};throw r}}}ud.nextInstanceID=0;const GF=ud;class WF extends GF{constructor(t){super(t)}}var JF=function(s,t,a,r){function n(i){return i instanceof a?i:new a(function(o){o(i)})}return new(a||(a=Promise))(function(i,o){function l(A){try{d(r.next(A))}catch(u){o(u)}}function c(A){try{d(r.throw(A))}catch(u){o(u)}}function d(A){A.done?i(A.value):n(A.value).then(l,c)}d((r=r.apply(s,t||[])).next())})};class YF{constructor(t,a,r){var n,i,o;this.supabaseUrl=t,this.supabaseKey=a;const l=OE(t);if(!a)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:FE,realtime:DE,auth:Object.assign(Object.assign({},UE),{storageKey:c}),global:EE},A=RE(r??{},d);this.storageKey=(n=A.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=A.global.headers)!==null&&i!==void 0?i:{},A.accessToken?(this.accessToken=A.accessToken,this.auth=new Proxy({},{get:(u,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=A.auth)!==null&&o!==void 0?o:{},this.headers,A.global.fetch),this.fetch=QE(a,this._getAccessToken.bind(this),A.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},A.realtime)),this.rest=new zk(new URL("rest/v1",l).href,{headers:this.headers,schema:A.db.schema,fetch:this.fetch}),this.storage=new BE(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),A.accessToken||this._listenForAuthEvents()}get functions(){return new _k(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,a={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,a,r)}channel(t,a={config:{}}){return this.realtime.channel(t,a)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return JF(this,void 0,void 0,function*(){var t,a;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(a=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&a!==void 0?a:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:a,detectSessionInUrl:r,storage:n,userStorage:i,storageKey:o,flowType:l,lock:c,debug:d},A,u){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new WF({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),A),storageKey:o,autoRefreshToken:t,persistSession:a,detectSessionInUrl:r,storage:n,userStorage:i,flowType:l,lock:c,debug:d,fetch:u,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new dE(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,r)=>{this._handleTokenChanged(a,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,a,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const XF=(s,t,a)=>new YF(s,t,a);function ZF(){if(typeof window<"u"||typeof process>"u")return!1;const s=process.version;if(s==null)return!1;const t=s.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}ZF()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const eU=async()=>{const{data:s,error:t}=await se.from("employees").select("*").eq("active",!0).order("name",{ascending:!0});if(t)throw t;return s||[]},tU=async s=>{const{data:t,error:a}=await se.from("employees").insert([s]).select().single();if(a)throw a;return t},sU=async(s,t)=>{const{data:a,error:r}=await se.from("employees").update(t).eq("id",s).select().single();if(r)throw r;return a},aU=async s=>{const{error:t}=await se.from("employees").update({active:!1}).eq("id",s);if(t)throw t},rU=async()=>{const{data:s,error:t}=await se.from("user_invitations").select("*").order("created_at",{ascending:!1});if(t)throw t;return s||[]},nU=async s=>{const{data:t,error:a}=await se.from("user_invitations").insert([s]).select().single();if(a)throw a;return t},iU=async s=>{const{error:t}=await se.from("user_invitations").update({status:"cancelled"}).eq("id",s);if(t)throw t},oU=async()=>{const{error:s}=await se.rpc("expire_old_invitations");if(s)throw s},lU=async()=>{const{data:s,error:t}=await se.from("service_orders").select("*").order("created_at",{ascending:!1});if(t)throw t;return s||[]},cU=async s=>{const{data:t,error:a}=await se.from("service_orders").insert([s]).select().single();if(a)throw a;return t},Mb=async(s,t)=>{const{data:a,error:r}=await se.from("service_orders").update(t).eq("id",s).select().single();if(r)throw r;return a},Kj=async s=>{const{error:t}=await se.from("service_orders").delete().eq("id",s);if(t)throw t},cu=async s=>{const{data:t,error:a}=await se.from("service_orders").select("*").eq("id",s).single();if(a)throw a;return t},dU=async()=>{const{data:s,error:t}=await se.from("inventory_items").select("*").order("name",{ascending:!0});if(t)throw t;return s||[]},AU=async s=>{const{data:t,error:a}=await se.from("inventory_items").insert([s]).select().single();if(a)throw a;return t},uU=async(s,t)=>{const{data:a,error:r}=await se.from("inventory_items").update(t).eq("id",s).select().single();if(r)throw r;return a},mU=async s=>{const{error:t}=await se.from("inventory_items").update({active:!1}).eq("id",s);if(t)throw t},hU=async()=>{const{data:s}=await se.from("service_catalog").select("*").eq("active",!0);return s||[]},xU=async s=>{const{data:t}=await se.from("service_catalog").insert([s]).select().single();return t},pU=async(s,t)=>{const{data:a}=await se.from("service_catalog").update(t).eq("id",s).select().single();return a},gU=async s=>{await se.from("service_catalog").update({active:!1}).eq("id",s)},fU=async()=>{const{data:s,error:t}=await se.from("customers").select("*");if(t)throw console.error("Error fetching clients:",t),t;return(s||[]).map(a=>({id:a.id,name:a.nome_razao||"",email:a.email||"",phone:a.telefone||a.celular||"",address:"",client_type:a.tipo_pessoa==="juridica"?"PJ":"PF",document:a.tipo_pessoa==="juridica"?a.cnpj:a.cpf,company_name:a.nome_razao||"",trade_name:a.nome_fantasia||"",state_registration:a.inscricao_estadual||"",municipal_registration:a.inscricao_municipal||"",created_at:a.created_at,updated_at:a.updated_at}))},bU=async s=>{await se.from("customers").delete().eq("id",s)},yU=async s=>{const{data:t}=await se.from("contracts").select("*").eq("customer_id",s);return t||[]},vU=async s=>{const{data:t}=await se.from("contracts").insert([s]).select().single();return t},wU=async(s,t)=>{const{data:a}=await se.from("contracts").update(t).eq("id",s).select().single();return a},jU=async s=>{await se.from("contracts").delete().eq("id",s)},NU=async()=>{const{data:s,error:t}=await se.from("agenda_events").select(`
      *,
      customer:customers(
        id,
        nome_razao,
        nome_fantasia,
        email,
        telefone,
        celular,
        tipo_pessoa,
        cpf,
        cnpj
      ),
      employee:employees(
        id,
        name,
        email,
        phone
      ),
      service_order:service_orders(
        id,
        order_number,
        status
      )
    `).order("start_date",{ascending:!0});if(t)throw console.error("Error loading agenda events:",t),t;return console.log(` Loaded ${(s==null?void 0:s.length)||0} events from database`),s||[]},_U=async s=>{const{data:t}=await se.from("agenda_events").insert([s]).select().single();return t},Gh=async(s,t)=>{const{data:a}=await se.from("agenda_events").update(t).eq("id",s).select().single();return a},CU=async s=>{await se.from("agenda_events").delete().eq("id",s)},BU=async s=>{const{data:t,error:a}=await se.from("user_settings").select("*").eq("user_id",s).maybeSingle();if(a&&a.code!=="PGRST116")throw console.error("Error loading user settings:",a),a;return t||await SU(s)},SU=async s=>{const t={user_id:s,notifications_enabled:!0,email_notifications:!0,push_notifications:!0,sms_notifications:!1,notify_new_order:!0,notify_order_status:!0,notify_payment:!0,notify_deadline:!0,notify_team_mention:!0,theme:"light",language:"pt-BR",timezone:"America/Sao_Paulo",date_format:"DD/MM/YYYY",currency_format:"BRL",profile_visibility:"team",show_online_status:!0,allow_contact:!0,auto_backup:!0,backup_frequency:"daily",backup_time:"00:00",keep_backups_days:30,realtime_sync:!0,offline_mode:!0,sync_on_wifi_only:!1,default_view:"kanban",items_per_page:20,show_completed_tasks:!1,auto_refresh:!0,refresh_interval:30,two_factor_enabled:!1,session_timeout:60,require_password_change:!1,integrations:{},advanced_settings:{}},{data:a,error:r}=await se.from("user_settings").insert([t]).select().single();if(r)throw console.error("Error creating user settings:",r),r;return a},kU=async(s,t)=>{const{data:a,error:r}=await se.from("user_settings").update({...t,updated_at:new Date().toISOString()}).eq("user_id",s).select().single();if(r)throw console.error("Error updating user settings:",r),r;return console.log(" Settings saved successfully"),a},EU="https://hevvpugkhcmujiyncysq.supabase.co",FU="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhldnZwdWdraGNtdWppeW5jeXNxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3NjkwNDAsImV4cCI6MjA3NTM0NTA0MH0.THnFgVOEDqtcVTcEyzfSwvjvlkfxJjRmSZtn2woIYEs",se=XF(EU,FU);function UU({isOpen:s,onClose:t}){const[a,r]=j.useState(""),[n,i]=j.useState([]),[o,l]=j.useState(!1),[c,d]=j.useState(0),A=ys(),u=[{id:"new-os",type:"action",title:"Nova Ordem de Servio",subtitle:"Criar OS rapidamente",url:"/service-orders/create",icon:e.jsx(bt,{className:"w-5 h-5 text-blue-600"}),badge:"Ctrl+N"},{id:"new-cliente",type:"action",title:"Novo Cliente",subtitle:"Cadastrar cliente",url:"/clients/new",icon:e.jsx(bt,{className:"w-5 h-5 text-green-600"})},{id:"new-lancamento",type:"action",title:"Novo Lanamento",subtitle:"Adicionar receita/despesa",url:"/financial/new",icon:e.jsx(bt,{className:"w-5 h-5 text-purple-600"})}],x=j.useCallback(async m=>{if(!m||m.length<2){i(u);return}l(!0);try{const y=[],g=m.toLowerCase(),{data:b}=await se.from("service_orders").select("id, order_number, client_name, status").or(`order_number.ilike.%${m}%,client_name.ilike.%${m}%`).limit(3);b==null||b.forEach(S=>{y.push({id:S.id,type:"os",title:`OS #${S.order_number}`,subtitle:S.client_name,url:`/service-orders/${S.id}`,icon:e.jsx(ut,{className:"w-5 h-5 text-blue-600"}),badge:S.status})});const{data:p}=await se.from("customers").select("id, name, document, phone").or(`name.ilike.%${m}%,document.ilike.%${m}%,phone.ilike.%${m}%`).limit(3);p==null||p.forEach(S=>{y.push({id:S.id,type:"cliente",title:S.name,subtitle:S.document||S.phone,url:`/clients/${S.id}`,icon:e.jsx(Nt,{className:"w-5 h-5 text-green-600"})})});const{data:v}=await se.from("employees").select("id, name, role, phone").or(`name.ilike.%${m}%,role.ilike.%${m}%`).limit(3);v==null||v.forEach(S=>{y.push({id:S.id,type:"funcionario",title:S.name,subtitle:S.role||S.phone,url:`/employees/${S.id}`,icon:e.jsx(v3,{className:"w-5 h-5 text-purple-600"})})});const{data:N}=await se.from("inventory_items").select("id, name, sku, current_stock").or(`name.ilike.%${m}%,sku.ilike.%${m}%`).limit(3);N==null||N.forEach(S=>{y.push({id:S.id,type:"material",title:S.name,subtitle:`SKU: ${S.sku} | Estoque: ${S.current_stock}`,url:`/inventory/${S.id}`,icon:e.jsx(wt,{className:"w-5 h-5 text-orange-600"})})});const{data:D}=await se.from("finance_entries").select("id, description, amount, type, due_date").ilike("description",`%${m}%`).order("due_date",{ascending:!1}).limit(3);D==null||D.forEach(S=>{y.push({id:S.id,type:"financeiro",title:S.description,subtitle:`R$ ${S.amount.toFixed(2)} - ${new Date(S.due_date).toLocaleDateString()}`,url:`/financial/${S.id}`,icon:e.jsx(Ut,{className:"w-5 h-5 text-emerald-600"}),badge:S.type==="receita"?"Receita":"Despesa"})}),i(y.length>0?y:[{id:"no-results",type:"action",title:"Nenhum resultado encontrado",subtitle:`Nada encontrado para "${m}"`,url:"#",icon:e.jsx(Qt,{className:"w-5 h-5 text-gray-400"})}])}catch(y){console.error("Erro na busca:",y)}finally{l(!1)}},[]);return j.useEffect(()=>{const m=setTimeout(()=>{x(a)},300);return()=>clearTimeout(m)},[a,x]),j.useEffect(()=>{if(!s)return;const m=y=>{if((y.ctrlKey||y.metaKey)&&y.key==="k"){y.preventDefault(),y.stopPropagation();return}y.key==="Escape"?(y.preventDefault(),t()):y.key==="ArrowDown"?(y.preventDefault(),y.stopPropagation(),d(g=>Math.min(g+1,n.length-1))):y.key==="ArrowUp"?(y.preventDefault(),y.stopPropagation(),d(g=>Math.max(g-1,0))):y.key==="Enter"&&(y.preventDefault(),y.stopPropagation(),n[c]&&(A(n[c].url),t()))};return window.addEventListener("keydown",m,{capture:!0}),()=>window.removeEventListener("keydown",m,{capture:!0})},[s,n,c,A,t]),j.useEffect(()=>{s&&(r(""),i(u),d(0))},[s]),s?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-[20vh] px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),e.jsxs("div",{className:"relative w-full max-w-2xl bg-white rounded-xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 border-b border-gray-200",children:[e.jsx(Qt,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),e.jsx("input",{type:"text",value:a,onChange:m=>r(m.target.value),placeholder:"Buscar OSs, clientes, funcionrios, materiais...",className:"flex-1 text-lg bg-transparent border-none outline-none",autoFocus:!0}),o&&e.jsx(ro,{className:"w-5 h-5 text-blue-600 animate-spin"}),e.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ht,{className:"w-5 h-5 text-gray-400"})})]}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:n.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(Qt,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),e.jsx("p",{children:"Digite para buscar..."})]}):e.jsx("div",{className:"py-2",children:n.map((m,y)=>e.jsxs("button",{onClick:()=>{m.url!=="#"&&(A(m.url),t())},className:`w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition-colors ${y===c?"bg-blue-50":""}`,children:[e.jsx("div",{className:"flex-shrink-0",children:m.icon}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"font-medium text-gray-900",children:m.title}),m.subtitle&&e.jsx("div",{className:"text-sm text-gray-500",children:m.subtitle})]}),m.badge&&e.jsx("div",{className:"flex-shrink-0 text-xs px-2 py-1 bg-gray-100 text-gray-600 rounded",children:m.badge})]},m.id))})}),e.jsxs("div",{className:"px-4 py-2 border-t border-gray-200 flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded border border-gray-300 font-mono",children:""}),e.jsx("span",{children:"Navegar"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded border border-gray-300 font-mono",children:"Enter"}),e.jsx("span",{children:"Selecionar"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded border border-gray-300 font-mono",children:"Esc"}),e.jsx("span",{children:"Fechar"})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(I3,{className:"w-3 h-3"}),e.jsx("span",{children:"+K para abrir"})]})]})]})]}):null}function DU(){const[s,t]=j.useState(!1);return j.useEffect(()=>{const a=r=>{(r.metaKey||r.ctrlKey)&&r.key==="k"&&(r.preventDefault(),r.stopPropagation(),t(n=>!n)),r.key==="Escape"&&t(!1)};return window.addEventListener("keydown",a,{capture:!0}),()=>window.removeEventListener("keydown",a,{capture:!0})},[]),{isSearchOpen:s,openSearch:()=>t(!0),closeSearch:()=>t(!1)}}function IU({isOpen:s,onClose:t}){const[a,r]=j.useState(""),[n,i]=j.useState([]),[o,l]=j.useState(0),[c,d]=j.useState(!1),A=ys(),u=j.useRef(null),x=[{id:"new-os",type:"action",title:"Nova Ordem de Servio",icon:e.jsx(bt,{className:"h-4 w-4"}),link:"/service-orders/create"},{id:"new-customer",type:"action",title:"Novo Cliente",icon:e.jsx(Nt,{className:"h-4 w-4"}),link:"/customers/new"},{id:"new-finance",type:"action",title:"Novo Lanamento Financeiro",icon:e.jsx(Ut,{className:"h-4 w-4"}),link:"/financial/new"},{id:"dashboard",type:"page",title:"Dashboard",icon:e.jsx(zt,{className:"h-4 w-4"}),link:"/dashboard"},{id:"service-orders",type:"page",title:"Ordens de Servio",icon:e.jsx(ut,{className:"h-4 w-4"}),link:"/service-orders"},{id:"customers",type:"page",title:"Clientes",icon:e.jsx(Nt,{className:"h-4 w-4"}),link:"/client-management"},{id:"inventory",type:"page",title:"Estoque",icon:e.jsx(wt,{className:"h-4 w-4"}),link:"/inventory"},{id:"settings",type:"page",title:"Configuraes",icon:e.jsx(xr,{className:"h-4 w-4"}),link:"/settings"}];j.useEffect(()=>{var v;s&&((v=u.current)==null||v.focus(),r(""),l(0))},[s]),j.useEffect(()=>{if(a.trim()===""){i(x);return}m(a)},[a]);const m=async v=>{d(!0);const N=[];try{const D=v.toLowerCase(),{data:S}=await se.from("service_orders").select("id, order_number, status").or(`order_number.ilike.%${v}%,status.ilike.%${v}%`).limit(5);S==null||S.forEach(L=>{N.push({id:L.id,type:"service_order",title:`OS #${L.order_number}`,subtitle:L.status,icon:e.jsx(ut,{className:"h-4 w-4"}),link:`/service-orders/${L.id}`})});const{data:E}=await se.from("customers").select("id, name, email").or(`name.ilike.%${v}%,email.ilike.%${v}%`).limit(5);E==null||E.forEach(L=>{N.push({id:L.id,type:"customer",title:L.name,subtitle:L.email,icon:e.jsx(Nt,{className:"h-4 w-4"}),link:`/client-management?customer=${L.id}`})});const{data:R}=await se.from("service_catalog").select("id, name, category").ilike("name",`%${v}%`).limit(5);R==null||R.forEach(L=>{N.push({id:L.id,type:"product",title:L.name,subtitle:L.category,icon:e.jsx(wt,{className:"h-4 w-4"}),link:`/service-catalog/${L.id}`})});const{data:_}=await se.from("employees").select("id, name, role").ilike("name",`%${v}%`).limit(5);_==null||_.forEach(L=>{N.push({id:L.id,type:"employee",title:L.name,subtitle:L.role,icon:e.jsx(Nt,{className:"h-4 w-4"}),link:`/employees/${L.id}`})});const C=x.filter(L=>L.title.toLowerCase().includes(D));i([...C,...N])}catch(D){console.error("Error searching:",D)}finally{d(!1)}},y=v=>{v.key==="ArrowDown"?(v.preventDefault(),l(N=>(N+1)%n.length)):v.key==="ArrowUp"?(v.preventDefault(),l(N=>(N-1+n.length)%n.length)):v.key==="Enter"?(v.preventDefault(),n[o]&&g(n[o])):v.key==="Escape"&&t()},g=v=>{A(v.link),t()},b=v=>{switch(v){case"service_order":return"Ordem de Servio";case"customer":return"Cliente";case"product":return"Produto/Servio";case"employee":return"Funcionrio";case"action":return"Ao Rpida";case"page":return"Pgina";default:return""}},p=v=>{switch(v){case"service_order":return"text-blue-600 bg-blue-50";case"customer":return"text-green-600 bg-green-50";case"product":return"text-purple-600 bg-purple-50";case"employee":return"text-orange-600 bg-orange-50";case"action":return"text-red-600 bg-red-50";case"page":return"text-gray-600 bg-gray-50";default:return"text-gray-600 bg-gray-50"}};return s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 transition-opacity",onClick:t}),e.jsx("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 w-full max-w-2xl z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-gray-200",children:[e.jsx(Qt,{className:"h-5 w-5 text-gray-400 mr-3"}),e.jsx("input",{ref:u,type:"text",value:a,onChange:v=>r(v.target.value),onKeyDown:y,placeholder:"Buscar em tudo... ( para navegar, Enter para selecionar, Esc para fechar)",className:"flex-1 outline-none text-gray-900 placeholder-gray-400"}),c&&e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})]}),e.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:n.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(Qt,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"Nenhum resultado encontrado"}),e.jsx("p",{className:"text-sm mt-1",children:"Tente buscar por nome, nmero ou categoria"})]}):e.jsxs("div",{className:"py-2",children:[a===""&&e.jsx("div",{className:"px-3 py-2",children:e.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Aes Rpidas"})}),n.map((v,N)=>e.jsxs("button",{onClick:()=>g(v),className:`w-full px-4 py-3 flex items-center gap-3 hover:bg-gray-50 transition-colors ${N===o?"bg-blue-50 border-l-4 border-blue-600":""}`,children:[e.jsx("div",{className:`p-2 rounded-lg ${p(v.type)}`,children:v.icon}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"font-medium text-gray-900",children:v.title}),v.subtitle&&e.jsx("div",{className:"text-sm text-gray-500",children:v.subtitle})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${p(v.type)}`,children:b(v.type)}),e.jsx(za,{className:"h-4 w-4 text-gray-400"})]})]},v.id))]})}),e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{children:" Navegar"}),e.jsx("span",{children:"Enter Selecionar"}),e.jsx("span",{children:"Esc Fechar"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-2 py-1 bg-white border border-gray-300 rounded",children:"Ctrl"}),e.jsx("span",{children:"+"}),e.jsx("kbd",{className:"px-2 py-1 bg-white border border-gray-300 rounded",children:"K"})]})]})]})})]}):null}function LU(){const[s,t]=j.useState(!1);return j.useEffect(()=>{const a=r=>{(r.metaKey||r.ctrlKey)&&r.key==="k"&&(r.preventDefault(),t(!0))};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[]),{isOpen:s,open:()=>t(!0),close:()=>t(!1),toggle:()=>t(a=>!a)}}function TU(){const s=ys(),t=zu(),a=[{icon:e.jsx(gj,{className:"h-6 w-6"}),label:"Incio",path:"/dashboard"},{icon:e.jsx(ut,{className:"h-6 w-6"}),label:"OSs",path:"/service-orders"},{icon:e.jsx(bt,{className:"h-8 w-8"}),label:"Criar",path:"/service-orders/create"},{icon:e.jsx(En,{className:"h-6 w-6"}),label:"Alertas",path:"/notifications",badge:3},{icon:e.jsx(Jt,{className:"h-6 w-6"}),label:"Perfil",path:"/profile"}],r=n=>t.pathname===n||t.pathname.startsWith(n+"/");return e.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50 safe-area-inset-bottom",children:e.jsx("div",{className:"flex items-center justify-around h-16 px-2",children:a.map((n,i)=>{const o=r(n.path),l=i===2;return e.jsx("button",{onClick:()=>s(n.path),className:`flex flex-col items-center justify-center flex-1 relative ${l?"transform -translate-y-6":""}`,children:l?e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-600 to-blue-700 rounded-full shadow-lg flex items-center justify-center text-white",children:n.icon}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`relative ${o?"text-blue-600":"text-gray-400"}`,children:[n.icon,n.badge&&n.badge>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center font-bold",children:n.badge>9?"9+":n.badge})]}),e.jsx("span",{className:`text-xs mt-1 font-medium ${o?"text-blue-600":"text-gray-600"}`,children:n.label})]})},n.path)})})})}const QU=()=>{"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").catch(()=>{})})},PU=()=>/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),zj=j.createContext(void 0),rs=()=>{const s=j.useContext(zj);if(s===void 0)throw new Error("useUser must be used within a UserProvider");return s},MU=({children:s})=>{const[t,a]=j.useState(null),[r,n]=j.useState(null),[i,o]=j.useState(!0);j.useEffect(()=>{const p="00000000-0000-0000-0000-000000000001",v={id:p,email:"admin@sistema.com",name:"Administrador",role:"admin",avatar:void 0,status:"active",department_id:void 0,phone:void 0,permissions:["view_dashboard","manage_orders","view_orders","manage_clients","view_clients","manage_inventory","view_inventory","manage_financial","view_financial","view_bank_balances","manage_users","system_settings"]},N={id:p,email:"admin@sistema.com",aud:"authenticated",role:"authenticated",created_at:new Date().toISOString(),app_metadata:{},user_metadata:{}};n(v),a({...v,authUser:N}),o(!1)},[]);const l=(r==null?void 0:r.role)==="admin",c=(r==null?void 0:r.role)==="manager",d=(r==null?void 0:r.role)==="technician",A=(r==null?void 0:r.role)==="external",u=l||c,x=l,m=p=>{var v;return l?!0:((v=r==null?void 0:r.permissions)==null?void 0:v.includes(p))||!1},y=async(p,v)=>{console.log("Login simulado:",p)},g=async()=>{console.log("Logout simulado")},b=p=>{console.log("Premium feature requested:",p)};return e.jsx(zj.Provider,{value:{user:t,profile:r,isLoading:i,isAdmin:l,isManager:c,isTechnician:d,isExternal:A,isPremium:u,isEnterprise:x,hasPermission:m,login:y,logout:g,onPremiumFeature:b},children:s})},fc=[{id:"inicio",path:"/",icon:Yp,label:"Dashboard CFO",description:"20+ KPIs executivos em tempo real para decises estratgicas"},{id:"agenda",path:"/calendar",icon:Ot,label:"Agenda",description:"Compromissos e eventos"},{id:"clients",path:"/client-management",icon:Nt,label:"Clientes",description:"Gesto de clientes PF/PJ"},{id:"rfm",path:"/customer-rfm",icon:Pa,label:"Anlise RFM",description:"Segmentao inteligente de clientes por Recncia, Frequncia e Valor"},{id:"fornecedores",path:"/suppliers",icon:Er,label:"Fornecedores",description:"Gesto de fornecedores"},{id:"compras",path:"/purchasing",icon:Sn,label:"Compras",description:"Pedidos e alertas de estoque"},{id:"google-ads",path:"/google-ads-tracking",icon:Pa,label:"Google Ads Premium",description:"Rastreamento em tempo real de cliques, converses e ROI das suas campanhas"},{id:"service-orders",path:"/service-orders",icon:ea,label:"Ordens de Servio",description:"Gesto de OS"},{id:"rotas",path:"/rotas",icon:no,label:"Rotas",description:"Rastreamento e gesto de rotas"},{id:"financeiro",path:"/financeiro",icon:Ut,label:"Financeiro",description:"Centro financeiro completo com dashboard, movimentaes, anlises, contas e categorias"},{id:"salarios",path:"/salary-management",icon:Ut,label:"Gesto de Salrios",description:"Controle de pagamentos de salrios com suporte a parcelas e histrico completo"},{id:"executivo",path:"/executivo",icon:zt,label:"Consolidado Executivo",description:"Viso consolidada com Credit Scoring, Metas & Targets e anlises estratgicas"},{id:"relatorios",path:"/relatorios",icon:ut,label:"Relatrios",description:"Todos os relatrios: dashboards interativos, PDFs profissionais e anlises customizadas"},{id:"catalogo",path:"/service-catalog",icon:dd,label:"Catlogo de Servios",description:"Servios disponveis"},{id:"inventory",path:"/inventory",icon:wt,label:"Estoque",description:"Controle de materiais"},{id:"automacoes",path:"/automacoes",icon:gi,label:"Automaes",description:"Workflows e automaes"},{id:"whatsapp-crm",path:"/whatsapp-crm",icon:gl,label:"WhatsApp CRM",description:"Gesto de conversas"},{id:"thomaz",path:"/thomaz",icon:xl,label:"Thomaz AI",description:"Consultor Empresarial"},{id:"thomaz-metrics",path:"/thomaz-metrics",icon:xl,label:"Mtricas Thomaz",description:"Performance da IA"},{id:"email",path:"/email/inbox",icon:Cs,label:"Email Corporativo",description:"Enviar e receber emails"},{id:"library",path:"/digital-library",icon:N6,label:"Biblioteca Digital",description:"Documentos e arquivos"},{id:"people",path:"/people",icon:Nt,label:"Gesto de Pessoas",description:"Funcionrios, usurios e acessos unificados"},{id:"audit",path:"/audit-logs",icon:os,label:"Auditoria",description:"Rastreamento de operaes"},{id:"document-templates",path:"/document-templates",icon:ut,label:"Templates de Documentos",description:"Gerenciar templates de OS, contratos e propostas"},{id:"settings",path:"/settings",icon:xr,label:"Configuraes",description:"Configuraes gerais"}],RU=({onCollapse:s})=>{var f;const t=zu(),{user:a,logout:r}=rs(),[n,i]=j.useState(!1),[o,l]=j.useState(fc),[c,d]=j.useState(null),[A,u]=j.useState(!1),[x,m]=j.useState(0),[y,g]=j.useState({total:0,meeting:0,pagar:0,cobrar:0,operational:0,other:0});j.useEffect(()=>{N().catch(M=>{console.error("Failed to load menu order:",M)}),p(),v();const F=setInterval(()=>{p(),v()},6e4);return()=>clearInterval(F)},[]);const b=()=>(a==null?void 0:a.email)||"default_user",p=async()=>{try{const{data:F,error:M}=await se.rpc("get_critical_stock_count");!M&&F!==null&&m(F)}catch(F){console.error("Error loading stock alerts:",F)}},v=async()=>{try{const{data:F,error:M}=await se.rpc("get_urgent_events_by_type");!M&&F!==null&&g(F)}catch(F){console.error("Error loading agenda alerts:",F)}},N=async()=>{try{const F=b(),{data:M,error:P}=await se.from("user_menu_order").select("menu_items").eq("user_id",F).maybeSingle();if(P){console.warn("Error loading menu order, using defaults:",P);return}if(M&&M.menu_items&&Array.isArray(M.menu_items)){const Z=M.menu_items,O=Z.map(q=>fc.find(V=>V.id===q)).filter(q=>q!==void 0),X=fc.filter(q=>!Z.includes(q.id));l([...O,...X])}}catch(F){console.error("Error loading menu order, using defaults:",F)}},D=async F=>{try{const M=b(),P=F.map(O=>O.id),{error:Z}=await se.from("user_menu_order").upsert({user_id:M,menu_items:P,updated_at:new Date().toISOString()},{onConflict:"user_id"});if(Z)throw Z}catch(M){console.error("Error saving menu order:",M)}},S=(F,M)=>{A&&(d(M),F.dataTransfer.effectAllowed="move")},E=F=>{A&&(F.preventDefault(),F.dataTransfer.dropEffect="move")},R=(F,M)=>{if(!A||!c)return;F.preventDefault();const P=o.findIndex(q=>q.id===c),Z=o.findIndex(q=>q.id===M);if(P===-1||Z===-1)return;const O=[...o],[X]=O.splice(P,1);O.splice(Z,0,X),l(O),D(O),d(null)},_=()=>{l(fc),D(fc)},C=()=>{const F=!n;i(F),s==null||s(F)},L=F=>t.pathname===F;return e.jsxs(W.aside,{initial:{x:0},animate:{width:n?"80px":"280px"},transition:{duration:.3},className:"fixed left-0 top-0 bg-gradient-to-b from-gray-900 to-gray-800 text-white h-screen flex flex-col shadow-2xl z-50",children:[e.jsx("div",{className:"p-4 border-b border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[!n&&e.jsxs(W.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center gap-2",children:[e.jsx(Yp,{className:"h-8 w-8 text-blue-400"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:"GiarTech"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Sistema Integrado"})]})]}),e.jsx("button",{onClick:C,className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",children:n?e.jsx(vd,{className:"h-5 w-5"}):e.jsx(od,{className:"h-5 w-5"})})]})}),!n&&e.jsxs("div",{className:"px-4 py-2 border-b border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>u(!A),className:`text-xs px-3 py-1 rounded transition-colors ${A?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:A?"Salvar Ordem":"Editar Menu"}),A&&e.jsxs("button",{onClick:_,className:"text-xs px-3 py-1 rounded bg-gray-700 text-gray-300 hover:bg-gray-600 flex items-center gap-1",title:"Restaurar ordem padro",children:[e.jsx(Zp,{className:"h-3 w-3"}),"Restaurar"]})]}),A&&e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Arraste os itens para reordenar"})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto p-4 space-y-1",children:o.map(F=>{const M=F.icon,P=L(F.path);return e.jsxs(dn,{to:F.path,draggable:A,onDragStart:Z=>S(Z,F.id),onDragOver:E,onDrop:Z=>R(Z,F.id),className:`flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all group relative ${P?"bg-blue-600 text-white shadow-lg":"hover:bg-gray-700 text-gray-300"} ${A?"cursor-move":"cursor-pointer"} ${c===F.id?"opacity-50":""}`,title:n?F.label:"",children:[A&&!n&&e.jsx(A6,{className:"h-4 w-4 text-gray-400"}),e.jsx(M,{className:`h-5 w-5 ${P?"text-white":"text-gray-400 group-hover:text-white"}`}),!n&&e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[e.jsx("p",{className:"font-medium truncate",children:F.label}),F.id==="compras"&&x>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs font-bold px-2 py-0.5 rounded-full animate-pulse",children:x}),F.id==="agenda"&&y.total>0&&e.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[y.meeting>0&&e.jsx("span",{className:"bg-blue-500 text-white text-xs font-bold px-1.5 py-0.5 rounded-full animate-pulse",title:"Reunies/Pessoal",children:y.meeting}),y.pagar>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs font-bold px-1.5 py-0.5 rounded-full animate-pulse",title:"Pagamentos",children:y.pagar}),y.cobrar>0&&e.jsx("span",{className:"bg-green-500 text-white text-xs font-bold px-1.5 py-0.5 rounded-full animate-pulse",title:"Cobranas",children:y.cobrar}),y.operational>0&&e.jsx("span",{className:"bg-orange-500 text-white text-xs font-bold px-1.5 py-0.5 rounded-full animate-pulse",title:"Operacional",children:y.operational}),y.other>0&&e.jsx("span",{className:"bg-purple-500 text-white text-xs font-bold px-1.5 py-0.5 rounded-full animate-pulse",title:"Outros",children:y.other})]})]}),e.jsx("p",{className:"text-xs opacity-75 truncate",children:F.description})]}),F.id==="compras"&&x>0&&n&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold px-1.5 py-0.5 rounded-full animate-pulse min-w-[20px] text-center",children:x}),F.id==="agenda"&&y.total>0&&n&&e.jsxs("div",{className:"absolute -top-1 -right-1 flex flex-col gap-0.5",children:[y.meeting>0&&e.jsx("span",{className:"bg-blue-500 text-white text-[10px] font-bold px-1 py-0.5 rounded-full animate-pulse min-w-[16px] text-center",title:"Reunies",children:y.meeting}),y.pagar>0&&e.jsx("span",{className:"bg-red-500 text-white text-[10px] font-bold px-1 py-0.5 rounded-full animate-pulse min-w-[16px] text-center",title:"Pagar",children:y.pagar}),y.cobrar>0&&e.jsx("span",{className:"bg-green-500 text-white text-[10px] font-bold px-1 py-0.5 rounded-full animate-pulse min-w-[16px] text-center",title:"Cobrar",children:y.cobrar}),y.operational>0&&e.jsx("span",{className:"bg-orange-500 text-white text-[10px] font-bold px-1 py-0.5 rounded-full animate-pulse min-w-[16px] text-center",title:"Operacional",children:y.operational}),y.other>0&&e.jsx("span",{className:"bg-purple-500 text-white text-[10px] font-bold px-1 py-0.5 rounded-full animate-pulse min-w-[16px] text-center",title:"Outros",children:y.other})]}),P&&!n&&e.jsx(W.div,{layoutId:"activeIndicator",className:"absolute right-0 top-0 bottom-0 w-1 bg-white rounded-l"})]},F.id)})}),e.jsx("div",{className:"p-4 border-t border-gray-700",children:n?e.jsx("button",{onClick:r,className:"w-full p-2 text-red-400 hover:bg-gray-700 rounded-lg transition-colors",title:"Sair",children:e.jsx(i0,{className:"h-5 w-5 mx-auto"})}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 bg-gray-800 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-bold",children:((f=a==null?void 0:a.name)==null?void 0:f[0])||"U"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:(a==null?void 0:a.name)||"Usurio"}),e.jsx("p",{className:"text-xs text-gray-400 truncate",children:(a==null?void 0:a.email)||"user@example.com"})]})]}),e.jsxs("button",{onClick:r,className:"w-full flex items-center gap-3 px-3 py-2 text-red-400 hover:bg-gray-700 rounded-lg transition-colors",children:[e.jsx(i0,{className:"h-5 w-5"}),e.jsx("span",{children:"Sair"})]})]})})]})},yt=({children:s})=>{const[t,a]=j.useState(!1),[r,n]=j.useState("calc(100% - 280px)"),[i,o]=j.useState("280px"),l=c=>{a(c)};return j.useEffect(()=>{t?(n("calc(100% - 80px)"),o("80px")):(n("calc(100% - 280px)"),o("280px"))},[t]),j.useEffect(()=>{const c=d=>{d.altKey&&d.key==="h"&&console.log("Quick access activated with Alt+H")};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[]),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(RU,{onCollapse:l}),e.jsx("main",{className:"min-h-screen transition-all duration-300",style:{marginLeft:i},children:s||e.jsx(Bv,{})})]})};function OU({isOpen:s,onClose:t}){const[a,r]=j.useState(""),[n,i]=j.useState([]),[o,l]=j.useState(!1),[c,d]=j.useState(0),[A,u]=j.useState([]),x=j.useRef(null),m=ys();j.useEffect(()=>{const v=localStorage.getItem("recentSearches");v&&u(JSON.parse(v))},[]),j.useEffect(()=>{s&&x.current&&x.current.focus()},[s]),j.useEffect(()=>{if(!a.trim()){i([]);return}const v=setTimeout(()=>{y(a)},300);return()=>clearTimeout(v)},[a]),j.useEffect(()=>{const v=N=>{s&&(N.key==="Escape"?t():N.key==="ArrowDown"?(N.preventDefault(),d(D=>Math.min(D+1,n.length-1))):N.key==="ArrowUp"?(N.preventDefault(),d(D=>Math.max(D-1,0))):N.key==="Enter"&&n[c]&&(N.preventDefault(),g(n[c])))};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[s,n,c]);const y=async v=>{l(!0);const N=[];try{const D=`%${v}%`,{data:S}=await se.from("service_orders").select("id, order_number, title, client_name, status").or(`order_number.ilike.${D},title.ilike.${D},client_name.ilike.${D}`).limit(5);S==null||S.forEach(f=>{N.push({id:f.id,title:`OS ${f.order_number||f.id}`,subtitle:f.title||f.client_name||"Sem ttulo",type:"os",url:`/service-orders/${f.id}`,icon:e.jsx(ut,{className:"h-5 w-5 text-blue-600"}),metadata:f.status})});const{data:E}=await se.from("customers").select("id, nome_razao, nome_fantasia, email, telefone").or(`nome_razao.ilike.${D},nome_fantasia.ilike.${D},email.ilike.${D}`).limit(5);E==null||E.forEach(f=>{N.push({id:f.id,title:f.nome_fantasia||f.nome_razao,subtitle:f.email||f.telefone||"Cliente",type:"customer",url:`/clientes/${f.id}`,icon:e.jsx(Nt,{className:"h-5 w-5 text-green-600"})})});const{data:R}=await se.from("inventory_items").select("id, name, sku, category").or(`name.ilike.${D},sku.ilike.${D}`).limit(5);R==null||R.forEach(f=>{N.push({id:f.id,title:f.name,subtitle:`SKU: ${f.sku||"N/A"} | ${f.category||"Produto"}`,type:"product",url:`/inventory/${f.id}`,icon:e.jsx(wt,{className:"h-5 w-5 text-purple-600"})})});const{data:_}=await se.from("employees").select("id, nome_completo, cargo, telefone").ilike("nome_completo",D).limit(5);_==null||_.forEach(f=>{N.push({id:f.id,title:f.nome_completo,subtitle:f.cargo||"Funcionrio",type:"employee",url:`/employees/${f.id}`,icon:e.jsx(Jt,{className:"h-5 w-5 text-orange-600"}),metadata:f.telefone})});const{data:C}=await se.from("finance_entries").select("id, descricao, valor, tipo, status").ilike("descricao",D).limit(5);C==null||C.forEach(f=>{N.push({id:f.id,title:f.descricao,subtitle:`R$ ${f.valor.toFixed(2)} - ${f.tipo}`,type:"finance",url:"/financeiro",icon:e.jsx(Ut,{className:"h-5 w-5 text-emerald-600"}),metadata:f.status})});const{data:L}=await se.from("agenda_events").select("id, title, start_date, event_type").ilike("title",D).limit(5);L==null||L.forEach(f=>{N.push({id:f.id,title:f.title,subtitle:new Date(f.start_date).toLocaleDateString("pt-BR"),type:"agenda",url:"/agenda",icon:e.jsx(Ot,{className:"h-5 w-5 text-indigo-600"}),metadata:f.event_type})}),i(N),d(0)}catch(D){console.error("Search error:",D)}finally{l(!1)}},g=v=>{const N=[a,...A.filter(D=>D!==a)].slice(0,5);u(N),localStorage.setItem("recentSearches",JSON.stringify(N)),m(v.url),t()},b=v=>{r(v)},p=()=>{u([]),localStorage.removeItem("recentSearches")};return s?e.jsx(rt,{children:e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:t}),e.jsx("div",{className:"flex min-h-screen items-start justify-center p-4 pt-[10vh]",children:e.jsxs(W.div,{initial:{opacity:0,scale:.95,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},className:"relative w-full max-w-2xl bg-white rounded-xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 border-b border-gray-200",children:[e.jsx(Qt,{className:"h-5 w-5 text-gray-400"}),e.jsx("input",{ref:x,type:"text",value:a,onChange:v=>r(v.target.value),placeholder:"Buscar OSs, clientes, produtos...",className:"flex-1 text-lg outline-none"}),o&&e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-blue-600 border-t-transparent"}),e.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ht,{className:"h-5 w-5 text-gray-400"})})]}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:!a.trim()&&A.length>0?e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(vt,{className:"h-4 w-4"}),e.jsx("span",{children:"Buscas Recentes"})]}),e.jsx("button",{onClick:p,className:"text-xs text-gray-500 hover:text-gray-700",children:"Limpar"})]}),e.jsx("div",{className:"space-y-1",children:A.map((v,N)=>e.jsx("button",{onClick:()=>b(v),className:"w-full text-left px-3 py-2 hover:bg-gray-50 rounded-lg transition-colors",children:v},N))})]}):n.length>0?e.jsx("div",{className:"p-2",children:n.map((v,N)=>e.jsxs("button",{onClick:()=>g(v),className:`w-full flex items-center gap-3 p-3 rounded-lg transition-colors ${N===c?"bg-blue-50 border border-blue-200":"hover:bg-gray-50"}`,children:[e.jsx("div",{className:"flex-shrink-0",children:v.icon}),e.jsxs("div",{className:"flex-1 text-left min-w-0",children:[e.jsx("div",{className:"font-medium text-gray-900 truncate",children:v.title}),e.jsx("div",{className:"text-sm text-gray-500 truncate",children:v.subtitle})]}),v.metadata&&e.jsx("div",{className:"flex-shrink-0 px-2 py-1 bg-gray-100 rounded text-xs text-gray-600",children:v.metadata}),e.jsx(za,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]},v.id))}):a.trim()?e.jsxs("div",{className:"p-12 text-center text-gray-500",children:[e.jsx(Qt,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"Nenhum resultado encontrado"}),e.jsx("p",{className:"text-sm mt-1",children:"Tente buscar por outro termo"})]}):e.jsxs("div",{className:"p-12 text-center text-gray-500",children:[e.jsx(Qt,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"Digite para buscar"}),e.jsx("p",{className:"text-sm mt-1",children:"OSs, clientes, produtos, funcionrios..."})]})}),e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-2 py-1 bg-white border border-gray-300 rounded",children:""}),"Navegar"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-2 py-1 bg-white border border-gray-300 rounded",children:"Enter"}),"Abrir"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-2 py-1 bg-white border border-gray-300 rounded",children:"Esc"}),"Fechar"]})]}),e.jsxs("span",{children:[n.length," resultado(s)"]})]})]})})]})}):null}function HU(){const[s,t]=j.useState(navigator.onLine),[a,r]=j.useState(!navigator.onLine),[n,i]=j.useState(!1);return j.useEffect(()=>{const o=()=>{t(!0),r(!0),setTimeout(()=>r(!1),3e3),"serviceWorker"in navigator&&"SyncManager"in window&&navigator.serviceWorker.ready.then(c=>{var d;return(d=c.sync)==null?void 0:d.register("sync-pending-requests")}).then(()=>{i(!0)}).catch(c=>{console.error("Sync registration failed:",c)})},l=()=>{t(!1),r(!0)};return window.addEventListener("online",o),window.addEventListener("offline",l),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",c=>{var d;((d=c.data)==null?void 0:d.type)==="SYNC_COMPLETE"&&(i(!1),console.log(`Synced ${c.data.count} pending requests`))}),()=>{window.removeEventListener("online",o),window.removeEventListener("offline",l)}},[]),s&&!a?null:e.jsx(rt,{children:a&&e.jsx(W.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50",children:e.jsx("div",{className:`flex items-center gap-3 px-6 py-3 rounded-full shadow-lg ${s?"bg-green-500 text-white":"bg-orange-500 text-white"}`,children:s?e.jsxs(e.Fragment,{children:[e.jsx(yj,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Conectado"}),n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-px bg-white/30"}),e.jsx(bs,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{className:"text-sm",children:"Sincronizando..."})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(c0,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Modo Offline"}),e.jsx("div",{className:"h-4 w-px bg-white/30"}),e.jsx(k3,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Dados em cache"})]})})})})}const qU=({customers:s,selectedCustomer:t,onSelect:a,onAddNew:r})=>{const[n,i]=j.useState(""),[o,l]=j.useState(!1),c=s.filter(d=>{var A,u,x;return((A=d.nome_razao)==null?void 0:A.toLowerCase().includes(n.toLowerCase()))||((u=d.cnpj_cpf)==null?void 0:u.includes(n))||((x=d.telefone)==null?void 0:x.includes(n))});return j.useEffect(()=>{t&&(i(t.nome_razao),l(!1))},[t]),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(Jt,{className:"h-5 w-5 text-blue-600"}),"Cliente"]}),r&&e.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(bt,{className:"h-4 w-4"}),"Novo Cliente"]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",value:n,onChange:d=>{i(d.target.value),l(!0),d.target.value||a(null)},onFocus:()=>l(!0),className:"w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Buscar cliente por nome, CPF/CNPJ ou telefone..."})]}),o&&c.length>0&&e.jsx("div",{className:"absolute z-50 w-full mt-2 bg-white border rounded-lg shadow-lg max-h-96 overflow-y-auto",children:c.slice(0,10).map(d=>e.jsx("button",{onClick:()=>{a(d),l(!1)},className:"w-full text-left px-4 py-3 hover:bg-blue-50 border-b last:border-b-0 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Er,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:d.nome_razao}),d.nome_fantasia&&e.jsx("p",{className:"text-sm text-gray-600",children:d.nome_fantasia}),e.jsxs("div",{className:"flex flex-wrap gap-3 mt-1 text-xs text-gray-500",children:[d.cnpj_cpf&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Er,{className:"h-3 w-3"}),d.cnpj_cpf]}),d.telefone&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(la,{className:"h-3 w-3"}),d.telefone]}),d.email&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Cs,{className:"h-3 w-3"}),d.email]}),d.cidade&&d.estado&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(da,{className:"h-3 w-3"}),d.cidade,"/",d.estado]})]})]})]})},d.id))})]}),t&&e.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:t.nome_razao}),t.nome_fantasia&&e.jsx("p",{className:"text-sm text-gray-600",children:t.nome_fantasia}),e.jsxs("div",{className:"mt-2 space-y-1 text-sm text-gray-600",children:[t.cnpj_cpf&&e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(Er,{className:"h-4 w-4"}),t.cnpj_cpf]}),t.telefone&&e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(la,{className:"h-4 w-4"}),t.telefone]}),t.email&&e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"h-4 w-4"}),t.email]})]})]}),e.jsx("button",{onClick:()=>{a(null),i("")},className:"text-gray-400 hover:text-red-600 transition-colors",children:""})]})})]})},$U=({serviceCatalog:s,onAddService:t,onAddCustomService:a})=>{const[r,n]=j.useState(""),[i,o]=j.useState(!1),l=s.filter(d=>{var A,u;return((A=d.nome)==null?void 0:A.toLowerCase().includes(r.toLowerCase()))||((u=d.descricao)==null?void 0:u.toLowerCase().includes(r.toLowerCase()))}),c=d=>{var x;const A={id:`service-${Date.now()}`,descricao:d.nome||"",quantidade:1,preco_unitario:parseFloat(d.preco_base||0),preco_total:parseFloat(d.preco_base||0),tempo_estimado_minutos:d.tempo_estimado_minutos||60,materiais:((x=d.materiais)==null?void 0:x.map(m=>({id:`mat-${Date.now()}-${Math.random()}`,material_id:m.material_id,nome:m.material_nome||m.nome||"",quantidade:m.quantidade||1,unidade_medida:m.unidade_medida||"un",preco_compra_unitario:parseFloat(m.preco_compra||0),preco_venda_unitario:parseFloat(m.preco_venda||m.preco_compra||0),preco_compra:parseFloat(m.preco_compra||0)*(m.quantidade||1),preco_venda:parseFloat(m.preco_venda||m.preco_compra||0)*(m.quantidade||1),custo_total:parseFloat(m.preco_compra||0)*(m.quantidade||1),valor_total:parseFloat(m.preco_venda||m.preco_compra||0)*(m.quantidade||1),lucro:(parseFloat(m.preco_venda||m.preco_compra||0)-parseFloat(m.preco_compra||0))*(m.quantidade||1)})))||[],funcionarios:[],custo_materiais:0,custo_mao_obra:0,custo_total:0,lucro:parseFloat(d.preco_base||0),margem_lucro:100},u=A.materiais.reduce((m,y)=>m+y.custo_total,0);A.custo_materiais=u,A.custo_total=u,A.lucro=A.preco_total-A.custo_total,A.margem_lucro=A.custo_total>0?A.lucro/A.preco_total*100:100,t(A),n(""),o(!1)};return e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 shadow-sm border-2 border-blue-200",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Fs,{className:"h-5 w-5 text-blue-600"}),"Adicionar Servio Rpido"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:r,onChange:d=>{n(d.target.value),o(!0)},onFocus:()=>o(!0),className:"w-full px-4 py-3 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white",placeholder:"Buscar servio do catlogo..."}),i&&l.length>0&&e.jsx("div",{className:"absolute z-50 w-full mt-2 bg-white border rounded-lg shadow-xl max-h-80 overflow-y-auto",children:l.slice(0,10).map(d=>e.jsx("button",{onClick:()=>c(d),className:"w-full text-left px-4 py-3 hover:bg-blue-50 border-b last:border-b-0 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:d.nome}),d.descricao&&e.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:d.descricao}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[d.tempo_estimado_minutos&&e.jsxs("span",{children:[d.tempo_estimado_minutos," min"]}),d.materiais&&d.materiais.length>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(wt,{className:"h-3 w-3"}),d.materiais.length," materiais"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-green-600",children:["R$ ",parseFloat(d.preco_base||0).toFixed(2)]}),d.custo_total>0&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Custo: R$ ",parseFloat(d.custo_total||0).toFixed(2)]})]})]})},d.id))})]}),e.jsxs("button",{onClick:a,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap flex items-center gap-2 font-medium",children:[e.jsx(bt,{className:"h-5 w-5"}),"Servio Customizado"]})]}),e.jsxs("div",{className:"mt-3 text-sm text-blue-700 bg-blue-100 rounded-lg p-3",children:[" ",e.jsx("strong",{children:"Dica:"})," Selecione um servio do catlogo para adicionar automaticamente com materiais pr-configurados"]})]})},VU=({item:s,index:t,onUpdate:a,onDelete:r,onAddMaterial:n,onAddLabor:i})=>{const[o,l]=j.useState(!1),c=u=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(u),d=u=>{const x=s.preco_unitario*u;a(s.id,{quantidade:u,preco_total:x})},A=u=>{const x=u*s.quantidade,m=x-s.custo_total,y=s.custo_total>0?m/x*100:100;a(s.id,{preco_unitario:u,preco_total:x,lucro:m,margem_lucro:y})};return e.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden hover:border-blue-300 transition-all",children:[e.jsx("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-blue-50",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-blue-600 text-white rounded-lg font-bold",children:t+1}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsx("input",{type:"text",value:s.descricao,onChange:u=>a(s.id,{descricao:u.target.value}),className:"w-full px-3 py-2 border rounded-lg font-medium focus:ring-2 focus:ring-blue-500",placeholder:"Descrio do servio"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Quantidade"}),e.jsx("input",{type:"number",value:s.quantidade,onChange:u=>d(parseFloat(u.target.value)||1),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",min:"0.01",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Preo Unit. (R$)"}),e.jsx("input",{type:"number",value:s.preco_unitario.toFixed(2),onChange:u=>A(parseFloat(u.target.value)||0),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Total"}),e.jsx("div",{className:"w-full px-3 py-2 bg-green-50 border border-green-300 rounded-lg font-bold text-green-700",children:c(s.preco_total)})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-blue-100 rounded-lg",children:[e.jsx(vt,{className:"h-4 w-4 text-blue-600"}),e.jsxs("span",{children:[s.tempo_estimado_minutos," min"]})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-amber-100 rounded-lg",children:[e.jsx(wt,{className:"h-4 w-4 text-amber-600"}),e.jsxs("span",{children:[s.materiais.length," materiais"]})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-purple-100 rounded-lg",children:[e.jsx(Nt,{className:"h-4 w-4 text-purple-600"}),e.jsxs("span",{children:[s.funcionarios.length," funcionrios"]})]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-lg ml-auto ${s.margem_lucro<20?"bg-red-100":s.margem_lucro<40?"bg-yellow-100":"bg-green-100"}`,children:[e.jsx(Ut,{className:`h-4 w-4 ${s.margem_lucro<20?"text-red-600":s.margem_lucro<40?"text-yellow-600":"text-green-600"}`}),e.jsxs("span",{className:"font-semibold",children:[s.margem_lucro.toFixed(1),"%"]})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{onClick:()=>l(!o),className:"p-2 hover:bg-blue-100 rounded-lg transition-colors",children:o?e.jsx(Fn,{className:"h-5 w-5"}):e.jsx(Ir,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>r(s.id),className:"p-2 hover:bg-red-100 text-red-600 rounded-lg transition-colors",children:e.jsx(Vt,{className:"h-5 w-5"})})]})]})}),o&&e.jsxs("div",{className:"p-4 bg-gray-50 border-t space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Escopo Detalhado"}),e.jsx("textarea",{value:s.escopo_detalhado||"",onChange:u=>a(s.id,{escopo_detalhado:u.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Descreva o escopo detalhado do servio..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-red-600 font-medium mb-1",children:"Custo Total"}),e.jsx("p",{className:"text-lg font-bold text-red-700",children:c(s.custo_total)}),e.jsxs("div",{className:"mt-2 text-xs text-gray-600 space-y-1",children:[e.jsxs("p",{children:["Materiais: ",c(s.custo_materiais)]}),e.jsxs("p",{children:["Mo de Obra: ",c(s.custo_mao_obra)]})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-green-600 font-medium mb-1",children:"Lucro"}),e.jsx("p",{className:"text-lg font-bold text-green-700",children:c(s.lucro)}),e.jsxs("p",{className:"mt-2 text-xs text-gray-600",children:["Margem: ",s.margem_lucro.toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>n(s.id),className:"flex-1 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(wt,{className:"h-4 w-4"}),"Adicionar Material"]}),e.jsxs("button",{onClick:()=>i(s.id),className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Nt,{className:"h-4 w-4"}),"Adicionar Funcionrio"]})]})]})]})},KU=({subtotal:s,desconto:t,descontoPercentual:a,custoTotal:r,total:n,lucroTotal:i,margemLucro:o,onDescontoChange:l})=>{const c=u=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(u),d=u=>{const x=s>0?u/s*100:0;l(u,x)},A=u=>{const x=s*u/100;l(x,u)};return e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-6 shadow-lg border-2 border-green-300 sticky top-4",children:[e.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[e.jsx(Ut,{className:"h-6 w-6 text-green-600"}),"Resumo Financeiro"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-green-200",children:[e.jsx("span",{className:"text-gray-700",children:"Subtotal"}),e.jsx("span",{className:"font-semibold text-lg",children:c(s)})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Desconto"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Valor (R$)"}),e.jsx("input",{type:"number",value:t.toFixed(2),onChange:u=>d(parseFloat(u.target.value)||0),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",min:"0",max:s,step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Percentual (%)"}),e.jsx("input",{type:"number",value:a.toFixed(2),onChange:u=>A(parseFloat(u.target.value)||0),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",min:"0",max:"100",step:"0.01"})]})]})]}),t>0&&e.jsxs("div",{className:"flex justify-between items-center py-2 text-red-600",children:[e.jsx("span",{children:"Desconto Aplicado"}),e.jsxs("span",{className:"font-semibold",children:["- ",c(t)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-t-2 border-green-300",children:[e.jsx("span",{className:"font-bold text-gray-900",children:"TOTAL"}),e.jsx("span",{className:"font-bold text-2xl text-green-600",children:c(n)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-4 pt-4 border-t border-green-200",children:[e.jsxs("div",{className:"bg-red-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(wt,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-xs text-red-700 font-medium",children:"Custo Total"})]}),e.jsx("p",{className:"font-bold text-red-700",children:c(r)})]}),e.jsxs("div",{className:"bg-green-100 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(zt,{className:"h-4 w-4 text-green-700"}),e.jsx("span",{className:"text-xs text-green-700 font-medium",children:"Lucro"})]}),e.jsx("p",{className:"font-bold text-green-700",children:c(i)})]})]}),e.jsx("div",{className:`rounded-lg p-4 ${o<20?"bg-red-100 border-red-300":o<40?"bg-yellow-100 border-yellow-300":"bg-green-100 border-green-300"} border-2`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o<20&&e.jsx(es,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Margem de Lucro"})]}),e.jsxs("p",{className:`text-2xl font-bold ${o<20?"text-red-700":o<40?"text-yellow-700":"text-green-700"}`,children:[o.toFixed(1),"%"]})]}),e.jsxs("div",{className:"text-right text-xs",children:[o<20&&e.jsx("span",{className:"text-red-600 font-medium",children:" Margem baixa"}),o>=20&&o<40&&e.jsx("span",{className:"text-yellow-600 font-medium",children:" Margem razovel"}),o>=40&&e.jsx("span",{className:"text-green-600 font-medium",children:" Margem boa"})]})]})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mt-4",children:e.jsxs("p",{className:"text-xs text-blue-700",children:[e.jsx("strong",{children:" Dica:"})," Margem ideal entre 30-50% para servios"]})})]})]})},zU=({isOpen:s,onClose:t,serviceOrderId:a,onSave:r})=>{const[n,i]=j.useState(!1),[o,l]=j.useState(!1),[c,d]=j.useState([]),[A,u]=j.useState(null),[x,m]=j.useState([]),[y,g]=j.useState([]),[b,p]=j.useState([]),[v,N]=j.useState([]),[D,S]=j.useState(null),[E,R]=j.useState(null),[_,C]=j.useState({description:"",scheduled_at:"",notes:"",payment_method:"pix",payment_conditions:"",warranty_period:90,warranty_type:"days"}),[L,f]=j.useState({subtotal:0,desconto:0,descontoPercentual:0,custoTotal:0,total:0,lucroTotal:0,margemLucro:0});j.useEffect(()=>{s&&F()},[s,a]),j.useEffect(()=>{P()},[y,L.desconto]);const F=async()=>{i(!0);try{const[B,$,T,ne]=await Promise.all([se.from("customers").select("*").order("nome_razao"),se.from("service_catalog").select(`
          *,
          materiais:service_catalog_materials(
            material_id,
            quantidade,
            material:materials(*)
          )
        `).order("nome"),se.from("materials").select("*").order("nome"),se.from("employees").select("id, nome, custo_hora").order("nome")]);if(B.data&&d(B.data),$.data){const ue=$.data.map(me=>{var xe;return{...me,materiais:((xe=me.materiais)==null?void 0:xe.map(Be=>{var ee,je,Pe,Xe;return{material_id:Be.material_id,quantidade:Be.quantidade,nome:(ee=Be.material)==null?void 0:ee.nome,unidade_medida:(je=Be.material)==null?void 0:je.unidade_medida,preco_compra:(Pe=Be.material)==null?void 0:Pe.preco_compra,preco_venda:(Xe=Be.material)==null?void 0:Xe.preco_venda}}))||[]}});m(ue)}T.data&&p(T.data),ne.data&&N(ne.data),a&&await M(a)}catch(B){console.error("Erro ao carregar dados:",B)}finally{i(!1)}},M=async B=>{var $;try{const{data:T,error:ne}=await se.from("service_orders").select(`
          *,
          customer:customers(*),
          items:service_order_items(*,
            materiais:service_order_materials(*),
            funcionarios:service_order_labor(*, employee:employees(*))
          )
        `).eq("id",B).single();if(ne)throw ne;if(!T)return;if(u(T.customer),C({description:T.description||"",scheduled_at:(($=T.scheduled_at)==null?void 0:$.split("T")[0])||"",notes:T.notes||"",payment_method:T.payment_method||"pix",payment_conditions:T.payment_conditions||"",warranty_period:T.warranty_period||90,warranty_type:T.warranty_type||"days"}),T.items){const ue=T.items.map(me=>{var xe,Be;return{id:me.id,descricao:me.descricao||"",escopo_detalhado:me.escopo_detalhado||"",quantidade:parseFloat(me.quantidade||1),preco_unitario:parseFloat(me.preco_unitario||0),preco_total:parseFloat(me.preco_total||0),tempo_estimado_minutos:me.tempo_estimado_minutos||0,materiais:((xe=me.materiais)==null?void 0:xe.map(ee=>({id:ee.id,material_id:ee.material_id,nome:ee.nome||"Material",quantidade:parseFloat(ee.quantidade||0),unidade_medida:ee.unidade_medida||"un",preco_compra_unitario:parseFloat(ee.preco_compra_unitario||0),preco_venda_unitario:parseFloat(ee.preco_venda_unitario||0),preco_compra:parseFloat(ee.preco_compra_unitario||0)*parseFloat(ee.quantidade||0),preco_venda:parseFloat(ee.preco_venda_unitario||0)*parseFloat(ee.quantidade||0),custo_total:parseFloat(ee.custo_total||0),valor_total:parseFloat(ee.valor_total||0),lucro:parseFloat(ee.valor_total||0)-parseFloat(ee.custo_total||0)})))||[],funcionarios:((Be=me.funcionarios)==null?void 0:Be.map(ee=>{var je;return{id:ee.id,staff_id:ee.employee_id,nome:((je=ee.employee)==null?void 0:je.nome)||"Funcionrio",tempo_minutos:ee.tempo_minutos||0,custo_hora:parseFloat(ee.custo_hora||0),custo_total:parseFloat(ee.custo_total||0)}}))||[],custo_materiais:parseFloat(me.custo_materiais||0),custo_mao_obra:parseFloat(me.custo_mao_obra||0),custo_total:parseFloat(me.custo_total||0),lucro:parseFloat(me.lucro||0),margem_lucro:parseFloat(me.margem_lucro||0)}});g(ue)}f(ue=>({...ue,desconto:parseFloat(T.desconto_valor||0),descontoPercentual:parseFloat(T.desconto_percentual||0)}))}catch(T){console.error("Erro ao carregar OS:",T)}},P=()=>{const B=y.reduce((me,xe)=>me+xe.preco_total,0),$=y.reduce((me,xe)=>me+xe.custo_total,0),T=B-L.desconto,ne=T-$,ue=T>0?ne/T*100:0;f(me=>({...me,subtotal:B,custoTotal:$,total:Math.max(0,T),lucroTotal:ne,margemLucro:ue}))},Z=B=>{g([...y,B])},O=()=>{const B={id:`service-${Date.now()}`,descricao:"",quantidade:1,preco_unitario:0,preco_total:0,tempo_estimado_minutos:60,materiais:[],funcionarios:[],custo_materiais:0,custo_mao_obra:0,custo_total:0,lucro:0,margem_lucro:0};g([...y,B])},X=(B,$)=>{g(y.map(T=>{var xe,Be;if(T.id!==B)return T;const ne={...T,...$};($.quantidade!==void 0||$.preco_unitario!==void 0)&&(ne.preco_total=ne.quantidade*ne.preco_unitario);const ue=((xe=ne.materiais)==null?void 0:xe.reduce((ee,je)=>ee+(je.custo_total||0),0))||0,me=((Be=ne.funcionarios)==null?void 0:Be.reduce((ee,je)=>ee+(je.custo_total||0),0))||0;return ne.custo_materiais=ue,ne.custo_mao_obra=me,ne.custo_total=ue+me,ne.lucro=ne.preco_total-ne.custo_total,ne.margem_lucro=ne.preco_total>0?ne.lucro/ne.preco_total*100:0,ne}))},q=B=>{g(y.filter($=>$.id!==B))},V=(B,$)=>{f(T=>({...T,desconto:B,descontoPercentual:$}))},oe=B=>{S(B)},H=B=>{R(B)},I=async()=>{var B,$;if(!A){alert("Selecione um cliente");return}if(y.length===0){alert("Adicione pelo menos um servio");return}l(!0);try{const T={customer_id:A.id,description:_.description,scheduled_at:_.scheduled_at||new Date().toISOString(),notes:_.notes,payment_method:_.payment_method,payment_conditions:_.payment_conditions,warranty_period:_.warranty_period,warranty_type:_.warranty_type,subtotal:L.subtotal,desconto_valor:L.desconto,desconto_percentual:L.descontoPercentual,total:L.total,custo_total:L.custoTotal,lucro_total:L.lucroTotal,margem_lucro:L.margemLucro,status:"aberto"};let ne=a;if(a){const{error:ue}=await se.from("service_orders").update(T).eq("id",a);if(ue)throw ue;await se.from("service_order_items").delete().eq("service_order_id",a)}else{const{data:ue,error:me}=await se.from("service_orders").insert(T).select().single();if(me)throw me;ne=ue.id}for(const ue of y){const{data:me,error:xe}=await se.from("service_order_items").insert({service_order_id:ne,descricao:ue.descricao,escopo_detalhado:ue.escopo_detalhado,quantidade:ue.quantidade,preco_unitario:ue.preco_unitario,preco_total:ue.preco_total,tempo_estimado_minutos:ue.tempo_estimado_minutos,custo_materiais:ue.custo_materiais,custo_mao_obra:ue.custo_mao_obra,custo_total:ue.custo_total,lucro:ue.lucro,margem_lucro:ue.margem_lucro}).select().single();if(xe)throw xe;((B=ue.materiais)==null?void 0:B.length)>0&&await se.from("service_order_materials").insert(ue.materiais.map(Be=>({service_order_item_id:me.id,material_id:Be.material_id,quantidade:Be.quantidade,unidade_medida:Be.unidade_medida,preco_compra_unitario:Be.preco_compra_unitario,preco_venda_unitario:Be.preco_venda_unitario,custo_total:Be.custo_total,valor_total:Be.valor_total}))),(($=ue.funcionarios)==null?void 0:$.length)>0&&await se.from("service_order_labor").insert(ue.funcionarios.map(Be=>({service_order_item_id:me.id,employee_id:Be.staff_id,tempo_minutos:Be.tempo_minutos,custo_hora:Be.custo_hora,custo_total:Be.custo_total})))}r&&ne&&r(ne),t()}catch(T){console.error("Erro ao salvar OS:",T),alert(`Erro ao salvar ordem de servio: ${T.message}`)}finally{l(!1)}};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b bg-gradient-to-r from-blue-600 to-blue-700",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white",children:[a?"Editar":"Nova"," Ordem de Servio"]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-blue-500 rounded-lg transition-colors text-white",children:e.jsx(ht,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(ro,{className:"h-8 w-8 animate-spin text-blue-600"})}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(qU,{customers:c,selectedCustomer:A,onSelect:u}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Descrio da OS"}),e.jsx("textarea",{value:_.description,onChange:B=>C({..._,description:B.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Descreva brevemente o servio..."})]}),e.jsx($U,{serviceCatalog:x,onAddService:Z,onAddCustomService:O}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Servios Adicionados (",y.length,")"]}),y.map((B,$)=>e.jsx(VU,{item:B,index:$,onUpdate:X,onDelete:q,onAddMaterial:oe,onAddLabor:H},B.id)),y.length===0&&e.jsx("div",{className:"bg-gray-50 border-2 border-dashed rounded-xl p-8 text-center text-gray-500",children:"Nenhum servio adicionado ainda"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Informaes Adicionais"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Data Agendada"}),e.jsx("input",{type:"date",value:_.scheduled_at,onChange:B=>C({..._,scheduled_at:B.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Forma de Pagamento"}),e.jsxs("select",{value:_.payment_method,onChange:B=>C({..._,payment_method:B.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"pix",children:"PIX"}),e.jsx("option",{value:"dinheiro",children:"Dinheiro"}),e.jsx("option",{value:"cartao_credito",children:"Carto de Crdito"}),e.jsx("option",{value:"cartao_debito",children:"Carto de Dbito"}),e.jsx("option",{value:"transferencia",children:"Transferncia"}),e.jsx("option",{value:"boleto",children:"Boleto"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Condies de Pagamento"}),e.jsx("textarea",{value:_.payment_conditions,onChange:B=>C({..._,payment_conditions:B.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Ex: 50% no incio, 50% na concluso"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Observaes"}),e.jsx("textarea",{value:_.notes,onChange:B=>C({..._,notes:B.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Observaes internas..."})]})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx(KU,{subtotal:L.subtotal,desconto:L.desconto,descontoPercentual:L.descontoPercentual,custoTotal:L.custoTotal,total:L.total,lucroTotal:L.lucroTotal,margemLucro:L.margemLucro,onDescontoChange:V})})]})}),e.jsxs("div",{className:"border-t p-6 bg-gray-50 flex items-center justify-between",children:[e.jsx("button",{onClick:t,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors",children:"Cancelar"}),e.jsx("div",{className:"flex gap-3",children:e.jsx("button",{onClick:I,disabled:o||!A||y.length===0,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx(ro,{className:"h-5 w-5 animate-spin"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"h-5 w-5"}),"Salvar"]})})})]})]})}):null},Rb=s=>{try{return JSON.parse(localStorage.getItem(s)||"null")}catch{return null}},Ob=(s,t)=>{try{localStorage.setItem(s,JSON.stringify(t))}catch{}},Wh={get:Rb,set:Ob,invalidate:s=>localStorage.removeItem(s),invalidatePattern:s=>{},getOrFetch:async(s,t)=>{const a=Rb(s);if(a)return a;const r=await t();return Ob(s,r),r}},GU=()=>{const{isAdmin:s}=rs(),t=ys(),[a,r]=Sv(),[n,i]=j.useState(""),[o,l]=j.useState("all"),[c,d]=j.useState("all"),[A,u]=j.useState([]),[x,m]=j.useState(!0),[y,g]=j.useState(null),[b,p]=j.useState(!1),[v,N]=j.useState(null),[D,S]=j.useState(!1),[E,R]=j.useState(!1),[_,C]=j.useState(void 0);j.useEffect(()=>{L()},[]),j.useEffect(()=>{const H=a.get("edit");H&&(C(H),R(!0),r({}))},[a]);const L=async()=>{try{m(!0);const H=await lU();u(H||[]),g(null)}catch(H){console.error("Error loading service orders:",H),g("Erro ao carregar ordens de servio"),u([])}finally{m(!1)}},f=async H=>{try{if(confirm(`Deseja duplicar a OS ${H.order_number}?`)){const I={...H,id:void 0,order_number:`${H.order_number}-COPIA`,status:"pending",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};await cU(I),await L(),alert("OS duplicada com sucesso!")}}catch(I){console.error("Error duplicating order:",I),alert("Erro ao duplicar OS")}},F=async(H,I)=>{try{u(B=>B.map($=>$.id===H?{...$,status:I,updated_at:new Date().toISOString()}:$)),await Mb(H,{status:I,updated_at:new Date().toISOString()}),Wh.invalidate("service_orders_v2")}catch(B){console.error("Error updating status:",B),alert(`Erro ao atualizar status: ${B}`),await L()}},M=async H=>{try{const I=H.status==="pending"?"in_progress":H.status==="in_progress"?"completed":H.status;confirm(`Deseja ${I==="in_progress"?"iniciar":"concluir"} a OS ${H.order_number}?`)&&(u(B=>B.map($=>$.id===H.id?{...$,status:I,updated_at:new Date().toISOString()}:$)),await Mb(H.id,{status:I,updated_at:new Date().toISOString()}),Wh.invalidate("service_orders_v2"),alert(`OS ${I==="in_progress"?"iniciada":"concluda"} com sucesso!`))}catch(I){console.error("Error executing order:",I),alert("Erro ao executar ao"),await L()}},P=H=>{N(H),p(!0)},Z=async()=>{if(v)try{S(!0),u(H=>H.filter(I=>I.id!==v.id)),await Kj(v.id),Wh.invalidate("service_orders_v2"),p(!1),N(null),alert("Ordem de servio excluda com sucesso!")}catch(H){console.error("Error deleting order:",H),await L(),alert(`Erro ao excluir ordem de servio: ${(H==null?void 0:H.message)||"Erro desconhecido"}`)}finally{S(!1)}},O=()=>{p(!1),N(null)},X=A.filter(H=>{const I=H.order_number.toLowerCase().includes(n.toLowerCase())||H.client_name.toLowerCase().includes(n.toLowerCase())||H.service_type.toLowerCase().includes(n.toLowerCase()),B=o==="all"||H.status===o,$=c==="all"||H.priority===c;return I&&B&&$}),q=H=>{switch(H){case"cotacao":case"orcamento":case"quote":case"budget":return"bg-purple-100 text-purple-800";case"pending":case"pendente":return"bg-yellow-100 text-yellow-800";case"in_progress":case"em_andamento":return"bg-blue-100 text-blue-800";case"on_hold":case"pausado":case"pausada":return"bg-orange-100 text-orange-800";case"completed":case"concluido":case"concluida":return"bg-green-100 text-green-800";case"cancelled":case"cancelado":case"cancelada":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},V=H=>{switch(H){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},oe=H=>{switch(H){case"high":return"Alta";case"medium":return"Mdia";case"low":return"Baixa";default:return"Desconhecida"}};return e.jsxs("div",{className:"space-y-6",children:[y&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(es,{className:"h-5 w-5 text-red-500 mr-2"}),e.jsx("span",{className:"text-red-700",children:y})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ordens de Servio"}),e.jsxs("button",{onClick:()=>{C(void 0),R(!0)},className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-2 rounded-lg flex items-center space-x-2 hover:shadow-lg transition-all",children:[e.jsx(bt,{className:"h-4 w-4"}),e.jsx("span",{children:"Nova OS"})]})]}),e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-md border border-gray-100",children:e.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{type:"text",placeholder:"Buscar por nmero, cliente ou servio...",value:n,onChange:H=>i(H.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(io,{className:"h-5 w-5 text-gray-400"}),e.jsxs("select",{value:o,onChange:H=>l(H.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todos os Status"}),e.jsx("option",{value:"cotacao",children:"Cotao"}),e.jsx("option",{value:"pending",children:"Pendente"}),e.jsx("option",{value:"in_progress",children:"Em Andamento"}),e.jsx("option",{value:"on_hold",children:"Pausado"}),e.jsx("option",{value:"completed",children:"Concluda"}),e.jsx("option",{value:"cancelled",children:"Cancelada"})]})]}),e.jsxs("select",{value:c,onChange:H=>d(H.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todas as Prioridades"}),e.jsx("option",{value:"high",children:"Alta"}),e.jsx("option",{value:"medium",children:"Mdia"}),e.jsx("option",{value:"low",children:"Baixa"})]})]})]})}),x?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Carregando ordens..."})]}):e.jsx("div",{className:"space-y-4",children:X.length>0?X.map((H,I)=>e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:I*.05},className:"bg-white rounded-xl p-6 shadow-md border border-gray-100 hover:shadow-xl transition-all duration-200 group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ea,{className:"h-5 w-5 text-white mx-auto mb-0.5"}),e.jsx("span",{className:"text-xs font-bold text-white/90",children:H.order_number})]})}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-xs font-semibold text-blue-600 bg-blue-50 px-2 py-0.5 rounded",children:["OS-",H.order_number]})}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:H.service_type||"Sem descrio"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${V(H.priority)}`,children:oe(H.priority)}),e.jsxs("select",{value:H.status,onChange:B=>F(H.id,B.target.value),className:`px-3 py-1 rounded-full text-xs font-medium border-0 cursor-pointer ${q(H.status)}`,children:[e.jsx("option",{value:"cotacao",children:"Cotao"}),e.jsx("option",{value:"pending",children:"Pendente"}),e.jsx("option",{value:"in_progress",children:"Em Andamento"}),e.jsx("option",{value:"on_hold",children:"Pausado"}),e.jsx("option",{value:"completed",children:"Concludo"}),e.jsx("option",{value:"cancelled",children:"Cancelado"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Cliente"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Jt,{className:"h-4 w-4 text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-900",children:H.client_name})]}),e.jsx("p",{className:"text-xs text-gray-600 ml-6",children:H.client_phone})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Responsvel"}),e.jsx("p",{className:"text-sm text-gray-900",children:H.assigned_to})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Prazo"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ot,{className:"h-4 w-4 text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-900",children:H.due_date?new Date(H.due_date).toLocaleDateString("pt-BR"):H.service_date?new Date(H.service_date).toLocaleDateString("pt-BR"):"No definido"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Valor Total"}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("p",{className:"text-lg font-bold text-green-600",children:H.total_value||H.final_total?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(H.final_total||H.total_value||0)):"R$ 0,00"})}),H.custo_total&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Lucro: ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(H.lucro_total||0))]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-gray-600 line-clamp-1",children:H.description}),e.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:B=>{B.stopPropagation(),t(`/service-orders/${H.id}/mobile`)},className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Abrir no App Mobile (Tcnico)",children:e.jsx(Nd,{className:"h-4 w-4"})}),e.jsx("button",{onClick:B=>{B.stopPropagation(),t(`/service-orders/${H.id}/view`)},className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Visualizar OS",children:e.jsx($s,{className:"h-4 w-4"})}),e.jsx("button",{onClick:B=>{B.stopPropagation(),C(H.id),R(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Editar OS",children:e.jsx(rr,{className:"h-4 w-4"})}),e.jsx("button",{onClick:B=>{B.stopPropagation(),M(H)},className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:H.status==="pending"?"Iniciar OS":H.status==="in_progress"?"Concluir OS":"OS Concluda",disabled:H.status==="completed",children:e.jsx(ld,{className:"h-4 w-4"})}),e.jsx("button",{onClick:B=>{B.stopPropagation(),f(H)},className:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"Duplicar OS",children:e.jsx(Gr,{className:"h-4 w-4"})}),e.jsx("button",{onClick:B=>{B.stopPropagation(),P(H)},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Excluir OS",children:e.jsx(Vt,{className:"h-4 w-4"})})]})]})]},H.id)):e.jsxs("div",{className:"bg-white rounded-xl p-10 shadow-md border border-gray-100 text-center",children:[e.jsx(ea,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhuma ordem encontrada"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"No encontramos ordens de servio com os filtros selecionados."}),e.jsx("button",{onClick:()=>{i(""),l("all"),d("all")},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Limpar filtros"})]})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 px-6 py-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:e.jsx(Vt,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Excluir Ordem de Servio"}),e.jsx("p",{className:"text-red-100 text-sm",children:"Esta ao no pode ser desfeita"})]})]})})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(es,{className:"h-6 w-6 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-900 font-semibold mb-2",children:"Voc est prestes a excluir a seguinte OS:"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{className:"text-red-800",children:[e.jsx("span",{className:"font-bold",children:"Nmero:"})," ",v==null?void 0:v.order_number]}),e.jsxs("p",{className:"text-red-800",children:[e.jsx("span",{className:"font-bold",children:"Cliente:"})," ",v==null?void 0:v.client_name]}),e.jsxs("p",{className:"text-red-800",children:[e.jsx("span",{className:"font-bold",children:"Servio:"})," ",v==null?void 0:v.service_type]}),e.jsxs("p",{className:"text-red-800",children:[e.jsx("span",{className:"font-bold",children:"Valor:"})," R$ ",((v==null?void 0:v.total_cost)||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})]})}),e.jsx("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(es,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-900 font-semibold mb-1",children:" Ateno!"}),e.jsx("p",{className:"text-yellow-800 text-sm",children:"Ao excluir esta OS, todos os dados relacionados sero permanentemente removidos do sistema. Esta ao  irreversvel."})]})]})}),e.jsx("p",{className:"text-gray-700 text-center mb-6 font-medium",children:"Tem certeza que deseja continuar?"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:O,disabled:D,className:"flex-1 px-6 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancelar"}),e.jsx("button",{onClick:Z,disabled:D,className:"flex-1 px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-xl hover:from-red-700 hover:to-red-800 transition-all font-semibold shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:D?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Excluindo..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Vt,{className:"h-5 w-5"}),"Confirmar Excluso"]})})]})]})]})}),e.jsx(zU,{isOpen:E,onClose:()=>{R(!1),C(void 0)},onSave:()=>{L(),R(!1),C(void 0)},serviceOrderId:_||null})]})},Jh=async s=>{},WU=async()=>({name:"Giartech",cnpj:""}),Hb=s=>s,JU=({key:s,data:t,enabled:a=!0,interval:r=3e4,onSave:n})=>{const[i,o]=j.useState(!1),[l,c]=j.useState(null),[d,A]=j.useState(null),u=j.useRef(),x=j.useRef(t);j.useEffect(()=>{x.current=t},[t]);const m=j.useCallback(async()=>{if(!(!a||!x.current))try{o(!0),A(null);const{data:b}=await se.from("service_order_drafts").select("id").eq("draft_name",s).maybeSingle();if(b){const{error:p}=await se.from("service_order_drafts").update({draft_data:x.current,last_saved_at:new Date().toISOString()}).eq("id",b.id);if(p)throw p}else{const{error:p}=await se.from("service_order_drafts").insert({draft_name:s,draft_data:x.current,user_id:null});if(p)throw p}c(new Date),n==null||n(!0)}catch(b){console.error("Erro ao salvar rascunho:",b),A(b.message),n==null||n(!1)}finally{o(!1)}},[a,s,n]);j.useEffect(()=>{if(a)return u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{m()},r),()=>{u.current&&clearTimeout(u.current)}},[t,a,r,m]);const y=j.useCallback(async()=>{await m()},[m]),g=j.useCallback(async()=>{try{const{error:b}=await se.from("service_order_drafts").delete().eq("draft_name",s);if(b)throw b;c(null)}catch(b){console.error("Erro ao limpar rascunho:",b),A(b.message)}},[s]);return{isSaving:i,lastSaved:l,error:d,manualSave:y,clearDraft:g}},YU=({services:s,recentServices:t=[],favoriteServices:a=[],onSelect:r,placeholder:n="Buscar servio..."})=>{const[i,o]=j.useState(""),[l,c]=j.useState(!1),[d,A]=j.useState(0),[u,x]=j.useState([]),m=j.useRef(null),y=j.useRef(null);j.useEffect(()=>{if(i.trim()){const N=i.toLowerCase(),D=s.filter(S=>{var E,R;return S.name.toLowerCase().includes(N)||((E=S.description)==null?void 0:E.toLowerCase().includes(N))||((R=S.category)==null?void 0:R.toLowerCase().includes(N))});x(D.slice(0,10))}else{const N=s.filter(E=>a.includes(E.id)),D=s.filter(E=>t.includes(E.id)),S=[...N,...D.filter(E=>!a.includes(E.id))];x(S.slice(0,8))}A(0)},[i,s,t,a]),j.useEffect(()=>{const N=D=>{y.current&&!y.current.contains(D.target)&&m.current&&!m.current.contains(D.target)&&c(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]);const g=N=>{var D;if(!l){(N.key==="Enter"||N.key==="ArrowDown")&&(c(!0),N.preventDefault());return}switch(N.key){case"ArrowDown":N.preventDefault(),A(S=>(S+1)%u.length);break;case"ArrowUp":N.preventDefault(),A(S=>(S-1+u.length)%u.length);break;case"Enter":N.preventDefault(),u[d]&&b(u[d]);break;case"Escape":c(!1),(D=m.current)==null||D.blur();break}},b=N=>{var D;r(N),o(""),c(!1),(D=m.current)==null||D.blur()},p=N=>N?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(N):"Sob consulta",v=N=>{if(!N)return"";if(N<60)return`${N}min`;const D=Math.floor(N/60),S=N%60;return S>0?`${D}h${S}min`:`${D}h`};return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Qt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{ref:m,type:"text",value:i,onChange:N=>o(N.target.value),onFocus:()=>c(!0),onKeyDown:g,placeholder:n,className:"w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",autoComplete:"off"}),i&&e.jsx("button",{onClick:()=>{var N;o(""),(N=m.current)==null||N.focus()},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(ht,{className:"w-5 h-5"})})]}),e.jsx(rt,{children:l&&u.length>0&&e.jsxs(W.div,{ref:y,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.15},className:"absolute z-50 w-full mt-2 bg-white border border-gray-200 rounded-lg shadow-xl max-h-96 overflow-y-auto",children:[!i&&e.jsxs("div",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider bg-gray-50 border-b",children:[a.length>0&&"Favoritos e Recentes",a.length===0&&t.length>0&&"Usados Recentemente",a.length===0&&t.length===0&&"Todos os Servios"]}),u.map((N,D)=>{const S=a.includes(N.id),E=t.includes(N.id),R=D===d;return e.jsx(W.button,{onClick:()=>b(N),className:`w-full px-4 py-3 text-left transition-colors border-b last:border-b-0 ${R?"bg-blue-50 border-blue-200":"hover:bg-gray-50"}`,initial:{opacity:0},animate:{opacity:1},transition:{delay:D*.02},children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[S&&e.jsx(qs,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),e.jsx("span",{className:"font-medium text-gray-900 truncate",children:N.name})]}),N.description&&e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-2",children:N.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[N.category&&e.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded",children:N.category}),N.estimated_time&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(vt,{className:"w-3 h-3"}),v(N.estimated_time)]}),N.materials_count&&N.materials_count>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(wt,{className:"w-3 h-3"}),N.materials_count," materiais"]}),E&&!S&&e.jsx("span",{className:"text-blue-600",children:"Usado recentemente"})]})]}),N.base_price&&e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"font-semibold text-gray-900",children:p(N.base_price)})})]})},N.id)}),i&&u.length===0&&e.jsxs("div",{className:"px-4 py-8 text-center text-gray-500",children:[e.jsx(Qt,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"Nenhum servio encontrado"}),e.jsx("p",{className:"text-sm mt-1",children:"Tente buscar por outro termo"})]})]})})]})},XU=({isOpen:s,onClose:t,onSelect:a})=>{const[r,n]=j.useState([]),[i,o]=j.useState(!0),[l,c]=j.useState(""),[d,A]=j.useState("all");j.useEffect(()=>{s&&u()},[s]);const u=async()=>{try{o(!0);const{data:g,error:b}=await se.from("service_order_templates").select("*").order("usage_count",{ascending:!1});if(b)throw b;n(g||[])}catch(g){console.error("Erro ao carregar templates:",g)}finally{o(!1)}},x=async g=>{try{await se.rpc("increment_template_usage",{template_id:g.id}),a(g.template_data),t()}catch(b){console.error("Erro ao usar template:",b),a(g.template_data),t()}},m=[...new Set(r.map(g=>g.category))],y=r.filter(g=>{var v;const b=l===""||g.name.toLowerCase().includes(l.toLowerCase())||((v=g.description)==null?void 0:v.toLowerCase().includes(l.toLowerCase())),p=d==="all"||g.category===d;return b&&p});return s?e.jsx(rt,{children:e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:t,children:e.jsxs(W.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:g=>g.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Templates de OS"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Escolha um template para comear rapidamente"})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ht,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6 border-b bg-gray-50",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Qt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:l,onChange:g=>c(g.target.value),placeholder:"Buscar template...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>A("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${d==="all"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:"Todos"}),m.map(g=>e.jsx("button",{onClick:()=>A(g),className:`px-4 py-2 rounded-lg font-medium transition-colors capitalize ${d===g?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:g.replace("-"," ")},g))]})]})}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:i?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):y.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ut,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Nenhum template encontrado"}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Tente buscar com outros termos ou categorias"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:y.map((g,b)=>e.jsxs(W.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:b*.05},onClick:()=>x(g),className:"bg-white border-2 border-gray-200 hover:border-blue-500 rounded-lg p-4 text-left transition-all hover:shadow-lg group",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center group-hover:bg-blue-600 transition-colors",children:e.jsx(ut,{className:"w-5 h-5 text-blue-600 group-hover:text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 group-hover:text-blue-600",children:g.name}),e.jsx("span",{className:"text-xs text-gray-500 capitalize",children:g.category.replace("-"," ")})]})]})}),g.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:g.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Gr,{className:"w-3 h-3"}),g.usage_count," usos"]}),g.is_public&&e.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 rounded",children:"Pblico"})]}),e.jsx(qs,{className:"w-4 h-4 text-yellow-500"})]}),g.template_data.serviceItems&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsxs("span",{className:"text-xs text-gray-600",children:[g.template_data.serviceItems.length," servios inclusos"]})})]},g.id))})}),e.jsx("div",{className:"p-6 border-t bg-gray-50 flex justify-end gap-3",children:e.jsx("button",{onClick:t,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:"Cancelar"})})]})})}):null},ZU=({subtotal:s,discount:t,total:a,costMaterials:r,costLabor:n,totalCost:i,profit:o,margin:l,className:c=""})=>{const d=y=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(y),A=y=>y>=30?"text-green-600":y>=15?"text-yellow-600":"text-red-600",u=y=>y>=30?"bg-green-50 border-green-200":y>=15?"bg-yellow-50 border-yellow-200":"bg-red-50 border-red-200",x=y=>y>=30?e.jsx(is,{className:"w-5 h-5"}):y>=15?e.jsx(pl,{className:"w-5 h-5"}):e.jsx(cs,{className:"w-5 h-5"}),m=y=>y>=30?"Margem excelente!":y>=15?"Margem adequada":"Margem baixa - Ateno!";return e.jsxs(W.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:`bg-white border border-gray-200 rounded-lg p-6 shadow-lg ${c}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 pb-4 border-b",children:[e.jsx(Ut,{className:"w-6 h-6 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Anlise Financeira"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal"}),e.jsx("span",{className:"font-medium text-gray-900",children:d(s)})]}),t>0&&e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Desconto"}),e.jsxs("span",{className:"font-medium text-red-600",children:["- ",d(t)]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Total"}),e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:d(a)})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Custos"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Materiais"}),e.jsx("span",{className:"font-medium text-gray-900",children:d(r)})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Mo de Obra"}),e.jsx("span",{className:"font-medium text-gray-900",children:d(n)})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Custo Total"}),e.jsx("span",{className:"font-semibold text-gray-900",children:d(i)})]})]})]}),e.jsxs(W.div,{initial:{scale:.95},animate:{scale:1},className:`p-4 rounded-lg border-2 ${u(l)}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:A(l),children:x(l)}),e.jsx("span",{className:"font-semibold text-gray-900",children:"Lucro"})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"text-xl font-bold text-gray-900",children:d(o)})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:m(l)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:`text-2xl font-bold ${A(l)}`,children:[l.toFixed(1),"%"]}),l>=15?e.jsx(zt,{className:`w-5 h-5 ${A(l)}`}):e.jsx(nr,{className:`w-5 h-5 ${A(l)}`})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-current/20",children:e.jsx("div",{className:"flex gap-2 text-xs",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-gray-600 mb-1",children:"Distribuio"}),e.jsxs("div",{className:"flex gap-1 h-2 rounded-full overflow-hidden bg-gray-200",children:[e.jsx("div",{className:"bg-blue-500",style:{width:`${a>0?r/a*100:0}%`},title:"Materiais"}),e.jsx("div",{className:"bg-purple-500",style:{width:`${a>0?n/a*100:0}%`},title:"Mo de Obra"}),e.jsx("div",{className:"bg-green-500",style:{width:`${a>0?o/a*100:0}%`},title:"Lucro"})]})]})})})]},l),l<15&&e.jsx(W.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(cs,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-red-800",children:[e.jsx("div",{className:"font-semibold mb-1",children:"Margem Abaixo do Recomendado"}),e.jsx("p",{className:"text-xs",children:"Considere aumentar o valor ou reduzir custos. Margem ideal: 30% ou mais."})]})]})}),l>=30&&o>1e3&&e.jsx(W.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(is,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-green-800",children:[e.jsx("div",{className:"font-semibold mb-1",children:"Excelente Negcio!"}),e.jsx("p",{className:"text-xs",children:"Margem saudvel e lucro acima da mdia. Continue assim!"})]})]})})]})]})},Yh=()=>{var Ga;const s=ys(),{id:t}=Gu(),[a]=Sv(),r=a.get("edit")||t,n=!!r,[i,o]=j.useState(!1),[l,c]=j.useState([]),[d,A]=j.useState(null),[u,x]=j.useState([]),[m,y]=j.useState([]),[g,b]=j.useState([]),[p,v]=j.useState([]),[N,D]=j.useState([]),[S,E]=j.useState([]),[R,_]=j.useState(!1),[C,L]=j.useState(!1),[f,F]=j.useState(""),[M,P]=j.useState(""),[Z,O]=j.useState(!1),[X,q]=j.useState(""),[V,oe]=j.useState("dados"),[H,I]=j.useState({customer_id:"",description:"",scheduled_at:"",prazo_execucao_dias:7,data_inicio_execucao:"",desconto_percentual:0,desconto_valor:0,show_material_costs:!1,show_value:!0,relatorio_tecnico:"",orientacoes_servico:"",escopo_detalhado:"",payment_method:"dinheiro",payment_installments:1,payment_conditions:"Sinal de 50% e o valor restante aps a concluso.",warranty_period:90,warranty_type:"days",warranty_terms:"",bank_account_id:"",contract_template_id:"",contract_notes:"",notes:"",custo_deslocamento:0,custo_estacionamento:0,custo_pedagio:0,custo_outros:0,descricao_outros:"",company_name:"",company_cnpj:"",company_address:"",company_phone:"",company_email:"",payment_methods_text:"Transferncia bancria, dinheiro, carto de crdito, carto de dbito ou pix",payment_pix:"",bank_name:"",bank_agency:"",bank_account:"",bank_account_type:"Corrente",bank_holder:"",contract_clauses:"",additional_info:"Trabalhamos para que seus projetos, se tornem realidade."}),[B,$]=j.useState([{id:crypto.randomUUID(),descricao:"",quantidade:1,preco_unitario:0,preco_total:0,tempo_estimado_minutos:0,materiais:[],funcionarios:[],custo_materiais:0,custo_mao_obra:0,custo_total:0,lucro:0,margem_lucro:0}]),[T,ne]=j.useState({subtotal:0,desconto:0,total:0,custo_total_materiais:0,custo_total_mao_obra:0,custo_total:0,lucro_total:0,margem_lucro:0}),[ue,me]=j.useState({}),[xe,Be]=j.useState({company:!1,bankData:!1,additionalClauses:!1}),[ee,je]=j.useState(!1),[Pe,Xe]=j.useState(!1),[Ce,K]=j.useState(!1),[Me,qe]=j.useState({nome_razao:"",telefone:"",email:"",cnpj_cpf:""}),[re,ie]=j.useState({name:"",description:"",base_price:0,estimated_time_minutes:60}),[ve,ye]=j.useState({name:"",unit:"un",unit_cost:0,unit_price:0,quantity:1}),$e=le=>{Be(Le=>({...Le,[le]:!Le[le]}))},{isSaving:it,lastSaved:Ie,error:he}=JU({key:"service-order-draft",data:{formData:H,serviceItems:B,totals:T},interval:3e4,onSave:async le=>{var Le,De;if(!n&&H.customer_id&&H.description){const{error:ke}=await se.from("service_order_drafts").upsert({user_id:(Le=(await se.auth.getUser()).data.user)==null?void 0:Le.id,customer_id:H.customer_id,draft_name:`OS - ${((De=l.find(Je=>Je.id===H.customer_id))==null?void 0:De.name)||"Cliente"} - ${new Date().toLocaleString("pt-BR")}`,draft_data:le,last_saved_at:new Date().toISOString()});if(ke)throw ke}}});j.useEffect(()=>{Bt(),n&&r&&Oe(r)},[r]),j.useEffect(()=>{lt()},[B,H.desconto_percentual,H.desconto_valor]);const Oe=async le=>{try{o(!0);const Le=await cu(le);if(Le&&(I({customer_id:Le.client_id||"",description:Le.description||"",scheduled_at:Le.due_date?new Date(Le.due_date).toISOString().slice(0,16):Le.scheduled_at?new Date(Le.scheduled_at).toISOString().slice(0,16):"",prazo_execucao_dias:Le.prazo_execucao_dias||7,data_inicio_execucao:Le.data_inicio_execucao?new Date(Le.data_inicio_execucao).toISOString().split("T")[0]:"",desconto_percentual:Le.desconto_percentual||Le.discount_percentage||0,desconto_valor:Le.desconto_valor||Le.discount_amount||Le.discount_value||0,show_material_costs:Le.show_material_costs||!1,show_value:Le.show_value!==!1,relatorio_tecnico:Le.relatorio_tecnico||"",orientacoes_servico:Le.orientacoes_servico||"",escopo_detalhado:Le.escopo_detalhado||"",payment_method:Le.payment_method||"dinheiro",payment_installments:Le.payment_installments||1,payment_conditions:Le.payment_conditions||"Sinal de 50% e o valor restante aps a concluso.",warranty_period:Le.warranty_period||90,warranty_type:Le.warranty_type||"days",warranty_terms:Le.warranty_terms||"",bank_account_id:Le.bank_account_id||"",contract_template_id:Le.contract_template_id||"",contract_notes:Le.contract_notes||"",notes:Le.notes||"",custo_deslocamento:Le.custo_deslocamento||0,custo_estacionamento:Le.custo_estacionamento||0,custo_pedagio:Le.custo_pedagio||0,custo_outros:Le.custo_outros||0,descricao_outros:Le.descricao_outros||"",company_name:Le.company_name||"",company_cnpj:Le.company_cnpj||"",company_address:Le.company_address||"",company_phone:Le.company_phone||"",company_email:Le.company_email||"",payment_methods_text:Le.payment_methods_text||"Transferncia bancria, dinheiro, carto de crdito, carto de dbito ou pix",payment_pix:Le.payment_pix||"",bank_name:Le.bank_name||"",bank_agency:Le.bank_agency||"",bank_account:Le.bank_account||"",bank_account_type:Le.bank_account_type||"Corrente",bank_holder:Le.bank_holder||"",contract_clauses:Le.contract_clauses||"",additional_info:Le.additional_info||"Trabalhamos para que seus projetos, se tornem realidade."}),q(Le.order_number||""),Le.client_id&&He(Le.client_id),Le.items&&Le.items.length>0)){const De=Le.items.map(ke=>{var Ne;const Je=(ke.materiais||ke.materials||[]).map(at=>({id:at.id||crypto.randomUUID(),material_id:at.material_id||"",nome:at.nome||at.material_name||at.name||"",quantidade:at.quantidade||at.quantity||0,unidade_medida:at.unidade_medida||at.material_unit||at.unit||"un",preco_compra_unitario:at.preco_compra_unitario||at.unit_cost_at_time||at.unit_price||0,preco_venda_unitario:at.preco_venda_unitario||at.unit_sale_price||at.preco_unitario||0,preco_compra:at.preco_compra||at.total_cost||0,preco_venda:at.preco_venda||at.valor_total||at.total_sale_price||at.total_price||0,custo_total:at.custo_total||at.total_cost||0,valor_total:at.valor_total||at.total_sale_price||at.total_price||0,lucro:at.lucro||0})),ot=(ke.funcionarios||ke.labor||[]).map(at=>({id:at.id||crypto.randomUUID(),staff_id:at.staff_id||at.employee_id||"",nome:at.nome||at.nome_funcionario||at.name||"",tempo_minutos:at.tempo_minutos||at.time_minutes||0,custo_hora:at.custo_hora||at.hourly_rate||0,custo_total:at.custo_total||at.total_cost||0}));return{id:ke.id||crypto.randomUUID(),service_catalog_id:ke.service_catalog_id||null,descricao:ke.descricao||ke.description||ke.service_name||((Ne=ke.service_catalog)==null?void 0:Ne.name)||"",escopo:ke.escopo||ke.escopo_detalhado||ke.service_scope||"",escopo_detalhado:ke.escopo_detalhado||ke.escopo||ke.service_scope||"",quantidade:ke.quantidade||ke.quantity||1,preco_unitario:ke.preco_unitario||ke.unit_price||0,preco_total:ke.preco_total||ke.total_price||0,tempo_estimado_minutos:ke.tempo_estimado_minutos||ke.estimated_duration||ke.estimated_time||0,materiais:Je,funcionarios:ot,custo_materiais:ke.custo_materiais||ke.cost_materials||0,custo_mao_obra:ke.custo_mao_obra||ke.cost_labor||0,custo_total:ke.custo_total||ke.total_cost||0,lucro:ke.lucro||ke.profit||0,margem_lucro:ke.margem_lucro||ke.profit_margin||0}});$(De)}}catch(Le){console.error("Error loading order data:",Le)}finally{o(!1)}},He=async le=>{try{const[Le,De]=await Promise.all([se.from("customers").select("*").eq("id",le).single(),se.from("customer_addresses").select("*").eq("customer_id",le).eq("principal",!0).maybeSingle()]);if(Le.data){const ke={...Le.data,address:De.data};A(ke),De.data&&F(Le.data.email||"")}}catch(Le){console.error("Error loading customer details:",Le)}},dt=le=>{I({...H,customer_id:le}),le?He(le):A(null)},Bt=async()=>{var le,Le,De,ke,Je,ot,Ne;try{console.log(" Carregando dados...");const at=await se.from("customers").select("*").order("nome_razao");at.error?console.error("Erro clientes:",at.error):console.log(" Clientes carregados:",((le=at.data)==null?void 0:le.length)||0),c(at.data||[]);const ct=await se.from("materials").select("*").eq("active",!0).order("name");ct.error?console.error("Erro materiais:",ct.error):console.log(" Materiais carregados:",((Le=ct.data)==null?void 0:Le.length)||0),x(ct.data||[]);const _s=await se.from("employees").select("id, name, role, custo_hora, especialidade, nivel").eq("active",!0).order("name");_s.error?console.error("Erro funcionrios:",_s.error):console.log(" Funcionrios carregados:",((De=_s.data)==null?void 0:De.length)||0),y(_s.data||[]);const Qs=await se.from("bank_accounts").select("*").eq("active",!0).order("account_name");Qs.error?console.error("Erro contas:",Qs.error):console.log(" Contas bancrias carregadas:",((ke=Qs.data)==null?void 0:ke.length)||0),b(Qs.data||[]);const ua=await se.from("contract_templates").select("*").order("name");ua.error?console.error("Erro contratos:",ua.error):console.log(" Contratos carregados:",((Je=ua.data)==null?void 0:Je.length)||0),v(ua.data||[]);const Mt=await se.from("service_catalog").select("*").eq("active",!0).order("name");Mt.error?console.error("Erro catlogo:",Mt.error):console.log(" Catlogo carregado:",((ot=Mt.data)==null?void 0:ot.length)||0),D(Mt.data||[]);const Ps=await se.from("inventory").select("*").order("name");Ps.error?console.error("Erro inventrio:",Ps.error):console.log(" Inventrio carregado:",((Ne=Ps.data)==null?void 0:Ne.length)||0),E(Ps.data||[]),console.log(" Todos os dados carregados!")}catch(at){console.error(" Erro geral ao carregar dados:",at)}},et=()=>{$([...B,{id:crypto.randomUUID(),descricao:"",quantidade:1,preco_unitario:0,preco_total:0,tempo_estimado_minutos:0,materiais:[],funcionarios:[],custo_materiais:0,custo_mao_obra:0,custo_total:0,lucro:0,margem_lucro:0}])},ta=le=>{$(B.filter(Le=>Le.id!==le))},Pt=(le,Le)=>{$(De=>De.map(ke=>{if(ke.id===le){const Je={...ke,...Le};return Je.preco_total=Je.quantidade*Je.preco_unitario,Je.custo_materiais=Je.materiais.reduce((ot,Ne)=>ot+Ne.custo_total,0),Je.custo_mao_obra=Je.funcionarios.reduce((ot,Ne)=>ot+Ne.custo_total,0),Je.custo_total=Je.custo_materiais+Je.custo_mao_obra,Je.lucro=Je.preco_total-Je.custo_total,Je.margem_lucro=Je.preco_total>0?Je.lucro/Je.preco_total*100:0,Je}return ke}))},de=le=>{const Le=B.find(ke=>ke.id===le);if(!Le)return;const De={id:crypto.randomUUID(),material_id:"",nome:"",quantidade:1,unidade_medida:"UN",preco_compra_unitario:0,preco_venda_unitario:0,preco_compra:0,preco_venda:0,custo_total:0,valor_total:0,lucro:0};Pt(le,{materiais:[...Le.materiais,De]})},Ee=(le,Le)=>{const De=B.find(ke=>ke.id===le);De&&Pt(le,{materiais:De.materiais.filter(ke=>ke.id!==Le)})},Qe=(le,Le,De)=>{const ke=B.find(ot=>ot.id===le);if(!ke)return;const Je=ke.materiais.map(ot=>{if(ot.id===Le){const Ne={...ot,...De},at=Ne.preco_compra_unitario||0,ct=Ne.preco_venda_unitario||0;return Ne.custo_total=Ne.quantidade*at,Ne.valor_total=Ne.quantidade*ct,Ne.lucro=Ne.valor_total-Ne.custo_total,Ne}return ot});Pt(le,{materiais:Je})},Ze=(le,Le,De)=>{const ke=u.find(at=>at.id===De);if(!ke)return;const Je=Number(ke.unit_cost)||0,ot=Number(ke.sale_price)||0,Ne=ke.unit||"UN";Qe(le,Le,{material_id:De,nome:ke.name,unidade_medida:Ne,preco_compra_unitario:Je,preco_venda_unitario:ot,preco_compra:Je,preco_venda:ot})},Ye=(le,Le)=>{const De=B.find(ke=>ke.id===le);De&&Pt(le,{funcionarios:De.funcionarios.filter(ke=>ke.id!==Le)})},It=(le,Le,De)=>{const ke=B.find(ot=>ot.id===le);if(!ke)return;const Je=ke.funcionarios.map(ot=>{if(ot.id===Le){const Ne={...ot,...De};return Ne.custo_total=Ne.tempo_minutos/60*Ne.custo_hora,Ne}return ot});Pt(le,{funcionarios:Je})},lt=()=>{const le=B.reduce((_s,Qs)=>_s+Qs.preco_total,0),Le=(H.custo_deslocamento||0)+(H.custo_estacionamento||0)+(H.custo_pedagio||0)+(H.custo_outros||0),De=H.desconto_valor||le*(H.desconto_percentual/100),ke=le-Le-De,Je=B.reduce((_s,Qs)=>_s+Qs.custo_materiais,0),ot=B.reduce((_s,Qs)=>_s+Qs.custo_mao_obra,0),Ne=Je+ot+Le,at=ke-Ne,ct=ke>0?at/ke*100:0;ne({subtotal:le,desconto:De,total:ke,custo_total_materiais:Je,custo_total_mao_obra:ot,custo_total:Ne,lucro_total:at,margem_lucro:ct})},Tt=async()=>{try{if(!H.customer_id||B.length===0){alert("Selecione um cliente e adicione pelo menos um servio!");return}o(!0);const le=H.scheduled_at?new Date(new Date(H.scheduled_at).getTime()+H.warranty_period*(H.warranty_type==="days"?864e5:H.warranty_type==="months"?2592e6:31536e6)).toISOString().split("T")[0]:null,Le={customer_id:H.customer_id||null,description:H.description,scheduled_at:H.scheduled_at||null,due_date:H.scheduled_at||null,prazo_execucao_dias:H.prazo_execucao_dias,data_inicio_execucao:H.data_inicio_execucao||null,status:"aberta",total_value:T.total,desconto_percentual:H.desconto_percentual,desconto_valor:H.desconto_valor,custo_total_materiais:T.custo_total_materiais,custo_total_mao_obra:T.custo_total_mao_obra,custo_total:T.custo_total,lucro_total:T.lucro_total,margem_lucro:T.margem_lucro,show_material_costs:H.show_material_costs,show_value:H.show_value,relatorio_tecnico:H.relatorio_tecnico,orientacoes_servico:H.orientacoes_servico,escopo_detalhado:H.escopo_detalhado,payment_method:H.payment_method,payment_installments:H.payment_installments,bank_account_id:H.bank_account_id||null,warranty_period:H.warranty_period,warranty_type:H.warranty_type,warranty_terms:H.warranty_terms,warranty_end_date:le,contract_template_id:H.contract_template_id||null,contract_notes:H.contract_notes,notes:H.notes,subtotal:T.subtotal,discount_amount:T.desconto,final_total:T.total};let De;if(n&&r){const{data:ke,error:Je}=await se.from("service_orders").update(Le).eq("id",r).select().single();if(Je)throw Je;De=ke,await se.from("service_order_items").delete().eq("service_order_id",r),await se.from("service_order_materials").delete().eq("service_order_id",r),await se.from("service_order_labor").delete().eq("service_order_id",r)}else{const{data:ke,error:Je}=await se.from("service_orders").insert([Le]).select().single();if(Je)throw Je;De=ke}if(!De)throw new Error("Erro ao salvar ordem");for(const ke of B){const{data:Je,error:ot}=await se.from("service_order_items").insert([{service_order_id:De.id,service_catalog_id:ke.service_catalog_id||null,descricao:ke.descricao||ke.nome||"",escopo_detalhado:ke.escopo||ke.escopo_detalhado||"",quantidade:ke.quantidade,preco_unitario:ke.preco_unitario,preco_total:ke.preco_total,tempo_estimado_minutos:ke.tempo_estimado_minutos,custo_materiais:ke.custo_materiais,custo_mao_obra:ke.custo_mao_obra,custo_total:ke.custo_total,lucro:ke.lucro,margem_lucro:ke.margem_lucro}]).select().single();if(ot)throw ot;if(ke.materiais.length>0){const Ne=ke.materiais.map(ct=>({service_order_id:De.id,service_order_item_id:Je.id,material_id:ct.material_id,nome_material:ct.nome,quantidade:ct.quantidade,preco_compra:ct.preco_compra,preco_venda:ct.preco_venda,custo_total:ct.custo_total,valor_total:ct.valor_total,lucro:ct.lucro})),{error:at}=await se.from("service_order_materials").insert(Ne);if(at)throw at}if(ke.funcionarios.length>0){const Ne=ke.funcionarios.map(ct=>({service_order_id:De.id,service_order_item_id:Je.id,staff_id:ct.staff_id,nome_funcionario:ct.nome,tempo_minutos:ct.tempo_minutos,custo_hora:ct.custo_hora,custo_total:ct.custo_total})),{error:at}=await se.from("service_order_labor").insert(Ne);if(at)throw at}}alert(n?"Ordem de Servio atualizada com sucesso!":"Ordem de Servio criada com sucesso!"),s("/service-orders")}catch(le){console.error("Error saving:",le),alert(`Erro ao ${n?"atualizar":"salvar"} ordem de servio!`)}finally{o(!1)}},Yt=async()=>{var le,Le,De,ke,Je,ot;try{const Ne=d||l.find(Mt=>Mt.id===H.customer_id);if(!Ne){alert("Cliente no encontrado!");return}const at=await WU(),ct=Ne.address||{},_s=[ct.logradouro,ct.numero,ct.complemento,ct.bairro].filter(Boolean).join(", "),Qs={order_number:X||"TEMP-"+Date.now(),created_at:new Date().toISOString(),status:"aberta",customer:{nome_razao:Ne.nome_razao||Ne.name||"Cliente",cnpj_cpf:Ne.cnpj_cpf||Ne.cnpj||Ne.cpf||"",email:Ne.email||"",telefone:Ne.telefone||Ne.phone||"",endereco:_s||Ne.endereco||Ne.address||"",cidade:ct.cidade||Ne.cidade||Ne.city||"",estado:ct.estado||Ne.estado||Ne.state||"",cep:ct.cep||Ne.cep||Ne.zip_code||""},description:H.description,scheduled_at:H.scheduled_at,items:B.map(Mt=>({descricao:Mt.descricao,quantidade:Mt.quantidade,preco_unitario:Mt.preco_unitario,preco_total:Mt.preco_total,tempo_estimado_minutos:Mt.tempo_estimado_minutos,materiais:Mt.materiais.map(Ps=>({nome:Ps.nome,quantidade:Ps.quantidade,unidade_medida:Ps.unidade_medida,preco_venda_unitario:Ps.preco_venda_unitario,valor_total:Ps.valor_total})),funcionarios:Mt.funcionarios.map(Ps=>({nome:Ps.nome,tempo_minutos:Ps.tempo_minutos,custo_total:Ps.custo_total}))})),payment_method:H.payment_method,payment_installments:H.payment_installments,bank_account:((le=g.find(Mt=>Mt.id===H.bank_account_id))==null?void 0:le.account_name)||"",warranty_period:H.warranty_period,warranty_type:H.warranty_type,warranty_terms:H.warranty_terms,contract_notes:H.contract_notes,subtotal:T.subtotal,desconto_percentual:H.desconto_percentual,desconto_valor:H.desconto_valor,discount_amount:T.desconto,final_total:T.total,custo_total:T.custo_total,lucro_total:T.lucro_total,margem_lucro:T.margem_lucro,notes:H.notes,prazo_execucao_dias:H.prazo_execucao_dias,data_inicio_execucao:H.data_inicio_execucao,data_fim_execucao:H.data_inicio_execucao&&H.prazo_execucao_dias?new Date(new Date(H.data_inicio_execucao).getTime()+H.prazo_execucao_dias*864e5).toISOString().split("T")[0]:null,additional_costs:{deslocamento:H.custo_deslocamento,estacionamento:H.custo_estacionamento,pedagio:H.custo_pedagio,outros:H.custo_outros,descricao_outros:H.descricao_outros}},ua={order_number:X||"NOVA-OS",date:new Date().toISOString(),title:H.description||"Ordem de Servio",client:{name:Ne.nome_razao||Ne.name||"Cliente",company_name:Ne.nome_fantasia||"",cnpj:Ne.cnpj||"",cpf:Ne.cpf||"",address:_s||"",city:ct.cidade||"",state:ct.estado||"",cep:ct.cep||"",email:Ne.email||"",phone:Ne.telefone||Ne.phone||""},basic_info:{deadline:`${H.prazo_execucao_dias} dias`,brand:"",model:"",equipment:""},items:B.map(Mt=>({service_name:Mt.descricao||"Servio",description:Mt.descricao,scope:"",unit:"un.",unit_price:Mt.preco_unitario,quantity:Mt.quantidade,total_price:Mt.preco_total})),subtotal:T.subtotal,discount:T.desconto,total:T.total,payment:{methods:"Transferncia bancria, dinheiro, carto de crdito, carto de dbito ou pix",pix:Ne.cnpj||Ne.cpf||"",bank_details:g.find(Mt=>Mt.is_default)?{bank:((Le=g.find(Mt=>Mt.is_default))==null?void 0:Le.bank_name)||"",agency:((De=g.find(Mt=>Mt.is_default))==null?void 0:De.agency)||"",account:((ke=g.find(Mt=>Mt.is_default))==null?void 0:ke.account_number)||"",account_type:((Je=g.find(Mt=>Mt.is_default))==null?void 0:Je.account_type)==="checking"?"Corrente":"Poupana",holder:((ot=g.find(Mt=>Mt.is_default))==null?void 0:ot.account_holder)||""}:void 0,conditions:"Sinal de 50% e o valor restante aps a concluso."},warranty:{period:`${H.warranty_period} ${H.warranty_type==="days"?"dias":H.warranty_type==="months"?"meses":"anos"}`,conditions:H.warranty_terms||"Garantias referentes  sistemas de novo em tubulaes antigas."},contract_clauses:[],additional_info:H.notes||"Trabalhamos para que seus projetos, se tornem realidade."};await Jh(ua),alert("PDF gerado com sucesso!")}catch(Ne){console.error("Erro ao gerar PDF:",Ne),alert("Erro ao gerar PDF!")}},ft=le=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(le),_t=async()=>{var le,Le,De,ke,Je;if(!r){alert("Salve a ordem de servio antes de imprimir!");return}try{o(!0);const ot=await cu(r);if(!ot)throw new Error("OS no encontrada");const Ne=l.find(ct=>ct.id===ot.customer_id),at={order_number:ot.order_number||"N/A",date:ot.created_at||new Date().toISOString(),title:ot.description||"Ordem de Servio",client:{name:(Ne==null?void 0:Ne.nome_razao)||(Ne==null?void 0:Ne.name)||"Cliente",company_name:(Ne==null?void 0:Ne.nome_fantasia)||"",cnpj:(Ne==null?void 0:Ne.cnpj)||"",cpf:(Ne==null?void 0:Ne.cpf)||"",address:(Ne==null?void 0:Ne.endereco)||"",city:(Ne==null?void 0:Ne.cidade)||"",state:(Ne==null?void 0:Ne.estado)||"",cep:(Ne==null?void 0:Ne.cep)||"",email:(Ne==null?void 0:Ne.email)||"",phone:(Ne==null?void 0:Ne.telefone)||""},basic_info:{deadline:"15 dias",brand:"",model:"",equipment:""},items:Hb(ot.items||[]),subtotal:ot.subtotal||ot.total_value||0,discount:ot.discount_amount||0,total:ot.total_value||0,payment:{methods:"Transferncia bancria, dinheiro, carto de crdito, carto de dbito ou pix",pix:(Ne==null?void 0:Ne.cnpj)||(Ne==null?void 0:Ne.cpf)||"",bank_details:g.find(ct=>ct.is_default)?{bank:((le=g.find(ct=>ct.is_default))==null?void 0:le.bank_name)||"",agency:((Le=g.find(ct=>ct.is_default))==null?void 0:Le.agency)||"",account:((De=g.find(ct=>ct.is_default))==null?void 0:De.account_number)||"",account_type:((ke=g.find(ct=>ct.is_default))==null?void 0:ke.account_type)==="checking"?"Corrente":"Poupana",holder:((Je=g.find(ct=>ct.is_default))==null?void 0:Je.account_holder)||""}:void 0,conditions:"Sinal de 50% e o valor restante aps a concluso."},warranty:{period:"12 meses",conditions:"Garantias referentes  sistemas de novo em tubulaes antigas."},contract_clauses:[],additional_info:"Trabalhamos para que seus projetos, se tornem realidade."};await Jh(at)}catch(ot){console.error("Error printing:",ot),alert("Erro ao gerar PDF!")}finally{o(!1)}},Xt=async()=>{var le,Le,De,ke,Je;if(!r){alert("Salve a ordem de servio antes de baixar!");return}try{o(!0);const ot=await cu(r);if(!ot)throw new Error("OS no encontrada");const Ne=l.find(ct=>ct.id===ot.customer_id),at={order_number:ot.order_number||"N/A",date:ot.created_at||new Date().toISOString(),title:ot.description||"Ordem de Servio",client:{name:(Ne==null?void 0:Ne.nome_razao)||(Ne==null?void 0:Ne.name)||"Cliente",company_name:(Ne==null?void 0:Ne.nome_fantasia)||"",cnpj:(Ne==null?void 0:Ne.cnpj)||"",cpf:(Ne==null?void 0:Ne.cpf)||"",address:(Ne==null?void 0:Ne.endereco)||"",city:(Ne==null?void 0:Ne.cidade)||"",state:(Ne==null?void 0:Ne.estado)||"",cep:(Ne==null?void 0:Ne.cep)||"",email:(Ne==null?void 0:Ne.email)||"",phone:(Ne==null?void 0:Ne.telefone)||""},basic_info:{deadline:"15 dias",brand:"",model:"",equipment:""},items:Hb(ot.items||[]),subtotal:ot.subtotal||ot.total_value||0,discount:ot.discount_amount||0,total:ot.total_value||0,payment:{methods:"Transferncia bancria, dinheiro, carto de crdito, carto de dbito ou pix",pix:(Ne==null?void 0:Ne.cnpj)||(Ne==null?void 0:Ne.cpf)||"",bank_details:g.find(ct=>ct.is_default)?{bank:((le=g.find(ct=>ct.is_default))==null?void 0:le.bank_name)||"",agency:((Le=g.find(ct=>ct.is_default))==null?void 0:Le.agency)||"",account:((De=g.find(ct=>ct.is_default))==null?void 0:De.account_number)||"",account_type:((ke=g.find(ct=>ct.is_default))==null?void 0:ke.account_type)==="checking"?"Corrente":"Poupana",holder:((Je=g.find(ct=>ct.is_default))==null?void 0:Je.account_holder)||""}:void 0,conditions:"Sinal de 50% e o valor restante aps a concluso."},warranty:{period:"12 meses",conditions:"Garantias referentes  sistemas de novo em tubulaes antigas."},contract_clauses:[],additional_info:"Trabalhamos para que seus projetos, se tornem realidade."};await Jh(at)}catch(ot){console.error("Error downloading:",ot),alert("Erro ao baixar PDF!")}finally{o(!1)}},pr=()=>{if(!r){alert("Salve a ordem de servio antes de enviar!");return}const le=l.find(Le=>Le.id===H.customer_id);F((le==null?void 0:le.email)||""),P(`Ol, segue em anexo a Ordem de Servio ${X||r}.`),_(!0)},Ts=async()=>{if(!f){alert("Digite um email vlido!");return}try{O(!0),alert(`Email enviado para: ${f}

Nota: A funcionalidade de envio real requer configurao do servidor de email.`),_(!1)}catch(le){console.error("Error sending email:",le),alert("Erro ao enviar email!")}finally{O(!1)}},Ra=async()=>{try{if(console.log(" Iniciando cadastro de cliente:",Me),!Me.nome_razao){alert("Nome/Razo Social  obrigatrio!");return}const{data:le,error:Le}=await se.from("customers").insert([{...Me,tipo:"fisica",active:!0}]).select().single();if(Le)throw console.error(" Erro ao cadastrar cliente:",Le),Le;console.log(" Cliente cadastrado:",le),alert(" Cliente cadastrado com sucesso!"),c([...l,le]),I({...H,customer_id:le.id}),je(!1),qe({nome_razao:"",telefone:"",email:"",cnpj_cpf:""})}catch(le){console.error(" Erro completo:",le),alert(` Erro ao cadastrar cliente: ${le.message}`)}},gr=async()=>{try{if(console.log(" Iniciando cadastro de servio:",re),!re.name){alert("Nome do servio  obrigatrio!");return}const{data:le,error:Le}=await se.from("service_catalog").insert([{...re,active:!0,unit:"un"}]).select().single();if(Le)throw console.error(" Erro ao cadastrar servio:",Le),Le;console.log(" Servio cadastrado:",le),alert(" Servio cadastrado com sucesso!"),D([...N,le]),Xe(!1),ie({name:"",description:"",base_price:0,estimated_time_minutes:60})}catch(le){console.error(" Erro completo:",le),alert(` Erro ao cadastrar servio: ${le.message}`)}},St=async()=>{try{if(console.log(" Iniciando cadastro de material:",ve),!ve.name){alert("Nome do material  obrigatrio!");return}const{data:le,error:Le}=await se.from("inventory_items").insert([{name:ve.name,unit:ve.unit,unit_cost:ve.unit_cost,unit_price:ve.unit_price,quantity:ve.quantity,active:!0,min_quantity:1}]).select().single();if(Le)throw console.error(" Erro ao cadastrar material:",Le),Le;console.log(" Material cadastrado:",le),alert(" Material cadastrado com sucesso!"),E([...S,le]),K(!1),ye({name:"",unit:"un",unit_cost:0,unit_price:0,quantity:1})}catch(le){console.error(" Erro completo:",le),alert(` Erro ao cadastrar material: ${le.message}`)}};return e.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen pb-24",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(ut,{className:"h-8 w-8 text-blue-600"}),n?"Editar Ordem de Servio":"Nova Ordem de Servio Detalhada"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Sistema completo com mltiplos servios, materiais e funcionrios"})]}),!n&&e.jsxs("div",{className:"text-sm",children:[it&&e.jsx("span",{className:"text-blue-600",children:" Salvando..."}),!it&&Ie&&e.jsxs("span",{className:"text-green-600",children:[" Salvo ",new Date(Ie).toLocaleTimeString()]}),he&&e.jsx("span",{className:"text-red-600",children:" Erro ao salvar"})]})]}),!n&&e.jsx("div",{className:"mb-4",children:e.jsxs("button",{onClick:()=>L(!0),className:"w-full bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white px-6 py-3 rounded-lg font-medium flex items-center justify-center gap-2 transition-all shadow-lg",children:[e.jsx(ut,{className:"h-5 w-5"})," Usar Template de OS"]})}),e.jsx(XU,{isOpen:C,onClose:()=>L(!1),onSelect:le=>{I({...H,...le.formData||{}}),le.serviceItems&&$(le.serviceItems),L(!1)}}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:e.jsxs("div",{className:"flex border-b",children:[e.jsxs("button",{onClick:()=>oe("dados"),className:`flex-1 px-6 py-4 font-semibold transition-all flex items-center justify-center gap-2 ${V==="dados"?"bg-blue-500 text-white border-b-4 border-blue-600":"bg-white text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(Jt,{className:"h-5 w-5"}),"Dados Bsicos"]}),e.jsxs("button",{onClick:()=>oe("servicos"),className:`flex-1 px-6 py-4 font-semibold transition-all flex items-center justify-center gap-2 ${V==="servicos"?"bg-green-500 text-white border-b-4 border-green-600":"bg-white text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(dd,{className:"h-5 w-5"}),"Servios e Materiais"]}),e.jsxs("button",{onClick:()=>oe("pagamento"),className:`flex-1 px-6 py-4 font-semibold transition-all flex items-center justify-center gap-2 ${V==="pagamento"?"bg-emerald-500 text-white border-b-4 border-emerald-600":"bg-white text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(Ut,{className:"h-5 w-5"}),"Pagamento"]}),e.jsxs("button",{onClick:()=>oe("garantia"),className:`flex-1 px-6 py-4 font-semibold transition-all flex items-center justify-center gap-2 ${V==="garantia"?"bg-amber-500 text-white border-b-4 border-amber-600":"bg-white text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(vt,{className:"h-5 w-5"}),"Garantia"]}),e.jsxs("button",{onClick:()=>oe("contrato"),className:`flex-1 px-6 py-4 font-semibold transition-all flex items-center justify-center gap-2 ${V==="contrato"?"bg-purple-500 text-white border-b-4 border-purple-600":"bg-white text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(ut,{className:"h-5 w-5"}),"Contrato"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[V==="dados"&&e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Jt,{className:"h-5 w-5 text-blue-600"}),"Informaes Bsicas"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Cliente *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:H.customer_id,onChange:le=>dt(le.target.value),className:"flex-1 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione..."}),l.map(le=>e.jsx("option",{value:le.id,children:le.nome_razao},le.id))]}),e.jsxs("button",{type:"button",onClick:()=>{console.log("Abrindo modal de novo cliente"),je(!0)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-1",title:"Novo Cliente",children:[e.jsx(bt,{className:"h-4 w-4"}),"Novo"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Data Agendada"}),e.jsx("input",{type:"datetime-local",value:H.scheduled_at,onChange:le=>I({...H,scheduled_at:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Data Incio Execuo"}),e.jsx("input",{type:"date",value:H.data_inicio_execucao,onChange:le=>I({...H,data_inicio_execucao:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Prazo de Execuo (dias)"}),e.jsx("input",{type:"number",value:H.prazo_execucao_dias,min:"1",onChange:le=>I({...H,prazo_execucao_dias:Number(le.target.value)}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descrio Geral"}),e.jsx("textarea",{value:H.description,onChange:le=>I({...H,description:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Descrio opcional da OS..."})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Escopo Detalhado do Servio"}),e.jsx("textarea",{value:H.escopo_detalhado,onChange:le=>I({...H,escopo_detalhado:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Descreva em detalhes tudo que ser executado no servio..."})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Relatrio Tcnico"}),e.jsx("textarea",{value:H.relatorio_tecnico,onChange:le=>I({...H,relatorio_tecnico:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Relatrio tcnico detalhado (diagnstico, anlise, etc)..."})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Orientaes de Servio"}),e.jsx("textarea",{value:H.orientacoes_servico,onChange:le=>I({...H,orientacoes_servico:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Instrues e orientaes para a equipe executar o servio..."})]}),e.jsx("div",{className:"md:col-span-3",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:H.show_value,onChange:le=>I({...H,show_value:le.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Exibir valores na proposta (desmarque para enviar ao cliente sem valores ou para funcionrios)"})]})})]}),d&&e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("h3",{className:"text-sm font-semibold text-blue-900 mb-3 flex items-center gap-2",children:[e.jsx(Jt,{className:"h-4 w-4"}),"Dados do Cliente"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Nome/Razo Social:"}),e.jsx("p",{className:"font-medium text-gray-900",children:d.nome_razao})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"CPF/CNPJ:"}),e.jsx("p",{className:"font-medium text-gray-900",children:d.cpf||d.cnpj||"No informado"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Telefone:"}),e.jsx("p",{className:"font-medium text-gray-900",children:d.telefone||"No informado"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Email:"}),e.jsx("p",{className:"font-medium text-gray-900",children:d.email||"No informado"})]}),d.address&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("span",{className:"text-gray-600",children:"Endereo:"}),e.jsx("p",{className:"font-medium text-gray-900",children:[d.address.logradouro,d.address.numero,d.address.complemento,d.address.bairro,d.address.cidade,d.address.estado,d.address.cep&&`CEP: ${d.address.cep}`].filter(Boolean).join(", ")})]})]})]})]}),V==="pagamento"&&e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Ut,{className:"h-5 w-5 text-green-600"}),"Pagamento e Financeiro"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Forma de Pagamento"}),e.jsxs("select",{value:H.payment_method,onChange:le=>I({...H,payment_method:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"dinheiro",children:"Dinheiro"}),e.jsx("option",{value:"pix",children:"PIX"}),e.jsx("option",{value:"debito",children:"Carto de Dbito"}),e.jsx("option",{value:"credito",children:"Carto de Crdito"}),e.jsx("option",{value:"transferencia",children:"Transferncia Bancria"}),e.jsx("option",{value:"boleto",children:"Boleto"}),e.jsx("option",{value:"cheque",children:"Cheque"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Parcelas"}),e.jsxs("select",{value:H.payment_installments,onChange:le=>I({...H,payment_installments:Number(le.target.value)}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"1",children:" vista"}),[2,3,4,5,6,7,8,9,10,12].map(le=>e.jsxs("option",{value:le,children:[le,"x"]},le))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Conta Bancria"}),e.jsxs("select",{value:H.bank_account_id,onChange:le=>I({...H,bank_account_id:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Padro"}),g.map(le=>e.jsxs("option",{value:le.id,children:[le.account_name," - ",le.bank_name]},le.id))]})]})]})]}),V==="garantia"&&e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(vt,{className:"h-5 w-5 text-amber-600"}),"Garantia"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Perodo de Garantia"}),e.jsx("input",{type:"number",value:H.warranty_period,min:"0",onChange:le=>I({...H,warranty_period:Number(le.target.value)}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tipo de Perodo"}),e.jsxs("select",{value:H.warranty_type,onChange:le=>I({...H,warranty_type:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"days",children:"Dias"}),e.jsx("option",{value:"months",children:"Meses"}),e.jsx("option",{value:"years",children:"Anos"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Termos de Garantia"}),e.jsx("textarea",{value:H.warranty_terms,onChange:le=>I({...H,warranty_terms:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Descreva as condies da garantia: cobertura, excluses, prazos..."})]}),e.jsx("div",{className:"md:col-span-2 bg-amber-50 border border-amber-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-amber-800",children:[e.jsx("strong",{children:"Garantia:"})," ",H.warranty_period," ",H.warranty_type==="days"?"dias":H.warranty_type==="months"?"meses":"anos"," ",H.scheduled_at&&`(vlida at ${new Date(new Date(H.scheduled_at).getTime()+H.warranty_period*(H.warranty_type==="days"?864e5:H.warranty_type==="months"?2592e6:31536e6)).toLocaleDateString("pt-BR")})`]})})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-6 shadow-md border-2 border-green-300",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Ut,{className:"h-5 w-5 text-green-600"})," Condies de Pagamento"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Condies de Pagamento"}),e.jsx("textarea",{value:H.payment_conditions,onChange:le=>I({...H,payment_conditions:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",rows:3,placeholder:"Ex: Sinal de 50% e o valor restante aps a concluso, Pagamento  vista com 10% de desconto, Parcelado em 3x sem juros, etc."})]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsx("strong",{children:" Dica:"})," Estas condies aparecero no PDF da ordem de servio e na proposta enviada ao cliente."]})})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-6 shadow-md border-2 border-red-300",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Ut,{className:"h-5 w-5 text-red-600"})," Custos Adicionais (Deduzidos do Total)"]}),e.jsx("div",{className:"bg-yellow-50 border-2 border-yellow-300 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-sm text-yellow-900 flex items-center gap-2",children:[e.jsx(es,{className:"h-4 w-4"}),e.jsx("strong",{children:" Ateno:"})," Estes custos sero DEDUZIDOS (subtrados) do valor total da OS, no adicionados."]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 flex items-center gap-2",children:" Deslocamento"}),e.jsx("input",{type:"number",value:H.custo_deslocamento,min:"0",step:"0.01",onChange:le=>I({...H,custo_deslocamento:Number(le.target.value)}),className:"w-full px-4 py-2 border-2 border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500 bg-white",placeholder:"R$ 0,00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 flex items-center gap-2",children:" Estacionamento"}),e.jsx("input",{type:"number",value:H.custo_estacionamento,min:"0",step:"0.01",onChange:le=>I({...H,custo_estacionamento:Number(le.target.value)}),className:"w-full px-4 py-2 border-2 border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500 bg-white",placeholder:"R$ 0,00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 flex items-center gap-2",children:" Pedgio"}),e.jsx("input",{type:"number",value:H.custo_pedagio,min:"0",step:"0.01",onChange:le=>I({...H,custo_pedagio:Number(le.target.value)}),className:"w-full px-4 py-2 border-2 border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500 bg-white",placeholder:"R$ 0,00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 flex items-center gap-2",children:" Outros Custos"}),e.jsx("input",{type:"number",value:H.custo_outros,min:"0",step:"0.01",onChange:le=>I({...H,custo_outros:Number(le.target.value)}),className:"w-full px-4 py-2 border-2 border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500 bg-white",placeholder:"R$ 0,00"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Descrio dos Outros Custos"}),e.jsx("input",{type:"text",value:H.descricao_outros,onChange:le=>I({...H,descricao_outros:le.target.value}),className:"w-full px-4 py-2 border-2 border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500 bg-white",placeholder:"Ex: Alimentao, hospedagem, materiais extras..."})]}),(H.custo_deslocamento>0||H.custo_estacionamento>0||H.custo_pedagio>0||H.custo_outros>0)&&e.jsxs("div",{className:"md:col-span-2 bg-red-100 border-2 border-red-400 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-bold text-red-900 mb-2",children:" Total de Custos a Deduzir:"}),e.jsxs("p",{className:"text-2xl font-bold text-red-700",children:["-",ft((H.custo_deslocamento||0)+(H.custo_estacionamento||0)+(H.custo_pedagio||0)+(H.custo_outros||0))]}),e.jsx("p",{className:"text-xs text-red-700 mt-1 font-semibold",children:" Este valor ser DEDUZIDO do total da OS"})]})]})]}),V==="contrato"&&e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(ut,{className:"h-5 w-5 text-blue-600"}),"Contrato"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Modelo de Contrato"}),e.jsxs("select",{value:H.contract_template_id,onChange:le=>I({...H,contract_template_id:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Sem contrato"}),p.map(le=>e.jsx("option",{value:le.id,children:le.name},le.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Observaes do Contrato"}),e.jsx("textarea",{value:H.contract_notes,onChange:le=>I({...H,contract_notes:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Clusulas especiais, condies particulares..."})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 shadow-md border-2 border-blue-300",children:[e.jsxs("button",{type:"button",onClick:()=>$e("company"),className:"w-full flex items-center justify-between text-lg font-semibold mb-4 hover:text-blue-700 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Er,{className:"h-5 w-5 text-blue-600"})," Dados da Empresa no Documento"]}),xe.company?e.jsx(Fn,{className:"h-5 w-5"}):e.jsx(Ir,{className:"h-5 w-5"})]}),xe.company&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nome da Empresa"}),e.jsx("input",{type:"text",value:H.company_name,onChange:le=>I({...H,company_name:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Deixe vazio para usar configurao padro"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"CNPJ"}),e.jsx("input",{type:"text",value:H.company_cnpj,onChange:le=>I({...H,company_cnpj:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"00.000.000/0000-00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Telefone"}),e.jsx("input",{type:"text",value:H.company_phone,onChange:le=>I({...H,company_phone:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"(00) 00000-0000"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),e.jsx("input",{type:"email",value:H.company_email,onChange:le=>I({...H,company_email:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"contato@empresa.com.br"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Endereo Completo"}),e.jsx("textarea",{value:H.company_address,onChange:le=>I({...H,company_address:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Rua, nmero, complemento, bairro, cidade - UF, CEP"})]}),e.jsx("div",{className:"md:col-span-2 bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:" Dica:"})," Estes dados sobrescrevem as configuraes padro apenas para este documento."]})})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-teal-50 rounded-xl p-6 shadow-md border-2 border-green-300",children:[e.jsxs("button",{type:"button",onClick:()=>$e("bankData"),className:"w-full flex items-center justify-between text-lg font-semibold mb-4 hover:text-green-700 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Es,{className:"h-5 w-5 text-green-600"})," Dados Bancrios e Formas de Pagamento"]}),xe.bankData?e.jsx(Fn,{className:"h-5 w-5"}):e.jsx(Ir,{className:"h-5 w-5"})]}),xe.bankData&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Formas de Pagamento Aceitas"}),e.jsx("input",{type:"text",value:H.payment_methods_text,onChange:le=>I({...H,payment_methods_text:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",placeholder:"Ex: Transferncia bancria, dinheiro, carto de crdito..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Chave PIX"}),e.jsx("input",{type:"text",value:H.payment_pix,onChange:le=>I({...H,payment_pix:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",placeholder:"CPF/CNPJ ou chave aleatria"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Banco"}),e.jsx("input",{type:"text",value:H.bank_name,onChange:le=>I({...H,bank_name:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",placeholder:"Nome do Banco"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Agncia"}),e.jsx("input",{type:"text",value:H.bank_agency,onChange:le=>I({...H,bank_agency:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",placeholder:"0000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Conta"}),e.jsx("input",{type:"text",value:H.bank_account,onChange:le=>I({...H,bank_account:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",placeholder:"00000-0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tipo de Conta"}),e.jsxs("select",{value:H.bank_account_type,onChange:le=>I({...H,bank_account_type:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"Corrente",children:"Corrente"}),e.jsx("option",{value:"Poupana",children:"Poupana"}),e.jsx("option",{value:"Salrio",children:"Salrio"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Titular da Conta"}),e.jsx("input",{type:"text",value:H.bank_holder,onChange:le=>I({...H,bank_holder:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",placeholder:"Nome completo do titular"})]}),e.jsx("div",{className:"md:col-span-2 bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsx("strong",{children:" Dica:"})," Estes dados bancrios aparecero no documento para facilitar o pagamento do cliente."]})})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 shadow-md border-2 border-purple-300",children:[e.jsxs("button",{type:"button",onClick:()=>$e("additionalClauses"),className:"w-full flex items-center justify-between text-lg font-semibold mb-4 hover:text-purple-700 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W3,{className:"h-5 w-5 text-purple-600"})," Clusulas e Informaes Adicionais"]}),xe.additionalClauses?e.jsx(Fn,{className:"h-5 w-5"}):e.jsx(Ir,{className:"h-5 w-5"})]}),xe.additionalClauses&&e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Clusulas Contratuais Adicionais"}),e.jsx("textarea",{value:H.contract_clauses,onChange:le=>I({...H,contract_clauses:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500",rows:5,placeholder:"Digite clusulas contratuais especficas, termos e condies adicionais..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Informaes Adicionais / Rodap"}),e.jsx("textarea",{value:H.additional_info,onChange:le=>I({...H,additional_info:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500",rows:3,placeholder:"Mensagem de rodap, slogan, avisos importantes..."})]}),e.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-purple-800",children:[e.jsx("strong",{children:" Dica:"})," Use este espao para adicionar informaes que devem aparecer no final do documento."]})})]})]}),V==="servicos"&&e.jsxs(e.Fragment,{children:[B.map((le,Le)=>e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl p-6 shadow-sm border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Servio #",Le+1]}),B.length>1&&e.jsx("button",{onClick:()=>ta(le.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(Vt,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsx("div",{className:"flex-1",children:e.jsx(YU,{services:N.map(De=>({id:De.id,name:De.name,description:De.description,category:De.category,base_price:De.base_price})),onSelect:De=>{if(De){const ke=N.find(Je=>Je.id===De.id);if(ke){const ot=(ke.service_catalog_materials||[]).map(Ne=>({id:crypto.randomUUID(),material_id:Ne.material_id||"",nome:Ne.material_name||"",quantidade:Number(Ne.quantity)||1,preco_compra:Number(Ne.unit_cost_at_time)||0,preco_venda:Number(Ne.unit_sale_price)||0,unidade_medida:Ne.material_unit||"UN",preco_compra_unitario:Number(Ne.unit_cost_at_time)||0,preco_venda_unitario:Number(Ne.unit_sale_price)||0,custo_total:(Number(Ne.quantity)||1)*(Number(Ne.unit_cost_at_time)||0),valor_total:(Number(Ne.quantity)||1)*(Number(Ne.unit_sale_price)||0),lucro:(Number(Ne.quantity)||1)*(Number(Ne.unit_sale_price)||0)-(Number(Ne.quantity)||1)*(Number(Ne.unit_cost_at_time)||0)}));Pt(le.id,{descricao:ke.name,preco_unitario:Number(ke.base_price)||0,tempo_estimado_minutos:Number(ke.estimated_duration)||0,materiais:ot,funcionarios:[]})}}}})}),e.jsxs("button",{type:"button",onClick:()=>{console.log("Abrindo modal de novo servio"),Xe(!0)},className:"px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-1 whitespace-nowrap",title:"Novo Servio",children:[e.jsx(bt,{className:"h-4 w-4"}),"Novo Servio"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descrio do Servio *"}),e.jsx("input",{type:"text",value:le.descricao,onChange:De=>Pt(le.id,{descricao:De.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Instalao de Ar Condicionado 12k BTU"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tempo (min)"}),e.jsx("input",{type:"number",value:le.tempo_estimado_minutos,onChange:De=>Pt(le.id,{tempo_estimado_minutos:Number(De.target.value)}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quantidade"}),e.jsx("input",{type:"number",value:le.quantidade,min:"1",onChange:De=>Pt(le.id,{quantidade:Number(De.target.value)}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Preo Unitrio"}),e.jsx("input",{type:"number",value:le.preco_unitario,step:"0.01",onChange:De=>Pt(le.id,{preco_unitario:Number(De.target.value)}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Total"}),e.jsx("input",{type:"text",value:ft(le.preco_total),disabled:!0,className:"w-full px-4 py-2 border rounded-lg bg-gray-50 font-bold"})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"font-semibold text-sm flex items-center gap-2",children:[e.jsx(wt,{className:"h-4 w-4"}),"Materiais"]}),e.jsx("button",{onClick:()=>de(le.id),className:"px-3 py-1 text-sm bg-green-50 text-green-600 rounded-lg hover:bg-green-100",children:"+ Material"})]}),le.materiais.length>0&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-green-900 mb-2",children:" Buscar do Inventrio/Estoque"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{onChange:De=>{const ke=S.find(Je=>Je.id===De.target.value);if(ke&&le.materiais.length>0){const Je=le.materiais[le.materiais.length-1];Je.material_id||Qe(le.id,Je.id,{material_id:ke.id,nome:ke.name,quantidade:1,preco_compra:Number(ke.purchase_price)||0,preco_venda:Number(ke.sale_price)||0,unidade_medida:ke.unit||"UN"})}De.target.value=""},className:"flex-1 px-4 py-2 border-2 border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 bg-white",children:[e.jsx("option",{value:"",children:"Selecione um item do estoque..."}),S.map(De=>e.jsxs("option",{value:De.id,children:[De.name," - Estoque: ",De.quantity||0," ",De.unit||"UN"," - R$ ",Number(De.sale_price||0).toFixed(2)]},De.id))]}),e.jsxs("button",{type:"button",onClick:()=>{console.log("Abrindo modal de novo material"),K(!0)},className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors flex items-center gap-1 whitespace-nowrap",title:"Novo Material",children:[e.jsx(bt,{className:"h-4 w-4"}),"Novo"]})]}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Preenche o ltimo material vazio adicionado"})]}),le.materiais.length===0&&e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Nenhum material adicionado"}),le.materiais.map(De=>e.jsxs("div",{className:"border rounded-lg p-3 mb-3 bg-gray-50",children:[e.jsxs("div",{className:"grid grid-cols-6 gap-2 mb-2",children:[e.jsxs("select",{value:De.material_id,onChange:ke=>Ze(le.id,De.id,ke.target.value),className:"col-span-3 px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"",children:"Selecione o material..."}),u.map(ke=>e.jsxs("option",{value:ke.id,children:[ke.name," - ",ft(Number(ke.sale_price))," (",ke.unit||"UN",")"]},ke.id))]}),e.jsxs("div",{className:"col-span-2 relative",children:[e.jsx("input",{type:"number",value:De.quantidade,min:"0.01",step:"0.01",onChange:ke=>Qe(le.id,De.id,{quantidade:Number(ke.target.value)}),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-green-500",placeholder:"Qtd"}),De.unidade_medida&&e.jsx("span",{className:"absolute right-3 top-2 text-xs text-gray-500 font-semibold",children:De.unidade_medida})]}),e.jsx("button",{onClick:()=>Ee(le.id,De.id),className:"px-3 py-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",children:e.jsx(Vt,{className:"h-4 w-4"})})]}),De.material_id&&e.jsxs("div",{className:"space-y-3 mt-3 pt-3 border-t",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 block mb-1",children:"Custo Unitrio:"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ut,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-3 w-3 text-orange-500"}),e.jsx("input",{type:"number",value:De.preco_compra_unitario||"",onChange:ke=>Qe(le.id,De.id,{preco_compra_unitario:Number(ke.target.value)}),className:"w-full pl-7 pr-2 py-1.5 border rounded text-sm focus:ring-2 focus:ring-orange-500",step:"0.01",placeholder:"0.00"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 block mb-1",children:"Preo de Venda:"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ut,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-3 w-3 text-green-500"}),e.jsx("input",{type:"number",value:De.preco_venda_unitario||"",onChange:ke=>Qe(le.id,De.id,{preco_venda_unitario:Number(ke.target.value)}),className:"w-full pl-7 pr-2 py-1.5 border rounded text-sm focus:ring-2 focus:ring-green-500",step:"0.01",placeholder:"0.00"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 bg-gray-50 rounded p-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Custo Total:"}),e.jsx("p",{className:"font-bold text-orange-700",children:ft(De.custo_total||0)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Venda Total:"}),e.jsx("p",{className:"font-bold text-green-700",children:ft(De.valor_total||0)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Lucro:"}),e.jsx("p",{className:`font-bold ${(De.lucro||0)>=0?"text-green-600":"text-red-600"}`,children:ft(De.lucro||0)})]})]})]})]},De.id))]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("h4",{className:"font-semibold text-sm flex items-center gap-2",children:[e.jsx(Nt,{className:"h-4 w-4 text-purple-600"}),e.jsx("span",{className:"text-purple-900",children:"Mo de Obra"})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border-2 border-purple-200 rounded-xl p-4 mb-4",children:[e.jsxs("label",{className:"block text-sm font-bold text-purple-900 mb-2 flex items-center gap-2",children:[e.jsx(Qt,{className:"h-4 w-4"})," Buscar e Adicionar Funcionrio"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:ue[le.id]||"",onChange:De=>me({...ue,[le.id]:De.target.value}),className:"w-full px-4 py-3 border-2 border-purple-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 bg-white text-sm",placeholder:"Digite o nome do funcionrio..."}),ue[le.id]&&e.jsxs("div",{className:"absolute z-10 w-full mt-2 bg-white border-2 border-purple-200 rounded-xl shadow-2xl max-h-64 overflow-y-auto",children:[m.filter(De=>{const ke=(De.name||De.nome||"").toLowerCase(),Je=(De.role||De.cargo||"").toLowerCase(),ot=ue[le.id].toLowerCase();return ke.includes(ot)||Je.includes(ot)}).map(De=>e.jsx("button",{onClick:()=>{const ke={id:crypto.randomUUID(),staff_id:De.id,nome:De.name||De.nome||"Funcionrio",tempo_minutos:60,custo_hora:Number(De.hourly_rate||De.custo_hora||0),custo_total:1*Number(De.hourly_rate||De.custo_hora||0)};Pt(le.id,{funcionarios:[...le.funcionarios,ke]}),me({...ue,[le.id]:""})},className:"w-full px-4 py-3 hover:bg-purple-50 transition-colors text-left border-b border-purple-100 last:border-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-purple-900",children:De.name||De.nome}),e.jsx("p",{className:"text-xs text-gray-600",children:De.role||De.cargo||"N/A"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-green-600",children:["R$ ",Number(De.hourly_rate||De.custo_hora||0).toFixed(2),"/h"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Clique para adicionar"})]})]})},De.id)),m.filter(De=>{const ke=(De.name||De.nome||"").toLowerCase(),Je=(De.role||De.cargo||"").toLowerCase(),ot=ue[le.id].toLowerCase();return ke.includes(ot)||Je.includes(ot)}).length===0&&e.jsxs("div",{className:"px-4 py-8 text-center text-gray-500",children:[e.jsx(Nt,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm",children:"Nenhum funcionrio encontrado"})]})]})]}),e.jsx("p",{className:"text-xs text-purple-700 mt-2 flex items-center gap-1",children:" Digite para buscar e adicionar funcionrios instantaneamente"})]}),le.funcionarios.length>0&&e.jsx("div",{className:"space-y-3",children:le.funcionarios.map((De,ke)=>e.jsxs(W.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-white border-2 border-purple-100 rounded-xl p-4 hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 font-bold text-sm",children:ke+1})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-purple-900",children:De.nome}),e.jsxs("p",{className:"text-xs text-gray-500",children:["R$ ",De.custo_hora.toFixed(2),"/hora"]})]})]}),e.jsx("button",{onClick:()=>Ye(le.id,De.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Remover funcionrio",children:e.jsx(Vt,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:" Tempo de Trabalho"}),e.jsx("div",{className:"grid grid-cols-6 gap-2 mb-2",children:[10,30,60,120,240,480].map(Je=>e.jsx("button",{type:"button",onClick:()=>It(le.id,De.id,{tempo_minutos:Je}),className:`px-2 py-1 rounded-lg text-xs font-semibold transition-all ${De.tempo_minutos===Je?"bg-purple-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:Je<60?`${Je}m`:`${Je/60}h`},Je))}),e.jsx("select",{value:De.tempo_minutos,onChange:Je=>It(le.id,De.id,{tempo_minutos:Number(Je.target.value)}),className:"w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm",children:Array.from({length:96},(Je,ot)=>(ot+1)*10).map(Je=>e.jsx("option",{value:Je,children:Je<60?`${Je} minutos`:Je===60?"1 hora":Je%60===0?`${Je/60} horas`:`${Math.floor(Je/60)}h ${Je%60}m`},Je))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:" Custo/Hora"}),e.jsx("input",{type:"text",value:ft(De.custo_hora),disabled:!0,className:"w-full px-3 py-2 border-2 border-gray-200 rounded-lg bg-blue-50 font-bold text-blue-700 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:" Custo Total"}),e.jsx("input",{type:"text",value:ft(De.custo_total),disabled:!0,className:"w-full px-3 py-2 border-2 border-gray-200 rounded-lg bg-green-50 font-bold text-green-700 text-sm"})]})]})]})]},De.id))}),le.funcionarios.length===0&&e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-xl border-2 border-dashed border-gray-300",children:[e.jsx(Nt,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Nenhum funcionrio adicionado"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Use a busca acima para adicionar"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 grid grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Custo Materiais:"}),e.jsx("p",{className:"font-bold text-orange-600",children:ft(le.custo_materiais)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Custo Mo Obra:"}),e.jsx("p",{className:"font-bold text-blue-600",children:ft(le.custo_mao_obra)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Lucro:"}),e.jsx("p",{className:"font-bold text-green-600",children:ft(le.lucro)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Margem:"}),e.jsxs("p",{className:"font-bold text-purple-600",children:[le.margem_lucro.toFixed(1),"%"]})]})]})]})]},le.id)),e.jsxs("button",{onClick:et,className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors flex items-center justify-center gap-2 text-gray-600 hover:text-blue-600",children:[e.jsx(bt,{className:"h-5 w-5"}),"Adicionar Outro Servio"]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(ZU,{subtotal:T.subtotal,discount:T.desconto,total:T.total,costMaterials:T.custo_total_materiais,costLabor:T.custo_total_mao_obra,totalCost:T.custo_total,profit:T.lucro_total,margin:T.margem_lucro}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border sticky top-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Ut,{className:"h-5 w-5 text-green-600"}),"Resumo Financeiro"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal Servios:"}),e.jsx("span",{className:"font-semibold",children:ft(T.subtotal)})]}),(H.custo_deslocamento||0)+(H.custo_estacionamento||0)+(H.custo_pedagio||0)+(H.custo_outros||0)>0&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-orange-50 border-2 border-orange-200 rounded-lg p-3 space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm text-orange-700 flex items-center gap-1",children:" Custos Adicionais (Deduzidos)"}),H.custo_deslocamento>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-orange-600",children:" Deslocamento:"}),e.jsxs("span",{className:"font-semibold text-orange-700",children:["-",ft(H.custo_deslocamento)]})]}),H.custo_estacionamento>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-orange-600",children:" Estacionamento:"}),e.jsxs("span",{className:"font-semibold text-orange-700",children:["-",ft(H.custo_estacionamento)]})]}),H.custo_pedagio>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-orange-600",children:" Pedgio:"}),e.jsxs("span",{className:"font-semibold text-orange-700",children:["-",ft(H.custo_pedagio)]})]}),H.custo_outros>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-orange-600",children:[" ",H.descricao_outros||"Outros",":"]}),e.jsxs("span",{className:"font-semibold text-orange-700",children:["-",ft(H.custo_outros)]})]}),e.jsxs("div",{className:"pt-2 border-t border-orange-300 flex justify-between",children:[e.jsx("span",{className:"font-bold text-orange-700",children:"Total Deduzido:"}),e.jsxs("span",{className:"font-bold text-red-700",children:["-",ft((H.custo_deslocamento||0)+(H.custo_estacionamento||0)+(H.custo_pedagio||0)+(H.custo_outros||0))]})]})]})}),e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("h4",{className:"font-semibold text-sm mb-3 text-red-600",children:" Desconto"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-red-50 rounded-lg p-3 border border-red-200",children:[e.jsx("label",{className:"block text-xs font-medium text-red-700 mb-1",children:"Desconto Percentual (%)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:H.desconto_percentual,step:"0.1",min:"0",max:"100",onChange:le=>I({...H,desconto_percentual:Number(le.target.value),desconto_valor:0}),className:"flex-1 px-3 py-2 border-2 border-red-300 rounded-lg text-sm font-semibold focus:ring-2 focus:ring-red-500 focus:border-red-500"}),e.jsx("span",{className:"text-red-700 font-bold text-lg",children:"%"})]})]}),e.jsx("div",{className:"text-center text-xs text-gray-500 font-medium",children:" OU "}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-3 border border-red-200",children:[e.jsx("label",{className:"block text-xs font-medium text-red-700 mb-1",children:"Desconto em Valor (R$)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-red-700 font-bold text-lg",children:"R$"}),e.jsx("input",{type:"number",value:H.desconto_valor,step:"0.01",min:"0",onChange:le=>I({...H,desconto_valor:Number(le.target.value),desconto_percentual:0}),className:"flex-1 px-3 py-2 border-2 border-red-300 rounded-lg text-sm font-semibold focus:ring-2 focus:ring-red-500 focus:border-red-500"})]})]})]})]}),e.jsxs("div",{className:"bg-red-100 border-2 border-red-300 rounded-lg p-3 flex justify-between items-center",children:[e.jsx("span",{className:"text-red-700 font-semibold",children:"Desconto Aplicado:"}),e.jsxs("span",{className:"text-red-700 font-bold text-xl",children:["-",ft(T.desconto)]})]}),e.jsxs("div",{className:"border-t pt-3 flex justify-between text-lg font-bold",children:[e.jsx("span",{children:"TOTAL:"}),e.jsx("span",{className:"text-blue-600",children:ft(T.total)})]}),e.jsxs("div",{className:"border-t pt-3",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:H.show_material_costs,onChange:le=>I({...H,show_material_costs:le.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-700",children:"Mostrar custos dos materiais no documento"})]}),e.jsx("p",{className:"text-xs text-gray-500 ml-6 mt-1",children:"Se desmarcado, apenas os preos de venda sero exibidos"})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t space-y-3",children:[e.jsxs("h4",{className:"font-semibold text-sm mb-3 flex items-center gap-2",children:[e.jsx(Ut,{className:"h-4 w-4 text-green-600"}),"Informaes de Pagamento"]}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-blue-50 rounded-lg p-4 border-2 border-green-200",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Forma:"}),e.jsx("span",{className:"font-semibold text-gray-900 capitalize",children:H.payment_method==="dinheiro"?"Dinheiro":H.payment_method==="pix"?"PIX":H.payment_method==="debito"?"Dbito":H.payment_method==="credito"?"Crdito":H.payment_method==="transferencia"?"Transferncia":H.payment_method==="boleto"?"Boleto":"Cheque"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Parcelas:"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[H.payment_installments,"x ",H.payment_installments>1&&`de ${ft(T.total/H.payment_installments)}`]})]}),H.bank_account_id&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Conta:"}),e.jsx("span",{className:"font-semibold text-gray-900",children:((Ga=g.find(le=>le.id===H.bank_account_id))==null?void 0:Ga.account_name)||"Padro"})]}),H.warranty_period>0&&e.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t",children:[e.jsxs("span",{className:"text-amber-600 flex items-center gap-1",children:[e.jsx(vt,{className:"h-3 w-3"}),"Garantia:"]}),e.jsxs("span",{className:"font-semibold text-amber-700",children:[H.warranty_period," ",H.warranty_type==="days"?"dias":H.warranty_type==="months"?"meses":"anos"]})]})]})})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t space-y-3",children:[e.jsx("h4",{className:"font-semibold text-sm mb-3",children:"Anlise de Custos"}),e.jsx("div",{className:"bg-orange-50 rounded-lg p-3",children:e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-orange-700",children:"Custo Materiais:"}),e.jsx("span",{className:"font-bold text-orange-700",children:ft(T.custo_total_materiais)})]})}),e.jsx("div",{className:"bg-blue-50 rounded-lg p-3",children:e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-blue-700",children:"Custo Mo de Obra:"}),e.jsx("span",{className:"font-bold text-blue-700",children:ft(T.custo_total_mao_obra)})]})}),e.jsx("div",{className:"bg-gray-100 rounded-lg p-3",children:e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Custo Total:"}),e.jsx("span",{className:"font-bold text-gray-900",children:ft(T.custo_total)})]})}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border-2 border-green-200",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-green-700 font-semibold",children:"Lucro:"}),e.jsx("span",{className:"font-bold text-green-700 text-lg",children:ft(T.lucro_total)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-600 text-sm",children:"Margem:"}),e.jsxs("span",{className:"font-bold text-green-600",children:[T.margem_lucro.toFixed(1),"%"]})]})]})]})]})]})]}),R&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-xl p-6 max-w-md w-full shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(Ma,{className:"h-5 w-5 text-blue-600"}),"Enviar Ordem de Servio"]}),e.jsx("button",{onClick:()=>_(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ht,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email do Destinatrio"}),e.jsx("input",{type:"email",value:f,onChange:le=>F(le.target.value),placeholder:"cliente@email.com",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Mensagem"}),e.jsx("textarea",{value:M,onChange:le=>P(le.target.value),placeholder:"Digite uma mensagem...",rows:4,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx("button",{onClick:()=>_(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{onClick:Ts,disabled:Z,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center gap-2",children:Z?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ma,{className:"h-4 w-4"}),"Enviar"]})})]})]})]})}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t shadow-lg p-4 z-40",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[n&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:_t,disabled:i,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2 disabled:opacity-50",title:"Imprimir OS",children:[e.jsx(Bu,{className:"h-4 w-4"}),"Imprimir"]}),e.jsxs("button",{onClick:Xt,disabled:i,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2 disabled:opacity-50",title:"Baixar PDF",children:[e.jsx(wa,{className:"h-4 w-4"}),"Download"]}),e.jsxs("button",{onClick:pr,disabled:i,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2 disabled:opacity-50",title:"Enviar por Email",children:[e.jsx(Ma,{className:"h-4 w-4"}),"Enviar"]})]}),e.jsxs("button",{onClick:Yt,className:"px-4 py-2 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-lg hover:from-green-700 hover:to-green-800 flex items-center gap-2 shadow-md",title:"Gerar PDF Profissional",children:[e.jsx(z3,{className:"h-4 w-4"}),"Gerar PDF"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>s("/service-orders"),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(ht,{className:"h-4 w-4"}),"Cancelar"]}),e.jsxs("button",{onClick:Tt,disabled:i,className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 disabled:opacity-50 flex items-center gap-2 shadow-md",children:[e.jsx(Gt,{className:"h-4 w-4"}),i?"Salvando...":n?"Atualizar OS":"Salvar OS"]})]})]})}),(ee||Pe||Ce)&&e.jsxs("div",{className:"fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg z-[10000] shadow-lg font-bold animate-pulse",children:[" MODAL ABERTO: ",ee?"CLIENTE":Pe?"SERVIO":"MATERIAL"]}),ee&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-[9999] p-4",onClick:le=>{console.log("Click no backdrop do modal cliente"),le.target===le.currentTarget&&(console.log(" Fechando modal cliente"),je(!1),qe({nome_razao:"",telefone:"",email:"",cnpj_cpf:""}))},children:e.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full shadow-2xl",onClick:le=>le.stopPropagation(),children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(Jt,{className:"h-5 w-5 text-green-600"}),"Novo Cliente"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nome/Razo Social *"}),e.jsx("input",{type:"text",value:Me.nome_razao,onChange:le=>qe({...Me,nome_razao:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",placeholder:"Nome completo ou razo social"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"CPF/CNPJ"}),e.jsx("input",{type:"text",value:Me.cnpj_cpf,onChange:le=>qe({...Me,cnpj_cpf:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",placeholder:"000.000.000-00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Telefone"}),e.jsx("input",{type:"text",value:Me.telefone,onChange:le=>qe({...Me,telefone:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",placeholder:"(00) 00000-0000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),e.jsx("input",{type:"email",value:Me.email,onChange:le=>qe({...Me,email:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",placeholder:"email@exemplo.com"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{je(!1),qe({nome_razao:"",telefone:"",email:"",cnpj_cpf:""})},className:"flex-1 px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{onClick:Ra,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Cadastrar"})]})]})}),Pe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-[9999] p-4",onClick:le=>{console.log("Click no backdrop do modal servio"),le.target===le.currentTarget&&(console.log(" Fechando modal servio"),Xe(!1),ie({name:"",description:"",base_price:0,estimated_time_minutes:60}))},children:e.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full shadow-2xl",onClick:le=>le.stopPropagation(),children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(wt,{className:"h-5 w-5 text-blue-600"}),"Novo Servio"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nome do Servio *"}),e.jsx("input",{type:"text",value:re.name,onChange:le=>ie({...re,name:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Instalao de Ar Condicionado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descrio"}),e.jsx("textarea",{value:re.description,onChange:le=>ie({...re,description:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Descrio detalhada do servio"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Preo Base (R$)"}),e.jsx("input",{type:"number",step:"0.01",value:re.base_price,onChange:le=>ie({...re,base_price:Number(le.target.value)}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tempo Estimado (minutos)"}),e.jsx("input",{type:"number",value:re.estimated_time_minutes,onChange:le=>ie({...re,estimated_time_minutes:Number(le.target.value)}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"60"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{Xe(!1),ie({name:"",description:"",base_price:0,estimated_time_minutes:60})},className:"flex-1 px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{onClick:gr,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Cadastrar"})]})]})}),Ce&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-[9999] p-4",onClick:le=>{console.log("Click no backdrop do modal material"),le.target===le.currentTarget&&(console.log(" Fechando modal material"),K(!1),ye({name:"",unit:"un",unit_cost:0,unit_price:0,quantity:1}))},children:e.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full shadow-2xl",onClick:le=>le.stopPropagation(),children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(wt,{className:"h-5 w-5 text-orange-600"}),"Novo Material"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nome do Material *"}),e.jsx("input",{type:"text",value:ve.name,onChange:le=>ye({...ve,name:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500",placeholder:"Ex: Tubo PVC 100mm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Unidade"}),e.jsxs("select",{value:ve.unit,onChange:le=>ye({...ve,unit:le.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500",children:[e.jsx("option",{value:"un",children:"Unidade (un)"}),e.jsx("option",{value:"m",children:"Metro (m)"}),e.jsx("option",{value:"kg",children:"Quilograma (kg)"}),e.jsx("option",{value:"l",children:"Litro (l)"}),e.jsx("option",{value:"cx",children:"Caixa (cx)"}),e.jsx("option",{value:"p",children:"Pea (p)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quantidade Inicial"}),e.jsx("input",{type:"number",value:ve.quantity,onChange:le=>ye({...ve,quantity:Number(le.target.value)}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500",placeholder:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Preo de Custo (R$)"}),e.jsx("input",{type:"number",step:"0.01",value:ve.unit_cost,onChange:le=>ye({...ve,unit_cost:Number(le.target.value)}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Preo de Venda (R$)"}),e.jsx("input",{type:"number",step:"0.01",value:ve.unit_price,onChange:le=>ye({...ve,unit_price:Number(le.target.value)}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500",placeholder:"0.00"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{K(!1),ye({name:"",unit:"un",unit_cost:0,unit_price:0,quantity:1})},className:"flex-1 px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{onClick:St,className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700",children:"Cadastrar"})]})]})})]})},eD=()=>{const{id:s}=Gu(),t=ys(),[a,r]=j.useState(!0),[n,i]=j.useState(null),[o,l]=j.useState(null),[c,d]=j.useState([]),[A,u]=j.useState([]),[x,m]=j.useState([]),[y,g]=j.useState([]),[b,p]=j.useState("overview"),[v,N]=j.useState(null);j.useEffect(()=>{s&&D()},[s]);const D=async()=>{try{r(!0),N(null);const C=await cu(s);if(!C){N("Ordem de servio no encontrada"),r(!1);return}i(C);const[L,f,F,M,P]=await Promise.all([se.from("customers").select("*, customer_addresses(*)").eq("id",C.client_id).single(),se.from("service_order_items").select("*, service_catalog:service_catalog_id(*)").eq("service_order_id",s).order("created_at",{ascending:!0}),se.from("service_order_materials").select("*, inventory_items(*)").eq("service_order_id",s).order("created_at",{ascending:!0}),se.from("service_order_labor").select("*, employees(*)").eq("service_order_id",s).order("created_at",{ascending:!0}),se.from("service_order_documents").select("*").eq("service_order_id",s).order("created_at",{ascending:!1})]);l(L.data),d(f.data||[]),u(F.data||[]),m(M.data||[]),g(P.data||[])}catch(C){console.error("Error loading order:",C),N("Erro ao carregar ordem de servio")}finally{r(!1)}},S=async()=>{if(window.confirm("Tem certeza que deseja excluir esta ordem de servio?"))try{await Kj(s),t("/service-orders")}catch(C){console.error("Error deleting order:",C),alert("Erro ao excluir ordem de servio")}},E=C=>({pending:"bg-yellow-100 text-yellow-800",in_progress:"bg-blue-100 text-blue-800",paused:"bg-orange-100 text-orange-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",quotation:"bg-purple-100 text-purple-800"})[C]||"bg-gray-100 text-gray-800",R=C=>({pending:"Pendente",in_progress:"Em Andamento",paused:"Pausado",completed:"Concludo",cancelled:"Cancelado",quotation:"Oramento"})[C]||C;if(a)return e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando ordem de servio..."})]})});if(v||!n)return e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx(es,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Erro"}),e.jsx("p",{className:"text-gray-600 mb-4",children:v||"Ordem de servio no encontrada"}),e.jsx("button",{onClick:()=>t("/service-orders"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Voltar para Ordens de Servio"})]})});const _=[{id:"overview",label:"Viso Geral",icon:ut},{id:"items",label:"Servios",icon:wt,badge:c.length},{id:"materials",label:"Materiais",icon:wt,badge:A.length},{id:"team",label:"Equipe",icon:Nt,badge:x.length},{id:"financial",label:"Financeiro",icon:Ut},{id:"documents",label:"Documentos",icon:ut,badge:y.length},{id:"timeline",label:"Histrico",icon:vt}];return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("button",{onClick:()=>t("/service-orders"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[e.jsx(An,{className:"h-5 w-5 mr-2"}),"Voltar"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>t(`/service-orders/${s}/edit`),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(rr,{className:"h-4 w-4"}),"Editar"]}),e.jsxs("button",{onClick:S,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:[e.jsx(Vt,{className:"h-4 w-4"}),"Excluir"]})]})]}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["OS #",n.order_number]}),e.jsx("p",{className:"text-gray-600",children:(o==null?void 0:o.name)||"Cliente no identificado"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${E(n.status)}`,children:R(n.status)}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Criado em ",new Date(n.created_at).toLocaleDateString("pt-BR")]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm mb-6",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex -mb-px overflow-x-auto",children:_.map(C=>e.jsxs("button",{onClick:()=>p(C.id),className:`
                    flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 whitespace-nowrap
                    ${b===C.id?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}
                  `,children:[e.jsx(C.icon,{className:"h-5 w-5"}),C.label,C.badge!==void 0&&C.badge>0&&e.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-blue-100 text-blue-800 rounded-full",children:C.badge})]},C.id))})}),e.jsxs("div",{className:"p-6",children:[b==="overview"&&e.jsx(tD,{order:n,customer:o}),b==="items"&&e.jsx(sD,{items:c,orderId:s,onUpdate:D}),b==="materials"&&e.jsx(aD,{materials:A,orderId:s,onUpdate:D}),b==="team"&&e.jsx(rD,{team:x,orderId:s,onUpdate:D}),b==="financial"&&e.jsx(nD,{order:n,items:c,materials:A,team:x}),b==="documents"&&e.jsx(iD,{documents:y,orderId:s,onUpdate:D}),b==="timeline"&&e.jsx(oD,{orderId:s})]})]})]})})},tD=({order:s,customer:t})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Informaes do Cliente"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Nome:"})," ",t==null?void 0:t.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",t==null?void 0:t.email]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Telefone:"})," ",t==null?void 0:t.phone]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Detalhes da OS"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Nmero:"})," ",s.order_number]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Data:"})," ",new Date(s.created_at).toLocaleDateString("pt-BR")]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Prazo:"})," ",s.execution_deadline?new Date(s.execution_deadline).toLocaleDateString("pt-BR"):"No definido"]})]})]})]}),s.description&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Descrio"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:s.description})]}),s.notes&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Observaes"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:s.notes})]})]}),sD=({items:s,orderId:t,onUpdate:a})=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Servios da Ordem"}),s.length===0?e.jsx("p",{className:"text-gray-500",children:"Nenhum servio adicionado"}):e.jsx("div",{className:"space-y-4",children:s.map(r=>{var n;return e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:((n=r.service_catalog)==null?void 0:n.name)||r.service_name}),r.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r.description})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold",children:["R$ ",parseFloat(r.unit_price||0).toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Qtd: ",r.quantity||1]})]})]})},r.id)})})]}),aD=({materials:s,orderId:t,onUpdate:a})=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Materiais Utilizados"}),s.length===0?e.jsx("p",{className:"text-gray-500",children:"Nenhum material adicionado"}):e.jsx("div",{className:"space-y-4",children:s.map(r=>{var n,i;return e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:((n=r.inventory_items)==null?void 0:n.name)||r.material_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["SKU: ",(i=r.inventory_items)==null?void 0:i.sku]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold",children:["R$ ",parseFloat(r.unit_cost||0).toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Qtd: ",r.quantity]})]})]})},r.id)})})]}),rD=({team:s,orderId:t,onUpdate:a})=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Equipe Alocada"}),s.length===0?e.jsx("p",{className:"text-gray-500",children:"Nenhum funcionrio alocado"}):e.jsx("div",{className:"space-y-4",children:s.map(r=>{var n,i;return e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:(n=r.employees)==null?void 0:n.name}),e.jsx("p",{className:"text-sm text-gray-600",children:(i=r.employees)==null?void 0:i.role})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[r.hours_worked||0,"h trabalhadas"]}),e.jsxs("p",{className:"font-semibold",children:["R$ ",parseFloat(r.labor_cost||0).toFixed(2)]})]})]})},r.id)})})]}),nD=({order:s,items:t,materials:a,team:r})=>{const n=parseFloat(s.subtotal_value||0),i=parseFloat(s.discount_value||0),o=parseFloat(s.total_value||0),l=t.reduce((A,u)=>A+parseFloat(u.unit_price||0)*parseFloat(u.quantity||1),0),c=a.reduce((A,u)=>A+parseFloat(u.unit_cost||0)*parseFloat(u.quantity||1),0),d=r.reduce((A,u)=>A+parseFloat(u.labor_cost||0),0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Servios"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["R$ ",l.toFixed(2)]})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Materiais"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["R$ ",c.toFixed(2)]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Mo de Obra"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["R$ ",d.toFixed(2)]})]})]}),e.jsxs("div",{className:"border-t pt-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["R$ ",n.toFixed(2)]})]}),i>0&&e.jsxs("div",{className:"flex justify-between text-red-600",children:[e.jsx("span",{children:"Desconto"}),e.jsxs("span",{children:["- R$ ",i.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-xl font-bold border-t pt-2",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{className:"text-green-600",children:["R$ ",o.toFixed(2)]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Informaes de Pagamento"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Forma de Pagamento:"})," ",s.payment_method||"No definido"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Status:"})," ",s.payment_status||"Pendente"]})]})]})]})},iD=({documents:s,orderId:t,onUpdate:a})=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Documentos"}),s.length===0?e.jsx("p",{className:"text-gray-500",children:"Nenhum documento anexado"}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(r=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ut,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold",children:r.document_name}),e.jsx("p",{className:"text-sm text-gray-600",children:r.document_type}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(r.created_at).toLocaleDateString("pt-BR")})]}),e.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(wa,{className:"h-5 w-5 text-gray-600"})})]})},r.id))})]}),oD=({orderId:s})=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Histrico de Alteraes"}),e.jsx("div",{className:"space-y-4",children:e.jsx("p",{className:"text-gray-500",children:"Funcionalidade de histrico em desenvolvimento"})})]});function lD({onSave:s,onClose:t,customerName:a}){const r=j.useRef(null),[n,i]=j.useState(!1),[o,l]=j.useState(!0),[c,d]=j.useState(null);j.useEffect(()=>{const b=r.current;if(!b)return;const p=b.getContext("2d");p&&(b.width=600,b.height=300,p.strokeStyle="#000000",p.lineWidth=2,p.lineCap="round",p.lineJoin="round",p.fillStyle="#ffffff",p.fillRect(0,0,b.width,b.height),d(p))},[]);const A=b=>{if(!c)return;i(!0),l(!1);const p=r.current;if(!p)return;const v=p.getBoundingClientRect(),N="touches"in b?b.touches[0].clientX-v.left:b.clientX-v.left,D="touches"in b?b.touches[0].clientY-v.top:b.clientY-v.top;c.beginPath(),c.moveTo(N,D)},u=b=>{if(!n||!c)return;const p=r.current;if(!p)return;const v=p.getBoundingClientRect(),N="touches"in b?b.touches[0].clientX-v.left:b.clientX-v.left,D="touches"in b?b.touches[0].clientY-v.top:b.clientY-v.top;c.lineTo(N,D),c.stroke()},x=()=>{c&&(i(!1),c.closePath())},m=()=>{if(!c||!r.current)return;const b=r.current;c.fillStyle="#ffffff",c.fillRect(0,0,b.width,b.height),l(!0)},y=()=>{if(!r.current||o)return;const b=r.current.toDataURL("image/png");s(b)},g=()=>{if(!r.current||o)return;const b=document.createElement("a");b.download=`assinatura-${a||"cliente"}-${Date.now()}.png`,b.href=r.current.toDataURL(),b.click()};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-2xl w-full max-w-3xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(Cu,{className:"h-6 w-6"}),"Assinatura Digital"]}),a&&e.jsxs("p",{className:"text-blue-100 mt-1",children:["Cliente: ",a]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(ht,{className:"h-6 w-6"})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg border-2 border-dashed border-gray-300 p-4",children:[e.jsx("p",{className:"text-center text-sm text-gray-600 mb-3",children:"Por favor, assine abaixo usando mouse/dedo"}),e.jsx("div",{className:"bg-white rounded-lg shadow-inner overflow-hidden",children:e.jsx("canvas",{ref:r,onMouseDown:A,onMouseMove:u,onMouseUp:x,onMouseLeave:x,onTouchStart:A,onTouchMove:u,onTouchEnd:x,className:"w-full h-auto cursor-crosshair touch-none",style:{maxHeight:"300px"}})}),o&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx("p",{className:"text-gray-400 text-lg",children:"Assine aqui"})})]}),e.jsxs("div",{className:"mt-4 text-xs text-gray-500 text-center",children:[e.jsx("p",{children:"Ao assinar, voc confirma o recebimento do servio conforme especificado"}),e.jsxs("p",{className:"mt-1",children:["Data: ",new Date().toLocaleDateString("pt-BR")," ",new Date().toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex items-center justify-between border-t border-gray-200",children:[e.jsxs("button",{onClick:m,disabled:o,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(Zp,{className:"h-4 w-4"}),"Limpar"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:g,disabled:o,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(wa,{className:"h-4 w-4"}),"Baixar"]}),e.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),e.jsxs("button",{onClick:y,disabled:o,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(As,{className:"h-4 w-4"}),"Confirmar Assinatura"]})]})]})]})})}const cD=()=>{var re;const{id:s}=Gu(),t=ys(),{user:a}=rs(),[r,n]=j.useState(null),[i,o]=j.useState(null),[l,c]=j.useState([]),[d,A]=j.useState([]),[u,x]=j.useState([]),[m,y]=j.useState([]),[g,b]=j.useState([]),[p,v]=j.useState([]),[N,D]=j.useState(null),[S,E]=j.useState(!0),[R,_]=j.useState(navigator.onLine),[C,L]=j.useState("overview"),[f,F]=j.useState(!1),[M,P]=j.useState(0),[Z,O]=j.useState(null),[X,q]=j.useState([]),[V,oe]=j.useState(!1),[H,I]=j.useState(!1),[B,$]=j.useState(null);j.useEffect(()=>{const ie=()=>{_(!0),ue()},ve=()=>_(!1);return window.addEventListener("online",ie),window.addEventListener("offline",ve),T(),()=>{window.removeEventListener("online",ie),window.removeEventListener("offline",ve)}},[]),j.useEffect(()=>{s&&me()},[s]),j.useEffect(()=>{let ie;return f&&Z&&(ie=setInterval(()=>{P(Date.now()-Z)},1e3)),()=>clearInterval(ie)},[f,Z]);const T=()=>{const ie=localStorage.getItem(`offline_queue_${s}`);ie&&q(JSON.parse(ie));const ve=localStorage.getItem(`before_photos_${s}`);ve&&b(JSON.parse(ve));const ye=localStorage.getItem(`after_photos_${s}`);ye&&v(JSON.parse(ye));const $e=localStorage.getItem(`checklist_${s}`);$e&&y(JSON.parse($e));const it=localStorage.getItem(`signature_${s}`);it&&$(it)},ne=(ie,ve)=>{const ye={id:crypto.randomUUID(),type:ie,data:ve,timestamp:Date.now(),synced:!1},$e=[...X,ye];q($e),localStorage.setItem(`offline_queue_${s}`,JSON.stringify($e)),R&&ue()},ue=async()=>{if(!(V||X.length===0)){oe(!0);try{const ie=X.filter(ve=>!ve.synced);for(const ve of ie)try{switch(ve.type){case"status":await se.from("service_orders").update({status:ve.data.status,updated_at:new Date().toISOString()}).eq("id",s);break;case"checklist":m.find(Ie=>Ie.id===ve.data.itemId)&&await se.from("service_order_checklist").update({completed:ve.data.completed}).eq("id",ve.data.itemId);break;case"photo":const $e=await fetch(ve.data.dataUrl).then(Ie=>Ie.blob()),it=`service-orders/${s}/${Date.now()}-${ve.data.photoType}.jpg`;await se.storage.from("service-order-photos").upload(it,$e),await se.from("service_order_photos").insert({service_order_id:s,photo_type:ve.data.photoType,photo_url:it,uploaded_by:a==null?void 0:a.employee_id});break;case"signature":await se.from("service_orders").update({signature_data:ve.data.signatureData,signed_at:new Date().toISOString()}).eq("id",s);break}ve.synced=!0}catch(ye){console.error("Error syncing action:",ye)}q(X.filter(ve=>!ve.synced)),localStorage.setItem(`offline_queue_${s}`,JSON.stringify(X.filter(ve=>!ve.synced))),await xe()}finally{oe(!1)}}},me=async()=>{try{E(!0);const ie=await se.from("service_orders").select("*").eq("id",s).single();if(!ie.data){E(!1);return}const[ve,ye,$e,it,Ie,he,Oe]=await Promise.all([se.from("customers").select("*, customer_addresses(*)").eq("id",ie.data.customer_id).single(),se.from("service_order_items").select("*, service_catalog:service_catalog_id(name, description)").eq("service_order_id",s).order("created_at",{ascending:!0}),se.from("service_order_materials").select("*, inventory_items(name, unit)").eq("service_order_id",s).order("created_at",{ascending:!0}),se.from("service_order_labor").select("*, employees(name)").eq("service_order_id",s).order("created_at",{ascending:!0}),se.from("service_order_checklist").select("*").eq("service_order_id",s).order("priority",{ascending:!0}).order("item_order",{ascending:!0}),se.from("service_order_photos").select("*").eq("service_order_id",s).eq("photo_type","before").order("created_at",{ascending:!1}),se.from("service_order_photos").select("*").eq("service_order_id",s).eq("photo_type","after").order("created_at",{ascending:!1})]);n(ie.data),o(ve.data),c(ye.data||[]),A($e.data||[]),x(it.data||[]),y(Ie.data||[]),b(he.data||[]),v(Oe.data||[]),ie.data.signature_data&&$(ie.data.signature_data),await xe(),localStorage.setItem(`order_${s}`,JSON.stringify(ie.data)),localStorage.setItem(`customer_${s}`,JSON.stringify(ve.data))}catch(ie){console.error("Error loading data:",ie);const ve=localStorage.getItem(`order_${s}`);ve&&n(JSON.parse(ve))}finally{E(!1)}},xe=async()=>{try{const{data:ie,error:ve}=await se.rpc("validate_service_order",{p_service_order_id:s});ie&&D(ie)}catch(ie){console.error("Error validating order:",ie)}},Be=async ie=>{n({...r,status:ie}),ne("status",{status:ie}),R&&await se.from("service_orders").update({status:ie}).eq("id",s)},ee=()=>{if(f){F(!1);const ie=M/(1e3*60*60);ne("time",{hours:ie})}else O(Date.now()-M),F(!0)},je=async ie=>{const ve=m.map($e=>$e.id===ie?{...$e,completed:!$e.completed}:$e);y(ve);const ye=ve.find($e=>$e.id===ie);ne("checklist",{itemId:ie,completed:ye==null?void 0:ye.completed}),localStorage.setItem(`checklist_${s}`,JSON.stringify(ve)),R&&(await se.from("service_order_checklist").update({completed:ye==null?void 0:ye.completed}).eq("id",ie),await xe())},Pe=async(ie,ve)=>{var it;const ye=(it=ie.target.files)==null?void 0:it[0];if(!ye)return;const $e=new FileReader;$e.onloadend=async()=>{const Ie=$e.result,he={id:crypto.randomUUID(),photo_type:ve,photo_url:Ie,taken_at:new Date().toISOString()};if(ve==="before"){const Oe=[...g,he];b(Oe),localStorage.setItem(`before_photos_${s}`,JSON.stringify(Oe))}else{const Oe=[...p,he];v(Oe),localStorage.setItem(`after_photos_${s}`,JSON.stringify(Oe))}if(R)try{const Oe=await fetch(Ie).then(dt=>dt.blob()),He=`service-orders/${s}/${Date.now()}-${ve}.jpg`;await se.storage.from("service-order-photos").upload(He,Oe),await se.from("service_order_photos").insert({service_order_id:s,photo_type:ve,photo_url:He,uploaded_by:a==null?void 0:a.employee_id}),await xe()}catch(Oe){console.error("Error uploading photo:",Oe),ne("photo",{...he,dataUrl:Ie,photoType:ve})}else ne("photo",{...he,dataUrl:Ie,photoType:ve})},$e.readAsDataURL(ye)},Xe=async ie=>{$(ie),I(!1),ne("signature",{signatureData:ie}),R&&(await se.from("service_orders").update({signature_data:ie,signed_at:new Date().toISOString()}).eq("id",s),await xe())},Ce=ie=>{const ve=Math.floor(ie/1e3),ye=Math.floor(ve/3600),$e=Math.floor(ve%3600/60),it=ve%60;return`${ye.toString().padStart(2,"0")}:${$e.toString().padStart(2,"0")}:${it.toString().padStart(2,"0")}`},K=ie=>ie===1?"border-l-red-500 bg-red-50":ie===2?"border-l-yellow-500 bg-yellow-50":"border-l-blue-500 bg-blue-50",Me=ie=>ie===1?e.jsx(es,{className:"w-4 h-4 text-red-600"}):ie===2?e.jsx(Fs,{className:"w-4 h-4 text-yellow-600"}):e.jsx(os,{className:"w-4 h-4 text-blue-600"}),qe=m.length>0?Math.round(m.filter(ie=>ie.completed).length/m.length*100):0;return S?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(bs,{className:"w-16 h-16 text-white animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-white text-xl font-semibold",children:"Carregando OS..."})]})}):r?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 pb-32",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 text-white sticky top-0 z-30 shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsx("button",{onClick:()=>t("/service-orders"),className:"p-3 hover:bg-white/20 rounded-xl transition-colors",children:e.jsx(An,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1 mx-4",children:[e.jsxs("h1",{className:"text-lg font-bold",children:["OS #",r.order_number]}),e.jsx("p",{className:"text-sm text-blue-100",children:i==null?void 0:i.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[V&&e.jsx(bs,{className:"w-5 h-5 animate-spin"}),R?e.jsx(yj,{className:"w-5 h-5"}):e.jsx(c0,{className:"w-5 h-5 text-red-300"})]})]}),N&&e.jsx("div",{className:"px-4 pb-4",children:e.jsx("div",{className:`flex items-center gap-2 px-4 py-2 rounded-xl ${N.is_valid?"bg-green-500 text-white":"bg-yellow-500 text-white"}`,children:N.is_valid?e.jsxs(e.Fragment,{children:[e.jsx(is,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"OS Vlida - Pronta para Concluso"})]}):e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-semibold",children:["Pendente (",g.length,"/2 antes, ",p.length,"/2 depois)"]})]})})}),e.jsx("div",{className:"flex overflow-x-auto hide-scrollbar border-t border-white/20",children:[{id:"overview",label:"Dados",icon:ut},{id:"checklist",label:"Lista",icon:l0,badge:`${qe}%`},{id:"materials",label:"Materiais",icon:wt},{id:"photos",label:"Fotos",icon:Mi,badge:`${g.length+p.length}`},{id:"signature",label:"Assinar",icon:Jt}].map(ie=>e.jsxs("button",{onClick:()=>L(ie.id),className:`flex-shrink-0 px-6 py-4 flex flex-col items-center gap-1 transition-all relative ${C===ie.id?"text-white bg-white/20":"text-blue-100 hover:text-white hover:bg-white/10"}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx(ie.icon,{className:"w-6 h-6"}),ie.badge&&e.jsx("span",{className:"absolute -top-2 -right-3 px-1.5 py-0.5 bg-red-500 text-white text-xs rounded-full font-bold",children:ie.badge})]}),e.jsx("span",{className:"text-xs font-medium whitespace-nowrap",children:ie.label}),C===ie.id&&e.jsx(W.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-1 bg-white rounded-t-full"})]},ie.id))})]}),e.jsx(W.div,{className:"fixed top-32 right-4 z-20 bg-white rounded-2xl shadow-2xl p-4 border-2 border-blue-500",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},children:e.jsxs("div",{className:"text-center",children:[e.jsx(vt,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),e.jsx("div",{className:"text-3xl font-bold text-gray-900 mb-3",children:Ce(M)}),e.jsx("button",{onClick:ee,className:`w-full px-4 py-2 rounded-xl flex items-center justify-center gap-2 font-semibold transition-all ${f?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(p3,{className:"w-5 h-5"}),"Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(ld,{className:"w-5 h-5"}),"Iniciar"]})})]})}),e.jsx("div",{className:"p-4",children:e.jsxs(rt,{mode:"wait",children:[C==="overview"&&e.jsxs(W.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:[e.jsxs("h3",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2 text-lg",children:[e.jsx(Jt,{className:"w-6 h-6 text-blue-600"}),"Cliente"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:i==null?void 0:i.name}),(i==null?void 0:i.phone)&&e.jsxs("a",{href:`tel:${i.phone}`,className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 font-medium text-lg",children:[e.jsx(la,{className:"w-5 h-5"}),i.phone]}),((re=i==null?void 0:i.customer_addresses)==null?void 0:re[0])&&e.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(`${i.customer_addresses[0].street}, ${i.customer_addresses[0].number} - ${i.customer_addresses[0].city}`)}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 font-medium",children:[e.jsx(da,{className:"w-5 h-5"}),e.jsxs("span",{className:"text-sm",children:[i.customer_addresses[0].street,", ",i.customer_addresses[0].number]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:[e.jsxs("h3",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2 text-lg",children:[e.jsx(dd,{className:"w-6 h-6 text-blue-600"}),"Servios"]}),e.jsx("div",{className:"space-y-3",children:l.map(ie=>{var ve,ye;return e.jsxs("div",{className:"border-l-4 border-blue-500 pl-4 py-3 bg-blue-50 rounded-r-xl",children:[e.jsx("h4",{className:"font-semibold text-gray-900 text-lg",children:(ve=ie.service_catalog)==null?void 0:ve.name}),((ye=ie.service_catalog)==null?void 0:ye.description)&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:ie.service_catalog.description}),ie.escopo_detalhado&&e.jsx("p",{className:"text-sm text-gray-700 mt-2 italic font-medium",children:ie.escopo_detalhado})]},ie.id)})})]}),u.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:[e.jsxs("h3",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2 text-lg",children:[e.jsx(Nt,{className:"w-6 h-6 text-blue-600"}),"Equipe"]}),e.jsx("div",{className:"space-y-3",children:u.map(ie=>{var ve,ye,$e;return e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-xl",children:((ye=(ve=ie.employees)==null?void 0:ve.name)==null?void 0:ye.charAt(0))||"?"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:($e=ie.employees)==null?void 0:$e.name}),e.jsx("p",{className:"text-sm text-gray-500",children:ie.role==="technician"?"Tcnico":ie.role==="assistant"?"Assistente":"Supervisor"})]})]},ie.id)})})]}),r.notes&&e.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-400 rounded-2xl p-6",children:[e.jsxs("h3",{className:"font-bold text-yellow-900 mb-3 flex items-center gap-2 text-lg",children:[e.jsx(es,{className:"w-6 h-6"}),"Instrues Importantes"]}),e.jsx("p",{className:"text-yellow-800 whitespace-pre-wrap font-medium",children:r.notes})]})]},"overview"),C==="checklist"&&e.jsxs(W.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-3",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Progresso"}),e.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:[qe,"%"]})]}),e.jsx("div",{className:"w-full h-4 bg-gray-200 rounded-full overflow-hidden",children:e.jsx(W.div,{className:"h-full bg-gradient-to-r from-blue-600 to-green-600",initial:{width:0},animate:{width:`${qe}%`},transition:{duration:.5}})})]}),m.length===0?e.jsxs("div",{className:"bg-white rounded-2xl p-8 text-center shadow-lg",children:[e.jsx(_3,{className:"w-20 h-20 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Nenhum checklist disponvel"})]}):m.map(ie=>e.jsx(W.div,{className:`bg-white rounded-2xl p-5 shadow-lg border-l-4 ${K(ie.priority)}`,whileTap:{scale:.98},children:e.jsxs("label",{className:"flex items-start gap-4 cursor-pointer",children:[e.jsx("div",{className:"pt-1",children:e.jsx("div",{className:`w-8 h-8 rounded-xl border-2 flex items-center justify-center transition-all ${ie.completed?"bg-green-600 border-green-600":"border-gray-300 hover:border-blue-500"}`,onClick:()=>je(ie.id),children:ie.completed&&e.jsx(As,{className:"w-5 h-5 text-white"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Me(ie.priority),e.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase",children:ie.category||"Geral"})]}),e.jsx("p",{className:`font-medium text-lg ${ie.completed?"line-through text-gray-400":"text-gray-900"}`,children:ie.item_description}),ie.photo_required&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm text-blue-600",children:[e.jsx(Mi,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Foto obrigatria"})]})]})]})},ie.id))]},"checklist"),C==="materials"&&e.jsx(W.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-3",children:d.length===0?e.jsxs("div",{className:"bg-white rounded-2xl p-8 text-center shadow-lg",children:[e.jsx(wt,{className:"w-20 h-20 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Nenhum material listado"})]}):d.map(ie=>{var ve,ye;return e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 text-lg",children:((ve=ie.inventory_items)==null?void 0:ve.name)||ie.material_name}),e.jsxs("div",{className:"mt-3 space-y-2 text-base text-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:"Quantidade:"}),e.jsxs("span",{children:[ie.quantity," ",((ye=ie.inventory_items)==null?void 0:ye.unit)||ie.unit||"un"]})]}),ie.notes&&e.jsx("p",{className:"text-gray-600 italic bg-gray-50 p-3 rounded-xl",children:ie.notes})]})]})})},ie.id)})},"materials"),C==="photos"&&e.jsxs(W.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Mi,{className:"w-6 h-6 text-blue-600"}),"Fotos ANTES"]}),e.jsxs("span",{className:`px-4 py-2 rounded-full font-bold ${g.length>=2?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[g.length,"/2"]})]}),e.jsxs("label",{className:"block mb-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-2xl p-6 text-center cursor-pointer hover:from-blue-700 hover:to-blue-800 transition-all shadow-xl",children:[e.jsx(pb,{className:"w-12 h-12 mx-auto mb-3"}),e.jsx("span",{className:"text-lg font-bold",children:"Tirar Foto ANTES"})]}),e.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:ie=>Pe(ie,"before"),className:"hidden"})]}),g.length===0?e.jsxs("div",{className:"bg-white rounded-2xl p-8 text-center shadow-lg",children:[e.jsx(Mi,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Nenhuma foto capturada"}),e.jsx("p",{className:"text-sm text-red-600 mt-2 font-medium",children:"Mnimo 2 fotos obrigatrias"})]}):e.jsx("div",{className:"grid grid-cols-2 gap-4",children:g.map(ie=>e.jsxs("div",{className:"relative aspect-square rounded-2xl overflow-hidden bg-gray-100 shadow-lg",children:[e.jsx("img",{src:ie.photo_url,alt:"Antes",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-2 left-2 bg-blue-600 text-white px-3 py-1 rounded-full text-xs font-bold",children:"ANTES"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white p-2 text-xs",children:new Date(ie.taken_at).toLocaleTimeString()})]},ie.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Mi,{className:"w-6 h-6 text-green-600"}),"Fotos DEPOIS"]}),e.jsxs("span",{className:`px-4 py-2 rounded-full font-bold ${p.length>=2?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[p.length,"/2"]})]}),e.jsxs("label",{className:"block mb-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-green-700 text-white rounded-2xl p-6 text-center cursor-pointer hover:from-green-700 hover:to-green-800 transition-all shadow-xl",children:[e.jsx(pb,{className:"w-12 h-12 mx-auto mb-3"}),e.jsx("span",{className:"text-lg font-bold",children:"Tirar Foto DEPOIS"})]}),e.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:ie=>Pe(ie,"after"),className:"hidden"})]}),p.length===0?e.jsxs("div",{className:"bg-white rounded-2xl p-8 text-center shadow-lg",children:[e.jsx(Mi,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Nenhuma foto capturada"}),e.jsx("p",{className:"text-sm text-red-600 mt-2 font-medium",children:"Mnimo 2 fotos obrigatrias"})]}):e.jsx("div",{className:"grid grid-cols-2 gap-4",children:p.map(ie=>e.jsxs("div",{className:"relative aspect-square rounded-2xl overflow-hidden bg-gray-100 shadow-lg",children:[e.jsx("img",{src:ie.photo_url,alt:"Depois",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-2 left-2 bg-green-600 text-white px-3 py-1 rounded-full text-xs font-bold",children:"DEPOIS"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white p-2 text-xs",children:new Date(ie.taken_at).toLocaleTimeString()})]},ie.id))})]})]},"photos"),C==="signature"&&e.jsx(W.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-4",children:B||r.signature_data?e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:[e.jsxs("h3",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2 text-lg",children:[e.jsx(is,{className:"w-6 h-6 text-green-600"}),"Assinatura Coletada"]}),e.jsx("div",{className:"border-2 border-green-500 rounded-2xl p-4 bg-green-50",children:e.jsx("img",{src:B||r.signature_data,alt:"Assinatura",className:"w-full h-64 object-contain"})}),e.jsxs("p",{className:"text-sm text-gray-500 mt-3 text-center font-medium",children:["Assinado em ",new Date(r.signed_at||Date.now()).toLocaleString()]}),e.jsx("button",{onClick:()=>{$(null),I(!0)},className:"w-full mt-4 px-6 py-4 border-2 border-blue-600 text-blue-600 rounded-2xl hover:bg-blue-50 font-semibold text-lg",children:"Coletar Nova Assinatura"})]}):e.jsxs("div",{className:"bg-white rounded-2xl p-8 text-center shadow-lg",children:[e.jsx(Jt,{className:"w-20 h-20 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 mb-6 text-lg",children:"Assinatura no coletada"}),e.jsx("button",{onClick:()=>I(!0),className:"px-8 py-4 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-2xl hover:from-blue-700 hover:to-blue-800 shadow-xl text-lg font-bold",children:"Coletar Assinatura do Cliente"})]})},"signature")]})}),H&&e.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white rounded-3xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:e.jsx(lD,{onSave:Xe,onCancel:()=>I(!1)})})}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t-2 border-gray-200 p-4 space-y-3 shadow-2xl",children:[!R&&e.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-400 rounded-2xl p-4 flex items-center gap-3",children:[e.jsx(c0,{className:"w-6 h-6 text-yellow-600 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-yellow-900",children:"Modo Offline"}),e.jsx("p",{className:"text-xs text-yellow-700",children:"Alteraes sero sincronizadas"})]}),X.length>0&&e.jsx("span",{className:"px-3 py-1 bg-yellow-600 text-white text-sm rounded-full font-bold",children:X.length})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[r.status==="pending"&&e.jsxs("button",{onClick:()=>Be("in_progress"),className:"px-6 py-5 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-2xl font-bold text-lg hover:from-blue-700 hover:to-blue-800 flex items-center justify-center gap-3 shadow-xl",children:[e.jsx(ld,{className:"w-7 h-7"}),"INICIAR EXECUO"]}),r.status==="in_progress"&&(N==null?void 0:N.is_valid)&&e.jsxs("button",{onClick:()=>Be("completed"),className:"px-6 py-5 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-2xl font-bold text-lg hover:from-green-700 hover:to-green-800 flex items-center justify-center gap-3 shadow-xl",children:[e.jsx(is,{className:"w-7 h-7"}),"CONCLUIR OS"]}),r.status==="in_progress"&&!(N!=null&&N.is_valid)&&e.jsxs("div",{className:"px-6 py-5 bg-red-100 border-2 border-red-400 text-red-900 rounded-2xl font-bold text-center",children:[e.jsx(es,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("p",{className:"text-lg",children:"Complete todos os requisitos"}),e.jsx("p",{className:"text-sm mt-1",children:"Fotos ANTES/DEPOIS, Checklist e Assinatura"})]})]})]})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(es,{className:"w-20 h-20 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"OS no encontrada"}),e.jsx("button",{onClick:()=>t("/service-orders"),className:"mt-6 px-8 py-3 bg-blue-600 text-white rounded-xl text-lg font-semibold shadow-lg",children:"Voltar"})]})})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var v0=function(s,t){return v0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n])},v0(s,t)};function Wr(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");v0(s,t);function a(){this.constructor=s}s.prototype=t===null?Object.create(t):(a.prototype=t.prototype,new a)}var w0=function(){return w0=Object.assign||function(t){for(var a,r=1,n=arguments.length;r<n;r++){a=arguments[r];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},w0.apply(this,arguments)};function $a(s,t,a,r){function n(i){return i instanceof a?i:new a(function(o){o(i)})}return new(a||(a=Promise))(function(i,o){function l(A){try{d(r.next(A))}catch(u){o(u)}}function c(A){try{d(r.throw(A))}catch(u){o(u)}}function d(A){A.done?i(A.value):n(A.value).then(l,c)}d((r=r.apply(s,[])).next())})}function Ia(s,t){var a={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(A){return c([d,A])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=d[0]&2?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return a.label++,{value:d[1],done:!1};case 5:a.label++,n=d[1],d=[0];continue;case 7:d=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){a=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){a.label=d[1];break}if(d[0]===6&&a.label<i[1]){a.label=i[1],i=d;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(d);break}i[2]&&a.ops.pop(),a.trys.pop();continue}d=t.call(s,a)}catch(A){d=[6,A],n=0}finally{r=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function kA(s,t,a){if(arguments.length===2)for(var r=0,n=t.length,i;r<n;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return s.concat(i||t)}var Ln=function(){function s(t,a,r,n){this.left=t,this.top=a,this.width=r,this.height=n}return s.prototype.add=function(t,a,r,n){return new s(this.left+t,this.top+a,this.width+r,this.height+n)},s.fromClientRect=function(t,a){return new s(a.left+t.windowBounds.left,a.top+t.windowBounds.top,a.width,a.height)},s.fromDOMRectList=function(t,a){var r=Array.from(a).find(function(n){return n.width!==0});return r?new s(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height):s.EMPTY},s.EMPTY=new s(0,0,0,0),s}(),pm=function(s,t){return Ln.fromClientRect(s,t.getBoundingClientRect())},dD=function(s){var t=s.body,a=s.documentElement;if(!t||!a)throw new Error("Unable to get document size");var r=Math.max(Math.max(t.scrollWidth,a.scrollWidth),Math.max(t.offsetWidth,a.offsetWidth),Math.max(t.clientWidth,a.clientWidth)),n=Math.max(Math.max(t.scrollHeight,a.scrollHeight),Math.max(t.offsetHeight,a.offsetHeight),Math.max(t.clientHeight,a.clientHeight));return new Ln(0,0,r,n)},gm=function(s){for(var t=[],a=0,r=s.length;a<r;){var n=s.charCodeAt(a++);if(n>=55296&&n<=56319&&a<r){var i=s.charCodeAt(a++);(i&64512)===56320?t.push(((n&1023)<<10)+(i&1023)+65536):(t.push(n),a--)}else t.push(n)}return t},Js=function(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,s);var a=s.length;if(!a)return"";for(var r=[],n=-1,i="";++n<a;){var o=s[n];o<=65535?r.push(o):(o-=65536,r.push((o>>10)+55296,o%1024+56320)),(n+1===a||r.length>16384)&&(i+=String.fromCharCode.apply(String,r),r.length=0)}return i},qb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",AD=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var EA=0;EA<qb.length;EA++)AD[qb.charCodeAt(EA)]=EA;var $b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ec=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var FA=0;FA<$b.length;FA++)Ec[$b.charCodeAt(FA)]=FA;var uD=function(s){var t=s.length*.75,a=s.length,r,n=0,i,o,l,c;s[s.length-1]==="="&&(t--,s[s.length-2]==="="&&t--);var d=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),A=Array.isArray(d)?d:new Uint8Array(d);for(r=0;r<a;r+=4)i=Ec[s.charCodeAt(r)],o=Ec[s.charCodeAt(r+1)],l=Ec[s.charCodeAt(r+2)],c=Ec[s.charCodeAt(r+3)],A[n++]=i<<2|o>>4,A[n++]=(o&15)<<4|l>>2,A[n++]=(l&3)<<6|c&63;return d},mD=function(s){for(var t=s.length,a=[],r=0;r<t;r+=2)a.push(s[r+1]<<8|s[r]);return a},hD=function(s){for(var t=s.length,a=[],r=0;r<t;r+=4)a.push(s[r+3]<<24|s[r+2]<<16|s[r+1]<<8|s[r]);return a},to=5,og=11,Xh=2,xD=og-to,Gj=65536>>to,pD=1<<to,Zh=pD-1,gD=1024>>to,fD=Gj+gD,bD=fD,yD=32,vD=bD+yD,wD=65536>>og,jD=1<<xD,ND=jD-1,Vb=function(s,t,a){return s.slice?s.slice(t,a):new Uint16Array(Array.prototype.slice.call(s,t,a))},_D=function(s,t,a){return s.slice?s.slice(t,a):new Uint32Array(Array.prototype.slice.call(s,t,a))},CD=function(s,t){var a=uD(s),r=Array.isArray(a)?hD(a):new Uint32Array(a),n=Array.isArray(a)?mD(a):new Uint16Array(a),i=24,o=Vb(n,i/2,r[4]/2),l=r[5]===2?Vb(n,(i+r[4])/2):_D(r,Math.ceil((i+r[4])/4));return new BD(r[0],r[1],r[2],r[3],o,l)},BD=function(){function s(t,a,r,n,i,o){this.initialValue=t,this.errorValue=a,this.highStart=r,this.highValueIndex=n,this.index=i,this.data=o}return s.prototype.get=function(t){var a;if(t>=0){if(t<55296||t>56319&&t<=65535)return a=this.index[t>>to],a=(a<<Xh)+(t&Zh),this.data[a];if(t<=65535)return a=this.index[Gj+(t-55296>>to)],a=(a<<Xh)+(t&Zh),this.data[a];if(t<this.highStart)return a=vD-wD+(t>>og),a=this.index[a],a+=t>>to&ND,a=this.index[a],a=(a<<Xh)+(t&Zh),this.data[a];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},s}(),Kb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",SD=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var UA=0;UA<Kb.length;UA++)SD[Kb.charCodeAt(UA)]=UA;var kD="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",zb=50,ED=1,Wj=2,Jj=3,FD=4,UD=5,Gb=7,Yj=8,Wb=9,oi=10,j0=11,Jb=12,N0=13,DD=14,Fc=15,_0=16,DA=17,bc=18,ID=19,Yb=20,C0=21,yc=22,ex=23,$o=24,Ar=25,Uc=26,Dc=27,Vo=28,LD=29,$i=30,TD=31,IA=32,LA=33,B0=34,S0=35,k0=36,md=37,E0=38,du=39,Au=40,tx=41,Xj=42,QD=43,PD=[9001,65288],Zj="!",ss="",TA="",F0=CD(kD),Nn=[$i,k0],U0=[ED,Wj,Jj,UD],e2=[oi,Yj],Xb=[Dc,Uc],MD=U0.concat(e2),Zb=[E0,du,Au,B0,S0],RD=[Fc,N0],OD=function(s,t){t===void 0&&(t="strict");var a=[],r=[],n=[];return s.forEach(function(i,o){var l=F0.get(i);if(l>zb?(n.push(!0),l-=zb):n.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return r.push(o),a.push(_0);if(l===FD||l===j0){if(o===0)return r.push(o),a.push($i);var c=a[o-1];return MD.indexOf(c)===-1?(r.push(r[o-1]),a.push(c)):(r.push(o),a.push($i))}if(r.push(o),l===TD)return a.push(t==="strict"?C0:md);if(l===Xj||l===LD)return a.push($i);if(l===QD)return i>=131072&&i<=196605||i>=196608&&i<=262141?a.push(md):a.push($i);a.push(l)}),[r,a,n]},sx=function(s,t,a,r){var n=r[a];if(Array.isArray(s)?s.indexOf(n)!==-1:s===n)for(var i=a;i<=r.length;){i++;var o=r[i];if(o===t)return!0;if(o!==oi)break}if(n===oi)for(var i=a;i>0;){i--;var l=r[i];if(Array.isArray(s)?s.indexOf(l)!==-1:s===l)for(var c=a;c<=r.length;){c++;var o=r[c];if(o===t)return!0;if(o!==oi)break}if(l!==oi)break}return!1},ey=function(s,t){for(var a=s;a>=0;){var r=t[a];if(r===oi)a--;else return r}return 0},HD=function(s,t,a,r,n){if(a[r]===0)return ss;var i=r-1;if(Array.isArray(n)&&n[i]===!0)return ss;var o=i-1,l=i+1,c=t[i],d=o>=0?t[o]:0,A=t[l];if(c===Wj&&A===Jj)return ss;if(U0.indexOf(c)!==-1)return Zj;if(U0.indexOf(A)!==-1||e2.indexOf(A)!==-1)return ss;if(ey(i,t)===Yj)return TA;if(F0.get(s[i])===j0||(c===IA||c===LA)&&F0.get(s[l])===j0||c===Gb||A===Gb||c===Wb||[oi,N0,Fc].indexOf(c)===-1&&A===Wb||[DA,bc,ID,$o,Vo].indexOf(A)!==-1||ey(i,t)===yc||sx(ex,yc,i,t)||sx([DA,bc],C0,i,t)||sx(Jb,Jb,i,t))return ss;if(c===oi)return TA;if(c===ex||A===ex)return ss;if(A===_0||c===_0)return TA;if([N0,Fc,C0].indexOf(A)!==-1||c===DD||d===k0&&RD.indexOf(c)!==-1||c===Vo&&A===k0||A===Yb||Nn.indexOf(A)!==-1&&c===Ar||Nn.indexOf(c)!==-1&&A===Ar||c===Dc&&[md,IA,LA].indexOf(A)!==-1||[md,IA,LA].indexOf(c)!==-1&&A===Uc||Nn.indexOf(c)!==-1&&Xb.indexOf(A)!==-1||Xb.indexOf(c)!==-1&&Nn.indexOf(A)!==-1||[Dc,Uc].indexOf(c)!==-1&&(A===Ar||[yc,Fc].indexOf(A)!==-1&&t[l+1]===Ar)||[yc,Fc].indexOf(c)!==-1&&A===Ar||c===Ar&&[Ar,Vo,$o].indexOf(A)!==-1)return ss;if([Ar,Vo,$o,DA,bc].indexOf(A)!==-1)for(var u=i;u>=0;){var x=t[u];if(x===Ar)return ss;if([Vo,$o].indexOf(x)!==-1)u--;else break}if([Dc,Uc].indexOf(A)!==-1)for(var u=[DA,bc].indexOf(c)!==-1?o:i;u>=0;){var x=t[u];if(x===Ar)return ss;if([Vo,$o].indexOf(x)!==-1)u--;else break}if(E0===c&&[E0,du,B0,S0].indexOf(A)!==-1||[du,B0].indexOf(c)!==-1&&[du,Au].indexOf(A)!==-1||[Au,S0].indexOf(c)!==-1&&A===Au||Zb.indexOf(c)!==-1&&[Yb,Uc].indexOf(A)!==-1||Zb.indexOf(A)!==-1&&c===Dc||Nn.indexOf(c)!==-1&&Nn.indexOf(A)!==-1||c===$o&&Nn.indexOf(A)!==-1||Nn.concat(Ar).indexOf(c)!==-1&&A===yc&&PD.indexOf(s[l])===-1||Nn.concat(Ar).indexOf(A)!==-1&&c===bc)return ss;if(c===tx&&A===tx){for(var m=a[i],y=1;m>0&&(m--,t[m]===tx);)y++;if(y%2!==0)return ss}return c===IA&&A===LA?ss:TA},qD=function(s,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var a=OD(s,t.lineBreak),r=a[0],n=a[1],i=a[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(n=n.map(function(l){return[Ar,$i,Xj].indexOf(l)!==-1?md:l}));var o=t.wordBreak==="keep-all"?i.map(function(l,c){return l&&s[c]>=19968&&s[c]<=40959}):void 0;return[r,n,o]},$D=function(){function s(t,a,r,n){this.codePoints=t,this.required=a===Zj,this.start=r,this.end=n}return s.prototype.slice=function(){return Js.apply(void 0,this.codePoints.slice(this.start,this.end))},s}(),VD=function(s,t){var a=gm(s),r=qD(a,t),n=r[0],i=r[1],o=r[2],l=a.length,c=0,d=0;return{next:function(){if(d>=l)return{done:!0,value:null};for(var A=ss;d<l&&(A=HD(a,i,n,++d,o))===ss;);if(A!==ss||d===l){var u=new $D(a,A,c,d);return c=d,{value:u,done:!1}}return{done:!0,value:null}}}},KD=1,zD=2,Bd=4,ty=8,Du=10,sy=47,zc=92,GD=9,WD=32,QA=34,vc=61,JD=35,YD=36,XD=37,PA=39,MA=40,wc=41,ZD=95,tr=45,eI=33,tI=60,sI=62,aI=64,rI=91,nI=93,iI=61,oI=123,RA=63,lI=125,ay=124,cI=126,dI=128,ry=65533,ax=42,Wi=43,AI=44,uI=58,mI=59,hd=46,hI=0,xI=8,pI=11,gI=14,fI=31,bI=127,sn=-1,t2=48,s2=97,a2=101,yI=102,vI=117,wI=122,r2=65,n2=69,i2=70,jI=85,NI=90,La=function(s){return s>=t2&&s<=57},_I=function(s){return s>=55296&&s<=57343},Ko=function(s){return La(s)||s>=r2&&s<=i2||s>=s2&&s<=yI},CI=function(s){return s>=s2&&s<=wI},BI=function(s){return s>=r2&&s<=NI},SI=function(s){return CI(s)||BI(s)},kI=function(s){return s>=dI},OA=function(s){return s===Du||s===GD||s===WD},Iu=function(s){return SI(s)||kI(s)||s===ZD},ny=function(s){return Iu(s)||La(s)||s===tr},EI=function(s){return s>=hI&&s<=xI||s===pI||s>=gI&&s<=fI||s===bI},ri=function(s,t){return s!==zc?!1:t!==Du},HA=function(s,t,a){return s===tr?Iu(t)||ri(t,a):Iu(s)?!0:!!(s===zc&&ri(s,t))},rx=function(s,t,a){return s===Wi||s===tr?La(t)?!0:t===hd&&La(a):La(s===hd?t:s)},FI=function(s){var t=0,a=1;(s[t]===Wi||s[t]===tr)&&(s[t]===tr&&(a=-1),t++);for(var r=[];La(s[t]);)r.push(s[t++]);var n=r.length?parseInt(Js.apply(void 0,r),10):0;s[t]===hd&&t++;for(var i=[];La(s[t]);)i.push(s[t++]);var o=i.length,l=o?parseInt(Js.apply(void 0,i),10):0;(s[t]===n2||s[t]===a2)&&t++;var c=1;(s[t]===Wi||s[t]===tr)&&(s[t]===tr&&(c=-1),t++);for(var d=[];La(s[t]);)d.push(s[t++]);var A=d.length?parseInt(Js.apply(void 0,d),10):0;return a*(n+l*Math.pow(10,-o))*Math.pow(10,c*A)},UI={type:2},DI={type:3},II={type:4},LI={type:13},TI={type:8},QI={type:21},PI={type:9},MI={type:10},RI={type:11},OI={type:12},HI={type:14},qA={type:23},qI={type:1},$I={type:25},VI={type:24},KI={type:26},zI={type:27},GI={type:28},WI={type:29},JI={type:31},D0={type:32},o2=function(){function s(){this._value=[]}return s.prototype.write=function(t){this._value=this._value.concat(gm(t))},s.prototype.read=function(){for(var t=[],a=this.consumeToken();a!==D0;)t.push(a),a=this.consumeToken();return t},s.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case QA:return this.consumeStringToken(QA);case JD:var a=this.peekCodePoint(0),r=this.peekCodePoint(1),n=this.peekCodePoint(2);if(ny(a)||ri(r,n)){var i=HA(a,r,n)?zD:KD,o=this.consumeName();return{type:5,value:o,flags:i}}break;case YD:if(this.peekCodePoint(0)===vc)return this.consumeCodePoint(),LI;break;case PA:return this.consumeStringToken(PA);case MA:return UI;case wc:return DI;case ax:if(this.peekCodePoint(0)===vc)return this.consumeCodePoint(),HI;break;case Wi:if(rx(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case AI:return II;case tr:var l=t,c=this.peekCodePoint(0),d=this.peekCodePoint(1);if(rx(l,c,d))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(HA(l,c,d))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(c===tr&&d===sI)return this.consumeCodePoint(),this.consumeCodePoint(),VI;break;case hd:if(rx(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case sy:if(this.peekCodePoint(0)===ax)for(this.consumeCodePoint();;){var A=this.consumeCodePoint();if(A===ax&&(A=this.consumeCodePoint(),A===sy))return this.consumeToken();if(A===sn)return this.consumeToken()}break;case uI:return KI;case mI:return zI;case tI:if(this.peekCodePoint(0)===eI&&this.peekCodePoint(1)===tr&&this.peekCodePoint(2)===tr)return this.consumeCodePoint(),this.consumeCodePoint(),$I;break;case aI:var u=this.peekCodePoint(0),x=this.peekCodePoint(1),m=this.peekCodePoint(2);if(HA(u,x,m)){var o=this.consumeName();return{type:7,value:o}}break;case rI:return GI;case zc:if(ri(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case nI:return WI;case iI:if(this.peekCodePoint(0)===vc)return this.consumeCodePoint(),TI;break;case oI:return RI;case lI:return OI;case vI:case jI:var y=this.peekCodePoint(0),g=this.peekCodePoint(1);return y===Wi&&(Ko(g)||g===RA)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case ay:if(this.peekCodePoint(0)===vc)return this.consumeCodePoint(),PI;if(this.peekCodePoint(0)===ay)return this.consumeCodePoint(),QI;break;case cI:if(this.peekCodePoint(0)===vc)return this.consumeCodePoint(),MI;break;case sn:return D0}return OA(t)?(this.consumeWhiteSpace(),JI):La(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):Iu(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Js(t)}},s.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},s.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},s.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},s.prototype.consumeUnicodeRangeToken=function(){for(var t=[],a=this.consumeCodePoint();Ko(a)&&t.length<6;)t.push(a),a=this.consumeCodePoint();for(var r=!1;a===RA&&t.length<6;)t.push(a),a=this.consumeCodePoint(),r=!0;if(r){var n=parseInt(Js.apply(void 0,t.map(function(c){return c===RA?t2:c})),16),i=parseInt(Js.apply(void 0,t.map(function(c){return c===RA?i2:c})),16);return{type:30,start:n,end:i}}var o=parseInt(Js.apply(void 0,t),16);if(this.peekCodePoint(0)===tr&&Ko(this.peekCodePoint(1))){this.consumeCodePoint(),a=this.consumeCodePoint();for(var l=[];Ko(a)&&l.length<6;)l.push(a),a=this.consumeCodePoint();var i=parseInt(Js.apply(void 0,l),16);return{type:30,start:o,end:i}}else return{type:30,start:o,end:o}},s.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===MA?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===MA?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},s.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===sn)return{type:22,value:""};var a=this.peekCodePoint(0);if(a===PA||a===QA){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===sn||this.peekCodePoint(0)===wc)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),qA)}for(;;){var n=this.consumeCodePoint();if(n===sn||n===wc)return{type:22,value:Js.apply(void 0,t)};if(OA(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===sn||this.peekCodePoint(0)===wc?(this.consumeCodePoint(),{type:22,value:Js.apply(void 0,t)}):(this.consumeBadUrlRemnants(),qA);if(n===QA||n===PA||n===MA||EI(n))return this.consumeBadUrlRemnants(),qA;if(n===zc)if(ri(n,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),qA;else t.push(n)}},s.prototype.consumeWhiteSpace=function(){for(;OA(this.peekCodePoint(0));)this.consumeCodePoint()},s.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===wc||t===sn)return;ri(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},s.prototype.consumeStringSlice=function(t){for(var a=5e4,r="";t>0;){var n=Math.min(a,t);r+=Js.apply(void 0,this._value.splice(0,n)),t-=n}return this._value.shift(),r},s.prototype.consumeStringToken=function(t){var a="",r=0;do{var n=this._value[r];if(n===sn||n===void 0||n===t)return a+=this.consumeStringSlice(r),{type:0,value:a};if(n===Du)return this._value.splice(0,r),qI;if(n===zc){var i=this._value[r+1];i!==sn&&i!==void 0&&(i===Du?(a+=this.consumeStringSlice(r),r=-1,this._value.shift()):ri(n,i)&&(a+=this.consumeStringSlice(r),a+=Js(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},s.prototype.consumeNumber=function(){var t=[],a=Bd,r=this.peekCodePoint(0);for((r===Wi||r===tr)&&t.push(this.consumeCodePoint());La(this.peekCodePoint(0));)t.push(this.consumeCodePoint());r=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(r===hd&&La(n))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),a=ty;La(this.peekCodePoint(0));)t.push(this.consumeCodePoint());r=this.peekCodePoint(0),n=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((r===n2||r===a2)&&((n===Wi||n===tr)&&La(i)||La(n)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),a=ty;La(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[FI(t),a]},s.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),a=t[0],r=t[1],n=this.peekCodePoint(0),i=this.peekCodePoint(1),o=this.peekCodePoint(2);if(HA(n,i,o)){var l=this.consumeName();return{type:15,number:a,flags:r,unit:l}}return n===XD?(this.consumeCodePoint(),{type:16,number:a,flags:r}):{type:17,number:a,flags:r}},s.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(Ko(t)){for(var a=Js(t);Ko(this.peekCodePoint(0))&&a.length<6;)a+=Js(this.consumeCodePoint());OA(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(a,16);return r===0||_I(r)||r>1114111?ry:r}return t===sn?ry:t},s.prototype.consumeName=function(){for(var t="";;){var a=this.consumeCodePoint();if(ny(a))t+=Js(a);else if(ri(a,this.peekCodePoint(0)))t+=Js(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(a),t}},s}(),l2=function(){function s(t){this._tokens=t}return s.create=function(t){var a=new o2;return a.write(t),new s(a.read())},s.parseValue=function(t){return s.create(t).parseComponentValue()},s.parseValues=function(t){return s.create(t).parseComponentValues()},s.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var a=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return a;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},s.prototype.parseComponentValues=function(){for(var t=[];;){var a=this.consumeComponentValue();if(a.type===32)return t;t.push(a),t.push()}},s.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},s.prototype.consumeSimpleBlock=function(t){for(var a={type:t,values:[]},r=this.consumeToken();;){if(r.type===32||XI(r,t))return a;this.reconsumeToken(r),a.values.push(this.consumeComponentValue()),r=this.consumeToken()}},s.prototype.consumeFunction=function(t){for(var a={name:t.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return a;this.reconsumeToken(r),a.values.push(this.consumeComponentValue())}},s.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?D0:t},s.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},s}(),Sd=function(s){return s.type===15},Ql=function(s){return s.type===17},ps=function(s){return s.type===20},YI=function(s){return s.type===0},I0=function(s,t){return ps(s)&&s.value===t},c2=function(s){return s.type!==31},kl=function(s){return s.type!==31&&s.type!==4},un=function(s){var t=[],a=[];return s.forEach(function(r){if(r.type===4){if(a.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(a),a=[];return}r.type!==31&&a.push(r)}),a.length&&t.push(a),t},XI=function(s,t){return t===11&&s.type===12||t===28&&s.type===29?!0:t===2&&s.type===3},bi=function(s){return s.type===17||s.type===15},ca=function(s){return s.type===16||bi(s)},d2=function(s){return s.length>1?[s[0],s[1]]:[s[0]]},Ba={type:17,number:0,flags:Bd},lg={type:16,number:50,flags:Bd},li={type:16,number:100,flags:Bd},Ic=function(s,t,a){var r=s[0],n=s[1];return[Ns(r,t),Ns(typeof n<"u"?n:r,a)]},Ns=function(s,t){if(s.type===16)return s.number/100*t;if(Sd(s))switch(s.unit){case"rem":case"em":return 16*s.number;case"px":default:return s.number}return s.number},A2="deg",u2="grad",m2="rad",h2="turn",fm={name:"angle",parse:function(s,t){if(t.type===15)switch(t.unit){case A2:return Math.PI*t.number/180;case u2:return Math.PI/200*t.number;case m2:return t.number;case h2:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},x2=function(s){return s.type===15&&(s.unit===A2||s.unit===u2||s.unit===m2||s.unit===h2)},p2=function(s){var t=s.filter(ps).map(function(a){return a.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Ba,Ba];case"to top":case"bottom":return Fr(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Ba,li];case"to right":case"left":return Fr(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[li,li];case"to bottom":case"top":return Fr(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[li,Ba];case"to left":case"right":return Fr(270)}return 0},Fr=function(s){return Math.PI*s/180},mi={name:"color",parse:function(s,t){if(t.type===18){var a=ZI[t.name];if(typeof a>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return a(s,t.values)}if(t.type===5){if(t.value.length===3){var r=t.value.substring(0,1),n=t.value.substring(1,2),i=t.value.substring(2,3);return ci(parseInt(r+r,16),parseInt(n+n,16),parseInt(i+i,16),1)}if(t.value.length===4){var r=t.value.substring(0,1),n=t.value.substring(1,2),i=t.value.substring(2,3),o=t.value.substring(3,4);return ci(parseInt(r+r,16),parseInt(n+n,16),parseInt(i+i,16),parseInt(o+o,16)/255)}if(t.value.length===6){var r=t.value.substring(0,2),n=t.value.substring(2,4),i=t.value.substring(4,6);return ci(parseInt(r,16),parseInt(n,16),parseInt(i,16),1)}if(t.value.length===8){var r=t.value.substring(0,2),n=t.value.substring(2,4),i=t.value.substring(4,6),o=t.value.substring(6,8);return ci(parseInt(r,16),parseInt(n,16),parseInt(i,16),parseInt(o,16)/255)}}if(t.type===20){var l=Un[t.value.toUpperCase()];if(typeof l<"u")return l}return Un.TRANSPARENT}},hi=function(s){return(255&s)===0},ba=function(s){var t=255&s,a=255&s>>8,r=255&s>>16,n=255&s>>24;return t<255?"rgba("+n+","+r+","+a+","+t/255+")":"rgb("+n+","+r+","+a+")"},ci=function(s,t,a,r){return(s<<24|t<<16|a<<8|Math.round(r*255)<<0)>>>0},iy=function(s,t){if(s.type===17)return s.number;if(s.type===16){var a=t===3?1:255;return t===3?s.number/100*a:Math.round(s.number/100*a)}return 0},oy=function(s,t){var a=t.filter(kl);if(a.length===3){var r=a.map(iy),n=r[0],i=r[1],o=r[2];return ci(n,i,o,1)}if(a.length===4){var l=a.map(iy),n=l[0],i=l[1],o=l[2],c=l[3];return ci(n,i,o,c)}return 0};function nx(s,t,a){return a<0&&(a+=1),a>=1&&(a-=1),a<1/6?(t-s)*a*6+s:a<1/2?t:a<2/3?(t-s)*6*(2/3-a)+s:s}var ly=function(s,t){var a=t.filter(kl),r=a[0],n=a[1],i=a[2],o=a[3],l=(r.type===17?Fr(r.number):fm.parse(s,r))/(Math.PI*2),c=ca(n)?n.number/100:0,d=ca(i)?i.number/100:0,A=typeof o<"u"&&ca(o)?Ns(o,1):1;if(c===0)return ci(d*255,d*255,d*255,1);var u=d<=.5?d*(c+1):d+c-d*c,x=d*2-u,m=nx(x,u,l+1/3),y=nx(x,u,l),g=nx(x,u,l-1/3);return ci(m*255,y*255,g*255,A)},ZI={hsl:ly,hsla:ly,rgb:oy,rgba:oy},Gc=function(s,t){return mi.parse(s,l2.create(t).parseComponentValue())},Un={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},eL={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(s,t){return t.map(function(a){if(ps(a))switch(a.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},tL={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},bm=function(s,t){var a=mi.parse(s,t[0]),r=t[1];return r&&ca(r)?{color:a,stop:r}:{color:a,stop:null}},cy=function(s,t){var a=s[0],r=s[s.length-1];a.stop===null&&(a.stop=Ba),r.stop===null&&(r.stop=li);for(var n=[],i=0,o=0;o<s.length;o++){var l=s[o].stop;if(l!==null){var c=Ns(l,t);c>i?n.push(c):n.push(i),i=c}else n.push(null)}for(var d=null,o=0;o<n.length;o++){var A=n[o];if(A===null)d===null&&(d=o);else if(d!==null){for(var u=o-d,x=n[d-1],m=(A-x)/(u+1),y=1;y<=u;y++)n[d+y-1]=m*y;d=null}}return s.map(function(g,b){var p=g.color;return{color:p,stop:Math.max(Math.min(1,n[b]/t),0)}})},sL=function(s,t,a){var r=t/2,n=a/2,i=Ns(s[0],t)-r,o=n-Ns(s[1],a);return(Math.atan2(o,i)+Math.PI*2)%(Math.PI*2)},aL=function(s,t,a){var r=typeof s=="number"?s:sL(s,t,a),n=Math.abs(t*Math.sin(r))+Math.abs(a*Math.cos(r)),i=t/2,o=a/2,l=n/2,c=Math.sin(r-Math.PI/2)*l,d=Math.cos(r-Math.PI/2)*l;return[n,i-d,i+d,o-c,o+c]},$r=function(s,t){return Math.sqrt(s*s+t*t)},dy=function(s,t,a,r,n){var i=[[0,0],[0,t],[s,0],[s,t]];return i.reduce(function(o,l){var c=l[0],d=l[1],A=$r(a-c,r-d);return(n?A<o.optimumDistance:A>o.optimumDistance)?{optimumCorner:l,optimumDistance:A}:o},{optimumDistance:n?1/0:-1/0,optimumCorner:null}).optimumCorner},rL=function(s,t,a,r,n){var i=0,o=0;switch(s.size){case 0:s.shape===0?i=o=Math.min(Math.abs(t),Math.abs(t-r),Math.abs(a),Math.abs(a-n)):s.shape===1&&(i=Math.min(Math.abs(t),Math.abs(t-r)),o=Math.min(Math.abs(a),Math.abs(a-n)));break;case 2:if(s.shape===0)i=o=Math.min($r(t,a),$r(t,a-n),$r(t-r,a),$r(t-r,a-n));else if(s.shape===1){var l=Math.min(Math.abs(a),Math.abs(a-n))/Math.min(Math.abs(t),Math.abs(t-r)),c=dy(r,n,t,a,!0),d=c[0],A=c[1];i=$r(d-t,(A-a)/l),o=l*i}break;case 1:s.shape===0?i=o=Math.max(Math.abs(t),Math.abs(t-r),Math.abs(a),Math.abs(a-n)):s.shape===1&&(i=Math.max(Math.abs(t),Math.abs(t-r)),o=Math.max(Math.abs(a),Math.abs(a-n)));break;case 3:if(s.shape===0)i=o=Math.max($r(t,a),$r(t,a-n),$r(t-r,a),$r(t-r,a-n));else if(s.shape===1){var l=Math.max(Math.abs(a),Math.abs(a-n))/Math.max(Math.abs(t),Math.abs(t-r)),u=dy(r,n,t,a,!1),d=u[0],A=u[1];i=$r(d-t,(A-a)/l),o=l*i}break}return Array.isArray(s.size)&&(i=Ns(s.size[0],r),o=s.size.length===2?Ns(s.size[1],n):i),[i,o]},nL=function(s,t){var a=Fr(180),r=[];return un(t).forEach(function(n,i){if(i===0){var o=n[0];if(o.type===20&&o.value==="to"){a=p2(n);return}else if(x2(o)){a=fm.parse(s,o);return}}var l=bm(s,n);r.push(l)}),{angle:a,stops:r,type:1}},$A=function(s,t){var a=Fr(180),r=[];return un(t).forEach(function(n,i){if(i===0){var o=n[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){a=p2(n);return}else if(x2(o)){a=(fm.parse(s,o)+Fr(270))%Fr(360);return}}var l=bm(s,n);r.push(l)}),{angle:a,stops:r,type:1}},iL=function(s,t){var a=Fr(180),r=[],n=1,i=0,o=3,l=[];return un(t).forEach(function(c,d){var A=c[0];if(d===0){if(ps(A)&&A.value==="linear"){n=1;return}else if(ps(A)&&A.value==="radial"){n=2;return}}if(A.type===18){if(A.name==="from"){var u=mi.parse(s,A.values[0]);r.push({stop:Ba,color:u})}else if(A.name==="to"){var u=mi.parse(s,A.values[0]);r.push({stop:li,color:u})}else if(A.name==="color-stop"){var x=A.values.filter(kl);if(x.length===2){var u=mi.parse(s,x[1]),m=x[0];Ql(m)&&r.push({stop:{type:16,number:m.number*100,flags:m.flags},color:u})}}}}),n===1?{angle:(a+Fr(180))%Fr(360),stops:r,type:n}:{size:o,shape:i,stops:r,position:l,type:n}},g2="closest-side",f2="farthest-side",b2="closest-corner",y2="farthest-corner",v2="circle",w2="ellipse",j2="cover",N2="contain",oL=function(s,t){var a=0,r=3,n=[],i=[];return un(t).forEach(function(o,l){var c=!0;if(l===0){var d=!1;c=o.reduce(function(u,x){if(d)if(ps(x))switch(x.value){case"center":return i.push(lg),u;case"top":case"left":return i.push(Ba),u;case"right":case"bottom":return i.push(li),u}else(ca(x)||bi(x))&&i.push(x);else if(ps(x))switch(x.value){case v2:return a=0,!1;case w2:return a=1,!1;case"at":return d=!0,!1;case g2:return r=0,!1;case j2:case f2:return r=1,!1;case N2:case b2:return r=2,!1;case y2:return r=3,!1}else if(bi(x)||ca(x))return Array.isArray(r)||(r=[]),r.push(x),!1;return u},c)}if(c){var A=bm(s,o);n.push(A)}}),{size:r,shape:a,stops:n,position:i,type:2}},VA=function(s,t){var a=0,r=3,n=[],i=[];return un(t).forEach(function(o,l){var c=!0;if(l===0?c=o.reduce(function(A,u){if(ps(u))switch(u.value){case"center":return i.push(lg),!1;case"top":case"left":return i.push(Ba),!1;case"right":case"bottom":return i.push(li),!1}else if(ca(u)||bi(u))return i.push(u),!1;return A},c):l===1&&(c=o.reduce(function(A,u){if(ps(u))switch(u.value){case v2:return a=0,!1;case w2:return a=1,!1;case N2:case g2:return r=0,!1;case f2:return r=1,!1;case b2:return r=2,!1;case j2:case y2:return r=3,!1}else if(bi(u)||ca(u))return Array.isArray(r)||(r=[]),r.push(u),!1;return A},c)),c){var d=bm(s,o);n.push(d)}}),{size:r,shape:a,stops:n,position:i,type:2}},lL=function(s){return s.type===1},cL=function(s){return s.type===2},cg={name:"image",parse:function(s,t){if(t.type===22){var a={url:t.value,type:0};return s.cache.addImage(t.value),a}if(t.type===18){var r=_2[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return r(s,t.values)}throw new Error("Unsupported image type "+t.type)}};function dL(s){return!(s.type===20&&s.value==="none")&&(s.type!==18||!!_2[s.name])}var _2={"linear-gradient":nL,"-moz-linear-gradient":$A,"-ms-linear-gradient":$A,"-o-linear-gradient":$A,"-webkit-linear-gradient":$A,"radial-gradient":oL,"-moz-radial-gradient":VA,"-ms-radial-gradient":VA,"-o-radial-gradient":VA,"-webkit-radial-gradient":VA,"-webkit-gradient":iL},AL={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(s,t){if(t.length===0)return[];var a=t[0];return a.type===20&&a.value==="none"?[]:t.filter(function(r){return kl(r)&&dL(r)}).map(function(r){return cg.parse(s,r)})}},uL={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(s,t){return t.map(function(a){if(ps(a))switch(a.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},mL={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(s,t){return un(t).map(function(a){return a.filter(ca)}).map(d2)}},hL={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(s,t){return un(t).map(function(a){return a.filter(ps).map(function(r){return r.value}).join(" ")}).map(xL)}},xL=function(s){switch(s){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},bl;(function(s){s.AUTO="auto",s.CONTAIN="contain",s.COVER="cover"})(bl||(bl={}));var pL={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(s,t){return un(t).map(function(a){return a.filter(gL)})}},gL=function(s){return ps(s)||ca(s)},ym=function(s){return{name:"border-"+s+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},fL=ym("top"),bL=ym("right"),yL=ym("bottom"),vL=ym("left"),vm=function(s){return{name:"border-radius-"+s,initialValue:"0 0",prefix:!1,type:1,parse:function(t,a){return d2(a.filter(ca))}}},wL=vm("top-left"),jL=vm("top-right"),NL=vm("bottom-right"),_L=vm("bottom-left"),wm=function(s){return{name:"border-"+s+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,a){switch(a){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},CL=wm("top"),BL=wm("right"),SL=wm("bottom"),kL=wm("left"),jm=function(s){return{name:"border-"+s+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,a){return Sd(a)?a.number:0}}},EL=jm("top"),FL=jm("right"),UL=jm("bottom"),DL=jm("left"),IL={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},LL={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(s,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},TL={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(s,t){return t.filter(ps).reduce(function(a,r){return a|QL(r.value)},0)}},QL=function(s){switch(s){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},PL={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(s,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},ML={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(s,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},Lu;(function(s){s.NORMAL="normal",s.STRICT="strict"})(Lu||(Lu={}));var RL={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(s,t){switch(t){case"strict":return Lu.STRICT;case"normal":default:return Lu.NORMAL}}},OL={name:"line-height",initialValue:"normal",prefix:!1,type:4},Ay=function(s,t){return ps(s)&&s.value==="normal"?1.2*t:s.type===17?t*s.number:ca(s)?Ns(s,t):t},HL={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(s,t){return t.type===20&&t.value==="none"?null:cg.parse(s,t)}},qL={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(s,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},L0={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(s,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Nm=function(s){return{name:"margin-"+s,initialValue:"0",prefix:!1,type:4}},$L=Nm("top"),VL=Nm("right"),KL=Nm("bottom"),zL=Nm("left"),GL={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(s,t){return t.filter(ps).map(function(a){switch(a.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},WL={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(s,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},_m=function(s){return{name:"padding-"+s,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},JL=_m("top"),YL=_m("right"),XL=_m("bottom"),ZL=_m("left"),eT={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(s,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},tT={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(s,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},sT={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(s,t){return t.length===1&&I0(t[0],"none")?[]:un(t).map(function(a){for(var r={color:Un.TRANSPARENT,offsetX:Ba,offsetY:Ba,blur:Ba},n=0,i=0;i<a.length;i++){var o=a[i];bi(o)?(n===0?r.offsetX=o:n===1?r.offsetY=o:r.blur=o,n++):r.color=mi.parse(s,o)}return r})}},aT={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(s,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},rT={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(s,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var a=oT[t.name];if(typeof a>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return a(t.values)}return null}},nT=function(s){var t=s.filter(function(a){return a.type===17}).map(function(a){return a.number});return t.length===6?t:null},iT=function(s){var t=s.filter(function(c){return c.type===17}).map(function(c){return c.number}),a=t[0],r=t[1];t[2],t[3];var n=t[4],i=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var o=t[12],l=t[13];return t[14],t[15],t.length===16?[a,r,n,i,o,l]:null},oT={matrix:nT,matrix3d:iT},uy={type:16,number:50,flags:Bd},lT=[uy,uy],cT={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(s,t){var a=t.filter(ca);return a.length!==2?lT:[a[0],a[1]]}},dT={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(s,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Wc;(function(s){s.NORMAL="normal",s.BREAK_ALL="break-all",s.KEEP_ALL="keep-all"})(Wc||(Wc={}));var AT={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(s,t){switch(t){case"break-all":return Wc.BREAK_ALL;case"keep-all":return Wc.KEEP_ALL;case"normal":default:return Wc.NORMAL}}},uT={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(s,t){if(t.type===20)return{auto:!0,order:0};if(Ql(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},C2={name:"time",parse:function(s,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},mT={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(s,t){return Ql(t)?t.number:1}},hT={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},xT={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(s,t){return t.filter(ps).map(function(a){switch(a.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(a){return a!==0})}},pT={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(s,t){var a=[],r=[];return t.forEach(function(n){switch(n.type){case 20:case 0:a.push(n.value);break;case 17:a.push(n.number.toString());break;case 4:r.push(a.join(" ")),a.length=0;break}}),a.length&&r.push(a.join(" ")),r.map(function(n){return n.indexOf(" ")===-1?n:"'"+n+"'"})}},gT={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},fT={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(s,t){if(Ql(t))return t.number;if(ps(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},bT={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(s,t){return t.filter(ps).map(function(a){return a.value})}},yT={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(s,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},xa=function(s,t){return(s&t)!==0},vT={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(s,t){if(t.length===0)return[];var a=t[0];return a.type===20&&a.value==="none"?[]:t}},wT={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(s,t){if(t.length===0)return null;var a=t[0];if(a.type===20&&a.value==="none")return null;for(var r=[],n=t.filter(c2),i=0;i<n.length;i++){var o=n[i],l=n[i+1];if(o.type===20){var c=l&&Ql(l)?l.number:1;r.push({counter:o.value,increment:c})}}return r}},jT={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(s,t){if(t.length===0)return[];for(var a=[],r=t.filter(c2),n=0;n<r.length;n++){var i=r[n],o=r[n+1];if(ps(i)&&i.value!=="none"){var l=o&&Ql(o)?o.number:0;a.push({counter:i.value,reset:l})}}return a}},NT={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(s,t){return t.filter(Sd).map(function(a){return C2.parse(s,a)})}},_T={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(s,t){if(t.length===0)return null;var a=t[0];if(a.type===20&&a.value==="none")return null;var r=[],n=t.filter(YI);if(n.length%2!==0)return null;for(var i=0;i<n.length;i+=2){var o=n[i].value,l=n[i+1].value;r.push({open:o,close:l})}return r}},my=function(s,t,a){if(!s)return"";var r=s[Math.min(t,s.length-1)];return r?a?r.open:r.close:""},CT={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(s,t){return t.length===1&&I0(t[0],"none")?[]:un(t).map(function(a){for(var r={color:255,offsetX:Ba,offsetY:Ba,blur:Ba,spread:Ba,inset:!1},n=0,i=0;i<a.length;i++){var o=a[i];I0(o,"inset")?r.inset=!0:bi(o)?(n===0?r.offsetX=o:n===1?r.offsetY=o:n===2?r.blur=o:r.spread=o,n++):r.color=mi.parse(s,o)}return r})}},BT={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(s,t){var a=[0,1,2],r=[];return t.filter(ps).forEach(function(n){switch(n.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),a.forEach(function(n){r.indexOf(n)===-1&&r.push(n)}),r}},ST={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},kT={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(s,t){return Sd(t)?t.number:0}},ET=function(){function s(t,a){var r,n;this.animationDuration=gt(t,NT,a.animationDuration),this.backgroundClip=gt(t,eL,a.backgroundClip),this.backgroundColor=gt(t,tL,a.backgroundColor),this.backgroundImage=gt(t,AL,a.backgroundImage),this.backgroundOrigin=gt(t,uL,a.backgroundOrigin),this.backgroundPosition=gt(t,mL,a.backgroundPosition),this.backgroundRepeat=gt(t,hL,a.backgroundRepeat),this.backgroundSize=gt(t,pL,a.backgroundSize),this.borderTopColor=gt(t,fL,a.borderTopColor),this.borderRightColor=gt(t,bL,a.borderRightColor),this.borderBottomColor=gt(t,yL,a.borderBottomColor),this.borderLeftColor=gt(t,vL,a.borderLeftColor),this.borderTopLeftRadius=gt(t,wL,a.borderTopLeftRadius),this.borderTopRightRadius=gt(t,jL,a.borderTopRightRadius),this.borderBottomRightRadius=gt(t,NL,a.borderBottomRightRadius),this.borderBottomLeftRadius=gt(t,_L,a.borderBottomLeftRadius),this.borderTopStyle=gt(t,CL,a.borderTopStyle),this.borderRightStyle=gt(t,BL,a.borderRightStyle),this.borderBottomStyle=gt(t,SL,a.borderBottomStyle),this.borderLeftStyle=gt(t,kL,a.borderLeftStyle),this.borderTopWidth=gt(t,EL,a.borderTopWidth),this.borderRightWidth=gt(t,FL,a.borderRightWidth),this.borderBottomWidth=gt(t,UL,a.borderBottomWidth),this.borderLeftWidth=gt(t,DL,a.borderLeftWidth),this.boxShadow=gt(t,CT,a.boxShadow),this.color=gt(t,IL,a.color),this.direction=gt(t,LL,a.direction),this.display=gt(t,TL,a.display),this.float=gt(t,PL,a.cssFloat),this.fontFamily=gt(t,pT,a.fontFamily),this.fontSize=gt(t,gT,a.fontSize),this.fontStyle=gt(t,yT,a.fontStyle),this.fontVariant=gt(t,bT,a.fontVariant),this.fontWeight=gt(t,fT,a.fontWeight),this.letterSpacing=gt(t,ML,a.letterSpacing),this.lineBreak=gt(t,RL,a.lineBreak),this.lineHeight=gt(t,OL,a.lineHeight),this.listStyleImage=gt(t,HL,a.listStyleImage),this.listStylePosition=gt(t,qL,a.listStylePosition),this.listStyleType=gt(t,L0,a.listStyleType),this.marginTop=gt(t,$L,a.marginTop),this.marginRight=gt(t,VL,a.marginRight),this.marginBottom=gt(t,KL,a.marginBottom),this.marginLeft=gt(t,zL,a.marginLeft),this.opacity=gt(t,mT,a.opacity);var i=gt(t,GL,a.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=gt(t,WL,a.overflowWrap),this.paddingTop=gt(t,JL,a.paddingTop),this.paddingRight=gt(t,YL,a.paddingRight),this.paddingBottom=gt(t,XL,a.paddingBottom),this.paddingLeft=gt(t,ZL,a.paddingLeft),this.paintOrder=gt(t,BT,a.paintOrder),this.position=gt(t,tT,a.position),this.textAlign=gt(t,eT,a.textAlign),this.textDecorationColor=gt(t,hT,(r=a.textDecorationColor)!==null&&r!==void 0?r:a.color),this.textDecorationLine=gt(t,xT,(n=a.textDecorationLine)!==null&&n!==void 0?n:a.textDecoration),this.textShadow=gt(t,sT,a.textShadow),this.textTransform=gt(t,aT,a.textTransform),this.transform=gt(t,rT,a.transform),this.transformOrigin=gt(t,cT,a.transformOrigin),this.visibility=gt(t,dT,a.visibility),this.webkitTextStrokeColor=gt(t,ST,a.webkitTextStrokeColor),this.webkitTextStrokeWidth=gt(t,kT,a.webkitTextStrokeWidth),this.wordBreak=gt(t,AT,a.wordBreak),this.zIndex=gt(t,uT,a.zIndex)}return s.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},s.prototype.isTransparent=function(){return hi(this.backgroundColor)},s.prototype.isTransformed=function(){return this.transform!==null},s.prototype.isPositioned=function(){return this.position!==0},s.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},s.prototype.isFloating=function(){return this.float!==0},s.prototype.isInlineLevel=function(){return xa(this.display,4)||xa(this.display,33554432)||xa(this.display,268435456)||xa(this.display,536870912)||xa(this.display,67108864)||xa(this.display,134217728)},s}(),FT=function(){function s(t,a){this.content=gt(t,vT,a.content),this.quotes=gt(t,_T,a.quotes)}return s}(),hy=function(){function s(t,a){this.counterIncrement=gt(t,wT,a.counterIncrement),this.counterReset=gt(t,jT,a.counterReset)}return s}(),gt=function(s,t,a){var r=new o2,n=a!==null&&typeof a<"u"?a.toString():t.initialValue;r.write(n);var i=new l2(r.read());switch(t.type){case 2:var o=i.parseComponentValue();return t.parse(s,ps(o)?o.value:t.initialValue);case 0:return t.parse(s,i.parseComponentValue());case 1:return t.parse(s,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(t.format){case"angle":return fm.parse(s,i.parseComponentValue());case"color":return mi.parse(s,i.parseComponentValue());case"image":return cg.parse(s,i.parseComponentValue());case"length":var l=i.parseComponentValue();return bi(l)?l:Ba;case"length-percentage":var c=i.parseComponentValue();return ca(c)?c:Ba;case"time":return C2.parse(s,i.parseComponentValue())}break}},UT="data-html2canvas-debug",DT=function(s){var t=s.getAttribute(UT);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},T0=function(s,t){var a=DT(s);return a===1||t===a},mn=function(){function s(t,a){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,T0(a,3))debugger;this.styles=new ET(t,window.getComputedStyle(a,null)),M0(a)&&(this.styles.animationDuration.some(function(r){return r>0})&&(a.style.animationDuration="0s"),this.styles.transform!==null&&(a.style.transform="none")),this.bounds=pm(this.context,a),T0(a,4)&&(this.flags|=16)}return s}(),IT="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",xy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Lc=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var KA=0;KA<xy.length;KA++)Lc[xy.charCodeAt(KA)]=KA;var LT=function(s){var t=s.length*.75,a=s.length,r,n=0,i,o,l,c;s[s.length-1]==="="&&(t--,s[s.length-2]==="="&&t--);var d=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),A=Array.isArray(d)?d:new Uint8Array(d);for(r=0;r<a;r+=4)i=Lc[s.charCodeAt(r)],o=Lc[s.charCodeAt(r+1)],l=Lc[s.charCodeAt(r+2)],c=Lc[s.charCodeAt(r+3)],A[n++]=i<<2|o>>4,A[n++]=(o&15)<<4|l>>2,A[n++]=(l&3)<<6|c&63;return d},TT=function(s){for(var t=s.length,a=[],r=0;r<t;r+=2)a.push(s[r+1]<<8|s[r]);return a},QT=function(s){for(var t=s.length,a=[],r=0;r<t;r+=4)a.push(s[r+3]<<24|s[r+2]<<16|s[r+1]<<8|s[r]);return a},so=5,dg=11,ix=2,PT=dg-so,B2=65536>>so,MT=1<<so,ox=MT-1,RT=1024>>so,OT=B2+RT,HT=OT,qT=32,$T=HT+qT,VT=65536>>dg,KT=1<<PT,zT=KT-1,py=function(s,t,a){return s.slice?s.slice(t,a):new Uint16Array(Array.prototype.slice.call(s,t,a))},GT=function(s,t,a){return s.slice?s.slice(t,a):new Uint32Array(Array.prototype.slice.call(s,t,a))},WT=function(s,t){var a=LT(s),r=Array.isArray(a)?QT(a):new Uint32Array(a),n=Array.isArray(a)?TT(a):new Uint16Array(a),i=24,o=py(n,i/2,r[4]/2),l=r[5]===2?py(n,(i+r[4])/2):GT(r,Math.ceil((i+r[4])/4));return new JT(r[0],r[1],r[2],r[3],o,l)},JT=function(){function s(t,a,r,n,i,o){this.initialValue=t,this.errorValue=a,this.highStart=r,this.highValueIndex=n,this.index=i,this.data=o}return s.prototype.get=function(t){var a;if(t>=0){if(t<55296||t>56319&&t<=65535)return a=this.index[t>>so],a=(a<<ix)+(t&ox),this.data[a];if(t<=65535)return a=this.index[B2+(t-55296>>so)],a=(a<<ix)+(t&ox),this.data[a];if(t<this.highStart)return a=$T-VT+(t>>dg),a=this.index[a],a+=t>>so&zT,a=this.index[a],a=(a<<ix)+(t&ox),this.data[a];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},s}(),gy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",YT=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var zA=0;zA<gy.length;zA++)YT[gy.charCodeAt(zA)]=zA;var XT=1,lx=2,cx=3,fy=4,by=5,ZT=7,yy=8,dx=9,Ax=10,vy=11,wy=12,jy=13,Ny=14,ux=15,eQ=function(s){for(var t=[],a=0,r=s.length;a<r;){var n=s.charCodeAt(a++);if(n>=55296&&n<=56319&&a<r){var i=s.charCodeAt(a++);(i&64512)===56320?t.push(((n&1023)<<10)+(i&1023)+65536):(t.push(n),a--)}else t.push(n)}return t},tQ=function(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,s);var a=s.length;if(!a)return"";for(var r=[],n=-1,i="";++n<a;){var o=s[n];o<=65535?r.push(o):(o-=65536,r.push((o>>10)+55296,o%1024+56320)),(n+1===a||r.length>16384)&&(i+=String.fromCharCode.apply(String,r),r.length=0)}return i},sQ=WT(IT),Br="",mx="",aQ=function(s){return sQ.get(s)},rQ=function(s,t,a){var r=a-2,n=t[r],i=t[a-1],o=t[a];if(i===lx&&o===cx)return Br;if(i===lx||i===cx||i===fy||o===lx||o===cx||o===fy)return mx;if(i===yy&&[yy,dx,vy,wy].indexOf(o)!==-1||(i===vy||i===dx)&&(o===dx||o===Ax)||(i===wy||i===Ax)&&o===Ax||o===jy||o===by||o===ZT||i===XT)return Br;if(i===jy&&o===Ny){for(;n===by;)n=t[--r];if(n===Ny)return Br}if(i===ux&&o===ux){for(var l=0;n===ux;)l++,n=t[--r];if(l%2===0)return Br}return mx},nQ=function(s){var t=eQ(s),a=t.length,r=0,n=0,i=t.map(aQ);return{next:function(){if(r>=a)return{done:!0,value:null};for(var o=Br;r<a&&(o=rQ(t,i,++r))===Br;);if(o!==Br||r===a){var l=tQ.apply(null,t.slice(n,r));return n=r,{value:l,done:!1}}return{done:!0,value:null}}}},iQ=function(s){for(var t=nQ(s),a=[],r;!(r=t.next()).done;)r.value&&a.push(r.value.slice());return a},oQ=function(s){var t=123;if(s.createRange){var a=s.createRange();if(a.getBoundingClientRect){var r=s.createElement("boundtest");r.style.height=t+"px",r.style.display="block",s.body.appendChild(r),a.selectNode(r);var n=a.getBoundingClientRect(),i=Math.round(n.height);if(s.body.removeChild(r),i===t)return!0}}return!1},lQ=function(s){var t=s.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",s.body.appendChild(t);var a=s.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=t.firstChild,n=gm(r.data).map(function(c){return Js(c)}),i=0,o={},l=n.every(function(c,d){a.setStart(r,i),a.setEnd(r,i+c.length);var A=a.getBoundingClientRect();i+=c.length;var u=A.x>o.x||A.y>o.y;return o=A,d===0?!0:u});return s.body.removeChild(t),l},cQ=function(){return typeof new Image().crossOrigin<"u"},dQ=function(){return typeof new XMLHttpRequest().responseType=="string"},AQ=function(s){var t=new Image,a=s.createElement("canvas"),r=a.getContext("2d");if(!r)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(t,0,0),a.toDataURL()}catch{return!1}return!0},_y=function(s){return s[0]===0&&s[1]===255&&s[2]===0&&s[3]===255},uQ=function(s){var t=s.createElement("canvas"),a=100;t.width=a,t.height=a;var r=t.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,a,a);var n=new Image,i=t.toDataURL();n.src=i;var o=Q0(a,a,0,0,n);return r.fillStyle="red",r.fillRect(0,0,a,a),Cy(o).then(function(l){r.drawImage(l,0,0);var c=r.getImageData(0,0,a,a).data;r.fillStyle="red",r.fillRect(0,0,a,a);var d=s.createElement("div");return d.style.backgroundImage="url("+i+")",d.style.height=a+"px",_y(c)?Cy(Q0(a,a,0,0,d)):Promise.reject(!1)}).then(function(l){return r.drawImage(l,0,0),_y(r.getImageData(0,0,a,a).data)}).catch(function(){return!1})},Q0=function(s,t,a,r,n){var i="http://www.w3.org/2000/svg",o=document.createElementNS(i,"svg"),l=document.createElementNS(i,"foreignObject");return o.setAttributeNS(null,"width",s.toString()),o.setAttributeNS(null,"height",t.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",a.toString()),l.setAttributeNS(null,"y",r.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(l),l.appendChild(n),o},Cy=function(s){return new Promise(function(t,a){var r=new Image;r.onload=function(){return t(r)},r.onerror=a,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(s))})},Ca={get SUPPORT_RANGE_BOUNDS(){var s=oQ(document);return Object.defineProperty(Ca,"SUPPORT_RANGE_BOUNDS",{value:s}),s},get SUPPORT_WORD_BREAKING(){var s=Ca.SUPPORT_RANGE_BOUNDS&&lQ(document);return Object.defineProperty(Ca,"SUPPORT_WORD_BREAKING",{value:s}),s},get SUPPORT_SVG_DRAWING(){var s=AQ(document);return Object.defineProperty(Ca,"SUPPORT_SVG_DRAWING",{value:s}),s},get SUPPORT_FOREIGNOBJECT_DRAWING(){var s=typeof Array.from=="function"&&typeof window.fetch=="function"?uQ(document):Promise.resolve(!1);return Object.defineProperty(Ca,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:s}),s},get SUPPORT_CORS_IMAGES(){var s=cQ();return Object.defineProperty(Ca,"SUPPORT_CORS_IMAGES",{value:s}),s},get SUPPORT_RESPONSE_TYPE(){var s=dQ();return Object.defineProperty(Ca,"SUPPORT_RESPONSE_TYPE",{value:s}),s},get SUPPORT_CORS_XHR(){var s="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Ca,"SUPPORT_CORS_XHR",{value:s}),s},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var s=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Ca,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:s}),s}},Jc=function(){function s(t,a){this.text=t,this.bounds=a}return s}(),mQ=function(s,t,a,r){var n=pQ(t,a),i=[],o=0;return n.forEach(function(l){if(a.textDecorationLine.length||l.trim().length>0)if(Ca.SUPPORT_RANGE_BOUNDS){var c=By(r,o,l.length).getClientRects();if(c.length>1){var d=Ag(l),A=0;d.forEach(function(x){i.push(new Jc(x,Ln.fromDOMRectList(s,By(r,A+o,x.length).getClientRects()))),A+=x.length})}else i.push(new Jc(l,Ln.fromDOMRectList(s,c)))}else{var u=r.splitText(l.length);i.push(new Jc(l,hQ(s,r))),r=u}else Ca.SUPPORT_RANGE_BOUNDS||(r=r.splitText(l.length));o+=l.length}),i},hQ=function(s,t){var a=t.ownerDocument;if(a){var r=a.createElement("html2canvaswrapper");r.appendChild(t.cloneNode(!0));var n=t.parentNode;if(n){n.replaceChild(r,t);var i=pm(s,r);return r.firstChild&&n.replaceChild(r.firstChild,r),i}}return Ln.EMPTY},By=function(s,t,a){var r=s.ownerDocument;if(!r)throw new Error("Node has no owner document");var n=r.createRange();return n.setStart(s,t),n.setEnd(s,t+a),n},Ag=function(s){if(Ca.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(s)).map(function(a){return a.segment})}return iQ(s)},xQ=function(s,t){if(Ca.SUPPORT_NATIVE_TEXT_SEGMENTATION){var a=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(a.segment(s)).map(function(r){return r.segment})}return fQ(s,t)},pQ=function(s,t){return t.letterSpacing!==0?Ag(s):xQ(s,t)},gQ=[32,160,4961,65792,65793,4153,4241],fQ=function(s,t){for(var a=VD(s,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),r=[],n,i=function(){if(n.value){var o=n.value.slice(),l=gm(o),c="";l.forEach(function(d){gQ.indexOf(d)===-1?c+=Js(d):(c.length&&r.push(c),r.push(Js(d)),c="")}),c.length&&r.push(c)}};!(n=a.next()).done;)i();return r},bQ=function(){function s(t,a,r){this.text=yQ(a.data,r.textTransform),this.textBounds=mQ(t,this.text,r,a)}return s}(),yQ=function(s,t){switch(t){case 1:return s.toLowerCase();case 3:return s.replace(vQ,wQ);case 2:return s.toUpperCase();default:return s}},vQ=/(^|\s|:|-|\(|\))([a-z])/g,wQ=function(s,t,a){return s.length>0?t+a.toUpperCase():s},S2=function(s){Wr(t,s);function t(a,r){var n=s.call(this,a,r)||this;return n.src=r.currentSrc||r.src,n.intrinsicWidth=r.naturalWidth,n.intrinsicHeight=r.naturalHeight,n.context.cache.addImage(n.src),n}return t}(mn),k2=function(s){Wr(t,s);function t(a,r){var n=s.call(this,a,r)||this;return n.canvas=r,n.intrinsicWidth=r.width,n.intrinsicHeight=r.height,n}return t}(mn),E2=function(s){Wr(t,s);function t(a,r){var n=s.call(this,a,r)||this,i=new XMLSerializer,o=pm(a,r);return r.setAttribute("width",o.width+"px"),r.setAttribute("height",o.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(r)),n.intrinsicWidth=r.width.baseVal.value,n.intrinsicHeight=r.height.baseVal.value,n.context.cache.addImage(n.svg),n}return t}(mn),F2=function(s){Wr(t,s);function t(a,r){var n=s.call(this,a,r)||this;return n.value=r.value,n}return t}(mn),P0=function(s){Wr(t,s);function t(a,r){var n=s.call(this,a,r)||this;return n.start=r.start,n.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,n}return t}(mn),jQ=[{type:15,flags:0,unit:"px",number:3}],NQ=[{type:16,flags:0,number:50}],_Q=function(s){return s.width>s.height?new Ln(s.left+(s.width-s.height)/2,s.top,s.height,s.height):s.width<s.height?new Ln(s.left,s.top+(s.height-s.width)/2,s.width,s.width):s},CQ=function(s){var t=s.type===BQ?new Array(s.value.length+1).join(""):s.value;return t.length===0?s.placeholder||"":t},Tu="checkbox",Qu="radio",BQ="password",Sy=707406591,ug=function(s){Wr(t,s);function t(a,r){var n=s.call(this,a,r)||this;switch(n.type=r.type.toLowerCase(),n.checked=r.checked,n.value=CQ(r),(n.type===Tu||n.type===Qu)&&(n.styles.backgroundColor=3739148031,n.styles.borderTopColor=n.styles.borderRightColor=n.styles.borderBottomColor=n.styles.borderLeftColor=2779096575,n.styles.borderTopWidth=n.styles.borderRightWidth=n.styles.borderBottomWidth=n.styles.borderLeftWidth=1,n.styles.borderTopStyle=n.styles.borderRightStyle=n.styles.borderBottomStyle=n.styles.borderLeftStyle=1,n.styles.backgroundClip=[0],n.styles.backgroundOrigin=[0],n.bounds=_Q(n.bounds)),n.type){case Tu:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=jQ;break;case Qu:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=NQ;break}return n}return t}(mn),U2=function(s){Wr(t,s);function t(a,r){var n=s.call(this,a,r)||this,i=r.options[r.selectedIndex||0];return n.value=i&&i.text||"",n}return t}(mn),D2=function(s){Wr(t,s);function t(a,r){var n=s.call(this,a,r)||this;return n.value=r.value,n}return t}(mn),I2=function(s){Wr(t,s);function t(a,r){var n=s.call(this,a,r)||this;n.src=r.src,n.width=parseInt(r.width,10)||0,n.height=parseInt(r.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){n.tree=T2(a,r.contentWindow.document.documentElement);var i=r.contentWindow.document.documentElement?Gc(a,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):Un.TRANSPARENT,o=r.contentWindow.document.body?Gc(a,getComputedStyle(r.contentWindow.document.body).backgroundColor):Un.TRANSPARENT;n.backgroundColor=hi(i)?hi(o)?n.styles.backgroundColor:o:i}}catch{}return n}return t}(mn),SQ=["OL","UL","MENU"],uu=function(s,t,a,r){for(var n=t.firstChild,i=void 0;n;n=i)if(i=n.nextSibling,Q2(n)&&n.data.trim().length>0)a.textNodes.push(new bQ(s,n,a.styles));else if(cl(n))if(O2(n)&&n.assignedNodes)n.assignedNodes().forEach(function(l){return uu(s,l,a,r)});else{var o=L2(s,n);o.styles.isVisible()&&(kQ(n,o,r)?o.flags|=4:EQ(o.styles)&&(o.flags|=2),SQ.indexOf(n.tagName)!==-1&&(o.flags|=8),a.elements.push(o),n.slot,n.shadowRoot?uu(s,n.shadowRoot,o,r):!Pu(n)&&!P2(n)&&!Mu(n)&&uu(s,n,o,r))}},L2=function(s,t){return R0(t)?new S2(s,t):M2(t)?new k2(s,t):P2(t)?new E2(s,t):FQ(t)?new F2(s,t):UQ(t)?new P0(s,t):DQ(t)?new ug(s,t):Mu(t)?new U2(s,t):Pu(t)?new D2(s,t):R2(t)?new I2(s,t):new mn(s,t)},T2=function(s,t){var a=L2(s,t);return a.flags|=4,uu(s,t,a,a),a},kQ=function(s,t,a){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||mg(s)&&a.styles.isTransparent()},EQ=function(s){return s.isPositioned()||s.isFloating()},Q2=function(s){return s.nodeType===Node.TEXT_NODE},cl=function(s){return s.nodeType===Node.ELEMENT_NODE},M0=function(s){return cl(s)&&typeof s.style<"u"&&!mu(s)},mu=function(s){return typeof s.className=="object"},FQ=function(s){return s.tagName==="LI"},UQ=function(s){return s.tagName==="OL"},DQ=function(s){return s.tagName==="INPUT"},IQ=function(s){return s.tagName==="HTML"},P2=function(s){return s.tagName==="svg"},mg=function(s){return s.tagName==="BODY"},M2=function(s){return s.tagName==="CANVAS"},ky=function(s){return s.tagName==="VIDEO"},R0=function(s){return s.tagName==="IMG"},R2=function(s){return s.tagName==="IFRAME"},Ey=function(s){return s.tagName==="STYLE"},LQ=function(s){return s.tagName==="SCRIPT"},Pu=function(s){return s.tagName==="TEXTAREA"},Mu=function(s){return s.tagName==="SELECT"},O2=function(s){return s.tagName==="SLOT"},Fy=function(s){return s.tagName.indexOf("-")>0},TQ=function(){function s(){this.counters={}}return s.prototype.getCounterValue=function(t){var a=this.counters[t];return a&&a.length?a[a.length-1]:1},s.prototype.getCounterValues=function(t){var a=this.counters[t];return a||[]},s.prototype.pop=function(t){var a=this;t.forEach(function(r){return a.counters[r].pop()})},s.prototype.parse=function(t){var a=this,r=t.counterIncrement,n=t.counterReset,i=!0;r!==null&&r.forEach(function(l){var c=a.counters[l.counter];c&&l.increment!==0&&(i=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=l.increment)});var o=[];return i&&n.forEach(function(l){var c=a.counters[l.counter];o.push(l.counter),c||(c=a.counters[l.counter]=[]),c.push(l.reset)}),o},s}(),Uy={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Dy={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},QQ={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},PQ={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},zo=function(s,t,a,r,n,i){return s<t||s>a?xd(s,n,i.length>0):r.integers.reduce(function(o,l,c){for(;s>=l;)s-=l,o+=r.values[c];return o},"")+i},H2=function(s,t,a,r){var n="";do a||s--,n=r(s)+n,s/=t;while(s*t>=t);return n},Gs=function(s,t,a,r,n){var i=a-t+1;return(s<0?"-":"")+(H2(Math.abs(s),i,r,function(o){return Js(Math.floor(o%i)+t)})+n)},Qi=function(s,t,a){a===void 0&&(a=". ");var r=t.length;return H2(Math.abs(s),r,!1,function(n){return t[Math.floor(n%r)]})+a},el=1,si=2,ai=4,Tc=8,_n=function(s,t,a,r,n,i){if(s<-9999||s>9999)return xd(s,4,n.length>0);var o=Math.abs(s),l=n;if(o===0)return t[0]+l;for(var c=0;o>0&&c<=4;c++){var d=o%10;d===0&&xa(i,el)&&l!==""?l=t[d]+l:d>1||d===1&&c===0||d===1&&c===1&&xa(i,si)||d===1&&c===1&&xa(i,ai)&&s>100||d===1&&c>1&&xa(i,Tc)?l=t[d]+(c>0?a[c-1]:"")+l:d===1&&c>0&&(l=a[c-1]+l),o=Math.floor(o/10)}return(s<0?r:"")+l},Iy="",Ly="",Ty="",hx="",xd=function(s,t,a){var r=a?". ":"",n=a?"":"",i=a?", ":"",o=a?" ":"";switch(t){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var l=Gs(s,48,57,!0,r);return l.length<4?"0"+l:l;case 4:return Qi(s,"",n);case 6:return zo(s,1,3999,Uy,3,r).toLowerCase();case 7:return zo(s,1,3999,Uy,3,r);case 8:return Gs(s,945,969,!1,r);case 9:return Gs(s,97,122,!1,r);case 10:return Gs(s,65,90,!1,r);case 11:return Gs(s,1632,1641,!0,r);case 12:case 49:return zo(s,1,9999,Dy,3,r);case 35:return zo(s,1,9999,Dy,3,r).toLowerCase();case 13:return Gs(s,2534,2543,!0,r);case 14:case 30:return Gs(s,6112,6121,!0,r);case 15:return Qi(s,"",n);case 16:return Qi(s,"",n);case 17:case 48:return _n(s,"",Iy,"",n,si|ai|Tc);case 47:return _n(s,"",Ly,"",n,el|si|ai|Tc);case 42:return _n(s,"",Iy,"",n,si|ai|Tc);case 41:return _n(s,"",Ly,"",n,el|si|ai|Tc);case 26:return _n(s,"","",Ty,n,0);case 25:return _n(s,"","",Ty,n,el|si|ai);case 31:return _n(s,"","",hx,i,el|si|ai);case 33:return _n(s,"","",hx,i,0);case 32:return _n(s,"","",hx,i,el|si|ai);case 18:return Gs(s,2406,2415,!0,r);case 20:return zo(s,1,19999,PQ,3,r);case 21:return Gs(s,2790,2799,!0,r);case 22:return Gs(s,2662,2671,!0,r);case 22:return zo(s,1,10999,QQ,3,r);case 23:return Qi(s,"");case 24:return Qi(s,"");case 27:return Gs(s,3302,3311,!0,r);case 28:return Qi(s,"",n);case 29:return Qi(s,"",n);case 34:return Gs(s,3792,3801,!0,r);case 37:return Gs(s,6160,6169,!0,r);case 38:return Gs(s,4160,4169,!0,r);case 39:return Gs(s,2918,2927,!0,r);case 40:return Gs(s,1776,1785,!0,r);case 43:return Gs(s,3046,3055,!0,r);case 44:return Gs(s,3174,3183,!0,r);case 45:return Gs(s,3664,3673,!0,r);case 46:return Gs(s,3872,3881,!0,r);case 3:default:return Gs(s,48,57,!0,r)}},q2="data-html2canvas-ignore",Qy=function(){function s(t,a,r){if(this.context=t,this.options=r,this.scrolledElements=[],this.referenceElement=a,this.counters=new TQ,this.quoteDepth=0,!a.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(a.ownerDocument.documentElement,!1)}return s.prototype.toIFrame=function(t,a){var r=this,n=MQ(t,a);if(!n.contentWindow)return Promise.reject("Unable to find iframe window");var i=t.defaultView.pageXOffset,o=t.defaultView.pageYOffset,l=n.contentWindow,c=l.document,d=HQ(n).then(function(){return $a(r,void 0,void 0,function(){var A,u;return Ia(this,function(x){switch(x.label){case 0:return this.scrolledElements.forEach(KQ),l&&(l.scrollTo(a.left,a.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==a.top||l.scrollX!==a.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-a.left,l.scrollY-a.top,0,0))),A=this.options.onclone,u=this.clonedReferenceElement,typeof u>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:x.sent(),x.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,OQ(c)]:[3,4];case 3:x.sent(),x.label=4;case 4:return typeof A=="function"?[2,Promise.resolve().then(function(){return A(c,u)}).then(function(){return n})]:[2,n]}})})});return c.open(),c.write($Q(document.doctype)+"<html></html>"),VQ(this.referenceElement.ownerDocument,i,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),d},s.prototype.createElementClone=function(t){if(T0(t,2))debugger;if(M2(t))return this.createCanvasClone(t);if(ky(t))return this.createVideoClone(t);if(Ey(t))return this.createStyleClone(t);var a=t.cloneNode(!1);return R0(a)&&(R0(t)&&t.currentSrc&&t.currentSrc!==t.src&&(a.src=t.currentSrc,a.srcset=""),a.loading==="lazy"&&(a.loading="eager")),Fy(a)?this.createCustomElementClone(a):a},s.prototype.createCustomElementClone=function(t){var a=document.createElement("html2canvascustomelement");return xx(t.style,a),a},s.prototype.createStyleClone=function(t){try{var a=t.sheet;if(a&&a.cssRules){var r=[].slice.call(a.cssRules,0).reduce(function(i,o){return o&&typeof o.cssText=="string"?i+o.cssText:i},""),n=t.cloneNode(!1);return n.textContent=r,n}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return t.cloneNode(!1)},s.prototype.createCanvasClone=function(t){var a;if(this.options.inlineImages&&t.ownerDocument){var r=t.ownerDocument.createElement("img");try{return r.src=t.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var n=t.cloneNode(!1);try{n.width=t.width,n.height=t.height;var i=t.getContext("2d"),o=n.getContext("2d");if(o)if(!this.options.allowTaint&&i)o.putImageData(i.getImageData(0,0,t.width,t.height),0,0);else{var l=(a=t.getContext("webgl2"))!==null&&a!==void 0?a:t.getContext("webgl");if(l){var c=l.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}o.drawImage(t,0,0)}return n}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return n},s.prototype.createVideoClone=function(t){var a=t.ownerDocument.createElement("canvas");a.width=t.offsetWidth,a.height=t.offsetHeight;var r=a.getContext("2d");try{return r&&(r.drawImage(t,0,0,a.width,a.height),this.options.allowTaint||r.getImageData(0,0,a.width,a.height)),a}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var n=t.ownerDocument.createElement("canvas");return n.width=t.offsetWidth,n.height=t.offsetHeight,n},s.prototype.appendChildNode=function(t,a,r){(!cl(a)||!LQ(a)&&!a.hasAttribute(q2)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(a)))&&(!this.options.copyStyles||!cl(a)||!Ey(a))&&t.appendChild(this.cloneNode(a,r))},s.prototype.cloneChildNodes=function(t,a,r){for(var n=this,i=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;i;i=i.nextSibling)if(cl(i)&&O2(i)&&typeof i.assignedNodes=="function"){var o=i.assignedNodes();o.length&&o.forEach(function(l){return n.appendChildNode(a,l,r)})}else this.appendChildNode(a,i,r)},s.prototype.cloneNode=function(t,a){if(Q2(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var r=t.ownerDocument.defaultView;if(r&&cl(t)&&(M0(t)||mu(t))){var n=this.createElementClone(t);n.style.transitionProperty="none";var i=r.getComputedStyle(t),o=r.getComputedStyle(t,":before"),l=r.getComputedStyle(t,":after");this.referenceElement===t&&M0(n)&&(this.clonedReferenceElement=n),mg(n)&&WQ(n);var c=this.counters.parse(new hy(this.context,i)),d=this.resolvePseudoContent(t,n,o,Yc.BEFORE);Fy(t)&&(a=!0),ky(t)||this.cloneChildNodes(t,n,a),d&&n.insertBefore(d,n.firstChild);var A=this.resolvePseudoContent(t,n,l,Yc.AFTER);return A&&n.appendChild(A),this.counters.pop(c),(i&&(this.options.copyStyles||mu(t))&&!R2(t)||a)&&xx(i,n),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([n,t.scrollLeft,t.scrollTop]),(Pu(t)||Mu(t))&&(Pu(n)||Mu(n))&&(n.value=t.value),n}return t.cloneNode(!1)},s.prototype.resolvePseudoContent=function(t,a,r,n){var i=this;if(r){var o=r.content,l=a.ownerDocument;if(!(!l||!o||o==="none"||o==="-moz-alt-content"||r.display==="none")){this.counters.parse(new hy(this.context,r));var c=new FT(this.context,r),d=l.createElement("html2canvaspseudoelement");xx(r,d),c.content.forEach(function(u){if(u.type===0)d.appendChild(l.createTextNode(u.value));else if(u.type===22){var x=l.createElement("img");x.src=u.value,x.style.opacity="1",d.appendChild(x)}else if(u.type===18){if(u.name==="attr"){var m=u.values.filter(ps);m.length&&d.appendChild(l.createTextNode(t.getAttribute(m[0].value)||""))}else if(u.name==="counter"){var y=u.values.filter(kl),g=y[0],b=y[1];if(g&&ps(g)){var p=i.counters.getCounterValue(g.value),v=b&&ps(b)?L0.parse(i.context,b.value):3;d.appendChild(l.createTextNode(xd(p,v,!1)))}}else if(u.name==="counters"){var N=u.values.filter(kl),g=N[0],D=N[1],b=N[2];if(g&&ps(g)){var S=i.counters.getCounterValues(g.value),E=b&&ps(b)?L0.parse(i.context,b.value):3,R=D&&D.type===0?D.value:"",_=S.map(function(f){return xd(f,E,!1)}).join(R);d.appendChild(l.createTextNode(_))}}}else if(u.type===20)switch(u.value){case"open-quote":d.appendChild(l.createTextNode(my(c.quotes,i.quoteDepth++,!0)));break;case"close-quote":d.appendChild(l.createTextNode(my(c.quotes,--i.quoteDepth,!1)));break;default:d.appendChild(l.createTextNode(u.value))}}),d.className=O0+" "+H0;var A=n===Yc.BEFORE?" "+O0:" "+H0;return mu(a)?a.className.baseValue+=A:a.className+=A,d}}},s.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},s}(),Yc;(function(s){s[s.BEFORE=0]="BEFORE",s[s.AFTER=1]="AFTER"})(Yc||(Yc={}));var MQ=function(s,t){var a=s.createElement("iframe");return a.className="html2canvas-container",a.style.visibility="hidden",a.style.position="fixed",a.style.left="-10000px",a.style.top="0px",a.style.border="0",a.width=t.width.toString(),a.height=t.height.toString(),a.scrolling="no",a.setAttribute(q2,"true"),s.body.appendChild(a),a},RQ=function(s){return new Promise(function(t){if(s.complete){t();return}if(!s.src){t();return}s.onload=t,s.onerror=t})},OQ=function(s){return Promise.all([].slice.call(s.images,0).map(RQ))},HQ=function(s){return new Promise(function(t,a){var r=s.contentWindow;if(!r)return a("No window assigned for iframe");var n=r.document;r.onload=s.onload=function(){r.onload=s.onload=null;var i=setInterval(function(){n.body.childNodes.length>0&&n.readyState==="complete"&&(clearInterval(i),t(s))},50)}})},qQ=["all","d","content"],xx=function(s,t){for(var a=s.length-1;a>=0;a--){var r=s.item(a);qQ.indexOf(r)===-1&&t.style.setProperty(r,s.getPropertyValue(r))}return t},$Q=function(s){var t="";return s&&(t+="<!DOCTYPE ",s.name&&(t+=s.name),s.internalSubset&&(t+=s.internalSubset),s.publicId&&(t+='"'+s.publicId+'"'),s.systemId&&(t+='"'+s.systemId+'"'),t+=">"),t},VQ=function(s,t,a){s&&s.defaultView&&(t!==s.defaultView.pageXOffset||a!==s.defaultView.pageYOffset)&&s.defaultView.scrollTo(t,a)},KQ=function(s){var t=s[0],a=s[1],r=s[2];t.scrollLeft=a,t.scrollTop=r},zQ=":before",GQ=":after",O0="___html2canvas___pseudoelement_before",H0="___html2canvas___pseudoelement_after",Py=`{
    content: "" !important;
    display: none !important;
}`,WQ=function(s){JQ(s,"."+O0+zQ+Py+`
         .`+H0+GQ+Py)},JQ=function(s,t){var a=s.ownerDocument;if(a){var r=a.createElement("style");r.textContent=t,s.appendChild(r)}},$2=function(){function s(){}return s.getOrigin=function(t){var a=s._link;return a?(a.href=t,a.href=a.href,a.protocol+a.hostname+a.port):"about:blank"},s.isSameOrigin=function(t){return s.getOrigin(t)===s._origin},s.setContext=function(t){s._link=t.document.createElement("a"),s._origin=s.getOrigin(t.location.href)},s._origin="about:blank",s}(),YQ=function(){function s(t,a){this.context=t,this._options=a,this._cache={}}return s.prototype.addImage=function(t){var a=Promise.resolve();return this.has(t)||(gx(t)||t7(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),a},s.prototype.match=function(t){return this._cache[t]},s.prototype.loadImage=function(t){return $a(this,void 0,void 0,function(){var a,r,n,i,o=this;return Ia(this,function(l){switch(l.label){case 0:return a=$2.isSameOrigin(t),r=!px(t)&&this._options.useCORS===!0&&Ca.SUPPORT_CORS_IMAGES&&!a,n=!px(t)&&!a&&!gx(t)&&typeof this._options.proxy=="string"&&Ca.SUPPORT_CORS_XHR&&!r,!a&&this._options.allowTaint===!1&&!px(t)&&!gx(t)&&!n&&!r?[2]:(i=t,n?[4,this.proxy(i)]:[3,2]);case 1:i=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(c,d){var A=new Image;A.onload=function(){return c(A)},A.onerror=d,(s7(i)||r)&&(A.crossOrigin="anonymous"),A.src=i,A.complete===!0&&setTimeout(function(){return c(A)},500),o._options.imageTimeout>0&&setTimeout(function(){return d("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},s.prototype.has=function(t){return typeof this._cache[t]<"u"},s.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},s.prototype.proxy=function(t){var a=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var n=t.substring(0,256);return new Promise(function(i,o){var l=Ca.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(l==="text")i(c.response);else{var u=new FileReader;u.addEventListener("load",function(){return i(u.result)},!1),u.addEventListener("error",function(x){return o(x)},!1),u.readAsDataURL(c.response)}else o("Failed to proxy resource "+n+" with status code "+c.status)},c.onerror=o;var d=r.indexOf("?")>-1?"&":"?";if(c.open("GET",""+r+d+"url="+encodeURIComponent(t)+"&responseType="+l),l!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=l),a._options.imageTimeout){var A=a._options.imageTimeout;c.timeout=A,c.ontimeout=function(){return o("Timed out ("+A+"ms) proxying "+n)}}c.send()})},s}(),XQ=/^data:image\/svg\+xml/i,ZQ=/^data:image\/.*;base64,/i,e7=/^data:image\/.*/i,t7=function(s){return Ca.SUPPORT_SVG_DRAWING||!a7(s)},px=function(s){return e7.test(s)},s7=function(s){return ZQ.test(s)},gx=function(s){return s.substr(0,4)==="blob"},a7=function(s){return s.substr(-3).toLowerCase()==="svg"||XQ.test(s)},At=function(){function s(t,a){this.type=0,this.x=t,this.y=a}return s.prototype.add=function(t,a){return new s(this.x+t,this.y+a)},s}(),Go=function(s,t,a){return new At(s.x+(t.x-s.x)*a,s.y+(t.y-s.y)*a)},GA=function(){function s(t,a,r,n){this.type=1,this.start=t,this.startControl=a,this.endControl=r,this.end=n}return s.prototype.subdivide=function(t,a){var r=Go(this.start,this.startControl,t),n=Go(this.startControl,this.endControl,t),i=Go(this.endControl,this.end,t),o=Go(r,n,t),l=Go(n,i,t),c=Go(o,l,t);return a?new s(this.start,r,o,c):new s(c,l,i,this.end)},s.prototype.add=function(t,a){return new s(this.start.add(t,a),this.startControl.add(t,a),this.endControl.add(t,a),this.end.add(t,a))},s.prototype.reverse=function(){return new s(this.end,this.endControl,this.startControl,this.start)},s}(),Sr=function(s){return s.type===1},r7=function(){function s(t){var a=t.styles,r=t.bounds,n=Ic(a.borderTopLeftRadius,r.width,r.height),i=n[0],o=n[1],l=Ic(a.borderTopRightRadius,r.width,r.height),c=l[0],d=l[1],A=Ic(a.borderBottomRightRadius,r.width,r.height),u=A[0],x=A[1],m=Ic(a.borderBottomLeftRadius,r.width,r.height),y=m[0],g=m[1],b=[];b.push((i+c)/r.width),b.push((y+u)/r.width),b.push((o+g)/r.height),b.push((d+x)/r.height);var p=Math.max.apply(Math,b);p>1&&(i/=p,o/=p,c/=p,d/=p,u/=p,x/=p,y/=p,g/=p);var v=r.width-c,N=r.height-x,D=r.width-u,S=r.height-g,E=a.borderTopWidth,R=a.borderRightWidth,_=a.borderBottomWidth,C=a.borderLeftWidth,L=Ns(a.paddingTop,t.bounds.width),f=Ns(a.paddingRight,t.bounds.width),F=Ns(a.paddingBottom,t.bounds.width),M=Ns(a.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||o>0?Ss(r.left+C/3,r.top+E/3,i-C/3,o-E/3,ds.TOP_LEFT):new At(r.left+C/3,r.top+E/3),this.topRightBorderDoubleOuterBox=i>0||o>0?Ss(r.left+v,r.top+E/3,c-R/3,d-E/3,ds.TOP_RIGHT):new At(r.left+r.width-R/3,r.top+E/3),this.bottomRightBorderDoubleOuterBox=u>0||x>0?Ss(r.left+D,r.top+N,u-R/3,x-_/3,ds.BOTTOM_RIGHT):new At(r.left+r.width-R/3,r.top+r.height-_/3),this.bottomLeftBorderDoubleOuterBox=y>0||g>0?Ss(r.left+C/3,r.top+S,y-C/3,g-_/3,ds.BOTTOM_LEFT):new At(r.left+C/3,r.top+r.height-_/3),this.topLeftBorderDoubleInnerBox=i>0||o>0?Ss(r.left+C*2/3,r.top+E*2/3,i-C*2/3,o-E*2/3,ds.TOP_LEFT):new At(r.left+C*2/3,r.top+E*2/3),this.topRightBorderDoubleInnerBox=i>0||o>0?Ss(r.left+v,r.top+E*2/3,c-R*2/3,d-E*2/3,ds.TOP_RIGHT):new At(r.left+r.width-R*2/3,r.top+E*2/3),this.bottomRightBorderDoubleInnerBox=u>0||x>0?Ss(r.left+D,r.top+N,u-R*2/3,x-_*2/3,ds.BOTTOM_RIGHT):new At(r.left+r.width-R*2/3,r.top+r.height-_*2/3),this.bottomLeftBorderDoubleInnerBox=y>0||g>0?Ss(r.left+C*2/3,r.top+S,y-C*2/3,g-_*2/3,ds.BOTTOM_LEFT):new At(r.left+C*2/3,r.top+r.height-_*2/3),this.topLeftBorderStroke=i>0||o>0?Ss(r.left+C/2,r.top+E/2,i-C/2,o-E/2,ds.TOP_LEFT):new At(r.left+C/2,r.top+E/2),this.topRightBorderStroke=i>0||o>0?Ss(r.left+v,r.top+E/2,c-R/2,d-E/2,ds.TOP_RIGHT):new At(r.left+r.width-R/2,r.top+E/2),this.bottomRightBorderStroke=u>0||x>0?Ss(r.left+D,r.top+N,u-R/2,x-_/2,ds.BOTTOM_RIGHT):new At(r.left+r.width-R/2,r.top+r.height-_/2),this.bottomLeftBorderStroke=y>0||g>0?Ss(r.left+C/2,r.top+S,y-C/2,g-_/2,ds.BOTTOM_LEFT):new At(r.left+C/2,r.top+r.height-_/2),this.topLeftBorderBox=i>0||o>0?Ss(r.left,r.top,i,o,ds.TOP_LEFT):new At(r.left,r.top),this.topRightBorderBox=c>0||d>0?Ss(r.left+v,r.top,c,d,ds.TOP_RIGHT):new At(r.left+r.width,r.top),this.bottomRightBorderBox=u>0||x>0?Ss(r.left+D,r.top+N,u,x,ds.BOTTOM_RIGHT):new At(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=y>0||g>0?Ss(r.left,r.top+S,y,g,ds.BOTTOM_LEFT):new At(r.left,r.top+r.height),this.topLeftPaddingBox=i>0||o>0?Ss(r.left+C,r.top+E,Math.max(0,i-C),Math.max(0,o-E),ds.TOP_LEFT):new At(r.left+C,r.top+E),this.topRightPaddingBox=c>0||d>0?Ss(r.left+Math.min(v,r.width-R),r.top+E,v>r.width+R?0:Math.max(0,c-R),Math.max(0,d-E),ds.TOP_RIGHT):new At(r.left+r.width-R,r.top+E),this.bottomRightPaddingBox=u>0||x>0?Ss(r.left+Math.min(D,r.width-C),r.top+Math.min(N,r.height-_),Math.max(0,u-R),Math.max(0,x-_),ds.BOTTOM_RIGHT):new At(r.left+r.width-R,r.top+r.height-_),this.bottomLeftPaddingBox=y>0||g>0?Ss(r.left+C,r.top+Math.min(S,r.height-_),Math.max(0,y-C),Math.max(0,g-_),ds.BOTTOM_LEFT):new At(r.left+C,r.top+r.height-_),this.topLeftContentBox=i>0||o>0?Ss(r.left+C+M,r.top+E+L,Math.max(0,i-(C+M)),Math.max(0,o-(E+L)),ds.TOP_LEFT):new At(r.left+C+M,r.top+E+L),this.topRightContentBox=c>0||d>0?Ss(r.left+Math.min(v,r.width+C+M),r.top+E+L,v>r.width+C+M?0:c-C+M,d-(E+L),ds.TOP_RIGHT):new At(r.left+r.width-(R+f),r.top+E+L),this.bottomRightContentBox=u>0||x>0?Ss(r.left+Math.min(D,r.width-(C+M)),r.top+Math.min(N,r.height+E+L),Math.max(0,u-(R+f)),x-(_+F),ds.BOTTOM_RIGHT):new At(r.left+r.width-(R+f),r.top+r.height-(_+F)),this.bottomLeftContentBox=y>0||g>0?Ss(r.left+C+M,r.top+S,Math.max(0,y-(C+M)),g-(_+F),ds.BOTTOM_LEFT):new At(r.left+C+M,r.top+r.height-(_+F))}return s}(),ds;(function(s){s[s.TOP_LEFT=0]="TOP_LEFT",s[s.TOP_RIGHT=1]="TOP_RIGHT",s[s.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",s[s.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(ds||(ds={}));var Ss=function(s,t,a,r,n){var i=4*((Math.sqrt(2)-1)/3),o=a*i,l=r*i,c=s+a,d=t+r;switch(n){case ds.TOP_LEFT:return new GA(new At(s,d),new At(s,d-l),new At(c-o,t),new At(c,t));case ds.TOP_RIGHT:return new GA(new At(s,t),new At(s+o,t),new At(c,d-l),new At(c,d));case ds.BOTTOM_RIGHT:return new GA(new At(c,t),new At(c,t+l),new At(s+o,d),new At(s,d));case ds.BOTTOM_LEFT:default:return new GA(new At(c,d),new At(c-o,d),new At(s,t+l),new At(s,t))}},Ru=function(s){return[s.topLeftBorderBox,s.topRightBorderBox,s.bottomRightBorderBox,s.bottomLeftBorderBox]},n7=function(s){return[s.topLeftContentBox,s.topRightContentBox,s.bottomRightContentBox,s.bottomLeftContentBox]},Ou=function(s){return[s.topLeftPaddingBox,s.topRightPaddingBox,s.bottomRightPaddingBox,s.bottomLeftPaddingBox]},i7=function(){function s(t,a,r){this.offsetX=t,this.offsetY=a,this.matrix=r,this.type=0,this.target=6}return s}(),WA=function(){function s(t,a){this.path=t,this.target=a,this.type=1}return s}(),o7=function(){function s(t){this.opacity=t,this.type=2,this.target=6}return s}(),l7=function(s){return s.type===0},V2=function(s){return s.type===1},c7=function(s){return s.type===2},My=function(s,t){return s.length===t.length?s.some(function(a,r){return a===t[r]}):!1},d7=function(s,t,a,r,n){return s.map(function(i,o){switch(o){case 0:return i.add(t,a);case 1:return i.add(t+r,a);case 2:return i.add(t+r,a+n);case 3:return i.add(t,a+n)}return i})},K2=function(){function s(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return s}(),z2=function(){function s(t,a){if(this.container=t,this.parent=a,this.effects=[],this.curves=new r7(this.container),this.container.styles.opacity<1&&this.effects.push(new o7(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new i7(r,n,i))}if(this.container.styles.overflowX!==0){var o=Ru(this.curves),l=Ou(this.curves);My(o,l)?this.effects.push(new WA(o,6)):(this.effects.push(new WA(o,2)),this.effects.push(new WA(l,4)))}}return s.prototype.getEffects=function(t){for(var a=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,n=this.effects.slice(0);r;){var i=r.effects.filter(function(c){return!V2(c)});if(a||r.container.styles.position!==0||!r.parent){if(n.unshift.apply(n,i),a=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var o=Ru(r.curves),l=Ou(r.curves);My(o,l)||n.unshift(new WA(l,6))}}else n.unshift.apply(n,i);r=r.parent}return n.filter(function(c){return xa(c.target,t)})},s}(),q0=function(s,t,a,r){s.container.elements.forEach(function(n){var i=xa(n.flags,4),o=xa(n.flags,2),l=new z2(n,s);xa(n.styles.display,2048)&&r.push(l);var c=xa(n.flags,8)?[]:r;if(i||o){var d=i||n.styles.isPositioned()?a:t,A=new K2(l);if(n.styles.isPositioned()||n.styles.opacity<1||n.styles.isTransformed()){var u=n.styles.zIndex.order;if(u<0){var x=0;d.negativeZIndex.some(function(y,g){return u>y.element.container.styles.zIndex.order?(x=g,!1):x>0}),d.negativeZIndex.splice(x,0,A)}else if(u>0){var m=0;d.positiveZIndex.some(function(y,g){return u>=y.element.container.styles.zIndex.order?(m=g+1,!1):m>0}),d.positiveZIndex.splice(m,0,A)}else d.zeroOrAutoZIndexOrTransformedOrOpacity.push(A)}else n.styles.isFloating()?d.nonPositionedFloats.push(A):d.nonPositionedInlineLevel.push(A);q0(l,A,i?A:a,c)}else n.styles.isInlineLevel()?t.inlineLevel.push(l):t.nonInlineLevel.push(l),q0(l,t,a,c);xa(n.flags,8)&&G2(n,c)})},G2=function(s,t){for(var a=s instanceof P0?s.start:1,r=s instanceof P0?s.reversed:!1,n=0;n<t.length;n++){var i=t[n];i.container instanceof F2&&typeof i.container.value=="number"&&i.container.value!==0&&(a=i.container.value),i.listValue=xd(a,i.container.styles.listStyleType,!0),a+=r?-1:1}},A7=function(s){var t=new z2(s,null),a=new K2(t),r=[];return q0(t,a,a,r),G2(t.container,r),a},Ry=function(s,t){switch(t){case 0:return Ur(s.topLeftBorderBox,s.topLeftPaddingBox,s.topRightBorderBox,s.topRightPaddingBox);case 1:return Ur(s.topRightBorderBox,s.topRightPaddingBox,s.bottomRightBorderBox,s.bottomRightPaddingBox);case 2:return Ur(s.bottomRightBorderBox,s.bottomRightPaddingBox,s.bottomLeftBorderBox,s.bottomLeftPaddingBox);case 3:default:return Ur(s.bottomLeftBorderBox,s.bottomLeftPaddingBox,s.topLeftBorderBox,s.topLeftPaddingBox)}},u7=function(s,t){switch(t){case 0:return Ur(s.topLeftBorderBox,s.topLeftBorderDoubleOuterBox,s.topRightBorderBox,s.topRightBorderDoubleOuterBox);case 1:return Ur(s.topRightBorderBox,s.topRightBorderDoubleOuterBox,s.bottomRightBorderBox,s.bottomRightBorderDoubleOuterBox);case 2:return Ur(s.bottomRightBorderBox,s.bottomRightBorderDoubleOuterBox,s.bottomLeftBorderBox,s.bottomLeftBorderDoubleOuterBox);case 3:default:return Ur(s.bottomLeftBorderBox,s.bottomLeftBorderDoubleOuterBox,s.topLeftBorderBox,s.topLeftBorderDoubleOuterBox)}},m7=function(s,t){switch(t){case 0:return Ur(s.topLeftBorderDoubleInnerBox,s.topLeftPaddingBox,s.topRightBorderDoubleInnerBox,s.topRightPaddingBox);case 1:return Ur(s.topRightBorderDoubleInnerBox,s.topRightPaddingBox,s.bottomRightBorderDoubleInnerBox,s.bottomRightPaddingBox);case 2:return Ur(s.bottomRightBorderDoubleInnerBox,s.bottomRightPaddingBox,s.bottomLeftBorderDoubleInnerBox,s.bottomLeftPaddingBox);case 3:default:return Ur(s.bottomLeftBorderDoubleInnerBox,s.bottomLeftPaddingBox,s.topLeftBorderDoubleInnerBox,s.topLeftPaddingBox)}},h7=function(s,t){switch(t){case 0:return JA(s.topLeftBorderStroke,s.topRightBorderStroke);case 1:return JA(s.topRightBorderStroke,s.bottomRightBorderStroke);case 2:return JA(s.bottomRightBorderStroke,s.bottomLeftBorderStroke);case 3:default:return JA(s.bottomLeftBorderStroke,s.topLeftBorderStroke)}},JA=function(s,t){var a=[];return Sr(s)?a.push(s.subdivide(.5,!1)):a.push(s),Sr(t)?a.push(t.subdivide(.5,!0)):a.push(t),a},Ur=function(s,t,a,r){var n=[];return Sr(s)?n.push(s.subdivide(.5,!1)):n.push(s),Sr(a)?n.push(a.subdivide(.5,!0)):n.push(a),Sr(r)?n.push(r.subdivide(.5,!0).reverse()):n.push(r),Sr(t)?n.push(t.subdivide(.5,!1).reverse()):n.push(t),n},W2=function(s){var t=s.bounds,a=s.styles;return t.add(a.borderLeftWidth,a.borderTopWidth,-(a.borderRightWidth+a.borderLeftWidth),-(a.borderTopWidth+a.borderBottomWidth))},Hu=function(s){var t=s.styles,a=s.bounds,r=Ns(t.paddingLeft,a.width),n=Ns(t.paddingRight,a.width),i=Ns(t.paddingTop,a.width),o=Ns(t.paddingBottom,a.width);return a.add(r+t.borderLeftWidth,i+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+r+n),-(t.borderTopWidth+t.borderBottomWidth+i+o))},x7=function(s,t){return s===0?t.bounds:s===2?Hu(t):W2(t)},p7=function(s,t){return s===0?t.bounds:s===2?Hu(t):W2(t)},fx=function(s,t,a){var r=x7(tl(s.styles.backgroundOrigin,t),s),n=p7(tl(s.styles.backgroundClip,t),s),i=g7(tl(s.styles.backgroundSize,t),a,r),o=i[0],l=i[1],c=Ic(tl(s.styles.backgroundPosition,t),r.width-o,r.height-l),d=f7(tl(s.styles.backgroundRepeat,t),c,i,r,n),A=Math.round(r.left+c[0]),u=Math.round(r.top+c[1]);return[d,A,u,o,l]},Wo=function(s){return ps(s)&&s.value===bl.AUTO},YA=function(s){return typeof s=="number"},g7=function(s,t,a){var r=t[0],n=t[1],i=t[2],o=s[0],l=s[1];if(!o)return[0,0];if(ca(o)&&l&&ca(l))return[Ns(o,a.width),Ns(l,a.height)];var c=YA(i);if(ps(o)&&(o.value===bl.CONTAIN||o.value===bl.COVER)){if(YA(i)){var d=a.width/a.height;return d<i!=(o.value===bl.COVER)?[a.width,a.width/i]:[a.height*i,a.height]}return[a.width,a.height]}var A=YA(r),u=YA(n),x=A||u;if(Wo(o)&&(!l||Wo(l))){if(A&&u)return[r,n];if(!c&&!x)return[a.width,a.height];if(x&&c){var m=A?r:n*i,y=u?n:r/i;return[m,y]}var g=A?r:a.width,b=u?n:a.height;return[g,b]}if(c){var p=0,v=0;return ca(o)?p=Ns(o,a.width):ca(l)&&(v=Ns(l,a.height)),Wo(o)?p=v*i:(!l||Wo(l))&&(v=p/i),[p,v]}var N=null,D=null;if(ca(o)?N=Ns(o,a.width):l&&ca(l)&&(D=Ns(l,a.height)),N!==null&&(!l||Wo(l))&&(D=A&&u?N/r*n:a.height),D!==null&&Wo(o)&&(N=A&&u?D/n*r:a.width),N!==null&&D!==null)return[N,D];throw new Error("Unable to calculate background-size for element")},tl=function(s,t){var a=s[t];return typeof a>"u"?s[0]:a},f7=function(s,t,a,r,n){var i=t[0],o=t[1],l=a[0],c=a[1];switch(s){case 2:return[new At(Math.round(r.left),Math.round(r.top+o)),new At(Math.round(r.left+r.width),Math.round(r.top+o)),new At(Math.round(r.left+r.width),Math.round(c+r.top+o)),new At(Math.round(r.left),Math.round(c+r.top+o))];case 3:return[new At(Math.round(r.left+i),Math.round(r.top)),new At(Math.round(r.left+i+l),Math.round(r.top)),new At(Math.round(r.left+i+l),Math.round(r.height+r.top)),new At(Math.round(r.left+i),Math.round(r.height+r.top))];case 1:return[new At(Math.round(r.left+i),Math.round(r.top+o)),new At(Math.round(r.left+i+l),Math.round(r.top+o)),new At(Math.round(r.left+i+l),Math.round(r.top+o+c)),new At(Math.round(r.left+i),Math.round(r.top+o+c))];default:return[new At(Math.round(n.left),Math.round(n.top)),new At(Math.round(n.left+n.width),Math.round(n.top)),new At(Math.round(n.left+n.width),Math.round(n.height+n.top)),new At(Math.round(n.left),Math.round(n.height+n.top))]}},b7="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Oy="Hidden Text",y7=function(){function s(t){this._data={},this._document=t}return s.prototype.parseMetrics=function(t,a){var r=this._document.createElement("div"),n=this._document.createElement("img"),i=this._document.createElement("span"),o=this._document.body;r.style.visibility="hidden",r.style.fontFamily=t,r.style.fontSize=a,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",o.appendChild(r),n.src=b7,n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",i.style.fontFamily=t,i.style.fontSize=a,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(Oy)),r.appendChild(i),r.appendChild(n);var l=n.offsetTop-i.offsetTop+2;r.removeChild(i),r.appendChild(this._document.createTextNode(Oy)),r.style.lineHeight="normal",n.style.verticalAlign="super";var c=n.offsetTop-r.offsetTop+2;return o.removeChild(r),{baseline:l,middle:c}},s.prototype.getMetrics=function(t,a){var r=t+" "+a;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(t,a)),this._data[r]},s}(),J2=function(){function s(t,a){this.context=t,this.options=a}return s}(),v7=1e4,w7=function(s){Wr(t,s);function t(a,r){var n=s.call(this,a,r)||this;return n._activeEffects=[],n.canvas=r.canvas?r.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),r.canvas||(n.canvas.width=Math.floor(r.width*r.scale),n.canvas.height=Math.floor(r.height*r.scale),n.canvas.style.width=r.width+"px",n.canvas.style.height=r.height+"px"),n.fontMetrics=new y7(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-r.x,-r.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),n}return t.prototype.applyEffects=function(a){for(var r=this;this._activeEffects.length;)this.popEffect();a.forEach(function(n){return r.applyEffect(n)})},t.prototype.applyEffect=function(a){this.ctx.save(),c7(a)&&(this.ctx.globalAlpha=a.opacity),l7(a)&&(this.ctx.translate(a.offsetX,a.offsetY),this.ctx.transform(a.matrix[0],a.matrix[1],a.matrix[2],a.matrix[3],a.matrix[4],a.matrix[5]),this.ctx.translate(-a.offsetX,-a.offsetY)),V2(a)&&(this.path(a.path),this.ctx.clip()),this._activeEffects.push(a)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(a){return $a(this,void 0,void 0,function(){var r;return Ia(this,function(n){switch(n.label){case 0:return r=a.element.container.styles,r.isVisible()?[4,this.renderStackContent(a)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(a){return $a(this,void 0,void 0,function(){return Ia(this,function(r){switch(r.label){case 0:if(xa(a.container.flags,16))debugger;return a.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(a)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(a)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(a,r,n){var i=this;if(r===0)this.ctx.fillText(a.text,a.bounds.left,a.bounds.top+n);else{var o=Ag(a.text);o.reduce(function(l,c){return i.ctx.fillText(c,l,a.bounds.top+n),l+i.ctx.measureText(c).width},a.bounds.left)}},t.prototype.createFontStyle=function(a){var r=a.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),n=B7(a.fontFamily).join(", "),i=Sd(a.fontSize)?""+a.fontSize.number+a.fontSize.unit:a.fontSize.number+"px";return[[a.fontStyle,r,a.fontWeight,i,n].join(" "),n,i]},t.prototype.renderTextNode=function(a,r){return $a(this,void 0,void 0,function(){var n,i,o,l,c,d,A,u,x=this;return Ia(this,function(m){return n=this.createFontStyle(r),i=n[0],o=n[1],l=n[2],this.ctx.font=i,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(o,l),d=c.baseline,A=c.middle,u=r.paintOrder,a.textBounds.forEach(function(y){u.forEach(function(g){switch(g){case 0:x.ctx.fillStyle=ba(r.color),x.renderTextWithLetterSpacing(y,r.letterSpacing,d);var b=r.textShadow;b.length&&y.text.trim().length&&(b.slice(0).reverse().forEach(function(p){x.ctx.shadowColor=ba(p.color),x.ctx.shadowOffsetX=p.offsetX.number*x.options.scale,x.ctx.shadowOffsetY=p.offsetY.number*x.options.scale,x.ctx.shadowBlur=p.blur.number,x.renderTextWithLetterSpacing(y,r.letterSpacing,d)}),x.ctx.shadowColor="",x.ctx.shadowOffsetX=0,x.ctx.shadowOffsetY=0,x.ctx.shadowBlur=0),r.textDecorationLine.length&&(x.ctx.fillStyle=ba(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(p){switch(p){case 1:x.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top+d),y.bounds.width,1);break;case 2:x.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top),y.bounds.width,1);break;case 3:x.ctx.fillRect(y.bounds.left,Math.ceil(y.bounds.top+A),y.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&y.text.trim().length&&(x.ctx.strokeStyle=ba(r.webkitTextStrokeColor),x.ctx.lineWidth=r.webkitTextStrokeWidth,x.ctx.lineJoin=window.chrome?"miter":"round",x.ctx.strokeText(y.text,y.bounds.left,y.bounds.top+d)),x.ctx.strokeStyle="",x.ctx.lineWidth=0,x.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(a,r,n){if(n&&a.intrinsicWidth>0&&a.intrinsicHeight>0){var i=Hu(a),o=Ou(r);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,a.intrinsicWidth,a.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(a){return $a(this,void 0,void 0,function(){var r,n,i,o,l,c,v,v,d,A,u,x,D,m,y,S,g,b,p,v,N,D,S;return Ia(this,function(E){switch(E.label){case 0:this.applyEffects(a.getEffects(4)),r=a.container,n=a.curves,i=r.styles,o=0,l=r.textNodes,E.label=1;case 1:return o<l.length?(c=l[o],[4,this.renderTextNode(c,i)]):[3,4];case 2:E.sent(),E.label=3;case 3:return o++,[3,1];case 4:if(!(r instanceof S2))return[3,8];E.label=5;case 5:return E.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return v=E.sent(),this.renderReplacedElement(r,n,v),[3,8];case 7:return E.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof k2&&this.renderReplacedElement(r,n,r.canvas),!(r instanceof E2))return[3,12];E.label=9;case 9:return E.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return v=E.sent(),this.renderReplacedElement(r,n,v),[3,12];case 11:return E.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof I2&&r.tree?(d=new t(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,d.render(r.tree)]):[3,14];case 13:A=E.sent(),r.width&&r.height&&this.ctx.drawImage(A,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),E.label=14;case 14:if(r instanceof ug&&(u=Math.min(r.bounds.width,r.bounds.height),r.type===Tu?r.checked&&(this.ctx.save(),this.path([new At(r.bounds.left+u*.39363,r.bounds.top+u*.79),new At(r.bounds.left+u*.16,r.bounds.top+u*.5549),new At(r.bounds.left+u*.27347,r.bounds.top+u*.44071),new At(r.bounds.left+u*.39694,r.bounds.top+u*.5649),new At(r.bounds.left+u*.72983,r.bounds.top+u*.23),new At(r.bounds.left+u*.84,r.bounds.top+u*.34085),new At(r.bounds.left+u*.39363,r.bounds.top+u*.79)]),this.ctx.fillStyle=ba(Sy),this.ctx.fill(),this.ctx.restore()):r.type===Qu&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+u/2,r.bounds.top+u/2,u/4,0,Math.PI*2,!0),this.ctx.fillStyle=ba(Sy),this.ctx.fill(),this.ctx.restore())),j7(r)&&r.value.length){switch(x=this.createFontStyle(i),D=x[0],m=x[1],y=this.fontMetrics.getMetrics(D,m).baseline,this.ctx.font=D,this.ctx.fillStyle=ba(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=_7(r.styles.textAlign),S=Hu(r),g=0,r.styles.textAlign){case 1:g+=S.width/2;break;case 2:g+=S.width;break}b=S.add(g,0,0,-S.height/2+1),this.ctx.save(),this.path([new At(S.left,S.top),new At(S.left+S.width,S.top),new At(S.left+S.width,S.top+S.height),new At(S.left,S.top+S.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Jc(r.value,b),i.letterSpacing,y),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!xa(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(p=r.styles.listStyleImage,p.type!==0)return[3,18];v=void 0,N=p.url,E.label=15;case 15:return E.trys.push([15,17,,18]),[4,this.context.cache.match(N)];case 16:return v=E.sent(),this.ctx.drawImage(v,r.bounds.left-(v.width+10),r.bounds.top),[3,18];case 17:return E.sent(),this.context.logger.error("Error loading list-style-image "+N),[3,18];case 18:return[3,20];case 19:a.listValue&&r.styles.listStyleType!==-1&&(D=this.createFontStyle(i)[0],this.ctx.font=D,this.ctx.fillStyle=ba(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",S=new Ln(r.bounds.left,r.bounds.top+Ns(r.styles.paddingTop,r.bounds.width),r.bounds.width,Ay(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Jc(a.listValue,S),i.letterSpacing,Ay(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),E.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(a){return $a(this,void 0,void 0,function(){var r,n,p,i,o,p,l,c,p,d,A,p,u,x,p,m,y,p,g,b,p;return Ia(this,function(v){switch(v.label){case 0:if(xa(a.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(a.element)];case 1:v.sent(),r=0,n=a.negativeZIndex,v.label=2;case 2:return r<n.length?(p=n[r],[4,this.renderStack(p)]):[3,5];case 3:v.sent(),v.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(a.element)];case 6:v.sent(),i=0,o=a.nonInlineLevel,v.label=7;case 7:return i<o.length?(p=o[i],[4,this.renderNode(p)]):[3,10];case 8:v.sent(),v.label=9;case 9:return i++,[3,7];case 10:l=0,c=a.nonPositionedFloats,v.label=11;case 11:return l<c.length?(p=c[l],[4,this.renderStack(p)]):[3,14];case 12:v.sent(),v.label=13;case 13:return l++,[3,11];case 14:d=0,A=a.nonPositionedInlineLevel,v.label=15;case 15:return d<A.length?(p=A[d],[4,this.renderStack(p)]):[3,18];case 16:v.sent(),v.label=17;case 17:return d++,[3,15];case 18:u=0,x=a.inlineLevel,v.label=19;case 19:return u<x.length?(p=x[u],[4,this.renderNode(p)]):[3,22];case 20:v.sent(),v.label=21;case 21:return u++,[3,19];case 22:m=0,y=a.zeroOrAutoZIndexOrTransformedOrOpacity,v.label=23;case 23:return m<y.length?(p=y[m],[4,this.renderStack(p)]):[3,26];case 24:v.sent(),v.label=25;case 25:return m++,[3,23];case 26:g=0,b=a.positiveZIndex,v.label=27;case 27:return g<b.length?(p=b[g],[4,this.renderStack(p)]):[3,30];case 28:v.sent(),v.label=29;case 29:return g++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(a){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(a.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(a){this.ctx.beginPath(),this.formatPath(a),this.ctx.closePath()},t.prototype.formatPath=function(a){var r=this;a.forEach(function(n,i){var o=Sr(n)?n.start:n;i===0?r.ctx.moveTo(o.x,o.y):r.ctx.lineTo(o.x,o.y),Sr(n)&&r.ctx.bezierCurveTo(n.startControl.x,n.startControl.y,n.endControl.x,n.endControl.y,n.end.x,n.end.y)})},t.prototype.renderRepeat=function(a,r,n,i){this.path(a),this.ctx.fillStyle=r,this.ctx.translate(n,i),this.ctx.fill(),this.ctx.translate(-n,-i)},t.prototype.resizeImage=function(a,r,n){var i;if(a.width===r&&a.height===n)return a;var o=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,l=o.createElement("canvas");l.width=Math.max(1,r),l.height=Math.max(1,n);var c=l.getContext("2d");return c.drawImage(a,0,0,a.width,a.height,0,0,r,n),l},t.prototype.renderBackgroundImage=function(a){return $a(this,void 0,void 0,function(){var r,n,i,o,l,c;return Ia(this,function(d){switch(d.label){case 0:r=a.styles.backgroundImage.length-1,n=function(A){var u,x,m,L,O,X,M,P,_,y,L,O,X,M,P,g,b,p,v,N,D,S,E,R,_,C,L,f,F,M,P,Z,O,X,q,V,oe,H,I,B,$,T;return Ia(this,function(ne){switch(ne.label){case 0:if(A.type!==0)return[3,5];u=void 0,x=A.url,ne.label=1;case 1:return ne.trys.push([1,3,,4]),[4,i.context.cache.match(x)];case 2:return u=ne.sent(),[3,4];case 3:return ne.sent(),i.context.logger.error("Error loading background-image "+x),[3,4];case 4:return u&&(m=fx(a,r,[u.width,u.height,u.width/u.height]),L=m[0],O=m[1],X=m[2],M=m[3],P=m[4],_=i.ctx.createPattern(i.resizeImage(u,M,P),"repeat"),i.renderRepeat(L,_,O,X)),[3,6];case 5:lL(A)?(y=fx(a,r,[null,null,null]),L=y[0],O=y[1],X=y[2],M=y[3],P=y[4],g=aL(A.angle,M,P),b=g[0],p=g[1],v=g[2],N=g[3],D=g[4],S=document.createElement("canvas"),S.width=M,S.height=P,E=S.getContext("2d"),R=E.createLinearGradient(p,N,v,D),cy(A.stops,b).forEach(function(ue){return R.addColorStop(ue.stop,ba(ue.color))}),E.fillStyle=R,E.fillRect(0,0,M,P),M>0&&P>0&&(_=i.ctx.createPattern(S,"repeat"),i.renderRepeat(L,_,O,X))):cL(A)&&(C=fx(a,r,[null,null,null]),L=C[0],f=C[1],F=C[2],M=C[3],P=C[4],Z=A.position.length===0?[lg]:A.position,O=Ns(Z[0],M),X=Ns(Z[Z.length-1],P),q=rL(A,O,X,M,P),V=q[0],oe=q[1],V>0&&oe>0&&(H=i.ctx.createRadialGradient(f+O,F+X,0,f+O,F+X,V),cy(A.stops,V*2).forEach(function(ue){return H.addColorStop(ue.stop,ba(ue.color))}),i.path(L),i.ctx.fillStyle=H,V!==oe?(I=a.bounds.left+.5*a.bounds.width,B=a.bounds.top+.5*a.bounds.height,$=oe/V,T=1/$,i.ctx.save(),i.ctx.translate(I,B),i.ctx.transform(1,0,0,$,0,0),i.ctx.translate(-I,-B),i.ctx.fillRect(f,T*(F-B)+B,M,P*T),i.ctx.restore()):i.ctx.fill())),ne.label=6;case 6:return r--,[2]}})},i=this,o=0,l=a.styles.backgroundImage.slice(0).reverse(),d.label=1;case 1:return o<l.length?(c=l[o],[5,n(c)]):[3,4];case 2:d.sent(),d.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(a,r,n){return $a(this,void 0,void 0,function(){return Ia(this,function(i){return this.path(Ry(n,r)),this.ctx.fillStyle=ba(a),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(a,r,n,i){return $a(this,void 0,void 0,function(){var o,l;return Ia(this,function(c){switch(c.label){case 0:return r<3?[4,this.renderSolidBorder(a,n,i)]:[3,2];case 1:return c.sent(),[2];case 2:return o=u7(i,n),this.path(o),this.ctx.fillStyle=ba(a),this.ctx.fill(),l=m7(i,n),this.path(l),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(a){return $a(this,void 0,void 0,function(){var r,n,i,o,l,c,d,A,u=this;return Ia(this,function(x){switch(x.label){case 0:return this.applyEffects(a.getEffects(2)),r=a.container.styles,n=!hi(r.backgroundColor)||r.backgroundImage.length,i=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],o=N7(tl(r.backgroundClip,0),a.curves),n||r.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),hi(r.backgroundColor)||(this.ctx.fillStyle=ba(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(a.container)]):[3,2];case 1:x.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(m){u.ctx.save();var y=Ru(a.curves),g=m.inset?0:v7,b=d7(y,-g+(m.inset?1:-1)*m.spread.number,(m.inset?1:-1)*m.spread.number,m.spread.number*(m.inset?-2:2),m.spread.number*(m.inset?-2:2));m.inset?(u.path(y),u.ctx.clip(),u.mask(b)):(u.mask(y),u.ctx.clip(),u.path(b)),u.ctx.shadowOffsetX=m.offsetX.number+g,u.ctx.shadowOffsetY=m.offsetY.number,u.ctx.shadowColor=ba(m.color),u.ctx.shadowBlur=m.blur.number,u.ctx.fillStyle=m.inset?ba(m.color):"rgba(0,0,0,1)",u.ctx.fill(),u.ctx.restore()}),x.label=2;case 2:l=0,c=0,d=i,x.label=3;case 3:return c<d.length?(A=d[c],A.style!==0&&!hi(A.color)&&A.width>0?A.style!==2?[3,5]:[4,this.renderDashedDottedBorder(A.color,A.width,l,a.curves,2)]:[3,11]):[3,13];case 4:return x.sent(),[3,11];case 5:return A.style!==3?[3,7]:[4,this.renderDashedDottedBorder(A.color,A.width,l,a.curves,3)];case 6:return x.sent(),[3,11];case 7:return A.style!==4?[3,9]:[4,this.renderDoubleBorder(A.color,A.width,l,a.curves)];case 8:return x.sent(),[3,11];case 9:return[4,this.renderSolidBorder(A.color,l,a.curves)];case 10:x.sent(),x.label=11;case 11:l++,x.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(a,r,n,i,o){return $a(this,void 0,void 0,function(){var l,c,d,A,u,x,m,y,g,b,p,v,N,D,S,E,S,E;return Ia(this,function(R){return this.ctx.save(),l=h7(i,n),c=Ry(i,n),o===2&&(this.path(c),this.ctx.clip()),Sr(c[0])?(d=c[0].start.x,A=c[0].start.y):(d=c[0].x,A=c[0].y),Sr(c[1])?(u=c[1].end.x,x=c[1].end.y):(u=c[1].x,x=c[1].y),n===0||n===2?m=Math.abs(d-u):m=Math.abs(A-x),this.ctx.beginPath(),o===3?this.formatPath(l):this.formatPath(c.slice(0,2)),y=r<3?r*3:r*2,g=r<3?r*2:r,o===3&&(y=r,g=r),b=!0,m<=y*2?b=!1:m<=y*2+g?(p=m/(2*y+g),y*=p,g*=p):(v=Math.floor((m+g)/(y+g)),N=(m-v*y)/(v-1),D=(m-(v+1)*y)/v,g=D<=0||Math.abs(g-N)<Math.abs(g-D)?N:D),b&&(o===3?this.ctx.setLineDash([0,y+g]):this.ctx.setLineDash([y,g])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=ba(a),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(Sr(c[0])&&(S=c[3],E=c[0],this.ctx.beginPath(),this.formatPath([new At(S.end.x,S.end.y),new At(E.start.x,E.start.y)]),this.ctx.stroke()),Sr(c[1])&&(S=c[1],E=c[2],this.ctx.beginPath(),this.formatPath([new At(S.end.x,S.end.y),new At(E.start.x,E.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(a){return $a(this,void 0,void 0,function(){var r;return Ia(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ba(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=A7(a),[4,this.renderStack(r)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(J2),j7=function(s){return s instanceof D2||s instanceof U2?!0:s instanceof ug&&s.type!==Qu&&s.type!==Tu},N7=function(s,t){switch(s){case 0:return Ru(t);case 2:return n7(t);case 1:default:return Ou(t)}},_7=function(s){switch(s){case 1:return"center";case 2:return"right";case 0:default:return"left"}},C7=["-apple-system","system-ui"],B7=function(s){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?s.filter(function(t){return C7.indexOf(t)===-1}):s},S7=function(s){Wr(t,s);function t(a,r){var n=s.call(this,a,r)||this;return n.canvas=r.canvas?r.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=r,n.canvas.width=Math.floor(r.width*r.scale),n.canvas.height=Math.floor(r.height*r.scale),n.canvas.style.width=r.width+"px",n.canvas.style.height=r.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-r.x,-r.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),n}return t.prototype.render=function(a){return $a(this,void 0,void 0,function(){var r,n;return Ia(this,function(i){switch(i.label){case 0:return r=Q0(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,a),[4,k7(r)];case 1:return n=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ba(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(J2),k7=function(s){return new Promise(function(t,a){var r=new Image;r.onload=function(){t(r)},r.onerror=a,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(s))})},E7=function(){function s(t){var a=t.id,r=t.enabled;this.id=a,this.enabled=r,this.start=Date.now()}return s.prototype.debug=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,kA([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},s.prototype.getTime=function(){return Date.now()-this.start},s.prototype.info=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,kA([this.id,this.getTime()+"ms"],t))},s.prototype.warn=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,kA([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},s.prototype.error=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,kA([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},s.instances={},s}(),F7=function(){function s(t,a){var r;this.windowBounds=a,this.instanceName="#"+s.instanceCount++,this.logger=new E7({id:this.instanceName,enabled:t.logging}),this.cache=(r=t.cache)!==null&&r!==void 0?r:new YQ(this,t)}return s.instanceCount=1,s}(),hg=function(s,t){return t===void 0&&(t={}),U7(s,t)};typeof window<"u"&&$2.setContext(window);var U7=function(s,t){return $a(void 0,void 0,void 0,function(){var a,r,n,i,o,l,c,d,A,u,x,m,y,g,b,p,v,N,D,S,R,E,R,_,C,L,f,F,M,P,Z,O,X,q,V,oe,H,I,B,$;return Ia(this,function(T){switch(T.label){case 0:if(!s||typeof s!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(a=s.ownerDocument,!a)throw new Error("Element is not attached to a Document");if(r=a.defaultView,!r)throw new Error("Document is not attached to a Window");return n={allowTaint:(_=t.allowTaint)!==null&&_!==void 0?_:!1,imageTimeout:(C=t.imageTimeout)!==null&&C!==void 0?C:15e3,proxy:t.proxy,useCORS:(L=t.useCORS)!==null&&L!==void 0?L:!1},i=w0({logging:(f=t.logging)!==null&&f!==void 0?f:!0,cache:t.cache},n),o={windowWidth:(F=t.windowWidth)!==null&&F!==void 0?F:r.innerWidth,windowHeight:(M=t.windowHeight)!==null&&M!==void 0?M:r.innerHeight,scrollX:(P=t.scrollX)!==null&&P!==void 0?P:r.pageXOffset,scrollY:(Z=t.scrollY)!==null&&Z!==void 0?Z:r.pageYOffset},l=new Ln(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),c=new F7(i,l),d=(O=t.foreignObjectRendering)!==null&&O!==void 0?O:!1,A={allowTaint:(X=t.allowTaint)!==null&&X!==void 0?X:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:d,copyStyles:d},c.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),u=new Qy(c,s,A),x=u.clonedReferenceElement,x?[4,u.toIFrame(a,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=T.sent(),y=mg(x)||IQ(x)?dD(x.ownerDocument):pm(c,x),g=y.width,b=y.height,p=y.left,v=y.top,N=D7(c,x,t.backgroundColor),D={canvas:t.canvas,backgroundColor:N,scale:(V=(q=t.scale)!==null&&q!==void 0?q:r.devicePixelRatio)!==null&&V!==void 0?V:1,x:((oe=t.x)!==null&&oe!==void 0?oe:0)+p,y:((H=t.y)!==null&&H!==void 0?H:0)+v,width:(I=t.width)!==null&&I!==void 0?I:Math.ceil(g),height:(B=t.height)!==null&&B!==void 0?B:Math.ceil(b)},d?(c.logger.debug("Document cloned, using foreign object rendering"),R=new S7(c,D),[4,R.render(x)]):[3,3];case 2:return S=T.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+p+","+v+" with size "+g+"x"+b+" using computed rendering"),c.logger.debug("Starting DOM parsing"),E=T2(c,x),N===E.styles.backgroundColor&&(E.styles.backgroundColor=Un.TRANSPARENT),c.logger.debug("Starting renderer for element at "+D.x+","+D.y+" with size "+D.width+"x"+D.height),R=new w7(c,D),[4,R.render(E)];case 4:S=T.sent(),T.label=5;case 5:return(!(($=t.removeContainer)!==null&&$!==void 0)||$)&&(Qy.destroy(m)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,S]}})})},D7=function(s,t,a){var r=t.ownerDocument,n=r.documentElement?Gc(s,getComputedStyle(r.documentElement).backgroundColor):Un.TRANSPARENT,i=r.body?Gc(s,getComputedStyle(r.body).backgroundColor):Un.TRANSPARENT,o=typeof a=="string"?Gc(s,a):a===null?Un.TRANSPARENT:4294967295;return t===r.documentElement?hi(n)?hi(i)?o:i:n:o};const I7=Object.freeze(Object.defineProperty({__proto__:null,default:hg},Symbol.toStringTag,{value:"Module"}));function hs(s){"@babel/helpers - typeof";return hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hs(s)}var Ta=Uint8Array,mr=Uint16Array,xg=Int32Array,Cm=new Ta([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Bm=new Ta([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),$0=new Ta([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Y2=function(s,t){for(var a=new mr(31),r=0;r<31;++r)a[r]=t+=1<<s[r-1];for(var n=new xg(a[30]),r=1;r<30;++r)for(var i=a[r];i<a[r+1];++i)n[i]=i-a[r]<<5|r;return{b:a,r:n}},X2=Y2(Cm,2),Z2=X2.b,V0=X2.r;Z2[28]=258,V0[258]=28;var e1=Y2(Bm,0),L7=e1.b,Hy=e1.r,K0=new mr(32768);for(var Bs=0;Bs<32768;++Bs){var Xn=(Bs&43690)>>1|(Bs&21845)<<1;Xn=(Xn&52428)>>2|(Xn&13107)<<2,Xn=(Xn&61680)>>4|(Xn&3855)<<4,K0[Bs]=((Xn&65280)>>8|(Xn&255)<<8)>>1}var cn=function(s,t,a){for(var r=s.length,n=0,i=new mr(t);n<r;++n)s[n]&&++i[s[n]-1];var o=new mr(t);for(n=1;n<t;++n)o[n]=o[n-1]+i[n-1]<<1;var l;if(a){l=new mr(1<<t);var c=15-t;for(n=0;n<r;++n)if(s[n])for(var d=n<<4|s[n],A=t-s[n],u=o[s[n]-1]++<<A,x=u|(1<<A)-1;u<=x;++u)l[K0[u]>>c]=d}else for(l=new mr(r),n=0;n<r;++n)s[n]&&(l[n]=K0[o[s[n]-1]++]>>15-s[n]);return l},yi=new Ta(288);for(var Bs=0;Bs<144;++Bs)yi[Bs]=8;for(var Bs=144;Bs<256;++Bs)yi[Bs]=9;for(var Bs=256;Bs<280;++Bs)yi[Bs]=7;for(var Bs=280;Bs<288;++Bs)yi[Bs]=8;var pd=new Ta(32);for(var Bs=0;Bs<32;++Bs)pd[Bs]=5;var T7=cn(yi,9,0),Q7=cn(yi,9,1),P7=cn(pd,5,0),M7=cn(pd,5,1),bx=function(s){for(var t=s[0],a=1;a<s.length;++a)s[a]>t&&(t=s[a]);return t},Or=function(s,t,a){var r=t/8|0;return(s[r]|s[r+1]<<8)>>(t&7)&a},yx=function(s,t){var a=t/8|0;return(s[a]|s[a+1]<<8|s[a+2]<<16)>>(t&7)},pg=function(s){return(s+7)/8|0},t1=function(s,t,a){return(a==null||a>s.length)&&(a=s.length),new Ta(s.subarray(t,a))},R7=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Kr=function(s,t,a){var r=new Error(t||R7[s]);if(r.code=s,Error.captureStackTrace&&Error.captureStackTrace(r,Kr),!a)throw r;return r},O7=function(s,t,a,r){var n=s.length,i=0;if(!n||t.f&&!t.l)return a||new Ta(0);var o=!a,l=o||t.i!=2,c=t.i;o&&(a=new Ta(n*3));var d=function(ee){var je=a.length;if(ee>je){var Pe=new Ta(Math.max(je*2,ee));Pe.set(a),a=Pe}},A=t.f||0,u=t.p||0,x=t.b||0,m=t.l,y=t.d,g=t.m,b=t.n,p=n*8;do{if(!m){A=Or(s,u,1);var v=Or(s,u+1,3);if(u+=3,v)if(v==1)m=Q7,y=M7,g=9,b=5;else if(v==2){var E=Or(s,u,31)+257,R=Or(s,u+10,15)+4,_=E+Or(s,u+5,31)+1;u+=14;for(var C=new Ta(_),L=new Ta(19),f=0;f<R;++f)L[$0[f]]=Or(s,u+f*3,7);u+=R*3;for(var F=bx(L),M=(1<<F)-1,P=cn(L,F,1),f=0;f<_;){var Z=P[Or(s,u,M)];u+=Z&15;var N=Z>>4;if(N<16)C[f++]=N;else{var O=0,X=0;for(N==16?(X=3+Or(s,u,3),u+=2,O=C[f-1]):N==17?(X=3+Or(s,u,7),u+=3):N==18&&(X=11+Or(s,u,127),u+=7);X--;)C[f++]=O}}var q=C.subarray(0,E),V=C.subarray(E);g=bx(q),b=bx(V),m=cn(q,g,1),y=cn(V,b,1)}else Kr(1);else{var N=pg(u)+4,D=s[N-4]|s[N-3]<<8,S=N+D;if(S>n){c&&Kr(0);break}l&&d(x+D),a.set(s.subarray(N,S),x),t.b=x+=D,t.p=u=S*8,t.f=A;continue}if(u>p){c&&Kr(0);break}}l&&d(x+131072);for(var oe=(1<<g)-1,H=(1<<b)-1,I=u;;I=u){var O=m[yx(s,u)&oe],B=O>>4;if(u+=O&15,u>p){c&&Kr(0);break}if(O||Kr(2),B<256)a[x++]=B;else if(B==256){I=u,m=null;break}else{var $=B-254;if(B>264){var f=B-257,T=Cm[f];$=Or(s,u,(1<<T)-1)+Z2[f],u+=T}var ne=y[yx(s,u)&H],ue=ne>>4;ne||Kr(3),u+=ne&15;var V=L7[ue];if(ue>3){var T=Bm[ue];V+=yx(s,u)&(1<<T)-1,u+=T}if(u>p){c&&Kr(0);break}l&&d(x+131072);var me=x+$;if(x<V){var xe=i-V,Be=Math.min(V,me);for(xe+x<0&&Kr(3);x<Be;++x)a[x]=r[xe+x]}for(;x<me;++x)a[x]=a[x-V]}}t.l=m,t.p=I,t.b=x,t.f=A,m&&(A=1,t.m=g,t.d=y,t.n=b)}while(!A);return x!=a.length&&o?t1(a,0,x):a.subarray(0,x)},Cn=function(s,t,a){a<<=t&7;var r=t/8|0;s[r]|=a,s[r+1]|=a>>8},jc=function(s,t,a){a<<=t&7;var r=t/8|0;s[r]|=a,s[r+1]|=a>>8,s[r+2]|=a>>16},vx=function(s,t){for(var a=[],r=0;r<s.length;++r)s[r]&&a.push({s:r,f:s[r]});var n=a.length,i=a.slice();if(!n)return{t:a1,l:0};if(n==1){var o=new Ta(a[0].s+1);return o[a[0].s]=1,{t:o,l:1}}a.sort(function(S,E){return S.f-E.f}),a.push({s:-1,f:25001});var l=a[0],c=a[1],d=0,A=1,u=2;for(a[0]={s:-1,f:l.f+c.f,l,r:c};A!=n-1;)l=a[a[d].f<a[u].f?d++:u++],c=a[d!=A&&a[d].f<a[u].f?d++:u++],a[A++]={s:-1,f:l.f+c.f,l,r:c};for(var x=i[0].s,r=1;r<n;++r)i[r].s>x&&(x=i[r].s);var m=new mr(x+1),y=z0(a[A-1],m,0);if(y>t){var r=0,g=0,b=y-t,p=1<<b;for(i.sort(function(E,R){return m[R.s]-m[E.s]||E.f-R.f});r<n;++r){var v=i[r].s;if(m[v]>t)g+=p-(1<<y-m[v]),m[v]=t;else break}for(g>>=b;g>0;){var N=i[r].s;m[N]<t?g-=1<<t-m[N]++-1:++r}for(;r>=0&&g;--r){var D=i[r].s;m[D]==t&&(--m[D],++g)}y=t}return{t:new Ta(m),l:y}},z0=function(s,t,a){return s.s==-1?Math.max(z0(s.l,t,a+1),z0(s.r,t,a+1)):t[s.s]=a},qy=function(s){for(var t=s.length;t&&!s[--t];);for(var a=new mr(++t),r=0,n=s[0],i=1,o=function(c){a[r++]=c},l=1;l<=t;++l)if(s[l]==n&&l!=t)++i;else{if(!n&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(n),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(n);i=1,n=s[l]}return{c:a.subarray(0,r),n:t}},Nc=function(s,t){for(var a=0,r=0;r<t.length;++r)a+=s[r]*t[r];return a},s1=function(s,t,a){var r=a.length,n=pg(t+2);s[n]=r&255,s[n+1]=r>>8,s[n+2]=s[n]^255,s[n+3]=s[n+1]^255;for(var i=0;i<r;++i)s[n+i+4]=a[i];return(n+4+r)*8},$y=function(s,t,a,r,n,i,o,l,c,d,A){Cn(t,A++,a),++n[256];for(var u=vx(n,15),x=u.t,m=u.l,y=vx(i,15),g=y.t,b=y.l,p=qy(x),v=p.c,N=p.n,D=qy(g),S=D.c,E=D.n,R=new mr(19),_=0;_<v.length;++_)++R[v[_]&31];for(var _=0;_<S.length;++_)++R[S[_]&31];for(var C=vx(R,7),L=C.t,f=C.l,F=19;F>4&&!L[$0[F-1]];--F);var M=d+5<<3,P=Nc(n,yi)+Nc(i,pd)+o,Z=Nc(n,x)+Nc(i,g)+o+14+3*F+Nc(R,L)+2*R[16]+3*R[17]+7*R[18];if(c>=0&&M<=P&&M<=Z)return s1(t,A,s.subarray(c,c+d));var O,X,q,V;if(Cn(t,A,1+(Z<P)),A+=2,Z<P){O=cn(x,m,0),X=x,q=cn(g,b,0),V=g;var oe=cn(L,f,0);Cn(t,A,N-257),Cn(t,A+5,E-1),Cn(t,A+10,F-4),A+=14;for(var _=0;_<F;++_)Cn(t,A+3*_,L[$0[_]]);A+=3*F;for(var H=[v,S],I=0;I<2;++I)for(var B=H[I],_=0;_<B.length;++_){var $=B[_]&31;Cn(t,A,oe[$]),A+=L[$],$>15&&(Cn(t,A,B[_]>>5&127),A+=B[_]>>12)}}else O=T7,X=yi,q=P7,V=pd;for(var _=0;_<l;++_){var T=r[_];if(T>255){var $=T>>18&31;jc(t,A,O[$+257]),A+=X[$+257],$>7&&(Cn(t,A,T>>23&31),A+=Cm[$]);var ne=T&31;jc(t,A,q[ne]),A+=V[ne],ne>3&&(jc(t,A,T>>5&8191),A+=Bm[ne])}else jc(t,A,O[T]),A+=X[T]}return jc(t,A,O[256]),A+X[256]},H7=new xg([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),a1=new Ta(0),q7=function(s,t,a,r,n,i){var o=i.z||s.length,l=new Ta(r+o+5*(1+Math.ceil(o/7e3))+n),c=l.subarray(r,l.length-n),d=i.l,A=(i.r||0)&7;if(t){A&&(c[0]=i.r>>3);for(var u=H7[t-1],x=u>>13,m=u&8191,y=(1<<a)-1,g=i.p||new mr(32768),b=i.h||new mr(y+1),p=Math.ceil(a/3),v=2*p,N=function(Xe){return(s[Xe]^s[Xe+1]<<p^s[Xe+2]<<v)&y},D=new xg(25e3),S=new mr(288),E=new mr(32),R=0,_=0,C=i.i||0,L=0,f=i.w||0,F=0;C+2<o;++C){var M=N(C),P=C&32767,Z=b[M];if(g[P]=Z,b[M]=P,f<=C){var O=o-C;if((R>7e3||L>24576)&&(O>423||!d)){A=$y(s,c,0,D,S,E,_,L,F,C-F,A),L=R=_=0,F=C;for(var X=0;X<286;++X)S[X]=0;for(var X=0;X<30;++X)E[X]=0}var q=2,V=0,oe=m,H=P-Z&32767;if(O>2&&M==N(C-H))for(var I=Math.min(x,O)-1,B=Math.min(32767,C),$=Math.min(258,O);H<=B&&--oe&&P!=Z;){if(s[C+q]==s[C+q-H]){for(var T=0;T<$&&s[C+T]==s[C+T-H];++T);if(T>q){if(q=T,V=H,T>I)break;for(var ne=Math.min(H,T-2),ue=0,X=0;X<ne;++X){var me=C-H+X&32767,xe=g[me],Be=me-xe&32767;Be>ue&&(ue=Be,Z=me)}}}P=Z,Z=g[P],H+=P-Z&32767}if(V){D[L++]=268435456|V0[q]<<18|Hy[V];var ee=V0[q]&31,je=Hy[V]&31;_+=Cm[ee]+Bm[je],++S[257+ee],++E[je],f=C+q,++R}else D[L++]=s[C],++S[s[C]]}}for(C=Math.max(C,f);C<o;++C)D[L++]=s[C],++S[s[C]];A=$y(s,c,d,D,S,E,_,L,F,C-F,A),d||(i.r=A&7|c[A/8|0]<<3,A-=7,i.h=b,i.p=g,i.i=C,i.w=f)}else{for(var C=i.w||0;C<o+d;C+=65535){var Pe=C+65535;Pe>=o&&(c[A/8|0]=d,Pe=o),A=s1(c,A+1,s.subarray(C,Pe))}i.i=o}return t1(l,0,r+pg(A)+n)},r1=function(){var s=1,t=0;return{p:function(a){for(var r=s,n=t,i=a.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)n+=r+=a[o];r=(r&65535)+15*(r>>16),n=(n&65535)+15*(n>>16)}s=r,t=n},d:function(){return s%=65521,t%=65521,(s&255)<<24|(s&65280)<<8|(t&255)<<8|t>>8}}},$7=function(s,t,a,r,n){if(!n&&(n={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new Ta(i.length+s.length);o.set(i),o.set(s,i.length),s=o,n.w=i.length}return q7(s,t.level==null?6:t.level,t.mem==null?n.l?Math.ceil(Math.max(8,Math.min(13,Math.log(s.length)))*1.5):20:12+t.mem,a,r,n)},n1=function(s,t,a){for(;a;++t)s[t]=a,a>>>=8},V7=function(s,t){var a=t.level,r=a==0?0:a<6?1:a==9?3:2;if(s[0]=120,s[1]=r<<6|(t.dictionary&&32),s[1]|=31-(s[0]<<8|s[1])%31,t.dictionary){var n=r1();n.p(t.dictionary),n1(s,2,n.d())}},K7=function(s,t){return((s[0]&15)!=8||s[0]>>4>7||(s[0]<<8|s[1])%31)&&Kr(6,"invalid zlib data"),(s[1]>>5&1)==1&&Kr(6,"invalid zlib data: "+(s[1]&32?"need":"unexpected")+" dictionary"),(s[1]>>3&4)+2};function G0(s,t){t||(t={});var a=r1();a.p(s);var r=$7(s,t,t.dictionary?6:2,4);return V7(r,t),n1(r,r.length-4,a.d()),r}function z7(s,t){return O7(s.subarray(K7(s),-4),{i:2},t,t)}var G7=typeof TextDecoder<"u"&&new TextDecoder,W7=0;try{G7.decode(a1,{stream:!0}),W7=1}catch{}var Dt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function wx(){Dt.console&&typeof Dt.console.log=="function"&&Dt.console.log.apply(Dt.console,arguments)}var fs={log:wx,warn:function(s){Dt.console&&(typeof Dt.console.warn=="function"?Dt.console.warn.apply(Dt.console,arguments):wx.call(null,arguments))},error:function(s){Dt.console&&(typeof Dt.console.error=="function"?Dt.console.error.apply(Dt.console,arguments):wx(s))}};function jx(s,t,a){var r=new XMLHttpRequest;r.open("GET",s),r.responseType="blob",r.onload=function(){Oi(r.response,t,a)},r.onerror=function(){fs.error("could not download file")},r.send()}function Vy(s){var t=new XMLHttpRequest;t.open("HEAD",s,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function XA(s){try{s.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(t)}}var Xc,W0,Oi=Dt.saveAs||((typeof window>"u"?"undefined":hs(window))!=="object"||window!==Dt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(s,t,a){var r=Dt.URL||Dt.webkitURL,n=document.createElement("a");t=t||s.name||"download",n.download=t,n.rel="noopener",typeof s=="string"?(n.href=s,n.origin!==location.origin?Vy(n.href)?jx(s,t,a):XA(n,n.target="_blank"):XA(n)):(n.href=r.createObjectURL(s),setTimeout(function(){r.revokeObjectURL(n.href)},4e4),setTimeout(function(){XA(n)},0))}:"msSaveOrOpenBlob"in navigator?function(s,t,a){if(t=t||s.name||"download",typeof s=="string")if(Vy(s))jx(s,t,a);else{var r=document.createElement("a");r.href=s,r.target="_blank",setTimeout(function(){XA(r)})}else navigator.msSaveOrOpenBlob(function(n,i){return i===void 0?i={autoBom:!1}:hs(i)!=="object"&&(fs.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\uFEFF",n],{type:n.type}):n}(s,a),t)}:function(s,t,a,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof s=="string")return jx(s,t,a);var n=s.type==="application/octet-stream",i=/constructor/i.test(Dt.HTMLElement)||Dt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||n&&i)&&(typeof FileReader>"u"?"undefined":hs(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var A=l.result;A=o?A:A.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=A:location=A,r=null},l.readAsDataURL(s)}else{var c=Dt.URL||Dt.webkitURL,d=c.createObjectURL(s);r?r.location=d:location.href=d,r=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function i1(s){var t;s=s||"",this.ok=!1,s.charAt(0)=="#"&&(s=s.substr(1,6)),s={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[s=(s=s.replace(/ /g,"")).toLowerCase()]||s;for(var a=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],r=0;r<a.length;r++){var n=a[r].re,i=a[r].process,o=n.exec(s);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Nx(s,t){var a=s[0],r=s[1],n=s[2],i=s[3];a=Ea(a,r,n,i,t[0],7,-680876936),i=Ea(i,a,r,n,t[1],12,-389564586),n=Ea(n,i,a,r,t[2],17,606105819),r=Ea(r,n,i,a,t[3],22,-1044525330),a=Ea(a,r,n,i,t[4],7,-176418897),i=Ea(i,a,r,n,t[5],12,1200080426),n=Ea(n,i,a,r,t[6],17,-1473231341),r=Ea(r,n,i,a,t[7],22,-45705983),a=Ea(a,r,n,i,t[8],7,1770035416),i=Ea(i,a,r,n,t[9],12,-1958414417),n=Ea(n,i,a,r,t[10],17,-42063),r=Ea(r,n,i,a,t[11],22,-1990404162),a=Ea(a,r,n,i,t[12],7,1804603682),i=Ea(i,a,r,n,t[13],12,-40341101),n=Ea(n,i,a,r,t[14],17,-1502002290),a=Fa(a,r=Ea(r,n,i,a,t[15],22,1236535329),n,i,t[1],5,-165796510),i=Fa(i,a,r,n,t[6],9,-1069501632),n=Fa(n,i,a,r,t[11],14,643717713),r=Fa(r,n,i,a,t[0],20,-373897302),a=Fa(a,r,n,i,t[5],5,-701558691),i=Fa(i,a,r,n,t[10],9,38016083),n=Fa(n,i,a,r,t[15],14,-660478335),r=Fa(r,n,i,a,t[4],20,-405537848),a=Fa(a,r,n,i,t[9],5,568446438),i=Fa(i,a,r,n,t[14],9,-1019803690),n=Fa(n,i,a,r,t[3],14,-187363961),r=Fa(r,n,i,a,t[8],20,1163531501),a=Fa(a,r,n,i,t[13],5,-1444681467),i=Fa(i,a,r,n,t[2],9,-51403784),n=Fa(n,i,a,r,t[7],14,1735328473),a=Ua(a,r=Fa(r,n,i,a,t[12],20,-1926607734),n,i,t[5],4,-378558),i=Ua(i,a,r,n,t[8],11,-2022574463),n=Ua(n,i,a,r,t[11],16,1839030562),r=Ua(r,n,i,a,t[14],23,-35309556),a=Ua(a,r,n,i,t[1],4,-1530992060),i=Ua(i,a,r,n,t[4],11,1272893353),n=Ua(n,i,a,r,t[7],16,-155497632),r=Ua(r,n,i,a,t[10],23,-1094730640),a=Ua(a,r,n,i,t[13],4,681279174),i=Ua(i,a,r,n,t[0],11,-358537222),n=Ua(n,i,a,r,t[3],16,-722521979),r=Ua(r,n,i,a,t[6],23,76029189),a=Ua(a,r,n,i,t[9],4,-640364487),i=Ua(i,a,r,n,t[12],11,-421815835),n=Ua(n,i,a,r,t[15],16,530742520),a=Da(a,r=Ua(r,n,i,a,t[2],23,-995338651),n,i,t[0],6,-198630844),i=Da(i,a,r,n,t[7],10,1126891415),n=Da(n,i,a,r,t[14],15,-1416354905),r=Da(r,n,i,a,t[5],21,-57434055),a=Da(a,r,n,i,t[12],6,1700485571),i=Da(i,a,r,n,t[3],10,-1894986606),n=Da(n,i,a,r,t[10],15,-1051523),r=Da(r,n,i,a,t[1],21,-2054922799),a=Da(a,r,n,i,t[8],6,1873313359),i=Da(i,a,r,n,t[15],10,-30611744),n=Da(n,i,a,r,t[6],15,-1560198380),r=Da(r,n,i,a,t[13],21,1309151649),a=Da(a,r,n,i,t[4],6,-145523070),i=Da(i,a,r,n,t[11],10,-1120210379),n=Da(n,i,a,r,t[2],15,718787259),r=Da(r,n,i,a,t[9],21,-343485551),s[0]=di(a,s[0]),s[1]=di(r,s[1]),s[2]=di(n,s[2]),s[3]=di(i,s[3])}function Sm(s,t,a,r,n,i){return t=di(di(t,s),di(r,i)),di(t<<n|t>>>32-n,a)}function Ea(s,t,a,r,n,i,o){return Sm(t&a|~t&r,s,t,n,i,o)}function Fa(s,t,a,r,n,i,o){return Sm(t&r|a&~r,s,t,n,i,o)}function Ua(s,t,a,r,n,i,o){return Sm(t^a^r,s,t,n,i,o)}function Da(s,t,a,r,n,i,o){return Sm(a^(t|~r),s,t,n,i,o)}function o1(s){var t,a=s.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=s.length;t+=64)Nx(r,J7(s.substring(t-64,t)));s=s.substring(t-64);var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<s.length;t++)n[t>>2]|=s.charCodeAt(t)<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(Nx(r,n),t=0;t<16;t++)n[t]=0;return n[14]=8*a,Nx(r,n),r}function J7(s){var t,a=[];for(t=0;t<64;t+=4)a[t>>2]=s.charCodeAt(t)+(s.charCodeAt(t+1)<<8)+(s.charCodeAt(t+2)<<16)+(s.charCodeAt(t+3)<<24);return a}Xc=Dt.atob.bind(Dt),W0=Dt.btoa.bind(Dt);var Ky="0123456789abcdef".split("");function Y7(s){for(var t="",a=0;a<4;a++)t+=Ky[s>>8*a+4&15]+Ky[s>>8*a&15];return t}function X7(s){return String.fromCharCode((255&s)>>0,(65280&s)>>8,(16711680&s)>>16,(4278190080&s)>>24)}function J0(s){return o1(s).map(X7).join("")}var Z7=function(s){for(var t=0;t<s.length;t++)s[t]=Y7(s[t]);return s.join("")}(o1("hello"))!="5d41402abc4b2a76b9719d911017c592";function di(s,t){if(Z7){var a=(65535&s)+(65535&t);return(s>>16)+(t>>16)+(a>>16)<<16|65535&a}return s+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Y0(s,t){var a,r,n,i;if(s!==a){for(var o=(n=s,i=1+(256/s.length>>0),new Array(i+1).join(n)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var A=l[c];d=(d+A+o.charCodeAt(c))%256,l[c]=l[d],l[d]=A}a=s,r=l}else l=r;var u=t.length,x=0,m=0,y="";for(c=0;c<u;c++)m=(m+(A=l[x=(x+1)%256]))%256,l[x]=l[m],l[m]=A,o=l[(l[x]+l[m])%256],y+=String.fromCharCode(t.charCodeAt(c)^o);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var zy={print:4,modify:8,copy:16,"annot-forms":32};function sl(s,t,a,r){this.v=1,this.r=2;var n=192;s.forEach(function(l){if(zy.perm!==void 0)throw new Error("Invalid permission: "+l);n+=zy[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(a+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^n)),this.encryptionKey=J0(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Y0(this.encryptionKey,this.padding)}function al(s){if(/[^\u0000-\u00ff]/.test(s))throw new Error("Invalid PDF Name Object: "+s+", Only accept ASCII characters.");for(var t="",a=s.length,r=0;r<a;r++){var n=s.charCodeAt(r);n<33||n===35||n===37||n===40||n===41||n===47||n===60||n===62||n===91||n===93||n===123||n===125||n>126?t+="#"+("0"+n.toString(16)).slice(-2):t+=s[r]}return t}function Gy(s){if(hs(s)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(a,r,n){if(n=n||!1,typeof a!="string"||typeof r!="function"||typeof n!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(a)||(t[a]={});var i=Math.random().toString(35);return t[a][i]=[r,!!n],i},this.unsubscribe=function(a){for(var r in t)if(t[r][a])return delete t[r][a],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(a){if(t.hasOwnProperty(a)){var r=Array.prototype.slice.call(arguments,1),n=[];for(var i in t[a]){var o=t[a][i];try{o[0].apply(s,r)}catch(l){Dt.console&&fs.error("jsPDF PubSub Error",l.message,l)}o[1]&&n.push(i)}n.length&&n.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function qu(s){if(!(this instanceof qu))return new qu(s);var t="opacity,stroke-opacity".split(",");for(var a in s)s.hasOwnProperty(a)&&t.indexOf(a)>=0&&(this[a]=s[a]);this.id="",this.objectNumber=-1}function l1(s,t){this.gState=s,this.matrix=t,this.id="",this.objectNumber=-1}function Vi(s,t,a,r,n){if(!(this instanceof Vi))return new Vi(s,t,a,r,n);this.type=s==="axial"?2:3,this.coords=t,this.colors=a,l1.call(this,r,n)}function dl(s,t,a,r,n){if(!(this instanceof dl))return new dl(s,t,a,r,n);this.boundingBox=s,this.xStep=t,this.yStep=a,this.stream="",this.cloneIndex=0,l1.call(this,r,n)}function Ft(s){var t,a=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],n=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",A=null;hs(s=s||{})==="object"&&(a=s.orientation,r=s.unit||r,n=s.format||n,i=s.compress||s.compressPdf||i,(A=s.encryption||null)!==null&&(A.userPassword=A.userPassword||"",A.ownerPassword=A.ownerPassword||"",A.userPermissions=A.userPermissions||[]),l=typeof s.userUnit=="number"?Math.abs(s.userUnit):1,s.precision!==void 0&&(t=s.precision),s.floatPrecision!==void 0&&(c=s.floatPrecision),d=s.defaultPathOperation||"S"),o=s.filters||(i===!0?["FlateEncode"]:o),r=r||"mm",a=(""+(a||"P")).toLowerCase();var u=s.putOnlyUsedFonts||!1,x={},m={internal:{},__private__:{}};m.__private__.PubSub=Gy;var y="1.3",g=m.__private__.getPdfVersion=function(){return y};m.__private__.setPdfVersion=function(k){y=k};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return b};var p=m.__private__.getPageFormat=function(k){return b[k]};n=n||"a4";var v={COMPAT:"compat",ADVANCED:"advanced"},N=v.COMPAT;function D(){this.saveGraphicsState(),K(new St(et,0,0,-et,0,Mn()*et).toString()+" cm"),this.setFontSize(this.getFontSize()/et),d="n",N=v.ADVANCED}function S(){this.restoreGraphicsState(),d="S",N=v.COMPAT}var E=m.__private__.combineFontStyleAndFontWeight=function(k,G){if(k=="bold"&&G=="normal"||k=="bold"&&G==400||k=="normal"&&G=="italic"||k=="bold"&&G=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return G&&(k=G==400||G==="normal"?k==="italic"?"italic":"normal":G!=700&&G!=="bold"||k!=="normal"?(G==700?"bold":G)+""+k:"bold"),k};m.advancedAPI=function(k){var G=N===v.COMPAT;return G&&D.call(this),typeof k!="function"||(k(this),G&&S.call(this)),this},m.compatAPI=function(k){var G=N===v.ADVANCED;return G&&S.call(this),typeof k!="function"||(k(this),G&&D.call(this)),this},m.isAdvancedAPI=function(){return N===v.ADVANCED};var R,_=function(k){if(N!==v.ADVANCED)throw new Error(k+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},C=m.roundToPrecision=m.__private__.roundToPrecision=function(k,G){var Ae=t||G;if(isNaN(k)||isNaN(Ae))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return k.toFixed(Ae).replace(/0+$/,"")};R=m.hpf=m.__private__.hpf=typeof c=="number"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return C(k,c)}:c==="smart"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return C(k,k>-1&&k<1?16:5)}:function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return C(k,16)};var L=m.f2=m.__private__.f2=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f2");return C(k,2)},f=m.__private__.f3=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f3");return C(k,3)},F=m.scale=m.__private__.scale=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.scale");return N===v.COMPAT?k*et:N===v.ADVANCED?k:void 0},M=function(k){return N===v.COMPAT?Mn()-k:N===v.ADVANCED?k:void 0},P=function(k){return F(M(k))};m.__private__.setPrecision=m.setPrecision=function(k){typeof parseInt(k,10)=="number"&&(t=parseInt(k,10))};var Z,O="00000000000000000000000000000000",X=m.__private__.getFileId=function(){return O},q=m.__private__.setFileId=function(k){return O=k!==void 0&&/^[a-fA-F0-9]{32}$/.test(k)?k.toUpperCase():O.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),A!==null&&(Sa=new sl(A.userPermissions,A.userPassword,A.ownerPassword,O)),O};m.setFileId=function(k){return q(k),this},m.getFileId=function(){return X()};var V=m.__private__.convertDateToPDFDate=function(k){var G=k.getTimezoneOffset(),Ae=G<0?"+":"-",pe=Math.floor(Math.abs(G/60)),_e=Math.abs(G%60),Re=[Ae,$(pe),"'",$(_e),"'"].join("");return["D:",k.getFullYear(),$(k.getMonth()+1),$(k.getDate()),$(k.getHours()),$(k.getMinutes()),$(k.getSeconds()),Re].join("")},oe=m.__private__.convertPDFDateToDate=function(k){var G=parseInt(k.substr(2,4),10),Ae=parseInt(k.substr(6,2),10)-1,pe=parseInt(k.substr(8,2),10),_e=parseInt(k.substr(10,2),10),Re=parseInt(k.substr(12,2),10),We=parseInt(k.substr(14,2),10);return new Date(G,Ae,pe,_e,Re,We,0)},H=m.__private__.setCreationDate=function(k){var G;if(k===void 0&&(k=new Date),k instanceof Date)G=V(k);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(k))throw new Error("Invalid argument passed to jsPDF.setCreationDate");G=k}return Z=G},I=m.__private__.getCreationDate=function(k){var G=Z;return k==="jsDate"&&(G=oe(Z)),G};m.setCreationDate=function(k){return H(k),this},m.getCreationDate=function(k){return I(k)};var B,$=m.__private__.padd2=function(k){return("0"+parseInt(k)).slice(-2)},T=m.__private__.padd2Hex=function(k){return("00"+(k=k.toString())).substr(k.length)},ne=0,ue=[],me=[],xe=0,Be=[],ee=[],je=!1,Pe=me,Xe=function(){ne=0,xe=0,me=[],ue=[],Be=[],Ne=ke(),at=ke()};m.__private__.setCustomOutputDestination=function(k){je=!0,Pe=k};var Ce=function(k){je||(Pe=k)};m.__private__.resetCustomOutputDestination=function(){je=!1,Pe=me};var K=m.__private__.out=function(k){return k=k.toString(),xe+=k.length+1,Pe.push(k),Pe},Me=m.__private__.write=function(k){return K(arguments.length===1?k.toString():Array.prototype.join.call(arguments," "))},qe=m.__private__.getArrayBuffer=function(k){for(var G=k.length,Ae=new ArrayBuffer(G),pe=new Uint8Array(Ae);G--;)pe[G]=k.charCodeAt(G);return Ae},re=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return re};var ie=s.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(k){return ie=N===v.ADVANCED?k/et:k,this};var ve,ye=m.__private__.getFontSize=m.getFontSize=function(){return N===v.COMPAT?ie:ie*et},$e=s.R2L||!1;m.__private__.setR2L=m.setR2L=function(k){return $e=k,this},m.__private__.getR2L=m.getR2L=function(){return $e};var it,Ie=m.__private__.setZoomMode=function(k){var G=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(k))ve=k;else if(isNaN(k)){if(G.indexOf(k)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+k+'" is not recognized.');ve=k}else ve=parseInt(k,10)};m.__private__.getZoomMode=function(){return ve};var he,Oe=m.__private__.setPageMode=function(k){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(k)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+k+'" is not recognized.');it=k};m.__private__.getPageMode=function(){return it};var He=m.__private__.setLayoutMode=function(k){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(k)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+k+'" is not recognized.');he=k};m.__private__.getLayoutMode=function(){return he},m.__private__.setDisplayMode=m.setDisplayMode=function(k,G,Ae){return Ie(k),He(G),Oe(Ae),this};var dt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(k){if(Object.keys(dt).indexOf(k)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return dt[k]},m.__private__.getDocumentProperties=function(){return dt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(k){for(var G in dt)dt.hasOwnProperty(G)&&k[G]&&(dt[G]=k[G]);return this},m.__private__.setDocumentProperty=function(k,G){if(Object.keys(dt).indexOf(k)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return dt[k]=G};var Bt,et,ta,Pt,de,Ee={},Qe={},Ze=[],Ye={},It={},lt={},Tt={},Yt=null,ft=0,_t=[],Xt=new Gy(m),pr=s.hotfixes||[],Ts={},Ra={},gr=[],St=function k(G,Ae,pe,_e,Re,We){if(!(this instanceof k))return new k(G,Ae,pe,_e,Re,We);isNaN(G)&&(G=1),isNaN(Ae)&&(Ae=0),isNaN(pe)&&(pe=0),isNaN(_e)&&(_e=1),isNaN(Re)&&(Re=0),isNaN(We)&&(We=0),this._matrix=[G,Ae,pe,_e,Re,We]};Object.defineProperty(St.prototype,"sx",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(St.prototype,"shy",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(St.prototype,"shx",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(St.prototype,"sy",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(St.prototype,"tx",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(St.prototype,"ty",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(St.prototype,"a",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(St.prototype,"b",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(St.prototype,"c",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(St.prototype,"d",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(St.prototype,"e",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(St.prototype,"f",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(St.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(St.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(St.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(St.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),St.prototype.join=function(k){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(R).join(k)},St.prototype.multiply=function(k){var G=k.sx*this.sx+k.shy*this.shx,Ae=k.sx*this.shy+k.shy*this.sy,pe=k.shx*this.sx+k.sy*this.shx,_e=k.shx*this.shy+k.sy*this.sy,Re=k.tx*this.sx+k.ty*this.shx+this.tx,We=k.tx*this.shy+k.ty*this.sy+this.ty;return new St(G,Ae,pe,_e,Re,We)},St.prototype.decompose=function(){var k=this.sx,G=this.shy,Ae=this.shx,pe=this.sy,_e=this.tx,Re=this.ty,We=Math.sqrt(k*k+G*G),mt=(k/=We)*Ae+(G/=We)*pe;Ae-=k*mt,pe-=G*mt;var Ct=Math.sqrt(Ae*Ae+pe*pe);return mt/=Ct,k*(pe/=Ct)<G*(Ae/=Ct)&&(k=-k,G=-G,mt=-mt,We=-We),{scale:new St(We,0,0,Ct,0,0),translate:new St(1,0,0,1,_e,Re),rotate:new St(k,G,-G,k,0,0),skew:new St(1,0,mt,1,0,0)}},St.prototype.toString=function(k){return this.join(" ")},St.prototype.inversed=function(){var k=this.sx,G=this.shy,Ae=this.shx,pe=this.sy,_e=this.tx,Re=this.ty,We=1/(k*pe-G*Ae),mt=pe*We,Ct=-G*We,Kt=-Ae*We,Ht=k*We;return new St(mt,Ct,Kt,Ht,-mt*_e-Kt*Re,-Ct*_e-Ht*Re)},St.prototype.applyToPoint=function(k){var G=k.x*this.sx+k.y*this.shx+this.tx,Ae=k.x*this.shy+k.y*this.sy+this.ty;return new wo(G,Ae)},St.prototype.applyToRectangle=function(k){var G=this.applyToPoint(k),Ae=this.applyToPoint(new wo(k.x+k.w,k.y+k.h));return new Gl(G.x,G.y,Ae.x-G.x,Ae.y-G.y)},St.prototype.clone=function(){var k=this.sx,G=this.shy,Ae=this.shx,pe=this.sy,_e=this.tx,Re=this.ty;return new St(k,G,Ae,pe,_e,Re)},m.Matrix=St;var Ga=m.matrixMult=function(k,G){return G.multiply(k)},le=new St(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=le;var Le=function(k,G){if(!It[k]){var Ae=(G instanceof Vi?"Sh":"P")+(Object.keys(Ye).length+1).toString(10);G.id=Ae,It[k]=Ae,Ye[Ae]=G,Xt.publish("addPattern",G)}};m.ShadingPattern=Vi,m.TilingPattern=dl,m.addShadingPattern=function(k,G){return _("addShadingPattern()"),Le(k,G),this},m.beginTilingPattern=function(k){_("beginTilingPattern()"),zd(k.boundingBox[0],k.boundingBox[1],k.boundingBox[2]-k.boundingBox[0],k.boundingBox[3]-k.boundingBox[1],k.matrix)},m.endTilingPattern=function(k,G){_("endTilingPattern()"),G.stream=ee[B].join(`
`),Le(k,G),Xt.publish("endTilingPattern",G),gr.pop().restore()};var De=m.__private__.newObject=function(){var k=ke();return Je(k,!0),k},ke=m.__private__.newObjectDeferred=function(){return ne++,ue[ne]=function(){return xe},ne},Je=function(k,G){return G=typeof G=="boolean"&&G,ue[k]=xe,G&&K(k+" 0 obj"),k},ot=m.__private__.newAdditionalObject=function(){var k={objId:ke(),content:""};return Be.push(k),k},Ne=ke(),at=ke(),ct=m.__private__.decodeColorString=function(k){var G=k.split(" ");if(G.length!==2||G[1]!=="g"&&G[1]!=="G")G.length===5&&(G[4]==="k"||G[4]==="K")&&(G=[(1-G[0])*(1-G[3]),(1-G[1])*(1-G[3]),(1-G[2])*(1-G[3]),"r"]);else{var Ae=parseFloat(G[0]);G=[Ae,Ae,Ae,"r"]}for(var pe="#",_e=0;_e<3;_e++)pe+=("0"+Math.floor(255*parseFloat(G[_e])).toString(16)).slice(-2);return pe},_s=m.__private__.encodeColorString=function(k){var G;typeof k=="string"&&(k={ch1:k});var Ae=k.ch1,pe=k.ch2,_e=k.ch3,Re=k.ch4,We=k.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ae=="string"&&Ae.charAt(0)!=="#"){var mt=new i1(Ae);if(mt.ok)Ae=mt.toHex();else if(!/^\d*\.?\d*$/.test(Ae))throw new Error('Invalid color "'+Ae+'" passed to jsPDF.encodeColorString.')}if(typeof Ae=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ae)&&(Ae="#"+Ae[1]+Ae[1]+Ae[2]+Ae[2]+Ae[3]+Ae[3]),typeof Ae=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ae)){var Ct=parseInt(Ae.substr(1),16);Ae=Ct>>16&255,pe=Ct>>8&255,_e=255&Ct}if(pe===void 0||Re===void 0&&Ae===pe&&pe===_e)if(typeof Ae=="string")G=Ae+" "+We[0];else switch(k.precision){case 2:G=L(Ae/255)+" "+We[0];break;case 3:default:G=f(Ae/255)+" "+We[0]}else if(Re===void 0||hs(Re)==="object"){if(Re&&!isNaN(Re.a)&&Re.a===0)return G=["1.","1.","1.",We[1]].join(" ");if(typeof Ae=="string")G=[Ae,pe,_e,We[1]].join(" ");else switch(k.precision){case 2:G=[L(Ae/255),L(pe/255),L(_e/255),We[1]].join(" ");break;default:case 3:G=[f(Ae/255),f(pe/255),f(_e/255),We[1]].join(" ")}}else if(typeof Ae=="string")G=[Ae,pe,_e,Re,We[2]].join(" ");else switch(k.precision){case 2:G=[L(Ae),L(pe),L(_e),L(Re),We[2]].join(" ");break;case 3:default:G=[f(Ae),f(pe),f(_e),f(Re),We[2]].join(" ")}return G},Qs=m.__private__.getFilters=function(){return o},ua=m.__private__.putStream=function(k){var G=(k=k||{}).data||"",Ae=k.filters||Qs(),pe=k.alreadyAppliedFilters||[],_e=k.addLength1||!1,Re=G.length,We=k.objectId,mt=function(ka){return ka};if(A!==null&&We===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");A!==null&&(mt=Sa.encryptor(We,0));var Ct={};Ae===!0&&(Ae=["FlateEncode"]);var Kt=k.additionalKeyValues||[],Ht=(Ct=Ft.API.processDataByFilters!==void 0?Ft.API.processDataByFilters(G,Ae):{data:G,reverseChain:[]}).reverseChain+(Array.isArray(pe)?pe.join(" "):pe.toString());if(Ct.data.length!==0&&(Kt.push({key:"Length",value:Ct.data.length}),_e===!0&&Kt.push({key:"Length1",value:Re})),Ht.length!=0)if(Ht.split("/").length-1==1)Kt.push({key:"Filter",value:Ht});else{Kt.push({key:"Filter",value:"["+Ht+"]"});for(var as=0;as<Kt.length;as+=1)if(Kt[as].key==="DecodeParms"){for(var Us=[],Ms=0;Ms<Ct.reverseChain.split("/").length-1;Ms+=1)Us.push("null");Us.push(Kt[as].value),Kt[as].value="["+Us.join(" ")+"]"}}K("<<");for(var sa=0;sa<Kt.length;sa++)K("/"+Kt[sa].key+" "+Kt[sa].value);K(">>"),Ct.data.length!==0&&(K("stream"),K(mt(Ct.data)),K("endstream"))},Mt=m.__private__.putPage=function(k){var G=k.number,Ae=k.data,pe=k.objId,_e=k.contentsObjId;Je(pe,!0),K("<</Type /Page"),K("/Parent "+k.rootDictionaryObjId+" 0 R"),K("/Resources "+k.resourceDictionaryObjId+" 0 R"),K("/MediaBox ["+parseFloat(R(k.mediaBox.bottomLeftX))+" "+parseFloat(R(k.mediaBox.bottomLeftY))+" "+R(k.mediaBox.topRightX)+" "+R(k.mediaBox.topRightY)+"]"),k.cropBox!==null&&K("/CropBox ["+R(k.cropBox.bottomLeftX)+" "+R(k.cropBox.bottomLeftY)+" "+R(k.cropBox.topRightX)+" "+R(k.cropBox.topRightY)+"]"),k.bleedBox!==null&&K("/BleedBox ["+R(k.bleedBox.bottomLeftX)+" "+R(k.bleedBox.bottomLeftY)+" "+R(k.bleedBox.topRightX)+" "+R(k.bleedBox.topRightY)+"]"),k.trimBox!==null&&K("/TrimBox ["+R(k.trimBox.bottomLeftX)+" "+R(k.trimBox.bottomLeftY)+" "+R(k.trimBox.topRightX)+" "+R(k.trimBox.topRightY)+"]"),k.artBox!==null&&K("/ArtBox ["+R(k.artBox.bottomLeftX)+" "+R(k.artBox.bottomLeftY)+" "+R(k.artBox.topRightX)+" "+R(k.artBox.topRightY)+"]"),typeof k.userUnit=="number"&&k.userUnit!==1&&K("/UserUnit "+k.userUnit),Xt.publish("putPage",{objId:pe,pageContext:_t[G],pageNumber:G,page:Ae}),K("/Contents "+_e+" 0 R"),K(">>"),K("endobj");var Re=Ae.join(`
`);return N===v.ADVANCED&&(Re+=`
Q`),Je(_e,!0),ua({data:Re,filters:Qs(),objectId:_e}),K("endobj"),pe},Ps=m.__private__.putPages=function(){var k,G,Ae=[];for(k=1;k<=ft;k++)_t[k].objId=ke(),_t[k].contentsObjId=ke();for(k=1;k<=ft;k++)Ae.push(Mt({number:k,data:ee[k],objId:_t[k].objId,contentsObjId:_t[k].contentsObjId,mediaBox:_t[k].mediaBox,cropBox:_t[k].cropBox,bleedBox:_t[k].bleedBox,trimBox:_t[k].trimBox,artBox:_t[k].artBox,userUnit:_t[k].userUnit,rootDictionaryObjId:Ne,resourceDictionaryObjId:at}));Je(Ne,!0),K("<</Type /Pages");var pe="/Kids [";for(G=0;G<ft;G++)pe+=Ae[G]+" 0 R ";K(pe+"]"),K("/Count "+ft),K(">>"),K("endobj"),Xt.publish("postPutPages")},co=function(k){Xt.publish("putFont",{font:k,out:K,newObject:De,putStream:ua}),k.isAlreadyPutted!==!0&&(k.objectNumber=De(),K("<<"),K("/Type /Font"),K("/BaseFont /"+al(k.postScriptName)),K("/Subtype /Type1"),typeof k.encoding=="string"&&K("/Encoding /"+k.encoding),K("/FirstChar 32"),K("/LastChar 255"),K(">>"),K("endobj"))},Ao=function(){for(var k in Ee)Ee.hasOwnProperty(k)&&(u===!1||u===!0&&x.hasOwnProperty(k))&&co(Ee[k])},uo=function(k){k.objectNumber=De();var G=[];G.push({key:"Type",value:"/XObject"}),G.push({key:"Subtype",value:"/Form"}),G.push({key:"BBox",value:"["+[R(k.x),R(k.y),R(k.x+k.width),R(k.y+k.height)].join(" ")+"]"}),G.push({key:"Matrix",value:"["+k.matrix.toString()+"]"});var Ae=k.pages[1].join(`
`);ua({data:Ae,additionalKeyValues:G,objectId:k.objectNumber}),K("endobj")},mo=function(){for(var k in Ts)Ts.hasOwnProperty(k)&&uo(Ts[k])},kd=function(k,G){var Ae,pe=[],_e=1/(G-1);for(Ae=0;Ae<1;Ae+=_e)pe.push(Ae);if(pe.push(1),k[0].offset!=0){var Re={offset:0,color:k[0].color};k.unshift(Re)}if(k[k.length-1].offset!=1){var We={offset:1,color:k[k.length-1].color};k.push(We)}for(var mt="",Ct=0,Kt=0;Kt<pe.length;Kt++){for(Ae=pe[Kt];Ae>k[Ct+1].offset;)Ct++;var Ht=k[Ct].offset,as=(Ae-Ht)/(k[Ct+1].offset-Ht),Us=k[Ct].color,Ms=k[Ct+1].color;mt+=T(Math.round((1-as)*Us[0]+as*Ms[0]).toString(16))+T(Math.round((1-as)*Us[1]+as*Ms[1]).toString(16))+T(Math.round((1-as)*Us[2]+as*Ms[2]).toString(16))}return mt.trim()},Em=function(k,G){G||(G=21);var Ae=De(),pe=kd(k.colors,G),_e=[];_e.push({key:"FunctionType",value:"0"}),_e.push({key:"Domain",value:"[0.0 1.0]"}),_e.push({key:"Size",value:"["+G+"]"}),_e.push({key:"BitsPerSample",value:"8"}),_e.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),_e.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ua({data:pe,additionalKeyValues:_e,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ae}),K("endobj"),k.objectNumber=De(),K("<< /ShadingType "+k.type),K("/ColorSpace /DeviceRGB");var Re="/Coords ["+R(parseFloat(k.coords[0]))+" "+R(parseFloat(k.coords[1]))+" ";k.type===2?Re+=R(parseFloat(k.coords[2]))+" "+R(parseFloat(k.coords[3])):Re+=R(parseFloat(k.coords[2]))+" "+R(parseFloat(k.coords[3]))+" "+R(parseFloat(k.coords[4]))+" "+R(parseFloat(k.coords[5])),K(Re+="]"),k.matrix&&K("/Matrix ["+k.matrix.toString()+"]"),K("/Function "+Ae+" 0 R"),K("/Extend [true true]"),K(">>"),K("endobj")},Fm=function(k,G){var Ae=ke(),pe=De();G.push({resourcesOid:Ae,objectOid:pe}),k.objectNumber=pe;var _e=[];_e.push({key:"Type",value:"/Pattern"}),_e.push({key:"PatternType",value:"1"}),_e.push({key:"PaintType",value:"1"}),_e.push({key:"TilingType",value:"1"}),_e.push({key:"BBox",value:"["+k.boundingBox.map(R).join(" ")+"]"}),_e.push({key:"XStep",value:R(k.xStep)}),_e.push({key:"YStep",value:R(k.yStep)}),_e.push({key:"Resources",value:Ae+" 0 R"}),k.matrix&&_e.push({key:"Matrix",value:"["+k.matrix.toString()+"]"}),ua({data:k.stream,additionalKeyValues:_e,objectId:k.objectNumber}),K("endobj")},ho=function(k){var G;for(G in Ye)Ye.hasOwnProperty(G)&&(Ye[G]instanceof Vi?Em(Ye[G]):Ye[G]instanceof dl&&Fm(Ye[G],k))},Ed=function(k){for(var G in k.objectNumber=De(),K("<<"),k)switch(G){case"opacity":K("/ca "+L(k[G]));break;case"stroke-opacity":K("/CA "+L(k[G]))}K(">>"),K("endobj")},Um=function(){var k;for(k in lt)lt.hasOwnProperty(k)&&Ed(lt[k])},Pl=function(){for(var k in K("/XObject <<"),Ts)Ts.hasOwnProperty(k)&&Ts[k].objectNumber>=0&&K("/"+k+" "+Ts[k].objectNumber+" 0 R");Xt.publish("putXobjectDict"),K(">>")},Dm=function(){Sa.oid=De(),K("<<"),K("/Filter /Standard"),K("/V "+Sa.v),K("/R "+Sa.r),K("/U <"+Sa.toHexString(Sa.U)+">"),K("/O <"+Sa.toHexString(Sa.O)+">"),K("/P "+Sa.P),K(">>"),K("endobj")},Fd=function(){for(var k in K("/Font <<"),Ee)Ee.hasOwnProperty(k)&&(u===!1||u===!0&&x.hasOwnProperty(k))&&K("/"+k+" "+Ee[k].objectNumber+" 0 R");K(">>")},Im=function(){if(Object.keys(Ye).length>0){for(var k in K("/Shading <<"),Ye)Ye.hasOwnProperty(k)&&Ye[k]instanceof Vi&&Ye[k].objectNumber>=0&&K("/"+k+" "+Ye[k].objectNumber+" 0 R");Xt.publish("putShadingPatternDict"),K(">>")}},xo=function(k){if(Object.keys(Ye).length>0){for(var G in K("/Pattern <<"),Ye)Ye.hasOwnProperty(G)&&Ye[G]instanceof m.TilingPattern&&Ye[G].objectNumber>=0&&Ye[G].objectNumber<k&&K("/"+G+" "+Ye[G].objectNumber+" 0 R");Xt.publish("putTilingPatternDict"),K(">>")}},Lm=function(){if(Object.keys(lt).length>0){var k;for(k in K("/ExtGState <<"),lt)lt.hasOwnProperty(k)&&lt[k].objectNumber>=0&&K("/"+k+" "+lt[k].objectNumber+" 0 R");Xt.publish("putGStateDict"),K(">>")}},Vs=function(k){Je(k.resourcesOid,!0),K("<<"),K("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Fd(),Im(),xo(k.objectOid),Lm(),Pl(),K(">>"),K("endobj")},Ud=function(){var k=[];Ao(),Um(),mo(),ho(k),Xt.publish("putResources"),k.forEach(Vs),Vs({resourcesOid:at,objectOid:Number.MAX_SAFE_INTEGER}),Xt.publish("postPutResources")},Dd=function(){Xt.publish("putAdditionalObjects");for(var k=0;k<Be.length;k++){var G=Be[k];Je(G.objId,!0),K(G.content),K("endobj")}Xt.publish("postPutAdditionalObjects")},Id=function(k){Qe[k.fontName]=Qe[k.fontName]||{},Qe[k.fontName][k.fontStyle]=k.id},Ml=function(k,G,Ae,pe,_e){var Re={id:"F"+(Object.keys(Ee).length+1).toString(10),postScriptName:k,fontName:G,fontStyle:Ae,encoding:pe,isStandardFont:_e||!1,metadata:{}};return Xt.publish("addFont",{font:Re,instance:this}),Ee[Re.id]=Re,Id(Re),Re.id},Tm=function(k){for(var G=0,Ae=re.length;G<Ae;G++){var pe=Ml.call(this,k[G][0],k[G][1],k[G][2],re[G][3],!0);u===!1&&(x[pe]=!0);var _e=k[G][0].split("-");Id({id:pe,fontName:_e[0],fontStyle:_e[1]||""})}Xt.publish("addFonts",{fonts:Ee,dictionary:Qe})},Tr=function(k){return k.foo=function(){try{return k.apply(this,arguments)}catch(pe){var G=pe.stack||"";~G.indexOf(" at ")&&(G=G.split(" at ")[1]);var Ae="Error in function "+G.split(`
`)[0].split("<")[0]+": "+pe.message;if(!Dt.console)throw new Error(Ae);Dt.console.error(Ae,pe),Dt.alert&&alert(Ae)}},k.foo.bar=k,k.foo},po=function(k,G){var Ae,pe,_e,Re,We,mt,Ct,Kt,Ht;if(_e=(G=G||{}).sourceEncoding||"Unicode",We=G.outputEncoding,(G.autoencode||We)&&Ee[Bt].metadata&&Ee[Bt].metadata[_e]&&Ee[Bt].metadata[_e].encoding&&(Re=Ee[Bt].metadata[_e].encoding,!We&&Ee[Bt].encoding&&(We=Ee[Bt].encoding),!We&&Re.codePages&&(We=Re.codePages[0]),typeof We=="string"&&(We=Re[We]),We)){for(Ct=!1,mt=[],Ae=0,pe=k.length;Ae<pe;Ae++)(Kt=We[k.charCodeAt(Ae)])?mt.push(String.fromCharCode(Kt)):mt.push(k[Ae]),mt[Ae].charCodeAt(0)>>8&&(Ct=!0);k=mt.join("")}for(Ae=k.length;Ct===void 0&&Ae!==0;)k.charCodeAt(Ae-1)>>8&&(Ct=!0),Ae--;if(!Ct)return k;for(mt=G.noBOM?[]:[254,255],Ae=0,pe=k.length;Ae<pe;Ae++){if((Ht=(Kt=k.charCodeAt(Ae))>>8)>>8)throw new Error("Character at position "+Ae+" of string '"+k+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");mt.push(Ht),mt.push(Kt-(Ht<<8))}return String.fromCharCode.apply(void 0,mt)},Wa=m.__private__.pdfEscape=m.pdfEscape=function(k,G){return po(k,G).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Rl=m.__private__.beginPage=function(k){ee[++ft]=[],_t[ft]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(k[0]),topRightY:Number(k[1])}},Td(ft),Ce(ee[B])},Ld=function(k,G){var Ae,pe,_e;switch(a=G||a,typeof k=="string"&&(Ae=p(k.toLowerCase()),Array.isArray(Ae)&&(pe=Ae[0],_e=Ae[1])),Array.isArray(k)&&(pe=k[0]*et,_e=k[1]*et),isNaN(pe)&&(pe=n[0],_e=n[1]),(pe>14400||_e>14400)&&(fs.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),pe=Math.min(14400,pe),_e=Math.min(14400,_e)),n=[pe,_e],a.substr(0,1)){case"l":_e>pe&&(n=[_e,pe]);break;case"p":pe>_e&&(n=[_e,pe])}Rl(n),Hd($l),K(Qr),Kl!==0&&K(Kl+" J"),zl!==0&&K(zl+" j"),Xt.publish("addPage",{pageNumber:ft})},Qm=function(k){k>0&&k<=ft&&(ee.splice(k,1),_t.splice(k,1),ft--,B>ft&&(B=ft),this.setPage(B))},Td=function(k){k>0&&k<=ft&&(B=k)},Pm=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return ee.length-1},Qd=function(k,G,Ae){var pe,_e=void 0;return Ae=Ae||{},k=k!==void 0?k:Ee[Bt].fontName,G=G!==void 0?G:Ee[Bt].fontStyle,pe=k.toLowerCase(),Qe[pe]!==void 0&&Qe[pe][G]!==void 0?_e=Qe[pe][G]:Qe[k]!==void 0&&Qe[k][G]!==void 0?_e=Qe[k][G]:Ae.disableWarning===!1&&fs.warn("Unable to look up font label for font '"+k+"', '"+G+"'. Refer to getFontList() for available fonts."),_e||Ae.noFallback||(_e=Qe.times[G])==null&&(_e=Qe.times.normal),_e},Mm=m.__private__.putInfo=function(){var k=De(),G=function(pe){return pe};for(var Ae in A!==null&&(G=Sa.encryptor(k,0)),K("<<"),K("/Producer ("+Wa(G("jsPDF "+Ft.version))+")"),dt)dt.hasOwnProperty(Ae)&&dt[Ae]&&K("/"+Ae.substr(0,1).toUpperCase()+Ae.substr(1)+" ("+Wa(G(dt[Ae]))+")");K("/CreationDate ("+Wa(G(Z))+")"),K(">>"),K("endobj")},Ol=m.__private__.putCatalog=function(k){var G=(k=k||{}).rootDictionaryObjId||Ne;switch(De(),K("<<"),K("/Type /Catalog"),K("/Pages "+G+" 0 R"),ve||(ve="fullwidth"),ve){case"fullwidth":K("/OpenAction [3 0 R /FitH null]");break;case"fullheight":K("/OpenAction [3 0 R /FitV null]");break;case"fullpage":K("/OpenAction [3 0 R /Fit]");break;case"original":K("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ae=""+ve;Ae.substr(Ae.length-1)==="%"&&(ve=parseInt(ve)/100),typeof ve=="number"&&K("/OpenAction [3 0 R /XYZ null null "+L(ve)+"]")}switch(he||(he="continuous"),he){case"continuous":K("/PageLayout /OneColumn");break;case"single":K("/PageLayout /SinglePage");break;case"two":case"twoleft":K("/PageLayout /TwoColumnLeft");break;case"tworight":K("/PageLayout /TwoColumnRight")}it&&K("/PageMode /"+it),Xt.publish("putCatalog"),K(">>"),K("endobj")},Rm=m.__private__.putTrailer=function(){K("trailer"),K("<<"),K("/Size "+(ne+1)),K("/Root "+ne+" 0 R"),K("/Info "+(ne-1)+" 0 R"),A!==null&&K("/Encrypt "+Sa.oid+" 0 R"),K("/ID [ <"+O+"> <"+O+"> ]"),K(">>")},Om=m.__private__.putHeader=function(){K("%PDF-"+y),K("%")},Hm=m.__private__.putXRef=function(){var k="0000000000";K("xref"),K("0 "+(ne+1)),K("0000000000 65535 f ");for(var G=1;G<=ne;G++)typeof ue[G]=="function"?K((k+ue[G]()).slice(-10)+" 00000 n "):ue[G]!==void 0?K((k+ue[G]).slice(-10)+" 00000 n "):K("0000000000 00000 n ")},xn=m.__private__.buildDocument=function(){Xe(),Ce(me),Xt.publish("buildDocument"),Om(),Ps(),Dd(),Ud(),A!==null&&Dm(),Mm(),Ol();var k=xe;return Hm(),Rm(),K("startxref"),K(""+k),K("%%EOF"),Ce(ee[B]),me.join(`
`)},go=m.__private__.getBlob=function(k){return new Blob([qe(k)],{type:"application/pdf"})},fo=m.output=m.__private__.output=Tr(function(k,G){switch(typeof(G=G||{})=="string"?G={filename:G}:G.filename=G.filename||"generated.pdf",k){case void 0:return xn();case"save":m.save(G.filename);break;case"arraybuffer":return qe(xn());case"blob":return go(xn());case"bloburi":case"bloburl":if(Dt.URL!==void 0&&typeof Dt.URL.createObjectURL=="function")return Dt.URL&&Dt.URL.createObjectURL(go(xn()))||void 0;fs.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ae="",pe=xn();try{Ae=W0(pe)}catch{Ae=W0(unescape(encodeURIComponent(pe)))}return"data:application/pdf;filename="+G.filename+";base64,"+Ae;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Dt)==="[object Window]"){var _e="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Re=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';G.pdfObjectUrl&&(_e=G.pdfObjectUrl,Re="");var We='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+_e+'"'+Re+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(G)+");<\/script></body></html>",mt=Dt.open();return mt!==null&&mt.document.write(We),mt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Dt)==="[object Window]"){var Ct='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(G.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+G.filename+'" width="500px" height="400px" /></body></html>',Kt=Dt.open();if(Kt!==null){Kt.document.write(Ct);var Ht=this;Kt.document.documentElement.querySelector("#pdfViewer").onload=function(){Kt.document.title=G.filename,Kt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ht.output("bloburl"))}}return Kt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Dt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var as='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",G)+'"></iframe></body></html>',Us=Dt.open();if(Us!==null&&(Us.document.write(as),Us.document.title=G.filename),Us||typeof safari>"u")return Us;break;case"datauri":case"dataurl":return Dt.document.location.href=this.output("datauristring",G);default:return null}}),Pd=function(k){return Array.isArray(pr)===!0&&pr.indexOf(k)>-1};switch(r){case"pt":et=1;break;case"mm":et=72/25.4;break;case"cm":et=72/2.54;break;case"in":et=72;break;case"px":et=Pd("px_scaling")==1?.75:96/72;break;case"pc":case"em":et=12;break;case"ex":et=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);et=r}var Sa=null;H(),q();var qm=function(k){return A!==null?Sa.encryptor(k,0):function(G){return G}},Md=m.__private__.getPageInfo=m.getPageInfo=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:_t[k].objId,pageNumber:k,pageContext:_t[k]}},Rt=m.__private__.getPageInfoByObjId=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var G in _t)if(_t[G].objId===k)break;return Md(G)},$m=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:_t[B].objId,pageNumber:B,pageContext:_t[B]}};m.addPage=function(){return Ld.apply(this,arguments),this},m.setPage=function(){return Td.apply(this,arguments),Ce.call(this,ee[B]),this},m.insertPage=function(k){return this.addPage(),this.movePage(B,k),this},m.movePage=function(k,G){var Ae,pe;if(k>G){Ae=ee[k],pe=_t[k];for(var _e=k;_e>G;_e--)ee[_e]=ee[_e-1],_t[_e]=_t[_e-1];ee[G]=Ae,_t[G]=pe,this.setPage(G)}else if(k<G){Ae=ee[k],pe=_t[k];for(var Re=k;Re<G;Re++)ee[Re]=ee[Re+1],_t[Re]=_t[Re+1];ee[G]=Ae,_t[G]=pe,this.setPage(G)}return this},m.deletePage=function(){return Qm.apply(this,arguments),this},m.__private__.text=m.text=function(k,G,Ae,pe,_e){var Re,We,mt,Ct,Kt,Ht,as,Us,Ms,sa=(pe=pe||{}).scope||this;if(typeof k=="number"&&typeof G=="number"&&(typeof Ae=="string"||Array.isArray(Ae))){var ka=Ae;Ae=G,G=k,k=ka}if(arguments[3]instanceof St?(_("The transform parameter of text() with a Matrix value"),Ms=_e):(mt=arguments[4],Ct=arguments[5],hs(as=arguments[3])==="object"&&as!==null||(typeof mt=="string"&&(Ct=mt,mt=null),typeof as=="string"&&(Ct=as,as=null),typeof as=="number"&&(mt=as,as=null),pe={flags:as,angle:mt,align:Ct})),isNaN(G)||isNaN(Ae)||k==null)throw new Error("Invalid arguments passed to jsPDF.text");if(k.length===0)return sa;var pa="",Pr=!1,or=typeof pe.lineHeightFactor=="number"?pe.lineHeightFactor:_i,en=sa.internal.scaleFactor;function Gd(vs){return vs=vs.split("	").join(Array(pe.TabLen||9).join(" ")),Wa(vs,as)}function Xl(vs){for(var ws,zs=vs.concat(),ma=[],yn=zs.length;yn--;)typeof(ws=zs.shift())=="string"?ma.push(ws):Array.isArray(vs)&&(ws.length===1||ws[1]===void 0&&ws[2]===void 0)?ma.push(ws[0]):ma.push([ws[0],ws[1],ws[2]]);return ma}function Zl(vs,ws){var zs;if(typeof vs=="string")zs=ws(vs)[0];else if(Array.isArray(vs)){for(var ma,yn,oc=vs.concat(),Do=[],Zd=oc.length;Zd--;)typeof(ma=oc.shift())=="string"?Do.push(ws(ma)[0]):Array.isArray(ma)&&typeof ma[0]=="string"&&(yn=ws(ma[0],ma[1],ma[2]),Do.push([yn[0],yn[1],yn[2]]));zs=Do}return zs}var No=!1,ec=!0;if(typeof k=="string")No=!0;else if(Array.isArray(k)){var tc=k.concat();We=[];for(var _o,ja=tc.length;ja--;)(typeof(_o=tc.shift())!="string"||Array.isArray(_o)&&typeof _o[0]!="string")&&(ec=!1);No=ec}if(No===!1)throw new Error('Type of text must be string or Array. "'+k+'" is not recognized.');typeof k=="string"&&(k=k.match(/[\r?\n]/)?k.split(/\r\n|\r|\n/g):[k]);var Co=ie/sa.internal.scaleFactor,Bo=Co*(or-1);switch(pe.baseline){case"bottom":Ae-=Bo;break;case"top":Ae+=Co-Bo;break;case"hanging":Ae+=Co-2*Bo;break;case"middle":Ae+=Co/2-Bo}if((Ht=pe.maxWidth||0)>0&&(typeof k=="string"?k=sa.splitTextToSize(k,Ht):Object.prototype.toString.call(k)==="[object Array]"&&(k=k.reduce(function(vs,ws){return vs.concat(sa.splitTextToSize(ws,Ht))},[]))),Re={text:k,x:G,y:Ae,options:pe,mutex:{pdfEscape:Wa,activeFontKey:Bt,fonts:Ee,activeFontSize:ie}},Xt.publish("preProcessText",Re),k=Re.text,mt=(pe=Re.options).angle,!(Ms instanceof St)&&mt&&typeof mt=="number"){mt*=Math.PI/180,pe.rotationDirection===0&&(mt=-mt),N===v.ADVANCED&&(mt=-mt);var So=Math.cos(mt),sc=Math.sin(mt);Ms=new St(So,sc,-sc,So,0,0)}else mt&&mt instanceof St&&(Ms=mt);N!==v.ADVANCED||Ms||(Ms=le),(Kt=pe.charSpace||vo)!==void 0&&(pa+=R(F(Kt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Us=pe.horizontalScale)!==void 0&&(pa+=R(100*Us)+` Tz
`),pe.lang;var Ja=-1,eh=pe.renderingMode!==void 0?pe.renderingMode:pe.stroke,ac=sa.internal.getCurrentPageInfo().pageContext;switch(eh){case 0:case!1:case"fill":Ja=0;break;case 1:case!0:case"stroke":Ja=1;break;case 2:case"fillThenStroke":Ja=2;break;case 3:case"invisible":Ja=3;break;case 4:case"fillAndAddForClipping":Ja=4;break;case 5:case"strokeAndAddPathForClipping":Ja=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ja=6;break;case 7:case"addToPathForClipping":Ja=7}var Wd=ac.usedRenderingMode!==void 0?ac.usedRenderingMode:-1;Ja!==-1?pa+=Ja+` Tr
`:Wd!==-1&&(pa+=`0 Tr
`),Ja!==-1&&(ac.usedRenderingMode=Ja),Ct=pe.align||"left";var fr,ko=ie*or,Jd=sa.internal.pageSize.getWidth(),Yd=Ee[Bt];Kt=pe.charSpace||vo,Ht=pe.maxWidth||0,as=Object.assign({autoencode:!0,noBOM:!0},pe.flags);var Rn=[],Si=function(vs){return sa.getStringUnitWidth(vs,{font:Yd,charSpace:Kt,fontSize:ie,doKerning:!1})*ie/en};if(Object.prototype.toString.call(k)==="[object Array]"){var Ya;We=Xl(k),Ct!=="left"&&(fr=We.map(Si));var Oa,On=0;if(Ct==="right"){G-=fr[0],k=[],ja=We.length;for(var gn=0;gn<ja;gn++)gn===0?(Oa=Zr(G),Ya=pn(Ae)):(Oa=F(On-fr[gn]),Ya=-ko),k.push([We[gn],Oa,Ya]),On=fr[gn]}else if(Ct==="center"){G-=fr[0]/2,k=[],ja=We.length;for(var fn=0;fn<ja;fn++)fn===0?(Oa=Zr(G),Ya=pn(Ae)):(Oa=F((On-fr[fn])/2),Ya=-ko),k.push([We[fn],Oa,Ya]),On=fr[fn]}else if(Ct==="left"){k=[],ja=We.length;for(var Eo=0;Eo<ja;Eo++)k.push(We[Eo])}else if(Ct==="justify"&&Yd.encoding==="Identity-H"){k=[],ja=We.length,Ht=Ht!==0?Ht:Jd;for(var bn=0,Ks=0;Ks<ja;Ks++)if(Ya=Ks===0?pn(Ae):-ko,Oa=Ks===0?Zr(G):bn,Ks<ja-1){var rc=F((Ht-fr[Ks])/(We[Ks].split(" ").length-1)),Ha=We[Ks].split(" ");k.push([Ha[0]+" ",Oa,Ya]),bn=0;for(var br=1;br<Ha.length;br++){var Fo=(Si(Ha[br-1]+" "+Ha[br])-Si(Ha[br]))*en+rc;br==Ha.length-1?k.push([Ha[br],Fo,0]):k.push([Ha[br]+" ",Fo,0]),bn-=Fo}}else k.push([We[Ks],Oa,Ya]);k.push(["",bn,0])}else{if(Ct!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(k=[],ja=We.length,Ht=Ht!==0?Ht:Jd,Ks=0;Ks<ja;Ks++)Ya=Ks===0?pn(Ae):-ko,Oa=Ks===0?Zr(G):0,Ks<ja-1?Rn.push(R(F((Ht-fr[Ks])/(We[Ks].split(" ").length-1)))):Rn.push(0),k.push([We[Ks],Oa,Ya])}}var Xd=typeof pe.R2L=="boolean"?pe.R2L:$e;Xd===!0&&(k=Zl(k,function(vs,ws,zs){return[vs.split("").reverse().join(""),ws,zs]})),Re={text:k,x:G,y:Ae,options:pe,mutex:{pdfEscape:Wa,activeFontKey:Bt,fonts:Ee,activeFontSize:ie}},Xt.publish("postProcessText",Re),k=Re.text,Pr=Re.mutex.isHex||!1;var nc=Ee[Bt].encoding;nc!=="WinAnsiEncoding"&&nc!=="StandardEncoding"||(k=Zl(k,function(vs,ws,zs){return[Gd(vs),ws,zs]})),We=Xl(k),k=[];for(var ki,Ei,Hn,Fi=0,Uo=1,Ui=Array.isArray(We[0])?Uo:Fi,qn="",ic=function(vs,ws,zs){var ma="";return zs instanceof St?(zs=typeof pe.angle=="number"?Ga(zs,new St(1,0,0,1,vs,ws)):Ga(new St(1,0,0,1,vs,ws),zs),N===v.ADVANCED&&(zs=Ga(new St(1,0,0,-1,0,0),zs)),ma=zs.join(" ")+` Tm
`):ma=R(vs)+" "+R(ws)+` Td
`,ma},yr=0;yr<We.length;yr++){switch(qn="",Ui){case Uo:Hn=(Pr?"<":"(")+We[yr][0]+(Pr?">":")"),ki=parseFloat(We[yr][1]),Ei=parseFloat(We[yr][2]);break;case Fi:Hn=(Pr?"<":"(")+We[yr]+(Pr?">":")"),ki=Zr(G),Ei=pn(Ae)}Rn!==void 0&&Rn[yr]!==void 0&&(qn=Rn[yr]+` Tw
`),yr===0?k.push(qn+ic(ki,Ei,Ms)+Hn):Ui===Fi?k.push(qn+Hn):Ui===Uo&&k.push(qn+ic(ki,Ei,Ms)+Hn)}k=Ui===Fi?k.join(` Tj
T* `):k.join(` Tj
`),k+=` Tj
`;var vr=`BT
/`;return vr+=Bt+" "+ie+` Tf
`,vr+=R(ie*or)+` TL
`,vr+=Ci+`
`,vr+=pa,vr+=k,K(vr+="ET"),x[Bt]=!0,sa};var Vm=m.__private__.clip=m.clip=function(k){return K(k==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Vm("evenodd")},m.__private__.discardPath=m.discardPath=function(){return K("n"),this};var Xr=m.__private__.isValidStyle=function(k){var G=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(k)!==-1&&(G=!0),G};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(k){return Xr(k)&&(d=k),this};var Rd=m.__private__.getStyle=m.getStyle=function(k){var G=d;switch(k){case"D":case"S":G="S";break;case"F":G="f";break;case"FD":case"DF":G="B";break;case"f":case"f*":case"B":case"B*":G=k}return G},Od=m.close=function(){return K("h"),this};m.stroke=function(){return K("S"),this},m.fill=function(k){return bo("f",k),this},m.fillEvenOdd=function(k){return bo("f*",k),this},m.fillStroke=function(k){return bo("B",k),this},m.fillStrokeEvenOdd=function(k){return bo("B*",k),this};var bo=function(k,G){hs(G)==="object"?zm(G,k):K(k)},Hl=function(k){k===null||N===v.ADVANCED&&k===void 0||(k=Rd(k),K(k))};function Km(k,G,Ae,pe,_e){var Re=new dl(G||this.boundingBox,Ae||this.xStep,pe||this.yStep,this.gState,_e||this.matrix);Re.stream=this.stream;var We=k+"$$"+this.cloneIndex+++"$$";return Le(We,Re),Re}var zm=function(k,G){var Ae=It[k.key],pe=Ye[Ae];if(pe instanceof Vi)K("q"),K(Gm(G)),pe.gState&&m.setGState(pe.gState),K(k.matrix.toString()+" cm"),K("/"+Ae+" sh"),K("Q");else if(pe instanceof dl){var _e=new St(1,0,0,-1,0,Mn());k.matrix&&(_e=_e.multiply(k.matrix||le),Ae=Km.call(pe,k.key,k.boundingBox,k.xStep,k.yStep,_e).id),K("q"),K("/Pattern cs"),K("/"+Ae+" scn"),pe.gState&&m.setGState(pe.gState),K(G),K("Q")}},Gm=function(k){switch(k){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},ql=m.moveTo=function(k,G){return K(R(F(k))+" "+R(P(G))+" m"),this},Ni=m.lineTo=function(k,G){return K(R(F(k))+" "+R(P(G))+" l"),this},Qn=m.curveTo=function(k,G,Ae,pe,_e,Re){return K([R(F(k)),R(P(G)),R(F(Ae)),R(P(pe)),R(F(_e)),R(P(Re)),"c"].join(" ")),this};m.__private__.line=m.line=function(k,G,Ae,pe,_e){if(isNaN(k)||isNaN(G)||isNaN(Ae)||isNaN(pe)||!Xr(_e))throw new Error("Invalid arguments passed to jsPDF.line");return N===v.COMPAT?this.lines([[Ae-k,pe-G]],k,G,[1,1],_e||"S"):this.lines([[Ae-k,pe-G]],k,G,[1,1]).stroke()},m.__private__.lines=m.lines=function(k,G,Ae,pe,_e,Re){var We,mt,Ct,Kt,Ht,as,Us,Ms,sa,ka,pa,Pr;if(typeof k=="number"&&(Pr=Ae,Ae=G,G=k,k=Pr),pe=pe||[1,1],Re=Re||!1,isNaN(G)||isNaN(Ae)||!Array.isArray(k)||!Array.isArray(pe)||!Xr(_e)||typeof Re!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ql(G,Ae),We=pe[0],mt=pe[1],Kt=k.length,ka=G,pa=Ae,Ct=0;Ct<Kt;Ct++)(Ht=k[Ct]).length===2?(ka=Ht[0]*We+ka,pa=Ht[1]*mt+pa,Ni(ka,pa)):(as=Ht[0]*We+ka,Us=Ht[1]*mt+pa,Ms=Ht[2]*We+ka,sa=Ht[3]*mt+pa,ka=Ht[4]*We+ka,pa=Ht[5]*mt+pa,Qn(as,Us,Ms,sa,ka,pa));return Re&&Od(),Hl(_e),this},m.path=function(k){for(var G=0;G<k.length;G++){var Ae=k[G],pe=Ae.c;switch(Ae.op){case"m":ql(pe[0],pe[1]);break;case"l":Ni(pe[0],pe[1]);break;case"c":Qn.apply(this,pe);break;case"h":Od()}}return this},m.__private__.rect=m.rect=function(k,G,Ae,pe,_e){if(isNaN(k)||isNaN(G)||isNaN(Ae)||isNaN(pe)||!Xr(_e))throw new Error("Invalid arguments passed to jsPDF.rect");return N===v.COMPAT&&(pe=-pe),K([R(F(k)),R(P(G)),R(F(Ae)),R(F(pe)),"re"].join(" ")),Hl(_e),this},m.__private__.triangle=m.triangle=function(k,G,Ae,pe,_e,Re,We){if(isNaN(k)||isNaN(G)||isNaN(Ae)||isNaN(pe)||isNaN(_e)||isNaN(Re)||!Xr(We))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ae-k,pe-G],[_e-Ae,Re-pe],[k-_e,G-Re]],k,G,[1,1],We,!0),this},m.__private__.roundedRect=m.roundedRect=function(k,G,Ae,pe,_e,Re,We){if(isNaN(k)||isNaN(G)||isNaN(Ae)||isNaN(pe)||isNaN(_e)||isNaN(Re)||!Xr(We))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var mt=4/3*(Math.SQRT2-1);return _e=Math.min(_e,.5*Ae),Re=Math.min(Re,.5*pe),this.lines([[Ae-2*_e,0],[_e*mt,0,_e,Re-Re*mt,_e,Re],[0,pe-2*Re],[0,Re*mt,-_e*mt,Re,-_e,Re],[2*_e-Ae,0],[-_e*mt,0,-_e,-Re*mt,-_e,-Re],[0,2*Re-pe],[0,-Re*mt,_e*mt,-Re,_e,-Re]],k+_e,G,[1,1],We,!0),this},m.__private__.ellipse=m.ellipse=function(k,G,Ae,pe,_e){if(isNaN(k)||isNaN(G)||isNaN(Ae)||isNaN(pe)||!Xr(_e))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Re=4/3*(Math.SQRT2-1)*Ae,We=4/3*(Math.SQRT2-1)*pe;return ql(k+Ae,G),Qn(k+Ae,G-We,k+Re,G-pe,k,G-pe),Qn(k-Re,G-pe,k-Ae,G-We,k-Ae,G),Qn(k-Ae,G+We,k-Re,G+pe,k,G+pe),Qn(k+Re,G+pe,k+Ae,G+We,k+Ae,G),Hl(_e),this},m.__private__.circle=m.circle=function(k,G,Ae,pe){if(isNaN(k)||isNaN(G)||isNaN(Ae)||!Xr(pe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(k,G,Ae,Ae,pe)},m.setFont=function(k,G,Ae){return Ae&&(G=E(G,Ae)),Bt=Qd(k,G,{disableWarning:!1}),this};var Wm=m.__private__.getFont=m.getFont=function(){return Ee[Qd.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var k,G,Ae={};for(k in Qe)if(Qe.hasOwnProperty(k))for(G in Ae[k]=[],Qe[k])Qe[k].hasOwnProperty(G)&&Ae[k].push(G);return Ae},m.addFont=function(k,G,Ae,pe,_e){var Re=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Re.indexOf(arguments[3])!==-1?_e=arguments[3]:arguments[3]&&Re.indexOf(arguments[3])==-1&&(Ae=E(Ae,pe)),_e=_e||"Identity-H",Ml.call(this,k,G,Ae,_e)};var _i,$l=s.lineWidth||.200025,yo=m.__private__.getLineWidth=m.getLineWidth=function(){return $l},Hd=m.__private__.setLineWidth=m.setLineWidth=function(k){return $l=k,K(R(F(k))+" w"),this};m.__private__.setLineDash=Ft.API.setLineDash=Ft.API.setLineDashPattern=function(k,G){if(k=k||[],G=G||0,isNaN(G)||!Array.isArray(k))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return k=k.map(function(Ae){return R(F(Ae))}).join(" "),G=R(F(G)),K("["+k+"] "+G+" d"),this};var qd=m.__private__.getLineHeight=m.getLineHeight=function(){return ie*_i};m.__private__.getLineHeight=m.getLineHeight=function(){return ie*_i};var $d=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(k){return typeof(k=k||1.15)=="number"&&(_i=k),this},Vd=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return _i};$d(s.lineHeight);var Zr=m.__private__.getHorizontalCoordinate=function(k){return F(k)},pn=m.__private__.getVerticalCoordinate=function(k){return N===v.ADVANCED?k:_t[B].mediaBox.topRightY-_t[B].mediaBox.bottomLeftY-F(k)},Jm=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(k){return R(Zr(k))},Pn=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(k){return R(pn(k))},Qr=s.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return ct(Qr)},m.__private__.setStrokeColor=m.setDrawColor=function(k,G,Ae,pe){return Qr=_s({ch1:k,ch2:G,ch3:Ae,ch4:pe,pdfColorType:"draw",precision:2}),K(Qr),this};var Vl=s.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return ct(Vl)},m.__private__.setFillColor=m.setFillColor=function(k,G,Ae,pe){return Vl=_s({ch1:k,ch2:G,ch3:Ae,ch4:pe,pdfColorType:"fill",precision:2}),K(Vl),this};var Ci=s.textColor||"0 g",Ym=m.__private__.getTextColor=m.getTextColor=function(){return ct(Ci)};m.__private__.setTextColor=m.setTextColor=function(k,G,Ae,pe){return Ci=_s({ch1:k,ch2:G,ch3:Ae,ch4:pe,pdfColorType:"text",precision:3}),this};var vo=s.charSpace,Xm=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(vo||0)};m.__private__.setCharSpace=m.setCharSpace=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return vo=k,this};var Kl=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(k){var G=m.CapJoinStyles[k];if(G===void 0)throw new Error("Line cap style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Kl=G,K(G+" J"),this};var zl=0;m.__private__.setLineJoin=m.setLineJoin=function(k){var G=m.CapJoinStyles[k];if(G===void 0)throw new Error("Line join style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return zl=G,K(G+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(k){if(k=k||0,isNaN(k))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return K(R(F(k))+" M"),this},m.GState=qu,m.setGState=function(k){(k=typeof k=="string"?lt[Tt[k]]:Kd(null,k)).equals(Yt)||(K("/"+k.id+" gs"),Yt=k)};var Kd=function(k,G){if(!k||!Tt[k]){var Ae=!1;for(var pe in lt)if(lt.hasOwnProperty(pe)&&lt[pe].equals(G)){Ae=!0;break}if(Ae)G=lt[pe];else{var _e="GS"+(Object.keys(lt).length+1).toString(10);lt[_e]=G,G.id=_e}return k&&(Tt[k]=G.id),Xt.publish("addGState",G),G}};m.addGState=function(k,G){return Kd(k,G),this},m.saveGraphicsState=function(){return K("q"),Ze.push({key:Bt,size:ie,color:Ci}),this},m.restoreGraphicsState=function(){K("Q");var k=Ze.pop();return Bt=k.key,ie=k.size,Ci=k.color,Yt=null,this},m.setCurrentTransformationMatrix=function(k){return K(k.toString()+" cm"),this},m.comment=function(k){return K("#"+k),this};var wo=function(k,G){var Ae=k||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ae},set:function(Re){isNaN(Re)||(Ae=parseFloat(Re))}});var pe=G||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return pe},set:function(Re){isNaN(Re)||(pe=parseFloat(Re))}});var _e="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return _e},set:function(Re){_e=Re.toString()}}),this},Gl=function(k,G,Ae,pe){wo.call(this,k,G),this.type="rect";var _e=Ae||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return _e},set:function(We){isNaN(We)||(_e=parseFloat(We))}});var Re=pe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Re},set:function(We){isNaN(We)||(Re=parseFloat(We))}}),this},Wl=function(){this.page=ft,this.currentPage=B,this.pages=ee.slice(0),this.pagesContext=_t.slice(0),this.x=ta,this.y=Pt,this.matrix=de,this.width=Bi(B),this.height=Mn(B),this.outputDestination=Pe,this.id="",this.objectNumber=-1};Wl.prototype.restore=function(){ft=this.page,B=this.currentPage,_t=this.pagesContext,ee=this.pages,ta=this.x,Pt=this.y,de=this.matrix,Jl(B,this.width),Yl(B,this.height),Pe=this.outputDestination};var zd=function(k,G,Ae,pe,_e){gr.push(new Wl),ft=B=0,ee=[],ta=k,Pt=G,de=_e,Rl([Ae,pe])},Zm=function(k){if(Ra[k])gr.pop().restore();else{var G=new Wl,Ae="Xo"+(Object.keys(Ts).length+1).toString(10);G.id=Ae,Ra[k]=Ae,Ts[Ae]=G,Xt.publish("addFormObject",G),gr.pop().restore()}};for(var jo in m.beginFormObject=function(k,G,Ae,pe,_e){return zd(k,G,Ae,pe,_e),this},m.endFormObject=function(k){return Zm(k),this},m.doFormObject=function(k,G){var Ae=Ts[Ra[k]];return K("q"),K(G.toString()+" cm"),K("/"+Ae.id+" Do"),K("Q"),this},m.getFormObject=function(k){var G=Ts[Ra[k]];return{x:G.x,y:G.y,width:G.width,height:G.height,matrix:G.matrix}},m.save=function(k,G){return k=k||"generated.pdf",(G=G||{}).returnPromise=G.returnPromise||!1,G.returnPromise===!1?(Oi(go(xn()),k),typeof Oi.unload=="function"&&Dt.setTimeout&&setTimeout(Oi.unload,911),this):new Promise(function(Ae,pe){try{var _e=Oi(go(xn()),k);typeof Oi.unload=="function"&&Dt.setTimeout&&setTimeout(Oi.unload,911),Ae(_e)}catch(Re){pe(Re.message)}})},Ft.API)Ft.API.hasOwnProperty(jo)&&(jo==="events"&&Ft.API.events.length?function(k,G){var Ae,pe,_e;for(_e=G.length-1;_e!==-1;_e--)Ae=G[_e][0],pe=G[_e][1],k.subscribe.apply(k,[Ae].concat(typeof pe=="function"?[pe]:pe))}(Xt,Ft.API.events):m[jo]=Ft.API[jo]);var Bi=m.getPageWidth=function(k){return(_t[k=k||B].mediaBox.topRightX-_t[k].mediaBox.bottomLeftX)/et},Jl=m.setPageWidth=function(k,G){_t[k].mediaBox.topRightX=G*et+_t[k].mediaBox.bottomLeftX},Mn=m.getPageHeight=function(k){return(_t[k=k||B].mediaBox.topRightY-_t[k].mediaBox.bottomLeftY)/et},Yl=m.setPageHeight=function(k,G){_t[k].mediaBox.topRightY=G*et+_t[k].mediaBox.bottomLeftY};return m.internal={pdfEscape:Wa,getStyle:Rd,getFont:Wm,getFontSize:ye,getCharSpace:Xm,getTextColor:Ym,getLineHeight:qd,getLineHeightFactor:Vd,getLineWidth:yo,write:Me,getHorizontalCoordinate:Zr,getVerticalCoordinate:pn,getCoordinateString:Jm,getVerticalCoordinateString:Pn,collections:{},newObject:De,newAdditionalObject:ot,newObjectDeferred:ke,newObjectDeferredBegin:Je,getFilters:Qs,putStream:ua,events:Xt,scaleFactor:et,pageSize:{getWidth:function(){return Bi(B)},setWidth:function(k){Jl(B,k)},getHeight:function(){return Mn(B)},setHeight:function(k){Yl(B,k)}},encryptionOptions:A,encryption:Sa,getEncryptor:qm,output:fo,getNumberOfPages:Pm,pages:ee,out:K,f2:L,f3:f,getPageInfo:Md,getPageInfoByObjId:Rt,getCurrentPageInfo:$m,getPDFVersion:g,Point:wo,Rectangle:Gl,Matrix:St,hasHotfix:Pd},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Bi(B)},set:function(k){Jl(B,k)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Mn(B)},set:function(k){Yl(B,k)},enumerable:!0,configurable:!0}),Tm.call(m,re),Bt="F1",Ld(n,a),Xt.publish("initialized"),m}sl.prototype.lsbFirstWord=function(s){return String.fromCharCode(s>>0&255,s>>8&255,s>>16&255,s>>24&255)},sl.prototype.toHexString=function(s){return s.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},sl.prototype.hexToBytes=function(s){for(var t=[],a=0;a<s.length;a+=2)t.push(String.fromCharCode(parseInt(s.substr(a,2),16)));return t.join("")},sl.prototype.processOwnerPassword=function(s,t){return Y0(J0(t).substr(0,5),s)},sl.prototype.encryptor=function(s,t){var a=J0(this.encryptionKey+String.fromCharCode(255&s,s>>8&255,s>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return Y0(a,r)}},qu.prototype.equals=function(s){var t,a="id,objectNumber,equals";if(!s||hs(s)!==hs(this))return!1;var r=0;for(t in this)if(!(a.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!s.hasOwnProperty(t)||this[t]!==s[t])return!1;r++}for(t in s)s.hasOwnProperty(t)&&a.indexOf(t)<0&&r--;return r===0},Ft.API={events:[]},Ft.version="2.5.2";var Os=Ft.API,gg=1,lo=function(s){return s.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Jo=function(s){return s.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},qt=function(s){return s.toFixed(2)},Zn=function(s){return s.toFixed(5)};Os.__acroform__={};var ir=function(s,t){s.prototype=Object.create(t.prototype),s.prototype.constructor=s},Wy=function(s){return s*gg},an=function(s){var t=new d1,a=jt.internal.getHeight(s)||0,r=jt.internal.getWidth(s)||0;return t.BBox=[0,0,Number(qt(r)),Number(qt(a))],t},e8=Os.__acroform__.setBit=function(s,t){if(s=s||0,t=t||0,isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return s|=1<<t},t8=Os.__acroform__.clearBit=function(s,t){if(s=s||0,t=t||0,isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return s&=~(1<<t)},s8=Os.__acroform__.getBit=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return s&1<<t?1:0},Ys=Os.__acroform__.getBitForPdf=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return s8(s,t-1)},Xs=Os.__acroform__.setBitForPdf=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return e8(s,t-1)},Zs=Os.__acroform__.clearBitForPdf=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return t8(s,t-1)},a8=Os.__acroform__.calculateCoordinates=function(s,t){var a=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,n=s[0],i=s[1],o=s[2],l=s[3],c={};return c.lowerLeft_X=a(n)||0,c.lowerLeft_Y=r(i+l)||0,c.upperRight_X=a(n+o)||0,c.upperRight_Y=r(i)||0,[Number(qt(c.lowerLeft_X)),Number(qt(c.lowerLeft_Y)),Number(qt(c.upperRight_X)),Number(qt(c.upperRight_Y))]},r8=function(s){if(s.appearanceStreamContent)return s.appearanceStreamContent;if(s.V||s.DV){var t=[],a=s._V||s.DV,r=X0(s,a),n=s.scope.internal.getFont(s.fontName,s.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(s.scope.__private__.encodeColorString(s.color)),t.push("/"+n+" "+qt(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=an(s);return i.scope=s.scope,i.stream=t.join(`
`),i}},X0=function(s,t){var a=s.fontSize===0?s.maxFontSize:s.fontSize,r={text:"",fontSize:""},n=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");n=s.multiline?n.map(function(f){return f.split(`
`)}):n.map(function(f){return[f]});var i=a,o=jt.internal.getHeight(s)||0;o=o<0?-o:o;var l=jt.internal.getWidth(s)||0;l=l<0?-l:l;var c=function(f,F,M){if(f+1<n.length){var P=F+" "+n[f+1][0];return ZA(P,s,M).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var d,A,u=ZA("3",s,i).height,x=s.multiline?o-i:(o-u)/2,m=x+=2,y=0,g=0,b=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+ZA(t,s,i=12).width+", FieldWidth:"+l+`
`;break}for(var p="",v=0,N=0;N<n.length;N++)if(n.hasOwnProperty(N)){var D=!1;if(n[N].length!==1&&b!==n[N].length-1){if((u+2)*(v+2)+2>o)continue e;p+=n[N][b],D=!0,g=N,N--}else{p=(p+=n[N][b]+" ").substr(p.length-1)==" "?p.substr(0,p.length-1):p;var S=parseInt(N),E=c(S,p,i),R=N>=n.length-1;if(E&&!R){p+=" ",b=0;continue}if(E||R){if(R)g=S;else if(s.multiline&&(u+2)*(v+2)+2>o)continue e}else{if(!s.multiline||(u+2)*(v+2)+2>o)continue e;g=S}}for(var _="",C=y;C<=g;C++){var L=n[C];if(s.multiline){if(C===g){_+=L[b]+" ",b=(b+1)%L.length;continue}if(C===y){_+=L[L.length-1]+" ";continue}}_+=L[0]+" "}switch(_=_.substr(_.length-1)==" "?_.substr(0,_.length-1):_,A=ZA(_,s,i).width,s.textAlign){case"right":d=l-A-2;break;case"center":d=(l-A)/2;break;case"left":default:d=2}t+=qt(d)+" "+qt(m)+` Td
`,t+="("+lo(_)+`) Tj
`,t+=-qt(d)+` 0 Td
`,m=-(i+2),A=0,y=D?g:g+1,v++,p=""}break}return r.text=t,r.fontSize=i,r},ZA=function(s,t,a){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),n=t.scope.getStringUnitWidth(s,{font:r,fontSize:parseFloat(a),charSpace:0})*parseFloat(a);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(a),charSpace:0})*parseFloat(a)*1.5,width:n}},n8={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},i8=function(s,t){var a={type:"reference",object:s};t.internal.getPageInfo(s.page).pageContext.annotations.find(function(r){return r.type===a.type&&r.object===a.object})===void 0&&t.internal.getPageInfo(s.page).pageContext.annotations.push(a)},o8=function(s,t){for(var a in s)if(s.hasOwnProperty(a)){var r=a,n=s[a];t.internal.newObjectDeferredBegin(n.objId,!0),hs(n)==="object"&&typeof n.putStream=="function"&&n.putStream(),delete s[r]}},l8=function(s,t){if(t.scope=s,s.internal!==void 0&&(s.internal.acroformPlugin===void 0||s.internal.acroformPlugin.isInitialized===!1)){if(Jr.FieldNum=0,s.internal.acroformPlugin=JSON.parse(JSON.stringify(n8)),s.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");gg=s.internal.scaleFactor,s.internal.acroformPlugin.acroFormDictionaryRoot=new A1,s.internal.acroformPlugin.acroFormDictionaryRoot.scope=s,s.internal.acroformPlugin.acroFormDictionaryRoot._eventID=s.internal.events.subscribe("postPutResources",function(){(function(a){a.internal.events.unsubscribe(a.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete a.internal.acroformPlugin.acroFormDictionaryRoot._eventID,a.internal.acroformPlugin.printedOut=!0})(s)}),s.internal.events.subscribe("buildDocument",function(){(function(a){a.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=a.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in r)if(r.hasOwnProperty(n)){var i=r[n];i.objId=void 0,i.hasAnnotation&&i8(i,a)}})(s)}),s.internal.events.subscribe("putCatalog",function(){(function(a){if(a.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");a.internal.write("/AcroForm "+a.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(s)}),s.internal.events.subscribe("postPutPages",function(a){(function(r,n){var i=!r;for(var o in r||(n.internal.newObjectDeferredBegin(n.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),n.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||n.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var l=r[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=a8(l.Rect,n)),n.internal.newObjectDeferredBegin(l.objId,!0),l.DA=jt.createDefaultAppearanceStream(l),hs(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var A=r8(l);c.push({key:"AP",value:"<</N "+A+">>"}),n.internal.acroformPlugin.xForms.push(A)}if(l.appearanceStreamContent){var u="";for(var x in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(x)){var m=l.appearanceStreamContent[x];if(u+="/"+x+" ",u+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var y=m[o];typeof y=="function"&&(y=y.call(n,l)),u+="/"+o+" "+y+" ",n.internal.acroformPlugin.xForms.indexOf(y)>=0||n.internal.acroformPlugin.xForms.push(y)}}else typeof(y=m)=="function"&&(y=y.call(n,l)),u+="/"+o+" "+y,n.internal.acroformPlugin.xForms.indexOf(y)>=0||n.internal.acroformPlugin.xForms.push(y);u+=">>"}c.push({key:"AP",value:`<<
`+u+">>"})}n.internal.putStream({additionalKeyValues:c,objectId:l.objId}),n.internal.out("endobj")}i&&o8(n.internal.acroformPlugin.xForms,n)})(a,s)}),s.internal.acroformPlugin.isInitialized=!0}},c1=Os.__acroform__.arrayToPdfArray=function(s,t,a){var r=function(o){return o};if(Array.isArray(s)){for(var n="[",i=0;i<s.length;i++)switch(i!==0&&(n+=" "),hs(s[i])){case"boolean":case"number":case"object":n+=s[i].toString();break;case"string":s[i].substr(0,1)!=="/"?(t!==void 0&&a&&(r=a.internal.getEncryptor(t)),n+="("+lo(r(s[i].toString()))+")"):n+=s[i].toString()}return n+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},_x=function(s,t,a){var r=function(n){return n};return t!==void 0&&a&&(r=a.internal.getEncryptor(t)),(s=s||"").toString(),s="("+lo(r(s))+")"},nn=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(s){this._objId=s}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};nn.prototype.toString=function(){return this.objId+" 0 R"},nn.prototype.putStream=function(){var s=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:s,objectId:this.objId}),this.scope.internal.out("endobj")},nn.prototype.getKeyValueListForStream=function(){var s=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var a in t)if(Object.getOwnPropertyDescriptor(this,t[a]).configurable===!1){var r=t[a],n=this[r];n&&(Array.isArray(n)?s.push({key:r,value:c1(n,this.objId,this.scope)}):n instanceof nn?(n.scope=this.scope,s.push({key:r,value:n.objId+" 0 R"})):typeof n!="function"&&s.push({key:r,value:n}))}return s};var d1=function(){nn.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var s,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(a){s=a.trim()},get:function(){return s||null}})};ir(d1,nn);var A1=function(){nn.call(this);var s,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(s){var a=function(r){return r};return this.scope&&(a=this.scope.internal.getEncryptor(this.objId)),"("+lo(a(s))+")"}},set:function(a){s=a}})};ir(A1,nn);var Jr=function s(){nn.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(p){if(isNaN(p))throw new Error('Invalid value "'+p+'" for attribute F supplied.');t=p}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ys(t,3)},set:function(p){p?this.F=Xs(t,3):this.F=Zs(t,3)}});var a=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return a},set:function(p){if(isNaN(p))throw new Error('Invalid value "'+p+'" for attribute Ff supplied.');a=p}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(p){r=p!==void 0?p:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(p){r[0]=p}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(p){r[1]=p}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(p){r[2]=p}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(p){r[3]=p}});var n="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return n},set:function(p){switch(p){case"/Btn":case"/Tx":case"/Ch":case"/Sig":n=p;break;default:throw new Error('Invalid value "'+p+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof $u)return;i="FieldObject"+s.FieldNum++}var p=function(v){return v};return this.scope&&(p=this.scope.internal.getEncryptor(this.objId)),"("+lo(p(i))+")"},set:function(p){i=p.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(p){i=p}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(p){o=p}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(p){l=p}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(p){c=p}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/gg:d},set:function(p){d=p}});var A="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return A},set:function(p){A=p}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof $u||this instanceof ao))return _x(u,this.objId,this.scope)},set:function(p){p=p.toString(),u=p}});var x=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof ya?x:_x(x,this.objId,this.scope)},set:function(p){p=p.toString(),x=this instanceof ya?p:p.substr(0,1)==="("?Jo(p.substr(1,p.length-2)):Jo(p)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ya?Jo(x.substr(1,x.length-1)):x},set:function(p){p=p.toString(),x=this instanceof ya?"/"+p:p}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(p){this.V=p}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof ya?m:_x(m,this.objId,this.scope)},set:function(p){p=p.toString(),m=this instanceof ya?p:p.substr(0,1)==="("?Jo(p.substr(1,p.length-2)):Jo(p)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ya?Jo(m.substr(1,m.length-1)):m},set:function(p){p=p.toString(),m=this instanceof ya?"/"+p:p}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(p){p=!!p,g=p}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(p){y=p}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,1)},set:function(p){p?this.Ff=Xs(this.Ff,1):this.Ff=Zs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,2)},set:function(p){p?this.Ff=Xs(this.Ff,2):this.Ff=Zs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,3)},set:function(p){p?this.Ff=Xs(this.Ff,3):this.Ff=Zs(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(p){if([0,1,2].indexOf(p)===-1)throw new Error('Invalid value "'+p+'" for attribute Q supplied.');b=p}}),Object.defineProperty(this,"textAlign",{get:function(){var p;switch(b){case 0:default:p="left";break;case 1:p="center";break;case 2:p="right"}return p},configurable:!0,enumerable:!0,set:function(p){switch(p){case"right":case 2:b=2;break;case"center":case 1:b=1;break;case"left":case 0:default:b=0}}})};ir(Jr,nn);var yl=function(){Jr.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var s=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return s},set:function(a){s=a}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return c1(t,this.objId,this.scope)},set:function(a){var r,n;n=[],typeof(r=a)=="string"&&(n=function(i,o,l){l||(l=1);for(var c,d=[];c=o.exec(i);)d.push(c[l]);return d}(r,/\((.*?)\)/g)),t=n}}),this.getOptions=function(){return t},this.setOptions=function(a){t=a,this.sort&&t.sort()},this.addOption=function(a){a=(a=a||"").toString(),t.push(a),this.sort&&t.sort()},this.removeOption=function(a,r){for(r=r||!1,a=(a=a||"").toString();t.indexOf(a)!==-1&&(t.splice(t.indexOf(a),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,18)},set:function(a){a?this.Ff=Xs(this.Ff,18):this.Ff=Zs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,19)},set:function(a){this.combo===!0&&(a?this.Ff=Xs(this.Ff,19):this.Ff=Zs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,20)},set:function(a){a?(this.Ff=Xs(this.Ff,20),t.sort()):this.Ff=Zs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,22)},set:function(a){a?this.Ff=Xs(this.Ff,22):this.Ff=Zs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,23)},set:function(a){a?this.Ff=Xs(this.Ff,23):this.Ff=Zs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,27)},set:function(a){a?this.Ff=Xs(this.Ff,27):this.Ff=Zs(this.Ff,27)}}),this.hasAppearanceStream=!1};ir(yl,Jr);var vl=function(){yl.call(this),this.fontName="helvetica",this.combo=!1};ir(vl,yl);var wl=function(){vl.call(this),this.combo=!0};ir(wl,vl);var hu=function(){wl.call(this),this.edit=!0};ir(hu,wl);var ya=function(){Jr.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,15)},set:function(a){a?this.Ff=Xs(this.Ff,15):this.Ff=Zs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,16)},set:function(a){a?this.Ff=Xs(this.Ff,16):this.Ff=Zs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,17)},set:function(a){a?this.Ff=Xs(this.Ff,17):this.Ff=Zs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,26)},set:function(a){a?this.Ff=Xs(this.Ff,26):this.Ff=Zs(this.Ff,26)}});var s,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(i){return i};if(this.scope&&(a=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,n=[];for(r in n.push("<<"),t)n.push("/"+r+" ("+lo(a(t[r]))+")");return n.push(">>"),n.join(`
`)}},set:function(a){hs(a)==="object"&&(t=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(a){typeof a=="string"&&(t.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return s.substr(1,s.length-1)},set:function(a){s="/"+a}})};ir(ya,Jr);var xu=function(){ya.call(this),this.pushButton=!0};ir(xu,ya);var jl=function(){ya.call(this),this.radio=!0,this.pushButton=!1;var s=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return s},set:function(t){s=t!==void 0?t:[]}})};ir(jl,ya);var $u=function(){var s,t;Jr.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return s},set:function(n){s=n}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(n){t=n}});var a,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(l){return l};this.scope&&(n=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),r)o.push("/"+i+" ("+lo(n(r[i]))+")");return o.push(">>"),o.join(`
`)},set:function(n){hs(n)==="object"&&(r=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(n){typeof n=="string"&&(r.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return a},set:function(n){a=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return a.substr(1,a.length-1)},set:function(n){a="/"+n}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=jt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ir($u,Jr),jl.prototype.setAppearance=function(s){if(!("createAppearanceStream"in s)||!("getCA"in s))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var a=this.Kids[t];a.appearanceStreamContent=s.createAppearanceStream(a.optionName),a.caption=s.getCA()}},jl.prototype.createOption=function(s){var t=new $u;return t.Parent=this,t.optionName=s,this.Kids.push(t),c8.call(this.scope,t),t};var pu=function(){ya.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=jt.CheckBox.createAppearanceStream()};ir(pu,ya);var ao=function(){Jr.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,13)},set:function(t){t?this.Ff=Xs(this.Ff,13):this.Ff=Zs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,21)},set:function(t){t?this.Ff=Xs(this.Ff,21):this.Ff=Zs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,23)},set:function(t){t?this.Ff=Xs(this.Ff,23):this.Ff=Zs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,24)},set:function(t){t?this.Ff=Xs(this.Ff,24):this.Ff=Zs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,25)},set:function(t){t?this.Ff=Xs(this.Ff,25):this.Ff=Zs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,26)},set:function(t){t?this.Ff=Xs(this.Ff,26):this.Ff=Zs(this.Ff,26)}});var s=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return s},set:function(t){s=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return s},set:function(t){Number.isInteger(t)&&(s=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ir(ao,Jr);var gu=function(){ao.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,14)},set:function(s){s?this.Ff=Xs(this.Ff,14):this.Ff=Zs(this.Ff,14)}}),this.password=!0};ir(gu,ao);var jt={CheckBox:{createAppearanceStream:function(){return{N:{On:jt.CheckBox.YesNormal},D:{On:jt.CheckBox.YesPushDown,Off:jt.CheckBox.OffPushDown}}},YesPushDown:function(s){var t=an(s);t.scope=s.scope;var a=[],r=s.scope.internal.getFont(s.fontName,s.fontStyle).id,n=s.scope.__private__.encodeColorString(s.color),i=X0(s,s.caption);return a.push("0.749023 g"),a.push("0 0 "+qt(jt.internal.getWidth(s))+" "+qt(jt.internal.getHeight(s))+" re"),a.push("f"),a.push("BMC"),a.push("q"),a.push("0 0 1 rg"),a.push("/"+r+" "+qt(i.fontSize)+" Tf "+n),a.push("BT"),a.push(i.text),a.push("ET"),a.push("Q"),a.push("EMC"),t.stream=a.join(`
`),t},YesNormal:function(s){var t=an(s);t.scope=s.scope;var a=s.scope.internal.getFont(s.fontName,s.fontStyle).id,r=s.scope.__private__.encodeColorString(s.color),n=[],i=jt.internal.getHeight(s),o=jt.internal.getWidth(s),l=X0(s,s.caption);return n.push("1 g"),n.push("0 0 "+qt(o)+" "+qt(i)+" re"),n.push("f"),n.push("q"),n.push("0 0 1 rg"),n.push("0 0 "+qt(o-1)+" "+qt(i-1)+" re"),n.push("W"),n.push("n"),n.push("0 g"),n.push("BT"),n.push("/"+a+" "+qt(l.fontSize)+" Tf "+r),n.push(l.text),n.push("ET"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(s){var t=an(s);t.scope=s.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+qt(jt.internal.getWidth(s))+" "+qt(jt.internal.getHeight(s))+" re"),a.push("f"),t.stream=a.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(s){var t={D:{Off:jt.RadioButton.Circle.OffPushDown},N:{}};return t.N[s]=jt.RadioButton.Circle.YesNormal,t.D[s]=jt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(s){var t=an(s);t.scope=s.scope;var a=[],r=jt.internal.getWidth(s)<=jt.internal.getHeight(s)?jt.internal.getWidth(s)/4:jt.internal.getHeight(s)/4;r=Number((.9*r).toFixed(5));var n=jt.internal.Bezier_C,i=Number((r*n).toFixed(5));return a.push("q"),a.push("1 0 0 1 "+Zn(jt.internal.getWidth(s)/2)+" "+Zn(jt.internal.getHeight(s)/2)+" cm"),a.push(r+" 0 m"),a.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),a.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),a.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),a.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),a.push("f"),a.push("Q"),t.stream=a.join(`
`),t},YesPushDown:function(s){var t=an(s);t.scope=s.scope;var a=[],r=jt.internal.getWidth(s)<=jt.internal.getHeight(s)?jt.internal.getWidth(s)/4:jt.internal.getHeight(s)/4;r=Number((.9*r).toFixed(5));var n=Number((2*r).toFixed(5)),i=Number((n*jt.internal.Bezier_C).toFixed(5)),o=Number((r*jt.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+Zn(jt.internal.getWidth(s)/2)+" "+Zn(jt.internal.getHeight(s)/2)+" cm"),a.push(n+" 0 m"),a.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),a.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),a.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),a.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),a.push("f"),a.push("Q"),a.push("0 g"),a.push("q"),a.push("1 0 0 1 "+Zn(jt.internal.getWidth(s)/2)+" "+Zn(jt.internal.getHeight(s)/2)+" cm"),a.push(r+" 0 m"),a.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),a.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),a.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),a.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),a.push("f"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(s){var t=an(s);t.scope=s.scope;var a=[],r=jt.internal.getWidth(s)<=jt.internal.getHeight(s)?jt.internal.getWidth(s)/4:jt.internal.getHeight(s)/4;r=Number((.9*r).toFixed(5));var n=Number((2*r).toFixed(5)),i=Number((n*jt.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+Zn(jt.internal.getWidth(s)/2)+" "+Zn(jt.internal.getHeight(s)/2)+" cm"),a.push(n+" 0 m"),a.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),a.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),a.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),a.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),a.push("f"),a.push("Q"),t.stream=a.join(`
`),t}},Cross:{createAppearanceStream:function(s){var t={D:{Off:jt.RadioButton.Cross.OffPushDown},N:{}};return t.N[s]=jt.RadioButton.Cross.YesNormal,t.D[s]=jt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(s){var t=an(s);t.scope=s.scope;var a=[],r=jt.internal.calculateCross(s);return a.push("q"),a.push("1 1 "+qt(jt.internal.getWidth(s)-2)+" "+qt(jt.internal.getHeight(s)-2)+" re"),a.push("W"),a.push("n"),a.push(qt(r.x1.x)+" "+qt(r.x1.y)+" m"),a.push(qt(r.x2.x)+" "+qt(r.x2.y)+" l"),a.push(qt(r.x4.x)+" "+qt(r.x4.y)+" m"),a.push(qt(r.x3.x)+" "+qt(r.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join(`
`),t},YesPushDown:function(s){var t=an(s);t.scope=s.scope;var a=jt.internal.calculateCross(s),r=[];return r.push("0.749023 g"),r.push("0 0 "+qt(jt.internal.getWidth(s))+" "+qt(jt.internal.getHeight(s))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+qt(jt.internal.getWidth(s)-2)+" "+qt(jt.internal.getHeight(s)-2)+" re"),r.push("W"),r.push("n"),r.push(qt(a.x1.x)+" "+qt(a.x1.y)+" m"),r.push(qt(a.x2.x)+" "+qt(a.x2.y)+" l"),r.push(qt(a.x4.x)+" "+qt(a.x4.y)+" m"),r.push(qt(a.x3.x)+" "+qt(a.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(s){var t=an(s);t.scope=s.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+qt(jt.internal.getWidth(s))+" "+qt(jt.internal.getHeight(s))+" re"),a.push("f"),t.stream=a.join(`
`),t}}},createDefaultAppearanceStream:function(s){var t=s.scope.internal.getFont(s.fontName,s.fontStyle).id,a=s.scope.__private__.encodeColorString(s.color);return"/"+t+" "+s.fontSize+" Tf "+a}};jt.internal={Bezier_C:.551915024494,calculateCross:function(s){var t=jt.internal.getWidth(s),a=jt.internal.getHeight(s),r=Math.min(t,a);return{x1:{x:(t-r)/2,y:(a-r)/2+r},x2:{x:(t-r)/2+r,y:(a-r)/2},x3:{x:(t-r)/2,y:(a-r)/2},x4:{x:(t-r)/2+r,y:(a-r)/2+r}}}},jt.internal.getWidth=function(s){var t=0;return hs(s)==="object"&&(t=Wy(s.Rect[2])),t},jt.internal.getHeight=function(s){var t=0;return hs(s)==="object"&&(t=Wy(s.Rect[3])),t};var c8=Os.addField=function(s){if(l8(this,s),!(s instanceof Jr))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=s).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),s.page=s.scope.internal.getCurrentPageInfo().pageNumber,this};Os.AcroFormChoiceField=yl,Os.AcroFormListBox=vl,Os.AcroFormComboBox=wl,Os.AcroFormEditBox=hu,Os.AcroFormButton=ya,Os.AcroFormPushButton=xu,Os.AcroFormRadioButton=jl,Os.AcroFormCheckBox=pu,Os.AcroFormTextField=ao,Os.AcroFormPasswordField=gu,Os.AcroFormAppearance=jt,Os.AcroForm={ChoiceField:yl,ListBox:vl,ComboBox:wl,EditBox:hu,Button:ya,PushButton:xu,RadioButton:jl,CheckBox:pu,TextField:ao,PasswordField:gu,Appearance:jt},Ft.AcroForm={ChoiceField:yl,ListBox:vl,ComboBox:wl,EditBox:hu,Button:ya,PushButton:xu,RadioButton:jl,CheckBox:pu,TextField:ao,PasswordField:gu,Appearance:jt};Ft.AcroForm;function u1(s){return s.reduce(function(t,a,r){return t[a]=r,t},{})}(function(s){s.__addimage__={};var t="UNKNOWN",a={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=s.__addimage__.getImageFileTypeByImageData=function(f,F){var M,P,Z,O,X,q=t;if((F=F||t)==="RGBA"||f.data!==void 0&&f.data instanceof Uint8ClampedArray&&"height"in f&&"width"in f)return"RGBA";if(E(f))for(X in a)for(Z=a[X],M=0;M<Z.length;M+=1){for(O=!0,P=0;P<Z[M].length;P+=1)if(Z[M][P]!==void 0&&Z[M][P]!==f[P]){O=!1;break}if(O===!0){q=X;break}}else for(X in a)for(Z=a[X],M=0;M<Z.length;M+=1){for(O=!0,P=0;P<Z[M].length;P+=1)if(Z[M][P]!==void 0&&Z[M][P]!==f.charCodeAt(P)){O=!1;break}if(O===!0){q=X;break}}return q===t&&F!==t&&(q=F),q},n=function f(F){for(var M=this.internal.write,P=this.internal.putStream,Z=(0,this.internal.getFilters)();Z.indexOf("FlateEncode")!==-1;)Z.splice(Z.indexOf("FlateEncode"),1);F.objectId=this.internal.newObject();var O=[];if(O.push({key:"Type",value:"/XObject"}),O.push({key:"Subtype",value:"/Image"}),O.push({key:"Width",value:F.width}),O.push({key:"Height",value:F.height}),F.colorSpace===b.INDEXED?O.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(F.palette.length/3-1)+" "+("sMask"in F&&F.sMask!==void 0?F.objectId+2:F.objectId+1)+" 0 R]"}):(O.push({key:"ColorSpace",value:"/"+F.colorSpace}),F.colorSpace===b.DEVICE_CMYK&&O.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),O.push({key:"BitsPerComponent",value:F.bitsPerComponent}),"decodeParameters"in F&&F.decodeParameters!==void 0&&O.push({key:"DecodeParms",value:"<<"+F.decodeParameters+">>"}),"transparency"in F&&Array.isArray(F.transparency)){for(var X="",q=0,V=F.transparency.length;q<V;q++)X+=F.transparency[q]+" "+F.transparency[q]+" ";O.push({key:"Mask",value:"["+X+"]"})}F.sMask!==void 0&&O.push({key:"SMask",value:F.objectId+1+" 0 R"});var oe=F.filter!==void 0?["/"+F.filter]:void 0;if(P({data:F.data,additionalKeyValues:O,alreadyAppliedFilters:oe,objectId:F.objectId}),M("endobj"),"sMask"in F&&F.sMask!==void 0){var H="/Predictor "+F.predictor+" /Colors 1 /BitsPerComponent "+F.bitsPerComponent+" /Columns "+F.width,I={width:F.width,height:F.height,colorSpace:"DeviceGray",bitsPerComponent:F.bitsPerComponent,decodeParameters:H,data:F.sMask};"filter"in F&&(I.filter=F.filter),f.call(this,I)}if(F.colorSpace===b.INDEXED){var B=this.internal.newObject();P({data:_(new Uint8Array(F.palette)),objectId:B}),M("endobj")}},i=function(){var f=this.internal.collections.addImage_images;for(var F in f)n.call(this,f[F])},o=function(){var f,F=this.internal.collections.addImage_images,M=this.internal.write;for(var P in F)M("/I"+(f=F[P]).index,f.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var f=this.internal.collections.addImage_images;return l.call(this),f},d=function(){return Object.keys(this.internal.collections.addImage_images).length},A=function(f){return typeof s["process"+f.toUpperCase()]=="function"},u=function(f){return hs(f)==="object"&&f.nodeType===1},x=function(f,F){if(f.nodeName==="IMG"&&f.hasAttribute("src")){var M=""+f.getAttribute("src");if(M.indexOf("data:image/")===0)return Xc(unescape(M).split("base64,").pop());var P=s.loadFile(M,!0);if(P!==void 0)return P}if(f.nodeName==="CANVAS"){if(f.width===0||f.height===0)throw new Error("Given canvas must have data. Canvas width: "+f.width+", height: "+f.height);var Z;switch(F){case"PNG":Z="image/png";break;case"WEBP":Z="image/webp";break;case"JPEG":case"JPG":default:Z="image/jpeg"}return Xc(f.toDataURL(Z,1).split("base64,").pop())}},m=function(f){var F=this.internal.collections.addImage_images;if(F){for(var M in F)if(f===F[M].alias)return F[M]}},y=function(f,F,M){return f||F||(f=-96,F=-96),f<0&&(f=-1*M.width*72/f/this.internal.scaleFactor),F<0&&(F=-1*M.height*72/F/this.internal.scaleFactor),f===0&&(f=F*M.width/M.height),F===0&&(F=f*M.height/M.width),[f,F]},g=function(f,F,M,P,Z,O){var X=y.call(this,M,P,Z),q=this.internal.getCoordinateString,V=this.internal.getVerticalCoordinateString,oe=c.call(this);if(M=X[0],P=X[1],oe[Z.index]=Z,O){O*=Math.PI/180;var H=Math.cos(O),I=Math.sin(O),B=function(T){return T.toFixed(4)},$=[B(H),B(I),B(-1*I),B(H),0,0,"cm"]}this.internal.write("q"),O?(this.internal.write([1,"0","0",1,q(f),V(F+P),"cm"].join(" ")),this.internal.write($.join(" ")),this.internal.write([q(M),"0","0",q(P),"0","0","cm"].join(" "))):this.internal.write([q(M),"0","0",q(P),q(f),V(F+P),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Z.index+" Do"),this.internal.write("Q")},b=s.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};s.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var p=s.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},v=s.__addimage__.sHashCode=function(f){var F,M,P=0;if(typeof f=="string")for(M=f.length,F=0;F<M;F++)P=(P<<5)-P+f.charCodeAt(F),P|=0;else if(E(f))for(M=f.byteLength/2,F=0;F<M;F++)P=(P<<5)-P+f[F],P|=0;return P},N=s.__addimage__.validateStringAsBase64=function(f){(f=f||"").toString().trim();var F=!0;return f.length===0&&(F=!1),f.length%4!=0&&(F=!1),/^[A-Za-z0-9+/]+$/.test(f.substr(0,f.length-2))===!1&&(F=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(f.substr(-2))===!1&&(F=!1),F},D=s.__addimage__.extractImageFromDataUrl=function(f){var F=(f=f||"").split("base64,"),M=null;if(F.length===2){var P=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(F[0]);Array.isArray(P)&&(M={mimeType:P[1],charset:P[2],data:F[1]})}return M},S=s.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};s.__addimage__.isArrayBuffer=function(f){return S()&&f instanceof ArrayBuffer};var E=s.__addimage__.isArrayBufferView=function(f){return S()&&typeof Uint32Array<"u"&&(f instanceof Int8Array||f instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&f instanceof Uint8ClampedArray||f instanceof Int16Array||f instanceof Uint16Array||f instanceof Int32Array||f instanceof Uint32Array||f instanceof Float32Array||f instanceof Float64Array)},R=s.__addimage__.binaryStringToUint8Array=function(f){for(var F=f.length,M=new Uint8Array(F),P=0;P<F;P++)M[P]=f.charCodeAt(P);return M},_=s.__addimage__.arrayBufferToBinaryString=function(f){for(var F="",M=E(f)?f:new Uint8Array(f),P=0;P<M.length;P+=8192)F+=String.fromCharCode.apply(null,M.subarray(P,P+8192));return F};s.addImage=function(){var f,F,M,P,Z,O,X,q,V;if(typeof arguments[1]=="number"?(F=t,M=arguments[1],P=arguments[2],Z=arguments[3],O=arguments[4],X=arguments[5],q=arguments[6],V=arguments[7]):(F=arguments[1],M=arguments[2],P=arguments[3],Z=arguments[4],O=arguments[5],X=arguments[6],q=arguments[7],V=arguments[8]),hs(f=arguments[0])==="object"&&!u(f)&&"imageData"in f){var oe=f;f=oe.imageData,F=oe.format||F||t,M=oe.x||M||0,P=oe.y||P||0,Z=oe.w||oe.width||Z,O=oe.h||oe.height||O,X=oe.alias||X,q=oe.compression||q,V=oe.rotation||oe.angle||V}var H=this.internal.getFilters();if(q===void 0&&H.indexOf("FlateEncode")!==-1&&(q="SLOW"),isNaN(M)||isNaN(P))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var I=C.call(this,f,F,X,q);return g.call(this,M,P,Z,O,I,V),this};var C=function(f,F,M,P){var Z,O,X;if(typeof f=="string"&&r(f)===t){f=unescape(f);var q=L(f,!1);(q!==""||(q=s.loadFile(f,!0))!==void 0)&&(f=q)}if(u(f)&&(f=x(f,F)),F=r(f,F),!A(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(((X=M)==null||X.length===0)&&(M=function(V){return typeof V=="string"||E(V)?v(V):E(V.data)?v(V.data):null}(f)),(Z=m.call(this,M))||(S()&&(f instanceof Uint8Array||F==="RGBA"||(O=f,f=R(f))),Z=this["process"+F.toUpperCase()](f,d.call(this),M,function(V){return V&&typeof V=="string"&&(V=V.toUpperCase()),V in s.image_compression?V:p.NONE}(P),O)),!Z)throw new Error("An unknown error occurred whilst processing the image.");return Z},L=s.__addimage__.convertBase64ToBinaryString=function(f,F){var M;F=typeof F!="boolean"||F;var P,Z="";if(typeof f=="string"){P=(M=D(f))!==null?M.data:f;try{Z=Xc(P)}catch(O){if(F)throw N(P)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+O.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Z};s.getImageProperties=function(f){var F,M,P="";if(u(f)&&(f=x(f)),typeof f=="string"&&r(f)===t&&((P=L(f,!1))===""&&(P=s.loadFile(f)||""),f=P),M=r(f),!A(M))throw new Error("addImage does not support files of type '"+M+"', please ensure that a plugin for '"+M+"' support is added.");if(!S()||f instanceof Uint8Array||(f=R(f)),!(F=this["process"+M.toUpperCase()](f)))throw new Error("An unknown error occurred whilst processing the image");return F.fileType=M,F}})(Ft.API),function(s){var t=function(a){if(a!==void 0&&a!="")return!0};Ft.API.events.push(["addPage",function(a){this.internal.getPageInfo(a.pageNumber).pageContext.annotations=[]}]),s.events.push(["putPage",function(a){for(var r,n,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(a.objId),d=a.pageContext.annotations,A=!1,u=0;u<d.length&&!A;u++)switch((r=d[u]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(A=!0);break;case"reference":case"text":case"freetext":A=!0}if(A!=0){this.internal.write("/Annots [");for(var x=0;x<d.length;x++){r=d[x];var m=this.internal.pdfEscape,y=this.internal.getEncryptor(a.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),p=this.internal.getEncryptor(g.objId),v=r.title||"Note";i="<</Type /Annot /Subtype /Text "+(n="/Rect ["+o(r.bounds.x)+" "+l(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y)+"] ")+"/Contents ("+m(p(r.contents))+")",i+=" /Popup "+b.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+m(p(v))+") >>",g.content=i;var N=g.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+o(r.bounds.x+30)+" "+l(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+l(r.bounds.y)+"] ")+" /Parent "+N,r.open&&(i+=" /Open true"),i+=" >>",b.content=i,this.internal.write(g.objId,"0 R",b.objId,"0 R");break;case"freetext":n="/Rect ["+o(r.bounds.x)+" "+l(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y+r.bounds.h)+"] ";var D=r.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+m(y(r.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+D+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(r.options.name){var S=this.annotations._nameMap[r.options.name];r.options.pageNumber=S.page,r.options.top=S.y}else r.options.top||(r.options.top=0);if(n="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",i="",r.options.url)i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+m(y(r.options.url))+") >>";else if(r.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,i+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var E=l(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),i+=" /XYZ "+r.options.left+" "+E+" "+r.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),s.createAnnotation=function(a){var r=this.internal.getCurrentPageInfo();switch(a.type){case"link":this.link(a.bounds.x,a.bounds.y,a.bounds.w,a.bounds.h,a);break;case"text":case"freetext":r.pageContext.annotations.push(a)}},s.link=function(a,r,n,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(a),y:d(r),w:c(a+n),h:d(r+i)},options:o,type:"link"})},s.textWithLink=function(a,r,n,i){var o,l,c=this.getTextWidth(a),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var A=this.splitTextToSize(a,l).length;o=Math.ceil(d*A)}else l=c,o=d;return this.text(a,r,n,i),n+=.2*d,i.align==="center"&&(r-=c/2),i.align==="right"&&(r-=c),this.link(r,n-d,l,o,i),c},s.getTextWidth=function(a){var r=this.internal.getFontSize();return this.getStringUnitWidth(a)*r/this.internal.scaleFactor}}(Ft.API),function(s){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},a={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},n=[1570,1571,1573,1575];s.__arabicParser__={};var i=s.__arabicParser__.isInArabicSubstitutionA=function(g){return t[g.charCodeAt(0)]!==void 0},o=s.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},l=s.__arabicParser__.isArabicEndLetter=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length<=2},c=s.__arabicParser__.isArabicAlfLetter=function(g){return o(g)&&n.indexOf(g.charCodeAt(0))>=0};s.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=1};var d=s.__arabicParser__.arabicLetterHasFinalForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=2};s.__arabicParser__.arabicLetterHasInitialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=3};var A=s.__arabicParser__.arabicLetterHasMedialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length==4},u=s.__arabicParser__.resolveLigatures=function(g){var b=0,p=a,v="",N=0;for(b=0;b<g.length;b+=1)p[g.charCodeAt(b)]!==void 0?(N++,typeof(p=p[g.charCodeAt(b)])=="number"&&(v+=String.fromCharCode(p),p=a,N=0),b===g.length-1&&(p=a,v+=g.charAt(b-(N-1)),b-=N-1,N=0)):(p=a,v+=g.charAt(b-N),b-=N,N=0);return v};s.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&r[g.charCodeAt(0)]!==void 0};var x=s.__arabicParser__.getCorrectForm=function(g,b,p){return o(g)?i(g)===!1?-1:!d(g)||!o(b)&&!o(p)||!o(p)&&l(b)||l(g)&&!o(b)||l(g)&&c(b)||l(g)&&l(b)?0:A(g)&&o(b)&&!l(b)&&o(p)&&d(p)?3:l(g)||!o(p)?1:2:-1},m=function(g){var b=0,p=0,v=0,N="",D="",S="",E=(g=g||"").split("\\s+"),R=[];for(b=0;b<E.length;b+=1){for(R.push(""),p=0;p<E[b].length;p+=1)N=E[b][p],D=E[b][p-1],S=E[b][p+1],o(N)?(v=x(N,D,S),R[b]+=v!==-1?String.fromCharCode(t[N.charCodeAt(0)][v]):N):R[b]+=N;R[b]=u(R[b])}return R.join(" ")},y=s.__arabicParser__.processArabic=s.processArabic=function(){var g,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,p=[];if(Array.isArray(b)){var v=0;for(p=[],v=0;v<b.length;v+=1)Array.isArray(b[v])?p.push([m(b[v][0]),b[v][1],b[v][2]]):p.push([m(b[v])]);g=p}else g=m(b);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};s.events.push(["preProcessText",y])}(Ft.API),Ft.API.autoPrint=function(s){var t;switch((s=s||{}).variant=s.variant||"non-conform",s.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(s){var t=function(){var a=void 0;Object.defineProperty(this,"pdf",{get:function(){return a},set:function(l){a=l}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(l){r=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(a,r){var n;if((a=a||"2d")!=="2d")return null;for(n in r)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=r[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},s.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Ft.API),function(s){var t={left:0,top:0,bottom:0,right:0},a=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),n.call(this))},n=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var A=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return A},set:function(g){A=g}});var u=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var x=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return x},set:function(g){x=g}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(g){m=g}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(g){y=g}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},s.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},s.getTextDimensions=function(c,d){r.call(this);var A=(d=d||{}).fontSize||this.getFontSize(),u=d.font||this.getFont(),x=d.scaleFactor||this.internal.scaleFactor,m=0,y=0,g=0,b=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var p=d.maxWidth;p>0?typeof c=="string"?c=this.splitTextToSize(c,p):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(N,D){return N.concat(b.splitTextToSize(D,p))},[])):c=Array.isArray(c)?c:[c];for(var v=0;v<c.length;v++)m<(g=this.getStringUnitWidth(c[v],{font:u})*A)&&(m=g);return m!==0&&(y=c.length),{w:m/=x,h:Math.max((y*A*this.getLineHeightFactor()-A*(this.getLineHeightFactor()-1))/x,0)}},s.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=s.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var d=this.internal.__cell__.lastCell,A=this.internal.__cell__.padding,u=this.internal.__cell__.margins||t,x=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+u.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=u.top,m&&x&&(this.printHeaderRow(c.lineNumber,!0),c.y+=x[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,a===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-A,c.y+A,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+A,{align:"center",baseline:"top",maxWidth:c.width-A-A}):this.text(c.text,c.x+A,c.y+A,{align:"left",baseline:"top",maxWidth:c.width-A-A})),this.internal.__cell__.lastCell=c,this};s.table=function(c,d,A,u,x){if(r.call(this),!A)throw new Error("No data for PDF table.");var m,y,g,b,p=[],v=[],N=[],D={},S={},E=[],R=[],_=(x=x||{}).autoSize||!1,C=x.printHeaders!==!1,L=x.css&&x.css["font-size"]!==void 0?16*x.css["font-size"]:x.fontSize||12,f=x.margins||Object.assign({width:this.getPageWidth()},t),F=typeof x.padding=="number"?x.padding:3,M=x.headerBackgroundColor||"#c8c8c8",P=x.headerTextColor||"#000";if(n.call(this),this.internal.__cell__.printHeaders=C,this.internal.__cell__.margins=f,this.internal.__cell__.table_font_size=L,this.internal.__cell__.padding=F,this.internal.__cell__.headerBackgroundColor=M,this.internal.__cell__.headerTextColor=P,this.setFontSize(L),u==null)v=p=Object.keys(A[0]),N=p.map(function(){return"left"});else if(Array.isArray(u)&&hs(u[0])==="object")for(p=u.map(function(oe){return oe.name}),v=u.map(function(oe){return oe.prompt||oe.name||""}),N=u.map(function(oe){return oe.align||"left"}),m=0;m<u.length;m+=1)S[u[m].name]=u[m].width*(19.049976/25.4);else Array.isArray(u)&&typeof u[0]=="string"&&(v=p=u,N=p.map(function(){return"left"}));if(_||Array.isArray(u)&&typeof u[0]=="string")for(m=0;m<p.length;m+=1){for(D[b=p[m]]=A.map(function(oe){return oe[b]}),this.setFont(void 0,"bold"),E.push(this.getTextDimensions(v[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=D[b],this.setFont(void 0,"normal"),g=0;g<y.length;g+=1)E.push(this.getTextDimensions(y[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);S[b]=Math.max.apply(null,E)+F+F,E=[]}if(C){var Z={};for(m=0;m<p.length;m+=1)Z[p[m]]={},Z[p[m]].text=v[m],Z[p[m]].align=N[m];var O=l.call(this,Z,S);R=p.map(function(oe){return new i(c,d,S[oe],O,Z[oe].text,void 0,Z[oe].align)}),this.setTableHeaderRow(R),this.printHeaderRow(1,!1)}var X=u.reduce(function(oe,H){return oe[H.name]=H.align,oe},{});for(m=0;m<A.length;m+=1){"rowStart"in x&&x.rowStart instanceof Function&&x.rowStart({row:m,data:A[m]},this);var q=l.call(this,A[m],S);for(g=0;g<p.length;g+=1){var V=A[m][p[g]];"cellStart"in x&&x.cellStart instanceof Function&&x.cellStart({row:m,col:g,data:V},this),o.call(this,new i(c,d,S[p[g]],q,V,m+2,X[p[g]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var A=this.internal.__cell__.padding,u=this.internal.__cell__.table_font_size,x=this.internal.scaleFactor;return Object.keys(c).map(function(m){var y=c[m];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,d[m]-A-A)},this).map(function(m){return this.getLineHeightFactor()*m.length*u/x+A+A},this).reduce(function(m,y){return Math.max(m,y)},0)};s.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},s.printHeaderRow=function(c,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var A;if(a=!0,typeof this.internal.__cell__.headerFunction=="function"){var u=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(u[0],u[1],u[2],u[3],void 0,-1)}this.setFont(void 0,"bold");for(var x=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){A=this.internal.__cell__.tableHeaderRow[m].clone(),d&&(A.y=this.internal.__cell__.margins.top||0,x.push(A)),A.lineNumber=c;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,A),this.setTextColor(y)}x.length>0&&this.setTableHeaderRow(x),this.setFont(void 0,"normal"),a=!1}}(Ft.API);var m1={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},h1=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Z0=u1(h1),x1=[100,200,300,400,500,600,700,800,900],d8=u1(x1);function ep(s){var t=s.family.replace(/"|'/g,"").toLowerCase(),a=function(i){return m1[i=i||"normal"]?i:"normal"}(s.style),r=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(s.weight),n=function(i){return typeof Z0[i=i||"normal"]=="number"?i:"normal"}(s.stretch);return{family:t,style:a,weight:r,stretch:n,src:s.src||[],ref:s.ref||{name:t,style:[n,a,r].join(" ")}}}function Jy(s,t,a,r){var n;for(n=a;n>=0&&n<t.length;n+=r)if(s[t[n]])return s[t[n]];for(n=a;n>=0&&n<t.length;n-=r)if(s[t[n]])return s[t[n]]}var A8={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Yy={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Xy(s){return[s.stretch,s.style,s.weight,s.family].join(" ")}function u8(s,t,a){for(var r=(a=a||{}).defaultFontFamily||"times",n=Object.assign({},A8,a.genericFontFamilies||{}),i=null,o=null,l=0;l<t.length;++l)if(n[(i=ep(t[l])).family]&&(i.family=n[i.family]),s.hasOwnProperty(i.family)){o=s[i.family];break}if(!(o=o||s[r]))throw new Error("Could not find a font-family for the rule '"+Xy(i)+"' and default family '"+r+"'.");if(o=function(c,d){if(d[c])return d[c];var A=Z0[c],u=A<=Z0.normal?-1:1,x=Jy(d,h1,A,u);if(!x)throw new Error("Could not find a matching font-stretch value for "+c);return x}(i.stretch,o),o=function(c,d){if(d[c])return d[c];for(var A=m1[c],u=0;u<A.length;++u)if(d[A[u]])return d[A[u]];throw new Error("Could not find a matching font-style for "+c)}(i.style,o),!(o=function(c,d){if(d[c])return d[c];if(c===400&&d[500])return d[500];if(c===500&&d[400])return d[400];var A=d8[c],u=Jy(d,x1,A,c<400?-1:1);if(!u)throw new Error("Could not find a matching font-weight for value "+c);return u}(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+Xy(i)+"'.");return o}function Zy(s){return s.trimLeft()}function m8(s,t){for(var a=0;a<s.length;){if(s.charAt(a)===t)return[s.substring(0,a),s.substring(a+1)];a+=1}return null}function h8(s){var t=s.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],s.substring(t[0].length)]}var eu,ev,tv,Cx=["times"];(function(s){var t,a,r,n,i,o,l,c,d,A=function(I){return I=I||{},this.isStrokeTransparent=I.isStrokeTransparent||!1,this.strokeOpacity=I.strokeOpacity||1,this.strokeStyle=I.strokeStyle||"#000000",this.fillStyle=I.fillStyle||"#000000",this.isFillTransparent=I.isFillTransparent||!1,this.fillOpacity=I.fillOpacity||1,this.font=I.font||"10px sans-serif",this.textBaseline=I.textBaseline||"alphabetic",this.textAlign=I.textAlign||"left",this.lineWidth=I.lineWidth||1,this.lineJoin=I.lineJoin||"miter",this.lineCap=I.lineCap||"butt",this.path=I.path||[],this.transform=I.transform!==void 0?I.transform.clone():new c,this.globalCompositeOperation=I.globalCompositeOperation||"normal",this.globalAlpha=I.globalAlpha||1,this.clip_path=I.clip_path||[],this.currentPoint=I.currentPoint||new o,this.miterLimit=I.miterLimit||10,this.lastPoint=I.lastPoint||new o,this.lineDashOffset=I.lineDashOffset||0,this.lineDash=I.lineDash||[],this.margin=I.margin||[0,0,0,0],this.prevPageLastElemOffset=I.prevPageLastElemOffset||0,this.ignoreClearRect=typeof I.ignoreClearRect!="boolean"||I.ignoreClearRect,this};s.events.push(["initialized",function(){this.context2d=new u(this),t=this.internal.f2,a=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,n=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new A}]);var u=function(I){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var B=I;Object.defineProperty(this,"pdf",{get:function(){return B}});var $=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return $},set:function(Ce){$=!!Ce}});var T=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return T},set:function(Ce){T=!!Ce}});var ne=0;Object.defineProperty(this,"posX",{get:function(){return ne},set:function(Ce){isNaN(Ce)||(ne=Ce)}});var ue=0;Object.defineProperty(this,"posY",{get:function(){return ue},set:function(Ce){isNaN(Ce)||(ue=Ce)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(Ce){var K;typeof Ce=="number"?K=[Ce,Ce,Ce,Ce]:((K=new Array(4))[0]=Ce[0],K[1]=Ce.length>=2?Ce[1]:K[0],K[2]=Ce.length>=3?Ce[2]:K[0],K[3]=Ce.length>=4?Ce[3]:K[1]),d.margin=K}});var me=!1;Object.defineProperty(this,"autoPaging",{get:function(){return me},set:function(Ce){me=Ce}});var xe=0;Object.defineProperty(this,"lastBreak",{get:function(){return xe},set:function(Ce){xe=Ce}});var Be=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Be},set:function(Ce){Be=Ce}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(Ce){Ce instanceof A&&(d=Ce)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(Ce){d.path=Ce}});var ee=[];Object.defineProperty(this,"ctxStack",{get:function(){return ee},set:function(Ce){ee=Ce}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ce){var K;K=x(Ce),this.ctx.fillStyle=K.style,this.ctx.isFillTransparent=K.a===0,this.ctx.fillOpacity=K.a,this.pdf.setFillColor(K.r,K.g,K.b,{a:K.a}),this.pdf.setTextColor(K.r,K.g,K.b,{a:K.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ce){var K=x(Ce);this.ctx.strokeStyle=K.style,this.ctx.isStrokeTransparent=K.a===0,this.ctx.strokeOpacity=K.a,K.a===0?this.pdf.setDrawColor(255,255,255):(K.a,this.pdf.setDrawColor(K.r,K.g,K.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ce){["butt","round","square"].indexOf(Ce)!==-1&&(this.ctx.lineCap=Ce,this.pdf.setLineCap(Ce))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ce){isNaN(Ce)||(this.ctx.lineWidth=Ce,this.pdf.setLineWidth(Ce))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ce){["bevel","round","miter"].indexOf(Ce)!==-1&&(this.ctx.lineJoin=Ce,this.pdf.setLineJoin(Ce))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ce){isNaN(Ce)||(this.ctx.miterLimit=Ce,this.pdf.setMiterLimit(Ce))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ce){this.ctx.textBaseline=Ce}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ce){["right","end","center","left","start"].indexOf(Ce)!==-1&&(this.ctx.textAlign=Ce)}});var je=null;function Pe(Ce,K){if(je===null){var Me=function(qe){var re=[];return Object.keys(qe).forEach(function(ie){qe[ie].forEach(function(ve){var ye=null;switch(ve){case"bold":ye={family:ie,weight:"bold"};break;case"italic":ye={family:ie,style:"italic"};break;case"bolditalic":ye={family:ie,weight:"bold",style:"italic"};break;case"":case"normal":ye={family:ie}}ye!==null&&(ye.ref={name:ie,style:ve},re.push(ye))})}),re}(Ce.getFontList());je=function(qe){for(var re={},ie=0;ie<qe.length;++ie){var ve=ep(qe[ie]),ye=ve.family,$e=ve.stretch,it=ve.style,Ie=ve.weight;re[ye]=re[ye]||{},re[ye][$e]=re[ye][$e]||{},re[ye][$e][it]=re[ye][$e][it]||{},re[ye][$e][it][Ie]=ve}return re}(Me.concat(K))}return je}var Xe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Xe},set:function(Ce){je=null,Xe=Ce}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ce){var K;if(this.ctx.font=Ce,(K=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ce))!==null){var Me=K[1],qe=(K[2],K[3]),re=K[4],ie=(K[5],K[6]),ve=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(re)[2];re=Math.floor(ve==="px"?parseFloat(re)*this.pdf.internal.scaleFactor:ve==="em"?parseFloat(re)*this.pdf.getFontSize():parseFloat(re)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(re);var ye=function(dt){var Bt,et,ta=[],Pt=dt.trim();if(Pt==="")return Cx;if(Pt in Yy)return[Yy[Pt]];for(;Pt!=="";){switch(et=null,Bt=(Pt=Zy(Pt)).charAt(0)){case'"':case"'":et=m8(Pt.substring(1),Bt);break;default:et=h8(Pt)}if(et===null||(ta.push(et[0]),(Pt=Zy(et[1]))!==""&&Pt.charAt(0)!==","))return Cx;Pt=Pt.replace(/^,/,"")}return ta}(ie);if(this.fontFaces){var $e=u8(Pe(this.pdf,this.fontFaces),ye.map(function(dt){return{family:dt,stretch:"normal",weight:qe,style:Me}}));this.pdf.setFont($e.ref.name,$e.ref.style)}else{var it="";(qe==="bold"||parseInt(qe,10)>=700||Me==="bold")&&(it="bold"),Me==="italic"&&(it+="italic"),it.length===0&&(it="normal");for(var Ie="",he={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Oe=0;Oe<ye.length;Oe++){if(this.pdf.internal.getFont(ye[Oe],it,{noFallback:!0,disableWarning:!0})!==void 0){Ie=ye[Oe];break}if(it==="bolditalic"&&this.pdf.internal.getFont(ye[Oe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ie=ye[Oe],it="bold";else if(this.pdf.internal.getFont(ye[Oe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ie=ye[Oe],it="normal";break}}if(Ie===""){for(var He=0;He<ye.length;He++)if(he[ye[He]]){Ie=he[ye[He]];break}}Ie=Ie===""?"Times":Ie,this.pdf.setFont(Ie,it)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ce){this.ctx.globalCompositeOperation=Ce}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ce){this.ctx.globalAlpha=Ce}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ce){this.ctx.lineDashOffset=Ce,H.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ce){this.ctx.lineDash=Ce,H.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ce){this.ctx.ignoreClearRect=!!Ce}})};u.prototype.setLineDash=function(I){this.lineDash=I},u.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},u.prototype.fill=function(){D.call(this,"fill",!1)},u.prototype.stroke=function(){D.call(this,"stroke",!1)},u.prototype.beginPath=function(){this.path=[{type:"begin"}]},u.prototype.moveTo=function(I,B){if(isNaN(I)||isNaN(B))throw fs.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var $=this.ctx.transform.applyToPoint(new o(I,B));this.path.push({type:"mt",x:$.x,y:$.y}),this.ctx.lastPoint=new o(I,B)},u.prototype.closePath=function(){var I=new o(0,0),B=0;for(B=this.path.length-1;B!==-1;B--)if(this.path[B].type==="begin"&&hs(this.path[B+1])==="object"&&typeof this.path[B+1].x=="number"){I=new o(this.path[B+1].x,this.path[B+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(I.x,I.y)},u.prototype.lineTo=function(I,B){if(isNaN(I)||isNaN(B))throw fs.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var $=this.ctx.transform.applyToPoint(new o(I,B));this.path.push({type:"lt",x:$.x,y:$.y}),this.ctx.lastPoint=new o($.x,$.y)},u.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),D.call(this,null,!0)},u.prototype.quadraticCurveTo=function(I,B,$,T){if(isNaN($)||isNaN(T)||isNaN(I)||isNaN(B))throw fs.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ne=this.ctx.transform.applyToPoint(new o($,T)),ue=this.ctx.transform.applyToPoint(new o(I,B));this.path.push({type:"qct",x1:ue.x,y1:ue.y,x:ne.x,y:ne.y}),this.ctx.lastPoint=new o(ne.x,ne.y)},u.prototype.bezierCurveTo=function(I,B,$,T,ne,ue){if(isNaN(ne)||isNaN(ue)||isNaN(I)||isNaN(B)||isNaN($)||isNaN(T))throw fs.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var me=this.ctx.transform.applyToPoint(new o(ne,ue)),xe=this.ctx.transform.applyToPoint(new o(I,B)),Be=this.ctx.transform.applyToPoint(new o($,T));this.path.push({type:"bct",x1:xe.x,y1:xe.y,x2:Be.x,y2:Be.y,x:me.x,y:me.y}),this.ctx.lastPoint=new o(me.x,me.y)},u.prototype.arc=function(I,B,$,T,ne,ue){if(isNaN(I)||isNaN(B)||isNaN($)||isNaN(T)||isNaN(ne))throw fs.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ue=!!ue,!this.ctx.transform.isIdentity){var me=this.ctx.transform.applyToPoint(new o(I,B));I=me.x,B=me.y;var xe=this.ctx.transform.applyToPoint(new o(0,$)),Be=this.ctx.transform.applyToPoint(new o(0,0));$=Math.sqrt(Math.pow(xe.x-Be.x,2)+Math.pow(xe.y-Be.y,2))}Math.abs(ne-T)>=2*Math.PI&&(T=0,ne=2*Math.PI),this.path.push({type:"arc",x:I,y:B,radius:$,startAngle:T,endAngle:ne,counterclockwise:ue})},u.prototype.arcTo=function(I,B,$,T,ne){throw new Error("arcTo not implemented.")},u.prototype.rect=function(I,B,$,T){if(isNaN(I)||isNaN(B)||isNaN($)||isNaN(T))throw fs.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(I,B),this.lineTo(I+$,B),this.lineTo(I+$,B+T),this.lineTo(I,B+T),this.lineTo(I,B),this.lineTo(I+$,B),this.lineTo(I,B)},u.prototype.fillRect=function(I,B,$,T){if(isNaN(I)||isNaN(B)||isNaN($)||isNaN(T))throw fs.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ne={};this.lineCap!=="butt"&&(ne.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ne.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(I,B,$,T),this.fill(),ne.hasOwnProperty("lineCap")&&(this.lineCap=ne.lineCap),ne.hasOwnProperty("lineJoin")&&(this.lineJoin=ne.lineJoin)}},u.prototype.strokeRect=function(I,B,$,T){if(isNaN(I)||isNaN(B)||isNaN($)||isNaN(T))throw fs.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(I,B,$,T),this.stroke())},u.prototype.clearRect=function(I,B,$,T){if(isNaN(I)||isNaN(B)||isNaN($)||isNaN(T))throw fs.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(I,B,$,T))},u.prototype.save=function(I){I=typeof I!="boolean"||I;for(var B=this.pdf.internal.getCurrentPageInfo().pageNumber,$=0;$<this.pdf.internal.getNumberOfPages();$++)this.pdf.setPage($+1),this.pdf.internal.out("q");if(this.pdf.setPage(B),I){this.ctx.fontSize=this.pdf.internal.getFontSize();var T=new A(this.ctx);this.ctxStack.push(this.ctx),this.ctx=T}},u.prototype.restore=function(I){I=typeof I!="boolean"||I;for(var B=this.pdf.internal.getCurrentPageInfo().pageNumber,$=0;$<this.pdf.internal.getNumberOfPages();$++)this.pdf.setPage($+1),this.pdf.internal.out("Q");this.pdf.setPage(B),I&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},u.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var x=function(I){var B,$,T,ne;if(I.isCanvasGradient===!0&&(I=I.getColor()),!I)return{r:0,g:0,b:0,a:0,style:I};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(I))B=0,$=0,T=0,ne=0;else{var ue=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(I);if(ue!==null)B=parseInt(ue[1]),$=parseInt(ue[2]),T=parseInt(ue[3]),ne=1;else if((ue=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(I))!==null)B=parseInt(ue[1]),$=parseInt(ue[2]),T=parseInt(ue[3]),ne=parseFloat(ue[4]);else{if(ne=1,typeof I=="string"&&I.charAt(0)!=="#"){var me=new i1(I);I=me.ok?me.toHex():"#000000"}I.length===4?(B=I.substring(1,2),B+=B,$=I.substring(2,3),$+=$,T=I.substring(3,4),T+=T):(B=I.substring(1,3),$=I.substring(3,5),T=I.substring(5,7)),B=parseInt(B,16),$=parseInt($,16),T=parseInt(T,16)}}return{r:B,g:$,b:T,a:ne,style:I}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};u.prototype.fillText=function(I,B,$,T){if(isNaN(B)||isNaN($)||typeof I!="string")throw fs.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(T=isNaN(T)?void 0:T,!m.call(this)){var ne=q(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;F.call(this,{text:I,x:B,y:$,scale:ue,angle:ne,align:this.textAlign,maxWidth:T})}},u.prototype.strokeText=function(I,B,$,T){if(isNaN(B)||isNaN($)||typeof I!="string")throw fs.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){T=isNaN(T)?void 0:T;var ne=q(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;F.call(this,{text:I,x:B,y:$,scale:ue,renderingMode:"stroke",angle:ne,align:this.textAlign,maxWidth:T})}},u.prototype.measureText=function(I){if(typeof I!="string")throw fs.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var B=this.pdf,$=this.pdf.internal.scaleFactor,T=B.internal.getFontSize(),ne=B.getStringUnitWidth(I)*T/B.internal.scaleFactor,ue=function(me){var xe=(me=me||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return xe}}),this};return new ue({width:ne*=Math.round(96*$/72*1e4)/1e4})},u.prototype.scale=function(I,B){if(isNaN(I)||isNaN(B))throw fs.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var $=new c(I,0,0,B,0,0);this.ctx.transform=this.ctx.transform.multiply($)},u.prototype.rotate=function(I){if(isNaN(I))throw fs.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var B=new c(Math.cos(I),Math.sin(I),-Math.sin(I),Math.cos(I),0,0);this.ctx.transform=this.ctx.transform.multiply(B)},u.prototype.translate=function(I,B){if(isNaN(I)||isNaN(B))throw fs.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var $=new c(1,0,0,1,I,B);this.ctx.transform=this.ctx.transform.multiply($)},u.prototype.transform=function(I,B,$,T,ne,ue){if(isNaN(I)||isNaN(B)||isNaN($)||isNaN(T)||isNaN(ne)||isNaN(ue))throw fs.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var me=new c(I,B,$,T,ne,ue);this.ctx.transform=this.ctx.transform.multiply(me)},u.prototype.setTransform=function(I,B,$,T,ne,ue){I=isNaN(I)?1:I,B=isNaN(B)?0:B,$=isNaN($)?0:$,T=isNaN(T)?1:T,ne=isNaN(ne)?0:ne,ue=isNaN(ue)?0:ue,this.ctx.transform=new c(I,B,$,T,ne,ue)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};u.prototype.drawImage=function(I,B,$,T,ne,ue,me,xe,Be){var ee=this.pdf.getImageProperties(I),je=1,Pe=1,Xe=1,Ce=1;T!==void 0&&xe!==void 0&&(Xe=xe/T,Ce=Be/ne,je=ee.width/T*xe/T,Pe=ee.height/ne*Be/ne),ue===void 0&&(ue=B,me=$,B=0,$=0),T!==void 0&&xe===void 0&&(xe=T,Be=ne),T===void 0&&xe===void 0&&(xe=ee.width,Be=ee.height);for(var K,Me=this.ctx.transform.decompose(),qe=q(Me.rotate.shx),re=new c,ie=(re=(re=(re=re.multiply(Me.translate)).multiply(Me.skew)).multiply(Me.scale)).applyToRectangle(new l(ue-B*Xe,me-$*Ce,T*je,ne*Pe)),ve=b.call(this,ie),ye=[],$e=0;$e<ve.length;$e+=1)ye.indexOf(ve[$e])===-1&&ye.push(ve[$e]);if(N(ye),this.autoPaging)for(var it=ye[0],Ie=ye[ye.length-1],he=it;he<Ie+1;he++){this.pdf.setPage(he);var Oe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],He=he===1?this.posY+this.margin[0]:this.margin[0],dt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Bt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],et=he===1?0:dt+(he-2)*Bt;if(this.ctx.clip_path.length!==0){var ta=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(K,this.posX+this.margin[3],-et+He+this.ctx.prevPageLastElemOffset),S.call(this,"fill",!0),this.path=ta}var Pt=JSON.parse(JSON.stringify(ie));Pt=v([Pt],this.posX+this.margin[3],-et+He+this.ctx.prevPageLastElemOffset)[0];var de=(he>it||he<Ie)&&g.call(this);de&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Oe,Bt,null).clip().discardPath()),this.pdf.addImage(I,"JPEG",Pt.x,Pt.y,Pt.w,Pt.h,null,null,qe),de&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(I,"JPEG",ie.x,ie.y,ie.w,ie.h,null,null,qe)};var b=function(I,B,$){var T=[];B=B||this.pdf.internal.pageSize.width,$=$||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ne=this.posY+this.ctx.prevPageLastElemOffset;switch(I.type){default:case"mt":case"lt":T.push(Math.floor((I.y+ne)/$)+1);break;case"arc":T.push(Math.floor((I.y+ne-I.radius)/$)+1),T.push(Math.floor((I.y+ne+I.radius)/$)+1);break;case"qct":var ue=V(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x,I.y);T.push(Math.floor((ue.y+ne)/$)+1),T.push(Math.floor((ue.y+ue.h+ne)/$)+1);break;case"bct":var me=oe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x2,I.y2,I.x,I.y);T.push(Math.floor((me.y+ne)/$)+1),T.push(Math.floor((me.y+me.h+ne)/$)+1);break;case"rect":T.push(Math.floor((I.y+ne)/$)+1),T.push(Math.floor((I.y+I.h+ne)/$)+1)}for(var xe=0;xe<T.length;xe+=1)for(;this.pdf.internal.getNumberOfPages()<T[xe];)p.call(this);return T},p=function(){var I=this.fillStyle,B=this.strokeStyle,$=this.font,T=this.lineCap,ne=this.lineWidth,ue=this.lineJoin;this.pdf.addPage(),this.fillStyle=I,this.strokeStyle=B,this.font=$,this.lineCap=T,this.lineWidth=ne,this.lineJoin=ue},v=function(I,B,$){for(var T=0;T<I.length;T++)switch(I[T].type){case"bct":I[T].x2+=B,I[T].y2+=$;case"qct":I[T].x1+=B,I[T].y1+=$;case"mt":case"lt":case"arc":default:I[T].x+=B,I[T].y+=$}return I},N=function(I){return I.sort(function(B,$){return B-$})},D=function(I,B){for(var $,T,ne=this.fillStyle,ue=this.strokeStyle,me=this.lineCap,xe=this.lineWidth,Be=Math.abs(xe*this.ctx.transform.scaleX),ee=this.lineJoin,je=JSON.parse(JSON.stringify(this.path)),Pe=JSON.parse(JSON.stringify(this.path)),Xe=[],Ce=0;Ce<Pe.length;Ce++)if(Pe[Ce].x!==void 0)for(var K=b.call(this,Pe[Ce]),Me=0;Me<K.length;Me+=1)Xe.indexOf(K[Me])===-1&&Xe.push(K[Me]);for(var qe=0;qe<Xe.length;qe++)for(;this.pdf.internal.getNumberOfPages()<Xe[qe];)p.call(this);if(N(Xe),this.autoPaging)for(var re=Xe[0],ie=Xe[Xe.length-1],ve=re;ve<ie+1;ve++){this.pdf.setPage(ve),this.fillStyle=ne,this.strokeStyle=ue,this.lineCap=me,this.lineWidth=Be,this.lineJoin=ee;var ye=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],$e=ve===1?this.posY+this.margin[0]:this.margin[0],it=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ie=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],he=ve===1?0:it+(ve-2)*Ie;if(this.ctx.clip_path.length!==0){var Oe=this.path;$=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v($,this.posX+this.margin[3],-he+$e+this.ctx.prevPageLastElemOffset),S.call(this,I,!0),this.path=Oe}if(T=JSON.parse(JSON.stringify(je)),this.path=v(T,this.posX+this.margin[3],-he+$e+this.ctx.prevPageLastElemOffset),B===!1||ve===0){var He=(ve>re||ve<ie)&&g.call(this);He&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ye,Ie,null).clip().discardPath()),S.call(this,I,B),He&&this.pdf.restoreGraphicsState()}this.lineWidth=xe}else this.lineWidth=Be,S.call(this,I,B),this.lineWidth=xe;this.path=je},S=function(I,B){if((I!=="stroke"||B||!y.call(this))&&(I==="stroke"||B||!m.call(this))){for(var $,T,ne=[],ue=this.path,me=0;me<ue.length;me++){var xe=ue[me];switch(xe.type){case"begin":ne.push({begin:!0});break;case"close":ne.push({close:!0});break;case"mt":ne.push({start:xe,deltas:[],abs:[]});break;case"lt":var Be=ne.length;if(ue[me-1]&&!isNaN(ue[me-1].x)&&($=[xe.x-ue[me-1].x,xe.y-ue[me-1].y],Be>0)){for(;Be>=0;Be--)if(ne[Be-1].close!==!0&&ne[Be-1].begin!==!0){ne[Be-1].deltas.push($),ne[Be-1].abs.push(xe);break}}break;case"bct":$=[xe.x1-ue[me-1].x,xe.y1-ue[me-1].y,xe.x2-ue[me-1].x,xe.y2-ue[me-1].y,xe.x-ue[me-1].x,xe.y-ue[me-1].y],ne[ne.length-1].deltas.push($);break;case"qct":var ee=ue[me-1].x+2/3*(xe.x1-ue[me-1].x),je=ue[me-1].y+2/3*(xe.y1-ue[me-1].y),Pe=xe.x+2/3*(xe.x1-xe.x),Xe=xe.y+2/3*(xe.y1-xe.y),Ce=xe.x,K=xe.y;$=[ee-ue[me-1].x,je-ue[me-1].y,Pe-ue[me-1].x,Xe-ue[me-1].y,Ce-ue[me-1].x,K-ue[me-1].y],ne[ne.length-1].deltas.push($);break;case"arc":ne.push({deltas:[],abs:[],arc:!0}),Array.isArray(ne[ne.length-1].abs)&&ne[ne.length-1].abs.push(xe)}}T=B?null:I==="stroke"?"stroke":"fill";for(var Me=!1,qe=0;qe<ne.length;qe++)if(ne[qe].arc)for(var re=ne[qe].abs,ie=0;ie<re.length;ie++){var ve=re[ie];ve.type==="arc"?_.call(this,ve.x,ve.y,ve.radius,ve.startAngle,ve.endAngle,ve.counterclockwise,void 0,B,!Me):M.call(this,ve.x,ve.y),Me=!0}else if(ne[qe].close===!0)this.pdf.internal.out("h"),Me=!1;else if(ne[qe].begin!==!0){var ye=ne[qe].start.x,$e=ne[qe].start.y;P.call(this,ne[qe].deltas,ye,$e),Me=!0}T&&C.call(this,T),B&&L.call(this)}},E=function(I){var B=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,$=B*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return I-$;case"top":return I+B-$;case"hanging":return I+B-2*$;case"middle":return I+B/2-$;case"ideographic":return I;case"alphabetic":default:return I}},R=function(I){return I+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};u.prototype.createLinearGradient=function(){var I=function(){};return I.colorStops=[],I.addColorStop=function(B,$){this.colorStops.push([B,$])},I.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},I.isCanvasGradient=!0,I},u.prototype.createPattern=function(){return this.createLinearGradient()},u.prototype.createRadialGradient=function(){return this.createLinearGradient()};var _=function(I,B,$,T,ne,ue,me,xe,Be){for(var ee=O.call(this,$,T,ne,ue),je=0;je<ee.length;je++){var Pe=ee[je];je===0&&(Be?f.call(this,Pe.x1+I,Pe.y1+B):M.call(this,Pe.x1+I,Pe.y1+B)),Z.call(this,I,B,Pe.x2,Pe.y2,Pe.x3,Pe.y3,Pe.x4,Pe.y4)}xe?L.call(this):C.call(this,me)},C=function(I){switch(I){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},f=function(I,B){this.pdf.internal.out(a(I)+" "+r(B)+" m")},F=function(I){var B;switch(I.align){case"right":case"end":B="right";break;case"center":B="center";break;case"left":case"start":default:B="left"}var $=this.pdf.getTextDimensions(I.text),T=E.call(this,I.y),ne=R.call(this,T)-$.h,ue=this.ctx.transform.applyToPoint(new o(I.x,T)),me=this.ctx.transform.decompose(),xe=new c;xe=(xe=(xe=xe.multiply(me.translate)).multiply(me.skew)).multiply(me.scale);for(var Be,ee,je,Pe=this.ctx.transform.applyToRectangle(new l(I.x,T,$.w,$.h)),Xe=xe.applyToRectangle(new l(I.x,ne,$.w,$.h)),Ce=b.call(this,Xe),K=[],Me=0;Me<Ce.length;Me+=1)K.indexOf(Ce[Me])===-1&&K.push(Ce[Me]);if(N(K),this.autoPaging)for(var qe=K[0],re=K[K.length-1],ie=qe;ie<re+1;ie++){this.pdf.setPage(ie);var ve=ie===1?this.posY+this.margin[0]:this.margin[0],ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$e=this.pdf.internal.pageSize.height-this.margin[2],it=$e-this.margin[0],Ie=this.pdf.internal.pageSize.width-this.margin[1],he=Ie-this.margin[3],Oe=ie===1?0:ye+(ie-2)*it;if(this.ctx.clip_path.length!==0){var He=this.path;Be=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(Be,this.posX+this.margin[3],-1*Oe+ve),S.call(this,"fill",!0),this.path=He}var dt=v([JSON.parse(JSON.stringify(Xe))],this.posX+this.margin[3],-Oe+ve+this.ctx.prevPageLastElemOffset)[0];I.scale>=.01&&(ee=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ee*I.scale),je=this.lineWidth,this.lineWidth=je*I.scale);var Bt=this.autoPaging!=="text";if(Bt||dt.y+dt.h<=$e){if(Bt||dt.y>=ve&&dt.x<=Ie){var et=Bt?I.text:this.pdf.splitTextToSize(I.text,I.maxWidth||Ie-dt.x)[0],ta=v([JSON.parse(JSON.stringify(Pe))],this.posX+this.margin[3],-Oe+ve+this.ctx.prevPageLastElemOffset)[0],Pt=Bt&&(ie>qe||ie<re)&&g.call(this);Pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],he,it,null).clip().discardPath()),this.pdf.text(et,ta.x,ta.y,{angle:I.angle,align:B,renderingMode:I.renderingMode}),Pt&&this.pdf.restoreGraphicsState()}}else dt.y<$e&&(this.ctx.prevPageLastElemOffset+=$e-dt.y);I.scale>=.01&&(this.pdf.setFontSize(ee),this.lineWidth=je)}else I.scale>=.01&&(ee=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ee*I.scale),je=this.lineWidth,this.lineWidth=je*I.scale),this.pdf.text(I.text,ue.x+this.posX,ue.y+this.posY,{angle:I.angle,align:B,renderingMode:I.renderingMode,maxWidth:I.maxWidth}),I.scale>=.01&&(this.pdf.setFontSize(ee),this.lineWidth=je)},M=function(I,B,$,T){$=$||0,T=T||0,this.pdf.internal.out(a(I+$)+" "+r(B+T)+" l")},P=function(I,B,$){return this.pdf.lines(I,B,$,null,null)},Z=function(I,B,$,T,ne,ue,me,xe){this.pdf.internal.out([t(n($+I)),t(i(T+B)),t(n(ne+I)),t(i(ue+B)),t(n(me+I)),t(i(xe+B)),"c"].join(" "))},O=function(I,B,$,T){for(var ne=2*Math.PI,ue=Math.PI/2;B>$;)B-=ne;var me=Math.abs($-B);me<ne&&T&&(me=ne-me);for(var xe=[],Be=T?-1:1,ee=B;me>1e-5;){var je=ee+Be*Math.min(me,ue);xe.push(X.call(this,I,ee,je)),me-=Math.abs(je-ee),ee=je}return xe},X=function(I,B,$){var T=($-B)/2,ne=I*Math.cos(T),ue=I*Math.sin(T),me=ne,xe=-ue,Be=me*me+xe*xe,ee=Be+me*ne+xe*ue,je=4/3*(Math.sqrt(2*Be*ee)-ee)/(me*ue-xe*ne),Pe=me-je*xe,Xe=xe+je*me,Ce=Pe,K=-Xe,Me=T+B,qe=Math.cos(Me),re=Math.sin(Me);return{x1:I*Math.cos(B),y1:I*Math.sin(B),x2:Pe*qe-Xe*re,y2:Pe*re+Xe*qe,x3:Ce*qe-K*re,y3:Ce*re+K*qe,x4:I*Math.cos($),y4:I*Math.sin($)}},q=function(I){return 180*I/Math.PI},V=function(I,B,$,T,ne,ue){var me=I+.5*($-I),xe=B+.5*(T-B),Be=ne+.5*($-ne),ee=ue+.5*(T-ue),je=Math.min(I,ne,me,Be),Pe=Math.max(I,ne,me,Be),Xe=Math.min(B,ue,xe,ee),Ce=Math.max(B,ue,xe,ee);return new l(je,Xe,Pe-je,Ce-Xe)},oe=function(I,B,$,T,ne,ue,me,xe){var Be,ee,je,Pe,Xe,Ce,K,Me,qe,re,ie,ve,ye,$e,it=$-I,Ie=T-B,he=ne-$,Oe=ue-T,He=me-ne,dt=xe-ue;for(ee=0;ee<41;ee++)qe=(K=(je=I+(Be=ee/40)*it)+Be*((Xe=$+Be*he)-je))+Be*(Xe+Be*(ne+Be*He-Xe)-K),re=(Me=(Pe=B+Be*Ie)+Be*((Ce=T+Be*Oe)-Pe))+Be*(Ce+Be*(ue+Be*dt-Ce)-Me),ee==0?(ie=qe,ve=re,ye=qe,$e=re):(ie=Math.min(ie,qe),ve=Math.min(ve,re),ye=Math.max(ye,qe),$e=Math.max($e,re));return new l(Math.round(ie),Math.round(ve),Math.round(ye-ie),Math.round($e-ve))},H=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var I,B,$=(I=this.ctx.lineDash,B=this.ctx.lineDashOffset,JSON.stringify({lineDash:I,lineDashOffset:B}));this.prevLineDash!==$&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=$)}}})(Ft.API),function(s){var t=function(i){var o,l,c,d,A,u,x,m,y,g;for(l=[],c=0,d=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;d>c;c+=4)(A=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(u=(A=((A=((A=((A=(A-(g=A%85))/85)-(y=A%85))/85)-(m=A%85))/85)-(x=A%85))/85)%85,l.push(u+33,x+33,m+33,y+33,g+33)):l.push(122);return function(b,p){for(var v=p;v>0;v--)b.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},a=function(i){var o,l,c,d,A,u=String,x="length",m=255,y="charCodeAt",g="slice",b="replace";for(i[g](-2),i=i[g](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),c=[],d=0,A=(i+=o="uuuuu"[g](i[x]%5||5))[x];A>d;d+=5)l=52200625*(i[y](d)-33)+614125*(i[y](d+1)-33)+7225*(i[y](d+2)-33)+85*(i[y](d+3)-33)+(i[y](d+4)-33),c.push(m&l>>24,m&l>>16,m&l>>8,m&l);return function(p,v){for(var N=v;N>0;N--)p.pop()}(c,o[x]),u.fromCharCode.apply(u,c)},r=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},n=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=G0(o)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};s.processDataByFilters=function(i,o){var l=0,c=i||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=a(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=r(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(A){return("0"+A.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=n(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(Ft.API),function(s){s.loadFile=function(t,a,r){return function(n,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,d,A){var u=new XMLHttpRequest,x=0,m=function(y){var g=y.length,b=[],p=String.fromCharCode;for(x=0;x<g;x+=1)b.push(p(255&y.charCodeAt(x)));return b.join("")};if(u.open("GET",c,!d),u.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(u.onload=function(){u.status===200?A(m(this.responseText)):A(void 0)}),u.send(null),d&&u.status===200)return m(u.responseText)}(n,i,o)}catch{}return l}(t,a,r)},s.loadImageFile=s.loadFile}(Ft.API),function(s){function t(){return(Dt.html2canvas?Promise.resolve(Dt.html2canvas):fi(()=>Promise.resolve().then(()=>I7),void 0)).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function a(){return(Dt.DOMPurify?Promise.resolve(Dt.DOMPurify):fi(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var l=hs(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},n=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},i=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return d=(d=d.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(a).then(function(c){return this.set({src:n("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(d,A){for(var u=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),x=d.firstChild;x;x=x.nextSibling)A!==!0&&x.nodeType===1&&x.nodeName==="SCRIPT"||u.appendChild(c(x,A));return d.nodeType===1&&(d.nodeName==="CANVAS"?(u.width=d.width,u.height=d.height,u.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(u.value=d.value),u.addEventListener("load",function(){u.scrollTop=d.scrollTop,u.scrollLeft=d.scrollLeft},!0)),u}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=n("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=n("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(n("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,A=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,u=Object.assign({async:!0,allowTaint:!0,scale:A,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete u.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var x=0;x<d.length;++x){var m=d[x],y=m.src.find(function(g){return g.format==="truetype"});y&&c.addFont(y.url,m.ref.name,m.ref.style)}return u.windowHeight=u.windowHeight||0,u.windowHeight=u.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):u.windowHeight,c.context2d.save(!0),l(this.prop.container,u)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(r(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in i.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},i.prototype.get=function(o,l){return this.then(function(){var c=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},i.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(o=o||Ft.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(d,A){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(u){return c.updateProgress(null,d),u}).then(d,A).then(function(u){return c.updateProgress(1),u})})},i.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),A=c.call(d,o,l);return i.convert(A,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Ft.getPageSize=function(o,l,c){if(hs(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var A,u=(""+c).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":A=1;break;case"mm":A=72/25.4;break;case"cm":A=72/2.54;break;case"in":A=72;break;case"px":A=.75;break;case"pc":case"em":A=12;break;case"ex":A=6;break;default:throw"Invalid unit: "+l}var m,y=0,g=0;if(x.hasOwnProperty(u))y=x[u][1]/A,g=x[u][0]/A;else try{y=c[1],g=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",g>y&&(m=g,g=y,y=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",y>g&&(m=g,g=y,y=m)}return{width:g,height:y,unit:l,k:A,orientation:o}},s.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(ep):null;var c=new i(l);return l.worker?c:c.from(o).doCallback()}}(Ft.API),Ft.API.addJS=function(s){return tv=s,this.internal.events.subscribe("postPutResources",function(){eu=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(eu+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),ev=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+tv+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){eu!==void 0&&ev!==void 0&&this.internal.out("/Names <</JavaScript "+eu+" 0 R>>")}),this},function(s){var t;s.events.push(["postPutResources",function(){var a=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var n=a.outline.render().split(/\r\n/),i=0;i<n.length;i++){var o=n[i],l=r.exec(o);if(l!=null){var c=l[1];a.internal.newObjectDeferredBegin(c,!1)}a.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,A=[];for(i=0;i<d;i++){var u=a.internal.newObject();A.push(u);var x=a.internal.getPageInfo(i+1);a.internal.write("<< /D["+x.objId+" 0 R /XYZ null null null]>> endobj")}var m=a.internal.newObject();for(a.internal.write("<< /Names [ "),i=0;i<A.length;i++)a.internal.write("(page_"+(i+1)+")"+A[i]+" 0 R");a.internal.write(" ] >>","endobj"),t=a.internal.newObject(),a.internal.write("<< /Dests "+m+" 0 R"),a.internal.write(">>","endobj")}}]),s.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),s.events.push(["initialized",function(){var a=this;a.outline={createNamedDestinations:!1,root:{children:[]}},a.outline.add=function(r,n,i){var o={title:n,options:i,children:[]};return r==null&&(r=this.root),r.children.push(o),o},a.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=a,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},a.outline.genIds_r=function(r){r.id=a.internal.newObjectDeferred();for(var n=0;n<r.children.length;n++)this.genIds_r(r.children[n])},a.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},a.outline.renderItems=function(r){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<r.children.length;i++){var o=r.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),i>0&&this.line("/Prev "+this.makeRef(r.children[i-1])),i<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=a.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},a.outline.line=function(r){this.ctx.val+=r+`\r
`},a.outline.makeRef=function(r){return r.id+" 0 R"},a.outline.makeString=function(r){return"("+a.internal.pdfEscape(r)+")"},a.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},a.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},a.outline.count_r=function(r,n){for(var i=0;i<n.children.length;i++)r.count++,this.count_r(r,n.children[i]);return r.count}}])}(Ft.API),function(s){var t=[192,193,194,195,196,197,198,199];s.processJPEG=function(a,r,n,i,o,l){var c,d=this.decode.DCT_DECODE,A=null;if(typeof a=="string"||this.__addimage__.isArrayBuffer(a)||this.__addimage__.isArrayBufferView(a)){switch(a=o||a,a=this.__addimage__.isArrayBuffer(a)?new Uint8Array(a):a,(c=function(u){for(var x,m=256*u.charCodeAt(4)+u.charCodeAt(5),y=u.length,g={width:0,height:0,numcomponents:1},b=4;b<y;b+=2){if(b+=m,t.indexOf(u.charCodeAt(b+1))!==-1){x=256*u.charCodeAt(b+5)+u.charCodeAt(b+6),g={width:256*u.charCodeAt(b+7)+u.charCodeAt(b+8),height:x,numcomponents:u.charCodeAt(b+9)};break}m=256*u.charCodeAt(b+2)+u.charCodeAt(b+3)}return g}(a=this.__addimage__.isArrayBufferView(a)?this.__addimage__.arrayBufferToBinaryString(a):a)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}A={data:a,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:r,alias:n}}return A}}(Ft.API);var Yo,tu,sv,av,rv,x8=function(){var s,t,a;function r(i){var o,l,c,d,A,u,x,m,y,g,b,p,v,N;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},u=null;;){switch(o=this.readUInt32(),y=(function(){var D,S;for(S=[],D=0;D<4;++D)S.push(String.fromCharCode(this.data[this.pos++]));return S}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":u&&this.animation.frames.push(u),this.pos+=4,u={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},A=this.readUInt16(),d=this.readUInt16()||100,u.delay=1e3*A/d,u.disposeOp=this.data[this.pos++],u.blendOp=this.data[this.pos++],u.data=[];break;case"IDAT":case"fdAT":for(y==="fdAT"&&(this.pos+=4,o-=4),i=(u!=null?u.data:void 0)||this.imgData,p=0;0<=o?p<o:p>o;0<=o?++p:--p)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((g=c-this.transparency.indexed.length)>0)for(v=0;0<=g?v<g:v>g;0<=g?++v:--v)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":x=(b=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,b.slice(0,x)),this.text[m]=String.fromCharCode.apply(String,b.slice(x+1));break;case"IEND":return u&&this.animation.frames.push(u),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(N=this.colorType)===4||N===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,d=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function A(u,x,m,y){var g,b,p,v,N,D,S,E,R,_,C,L,f,F,M,P,Z,O,X,q,V,oe=Math.ceil((d.width-u)/m),H=Math.ceil((d.height-x)/y),I=d.width==oe&&d.height==H;for(F=o*oe,L=I?l:new Uint8Array(F*H),D=i.length,f=0,b=0;f<H&&c<D;){switch(i[c++]){case 0:for(v=Z=0;Z<F;v=Z+=1)L[b++]=i[c++];break;case 1:for(v=O=0;O<F;v=O+=1)g=i[c++],N=v<o?0:L[b-o],L[b++]=(g+N)%256;break;case 2:for(v=X=0;X<F;v=X+=1)g=i[c++],p=(v-v%o)/o,M=f&&L[(f-1)*F+p*o+v%o],L[b++]=(M+g)%256;break;case 3:for(v=q=0;q<F;v=q+=1)g=i[c++],p=(v-v%o)/o,N=v<o?0:L[b-o],M=f&&L[(f-1)*F+p*o+v%o],L[b++]=(g+Math.floor((N+M)/2))%256;break;case 4:for(v=V=0;V<F;v=V+=1)g=i[c++],p=(v-v%o)/o,N=v<o?0:L[b-o],f===0?M=P=0:(M=L[(f-1)*F+p*o+v%o],P=p&&L[(f-1)*F+(p-1)*o+v%o]),S=N+M-P,E=Math.abs(S-N),_=Math.abs(S-M),C=Math.abs(S-P),R=E<=_&&E<=C?N:_<=C?M:P,L[b++]=(g+R)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!I){var B=((x+f*y)*d.width+u)*o,$=f*F;for(v=0;v<oe;v+=1){for(var T=0;T<o;T+=1)l[B++]=L[$++];B+=(m-1)*o}}f++}}return i=z7(i),d.interlaceMethod==1?(A(0,0,8,8),A(4,0,8,8),A(0,4,4,8),A(2,0,4,4),A(0,2,2,4),A(1,0,2,2),A(0,1,1,2)):A(0,0,1,1),l},r.prototype.decodePalette=function(){var i,o,l,c,d,A,u,x,m;for(l=this.palette,A=this.transparency.indexed||[],d=new Uint8Array((A.length||0)+l.length),c=0,i=0,o=u=0,x=l.length;u<x;o=u+=3)d[c++]=l[o],d[c++]=l[o+1],d[c++]=l[o+2],d[c++]=(m=A[i++])!=null?m:255;return d},r.prototype.copyToImageData=function(i,o){var l,c,d,A,u,x,m,y,g,b,p;if(c=this.colors,g=null,l=this.hasAlphaChannel,this.palette.length&&(g=(p=this._decodedPalette)!=null?p:this._decodedPalette=this.decodePalette(),c=4,l=!0),y=(d=i.data||i).length,u=g||o,A=x=0,c===1)for(;A<y;)m=g?4*o[A/4]:x,b=u[m++],d[A++]=b,d[A++]=b,d[A++]=b,d[A++]=l?u[m++]:255,x=m;else for(;A<y;)m=g?4*o[A/4]:x,d[A++]=u[m++],d[A++]=u[m++],d[A++]=u[m++],d[A++]=l?u[m++]:255,x=m},r.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var n=function(){if(Object.prototype.toString.call(Dt)==="[object Window]"){try{t=Dt.document.createElement("canvas"),a=t.getContext("2d")}catch{return!1}return!0}return!1};return n(),s=function(i){var o;if(n()===!0)return a.width=i.width,a.height=i.height,a.clearRect(0,0,i.width,i.height),a.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(i){var o,l,c,d,A,u,x,m;if(this.animation){for(m=[],l=A=0,u=(x=this.animation.frames).length;A<u;l=++A)o=x[l],c=i.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,d),o.imageData=c,m.push(o.image=s(c));return m}},r.prototype.renderFrame=function(i,o){var l,c,d;return l=(c=this.animation.frames)[o],d=c[o-1],o===0&&i.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?i.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&i.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},r.prototype.animate=function(i){var o,l,c,d,A,u,x=this;return l=0,u=this.animation,d=u.numFrames,c=u.frames,A=u.numPlays,(o=function(){var m,y;if(m=l++%d,y=c[m],x.renderFrame(i,m),d>1&&l/d<A)return x.animation._timeout=setTimeout(o,y.delay)})()},r.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},r.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function p8(s){var t=0;if(s[t++]!==71||s[t++]!==73||s[t++]!==70||s[t++]!==56||(s[t++]+1&253)!=56||s[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var a=s[t++]|s[t++]<<8,r=s[t++]|s[t++]<<8,n=s[t++],i=n>>7,o=1<<(7&n)+1;s[t++],s[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var d=!0,A=[],u=0,x=null,m=0,y=null;for(this.width=a,this.height=r;d&&t<s.length;)switch(s[t++]){case 33:switch(s[t++]){case 255:if(s[t]!==11||s[t+1]==78&&s[t+2]==69&&s[t+3]==84&&s[t+4]==83&&s[t+5]==67&&s[t+6]==65&&s[t+7]==80&&s[t+8]==69&&s[t+9]==50&&s[t+10]==46&&s[t+11]==48&&s[t+12]==3&&s[t+13]==1&&s[t+16]==0)t+=14,y=s[t++]|s[t++]<<8,t++;else for(t+=12;;){if(!((f=s[t++])>=0))throw Error("Invalid block size");if(f===0)break;t+=f}break;case 249:if(s[t++]!==4||s[t+4]!==0)throw new Error("Invalid graphics extension block.");var g=s[t++];u=s[t++]|s[t++]<<8,x=s[t++],!(1&g)&&(x=null),m=g>>2&7,t++;break;case 254:for(;;){if(!((f=s[t++])>=0))throw Error("Invalid block size");if(f===0)break;t+=f}break;default:throw new Error("Unknown graphic control label: 0x"+s[t-1].toString(16))}break;case 44:var b=s[t++]|s[t++]<<8,p=s[t++]|s[t++]<<8,v=s[t++]|s[t++]<<8,N=s[t++]|s[t++]<<8,D=s[t++],S=D>>6&1,E=1<<(7&D)+1,R=l,_=c,C=!1;D>>7&&(C=!0,R=t,_=E,t+=3*E);var L=t;for(t++;;){var f;if(!((f=s[t++])>=0))throw Error("Invalid block size");if(f===0)break;t+=f}A.push({x:b,y:p,width:v,height:N,has_local_palette:C,palette_offset:R,palette_size:_,data_offset:L,data_length:t-L,transparent_index:x,interlaced:!!S,delay:u,disposal:m});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+s[t-1].toString(16))}this.numFrames=function(){return A.length},this.loopCount=function(){return y},this.frameInfo=function(F){if(F<0||F>=A.length)throw new Error("Frame index out of range.");return A[F]},this.decodeAndBlitFrameBGRA=function(F,M){var P=this.frameInfo(F),Z=P.width*P.height,O=new Uint8Array(Z);nv(s,P.data_offset,O,Z);var X=P.palette_offset,q=P.transparent_index;q===null&&(q=256);var V=P.width,oe=a-V,H=V,I=4*(P.y*a+P.x),B=4*((P.y+P.height)*a+P.x),$=I,T=4*oe;P.interlaced===!0&&(T+=4*a*7);for(var ne=8,ue=0,me=O.length;ue<me;++ue){var xe=O[ue];if(H===0&&(H=V,($+=T)>=B&&(T=4*oe+4*a*(ne-1),$=I+(V+oe)*(ne<<1),ne>>=1)),xe===q)$+=4;else{var Be=s[X+3*xe],ee=s[X+3*xe+1],je=s[X+3*xe+2];M[$++]=je,M[$++]=ee,M[$++]=Be,M[$++]=255}--H}},this.decodeAndBlitFrameRGBA=function(F,M){var P=this.frameInfo(F),Z=P.width*P.height,O=new Uint8Array(Z);nv(s,P.data_offset,O,Z);var X=P.palette_offset,q=P.transparent_index;q===null&&(q=256);var V=P.width,oe=a-V,H=V,I=4*(P.y*a+P.x),B=4*((P.y+P.height)*a+P.x),$=I,T=4*oe;P.interlaced===!0&&(T+=4*a*7);for(var ne=8,ue=0,me=O.length;ue<me;++ue){var xe=O[ue];if(H===0&&(H=V,($+=T)>=B&&(T=4*oe+4*a*(ne-1),$=I+(V+oe)*(ne<<1),ne>>=1)),xe===q)$+=4;else{var Be=s[X+3*xe],ee=s[X+3*xe+1],je=s[X+3*xe+2];M[$++]=Be,M[$++]=ee,M[$++]=je,M[$++]=255}--H}}}function nv(s,t,a,r){for(var n=s[t++],i=1<<n,o=i+1,l=o+1,c=n+1,d=(1<<c)-1,A=0,u=0,x=0,m=s[t++],y=new Int32Array(4096),g=null;;){for(;A<16&&m!==0;)u|=s[t++]<<A,A+=8,m===1?m=s[t++]:--m;if(A<c)break;var b=u&d;if(u>>=c,A-=c,b!==i){if(b===o)break;for(var p=b<l?b:g,v=0,N=p;N>i;)N=y[N]>>8,++v;var D=N;if(x+v+(p!==b?1:0)>r)return void fs.log("Warning, gif stream longer than expected.");a[x++]=D;var S=x+=v;for(p!==b&&(a[x++]=D),N=p;v--;)N=y[N],a[--S]=255&N,N>>=8;g!==null&&l<4096&&(y[l++]=g<<8|D,l>=d+1&&c<12&&(++c,d=d<<1|1)),g=b}else l=o+1,d=(1<<(c=n+1))-1,g=null}return x!==r&&fs.log("Warning, gif stream shorter than expected."),a}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Bx(s){var t,a,r,n,i,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),A=new Array(64),u=new Array(65535),x=new Array(65535),m=new Array(64),y=new Array(64),g=[],b=0,p=7,v=new Array(64),N=new Array(64),D=new Array(64),S=new Array(256),E=new Array(2048),R=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],_=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],f=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],F=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function O(I,B){for(var $=0,T=0,ne=new Array,ue=1;ue<=16;ue++){for(var me=1;me<=I[ue];me++)ne[B[T]]=[],ne[B[T]][0]=$,ne[B[T]][1]=ue,T++,$++;$*=2}return ne}function X(I){for(var B=I[0],$=I[1]-1;$>=0;)B&1<<$&&(b|=1<<p),$--,--p<0&&(b==255?(q(255),q(0)):q(b),p=7,b=0)}function q(I){g.push(I)}function V(I){q(I>>8&255),q(255&I)}function oe(I,B,$,T,ne){for(var ue,me=ne[0],xe=ne[240],Be=function(re,ie){var ve,ye,$e,it,Ie,he,Oe,He,dt,Bt,et=0;for(dt=0;dt<8;++dt){ve=re[et],ye=re[et+1],$e=re[et+2],it=re[et+3],Ie=re[et+4],he=re[et+5],Oe=re[et+6];var ta=ve+(He=re[et+7]),Pt=ve-He,de=ye+Oe,Ee=ye-Oe,Qe=$e+he,Ze=$e-he,Ye=it+Ie,It=it-Ie,lt=ta+Ye,Tt=ta-Ye,Yt=de+Qe,ft=de-Qe;re[et]=lt+Yt,re[et+4]=lt-Yt;var _t=.707106781*(ft+Tt);re[et+2]=Tt+_t,re[et+6]=Tt-_t;var Xt=.382683433*((lt=It+Ze)-(ft=Ee+Pt)),pr=.5411961*lt+Xt,Ts=1.306562965*ft+Xt,Ra=.707106781*(Yt=Ze+Ee),gr=Pt+Ra,St=Pt-Ra;re[et+5]=St+pr,re[et+3]=St-pr,re[et+1]=gr+Ts,re[et+7]=gr-Ts,et+=8}for(et=0,dt=0;dt<8;++dt){ve=re[et],ye=re[et+8],$e=re[et+16],it=re[et+24],Ie=re[et+32],he=re[et+40],Oe=re[et+48];var Ga=ve+(He=re[et+56]),le=ve-He,Le=ye+Oe,De=ye-Oe,ke=$e+he,Je=$e-he,ot=it+Ie,Ne=it-Ie,at=Ga+ot,ct=Ga-ot,_s=Le+ke,Qs=Le-ke;re[et]=at+_s,re[et+32]=at-_s;var ua=.707106781*(Qs+ct);re[et+16]=ct+ua,re[et+48]=ct-ua;var Mt=.382683433*((at=Ne+Je)-(Qs=De+le)),Ps=.5411961*at+Mt,co=1.306562965*Qs+Mt,Ao=.707106781*(_s=Je+De),uo=le+Ao,mo=le-Ao;re[et+40]=mo+Ps,re[et+24]=mo-Ps,re[et+8]=uo+co,re[et+56]=uo-co,et++}for(dt=0;dt<64;++dt)Bt=re[dt]*ie[dt],m[dt]=Bt>0?Bt+.5|0:Bt-.5|0;return m}(I,B),ee=0;ee<64;++ee)y[R[ee]]=Be[ee];var je=y[0]-$;$=y[0],je==0?X(T[0]):(X(T[x[ue=32767+je]]),X(u[ue]));for(var Pe=63;Pe>0&&y[Pe]==0;)Pe--;if(Pe==0)return X(me),$;for(var Xe,Ce=1;Ce<=Pe;){for(var K=Ce;y[Ce]==0&&Ce<=Pe;)++Ce;var Me=Ce-K;if(Me>=16){Xe=Me>>4;for(var qe=1;qe<=Xe;++qe)X(xe);Me&=15}ue=32767+y[Ce],X(ne[(Me<<4)+x[ue]]),X(u[ue]),Ce++}return Pe!=63&&X(me),$}function H(I){I=Math.min(Math.max(I,1),100),i!=I&&(function(B){for(var $=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],T=0;T<64;T++){var ne=o(($[T]*B+50)/100);ne=Math.min(Math.max(ne,1),255),l[R[T]]=ne}for(var ue=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],me=0;me<64;me++){var xe=o((ue[me]*B+50)/100);xe=Math.min(Math.max(xe,1),255),c[R[me]]=xe}for(var Be=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ee=0,je=0;je<8;je++)for(var Pe=0;Pe<8;Pe++)d[ee]=1/(l[R[ee]]*Be[je]*Be[Pe]*8),A[ee]=1/(c[R[ee]]*Be[je]*Be[Pe]*8),ee++}(I<50?Math.floor(5e3/I):Math.floor(200-2*I)),i=I)}this.encode=function(I,B){B&&H(B),g=new Array,b=0,p=7,V(65496),V(65504),V(16),q(74),q(70),q(73),q(70),q(0),q(1),q(1),q(0),V(1),V(1),q(0),q(0),function(){V(65499),V(132),q(0);for(var ye=0;ye<64;ye++)q(l[ye]);q(1);for(var $e=0;$e<64;$e++)q(c[$e])}(),function(ye,$e){V(65472),V(17),q(8),V($e),V(ye),q(3),q(1),q(17),q(0),q(2),q(17),q(1),q(3),q(17),q(1)}(I.width,I.height),function(){V(65476),V(418),q(0);for(var ye=0;ye<16;ye++)q(_[ye+1]);for(var $e=0;$e<=11;$e++)q(C[$e]);q(16);for(var it=0;it<16;it++)q(L[it+1]);for(var Ie=0;Ie<=161;Ie++)q(f[Ie]);q(1);for(var he=0;he<16;he++)q(F[he+1]);for(var Oe=0;Oe<=11;Oe++)q(M[Oe]);q(17);for(var He=0;He<16;He++)q(P[He+1]);for(var dt=0;dt<=161;dt++)q(Z[dt])}(),V(65498),V(12),q(3),q(1),q(0),q(2),q(17),q(3),q(17),q(0),q(63),q(0);var $=0,T=0,ne=0;b=0,p=7,this.encode.displayName="_encode_";for(var ue,me,xe,Be,ee,je,Pe,Xe,Ce,K=I.data,Me=I.width,qe=I.height,re=4*Me,ie=0;ie<qe;){for(ue=0;ue<re;){for(ee=re*ie+ue,Pe=-1,Xe=0,Ce=0;Ce<64;Ce++)je=ee+(Xe=Ce>>3)*re+(Pe=4*(7&Ce)),ie+Xe>=qe&&(je-=re*(ie+1+Xe-qe)),ue+Pe>=re&&(je-=ue+Pe-re+4),me=K[je++],xe=K[je++],Be=K[je++],v[Ce]=(E[me]+E[xe+256>>0]+E[Be+512>>0]>>16)-128,N[Ce]=(E[me+768>>0]+E[xe+1024>>0]+E[Be+1280>>0]>>16)-128,D[Ce]=(E[me+1280>>0]+E[xe+1536>>0]+E[Be+1792>>0]>>16)-128;$=oe(v,d,$,t,r),T=oe(N,A,T,a,n),ne=oe(D,A,ne,a,n),ue+=32}ie+=8}if(p>=0){var ve=[];ve[1]=p+1,ve[0]=(1<<p+1)-1,X(ve)}return V(65497),new Uint8Array(g)},s=s||50,function(){for(var I=String.fromCharCode,B=0;B<256;B++)S[B]=I(B)}(),t=O(_,C),a=O(F,M),r=O(L,f),n=O(P,Z),function(){for(var I=1,B=2,$=1;$<=15;$++){for(var T=I;T<B;T++)x[32767+T]=$,u[32767+T]=[],u[32767+T][1]=$,u[32767+T][0]=T;for(var ne=-(B-1);ne<=-I;ne++)x[32767+ne]=$,u[32767+ne]=[],u[32767+ne][1]=$,u[32767+ne][0]=B-1+ne;I<<=1,B<<=1}}(),function(){for(var I=0;I<256;I++)E[I]=19595*I,E[I+256>>0]=38470*I,E[I+512>>0]=7471*I+32768,E[I+768>>0]=-11059*I,E[I+1024>>0]=-21709*I,E[I+1280>>0]=32768*I+8421375,E[I+1536>>0]=-27439*I,E[I+1792>>0]=-5329*I}(),H(s)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Hr(s,t){if(this.pos=0,this.buffer=s,this.datav=new DataView(s.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function iv(s){function t(_){if(!_)throw Error("assert :P")}function a(_,C,L){for(var f=0;4>f;f++)if(_[C+f]!=L.charCodeAt(f))return!0;return!1}function r(_,C,L,f,F){for(var M=0;M<F;M++)_[C+M]=L[f+M]}function n(_,C,L,f){for(var F=0;F<f;F++)_[C+F]=L}function i(_){return new Int32Array(_)}function o(_,C){for(var L=[],f=0;f<_;f++)L.push(new C);return L}function l(_,C){var L=[];return function f(F,M,P){for(var Z=P[M],O=0;O<Z&&(F.push(P.length>M+1?[]:new C),!(P.length<M+1));O++)f(F[O],M+1,P)}(L,0,_),L}var c=function(){var _=this;function C(h,w){for(var U=1<<w-1>>>0;h&U;)U>>>=1;return U?(h&U-1)+U:h}function L(h,w,U,Q,z){t(!(Q%U));do h[w+(Q-=U)]=z;while(0<Q)}function f(h,w,U,Q,z){if(t(2328>=z),512>=z)var J=i(512);else if((J=i(z))==null)return 0;return function(Y,te,ae,ce,ge,Fe){var Ue,we,ze=te,Te=1<<ae,fe=i(16),be=i(16);for(t(ge!=0),t(ce!=null),t(Y!=null),t(0<ae),we=0;we<ge;++we){if(15<ce[we])return 0;++fe[ce[we]]}if(fe[0]==ge)return 0;for(be[1]=0,Ue=1;15>Ue;++Ue){if(fe[Ue]>1<<Ue)return 0;be[Ue+1]=be[Ue]+fe[Ue]}for(we=0;we<ge;++we)Ue=ce[we],0<ce[we]&&(Fe[be[Ue]++]=we);if(be[15]==1)return(ce=new F).g=0,ce.value=Fe[0],L(Y,ze,1,Te,ce),Te;var Ve,Ge=-1,Ke=Te-1,xt=0,st=1,kt=1,nt=1<<ae;for(we=0,Ue=1,ge=2;Ue<=ae;++Ue,ge<<=1){if(st+=kt<<=1,0>(kt-=fe[Ue]))return 0;for(;0<fe[Ue];--fe[Ue])(ce=new F).g=Ue,ce.value=Fe[we++],L(Y,ze+xt,ge,nt,ce),xt=C(xt,Ue)}for(Ue=ae+1,ge=2;15>=Ue;++Ue,ge<<=1){if(st+=kt<<=1,0>(kt-=fe[Ue]))return 0;for(;0<fe[Ue];--fe[Ue]){if(ce=new F,(xt&Ke)!=Ge){for(ze+=nt,Ve=1<<(Ge=Ue)-ae;15>Ge&&!(0>=(Ve-=fe[Ge]));)++Ge,Ve<<=1;Te+=nt=1<<(Ve=Ge-ae),Y[te+(Ge=xt&Ke)].g=Ve+ae,Y[te+Ge].value=ze-te-Ge}ce.g=Ue-ae,ce.value=Fe[we++],L(Y,ze+(xt>>ae),ge,nt,ce),xt=C(xt,Ue)}}return st!=2*be[15]-1?0:Te}(h,w,U,Q,z,J)}function F(){this.value=this.g=0}function M(){this.value=this.g=0}function P(){this.G=o(5,F),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ja,M)}function Z(h,w,U,Q){t(h!=null),t(w!=null),t(2147483648>Q),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=w,h.pa=U,h.Jd=w,h.Yc=U+Q,h.Zc=4<=Q?U+Q-4+1:U,ue(h)}function O(h,w){for(var U=0;0<w--;)U|=xe(h,128)<<w;return U}function X(h,w){var U=O(h,w);return me(h)?-U:U}function q(h,w,U,Q){var z,J=0;for(t(h!=null),t(w!=null),t(4294967288>Q),h.Sb=Q,h.Ra=0,h.u=0,h.h=0,4<Q&&(Q=4),z=0;z<Q;++z)J+=w[U+z]<<8*z;h.Ra=J,h.bb=Q,h.oa=w,h.pa=U}function V(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<So-8>>>0,++h.bb,h.u-=8;$(h)&&(h.h=1,h.u=0)}function oe(h,w){if(t(0<=w),!h.h&&w<=Bo){var U=B(h)&Co[w];return h.u+=w,V(h),U}return h.h=1,h.u=0}function H(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function I(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function B(h){return h.Ra>>>(h.u&So-1)>>>0}function $(h){return t(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>So}function T(h,w){h.u=w,h.h=$(h)}function ne(h){h.u>=sc&&(t(h.u>=sc),V(h))}function ue(h){t(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(t(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function me(h){return O(h,1)}function xe(h,w){var U=h.Ca;0>h.b&&ue(h);var Q=h.b,z=U*w>>>8,J=(h.I>>>Q>z)+0;for(J?(U-=z,h.I-=z+1<<Q>>>0):U=z+1,Q=U,z=0;256<=Q;)z+=8,Q>>=8;return Q=7^z+Ja[Q],h.b-=Q,h.Ca=(U<<Q)-1,J}function Be(h,w,U){h[w+0]=U>>24&255,h[w+1]=U>>16&255,h[w+2]=U>>8&255,h[w+3]=U>>0&255}function ee(h,w){return h[w+0]<<0|h[w+1]<<8}function je(h,w){return ee(h,w)|h[w+2]<<16}function Pe(h,w){return ee(h,w)|ee(h,w+2)<<16}function Xe(h,w){var U=1<<w;return t(h!=null),t(0<w),h.X=i(U),h.X==null?0:(h.Mb=32-w,h.Xa=w,1)}function Ce(h,w){t(h!=null),t(w!=null),t(h.Xa==w.Xa),r(w.X,0,h.X,0,1<<w.Xa)}function K(){this.X=[],this.Xa=this.Mb=0}function Me(h,w,U,Q){t(U!=null),t(Q!=null);var z=U[0],J=Q[0];return z==0&&(z=(h*J+w/2)/w),J==0&&(J=(w*z+h/2)/h),0>=z||0>=J?0:(U[0]=z,Q[0]=J,1)}function qe(h,w){return h+(1<<w)-1>>>w}function re(h,w){return((4278255360&h)+(4278255360&w)>>>0&4278255360)+((16711935&h)+(16711935&w)>>>0&16711935)>>>0}function ie(h,w){_[w]=function(U,Q,z,J,Y,te,ae){var ce;for(ce=0;ce<Y;++ce){var ge=_[h](te[ae+ce-1],z,J+ce);te[ae+ce]=re(U[Q+ce],ge)}}}function ve(){this.ud=this.hd=this.jd=0}function ye(h,w){return((4278124286&(h^w))>>>1)+(h&w)>>>0}function $e(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function it(h,w){return $e(h+(h-w+.5>>1))}function Ie(h,w,U){return Math.abs(w-U)-Math.abs(h-U)}function he(h,w,U,Q,z,J,Y){for(Q=J[Y-1],U=0;U<z;++U)J[Y+U]=Q=re(h[w+U],Q)}function Oe(h,w,U,Q,z){var J;for(J=0;J<U;++J){var Y=h[w+J],te=Y>>8&255,ae=16711935&(ae=(ae=16711935&Y)+((te<<16)+te));Q[z+J]=(4278255360&Y)+ae>>>0}}function He(h,w){w.jd=h>>0&255,w.hd=h>>8&255,w.ud=h>>16&255}function dt(h,w,U,Q,z,J){var Y;for(Y=0;Y<Q;++Y){var te=w[U+Y],ae=te>>>8,ce=te,ge=255&(ge=(ge=te>>>16)+((h.jd<<24>>24)*(ae<<24>>24)>>>5));ce=255&(ce=(ce=ce+((h.hd<<24>>24)*(ae<<24>>24)>>>5))+((h.ud<<24>>24)*(ge<<24>>24)>>>5)),z[J+Y]=(4278255360&te)+(ge<<16)+ce}}function Bt(h,w,U,Q,z){_[w]=function(J,Y,te,ae,ce,ge,Fe,Ue,we){for(ae=Fe;ae<Ue;++ae)for(Fe=0;Fe<we;++Fe)ce[ge++]=z(te[Q(J[Y++])])},_[h]=function(J,Y,te,ae,ce,ge,Fe){var Ue=8>>J.b,we=J.Ea,ze=J.K[0],Te=J.w;if(8>Ue)for(J=(1<<J.b)-1,Te=(1<<Ue)-1;Y<te;++Y){var fe,be=0;for(fe=0;fe<we;++fe)fe&J||(be=Q(ae[ce++])),ge[Fe++]=z(ze[be&Te]),be>>=Ue}else _["VP8LMapColor"+U](ae,ce,ze,Te,ge,Fe,Y,te,we)}}function et(h,w,U,Q,z){for(U=w+U;w<U;){var J=h[w++];Q[z++]=J>>16&255,Q[z++]=J>>8&255,Q[z++]=J>>0&255}}function ta(h,w,U,Q,z){for(U=w+U;w<U;){var J=h[w++];Q[z++]=J>>16&255,Q[z++]=J>>8&255,Q[z++]=J>>0&255,Q[z++]=J>>24&255}}function Pt(h,w,U,Q,z){for(U=w+U;w<U;){var J=(Y=h[w++])>>16&240|Y>>12&15,Y=Y>>0&240|Y>>28&15;Q[z++]=J,Q[z++]=Y}}function de(h,w,U,Q,z){for(U=w+U;w<U;){var J=(Y=h[w++])>>16&248|Y>>13&7,Y=Y>>5&224|Y>>3&31;Q[z++]=J,Q[z++]=Y}}function Ee(h,w,U,Q,z){for(U=w+U;w<U;){var J=h[w++];Q[z++]=J>>0&255,Q[z++]=J>>8&255,Q[z++]=J>>16&255}}function Qe(h,w,U,Q,z,J){if(J==0)for(U=w+U;w<U;)Be(Q,((J=h[w++])[0]>>24|J[1]>>8&65280|J[2]<<8&16711680|J[3]<<24)>>>0),z+=32;else r(Q,z,h,w,U)}function Ze(h,w){_[w][0]=_[h+"0"],_[w][1]=_[h+"1"],_[w][2]=_[h+"2"],_[w][3]=_[h+"3"],_[w][4]=_[h+"4"],_[w][5]=_[h+"5"],_[w][6]=_[h+"6"],_[w][7]=_[h+"7"],_[w][8]=_[h+"8"],_[w][9]=_[h+"9"],_[w][10]=_[h+"10"],_[w][11]=_[h+"11"],_[w][12]=_[h+"12"],_[w][13]=_[h+"13"],_[w][14]=_[h+"0"],_[w][15]=_[h+"0"]}function Ye(h){return h==ah||h==rh||h==nA||h==nh}function It(){this.eb=[],this.size=this.A=this.fb=0}function lt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Tt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new It,this.f.kb=new lt,this.sd=null}function Yt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ft(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function _t(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function Xt(h,w){var U=h.T,Q=w.ba.f.RGBA,z=Q.eb,J=Q.fb+h.ka*Q.A,Y=jr[w.ba.S],te=h.y,ae=h.O,ce=h.f,ge=h.N,Fe=h.ea,Ue=h.W,we=w.cc,ze=w.dc,Te=w.Mc,fe=w.Nc,be=h.ka,Ve=h.ka+h.T,Ge=h.U,Ke=Ge+1>>1;for(be==0?Y(te,ae,null,null,ce,ge,Fe,Ue,ce,ge,Fe,Ue,z,J,null,null,Ge):(Y(w.ec,w.fc,te,ae,we,ze,Te,fe,ce,ge,Fe,Ue,z,J-Q.A,z,J,Ge),++U);be+2<Ve;be+=2)we=ce,ze=ge,Te=Fe,fe=Ue,ge+=h.Rc,Ue+=h.Rc,J+=2*Q.A,Y(te,(ae+=2*h.fa)-h.fa,te,ae,we,ze,Te,fe,ce,ge,Fe,Ue,z,J-Q.A,z,J,Ge);return ae+=h.fa,h.j+Ve<h.o?(r(w.ec,w.fc,te,ae,Ge),r(w.cc,w.dc,ce,ge,Ke),r(w.Mc,w.Nc,Fe,Ue,Ke),U--):1&Ve||Y(te,ae,null,null,ce,ge,Fe,Ue,ce,ge,Fe,Ue,z,J+Q.A,null,null,Ge),U}function pr(h,w,U){var Q=h.F,z=[h.J];if(Q!=null){var J=h.U,Y=w.ba.S,te=Y==rA||Y==nA;w=w.ba.f.RGBA;var ae=[0],ce=h.ka;ae[0]=h.T,h.Kb&&(ce==0?--ae[0]:(--ce,z[0]-=h.width),h.j+h.ka+h.T==h.o&&(ae[0]=h.o-h.j-ce));var ge=w.eb;ce=w.fb+ce*w.A,h=ws(Q,z[0],h.width,J,ae,ge,ce+(te?0:3),w.A),t(U==ae),h&&Ye(Y)&&vr(ge,ce,te,J,ae,w.A)}return 0}function Ts(h){var w=h.ma,U=w.ba.S,Q=11>U,z=U==sA||U==aA||U==rA||U==sh||U==12||Ye(U);if(w.memory=null,w.Ib=null,w.Jb=null,w.Nd=null,!ec(w.Oa,h,z?11:12))return 0;if(z&&Ye(U)&&We(),h.da)alert("todo:use_scaling");else{if(Q){if(w.Ib=_t,h.Kb){if(U=h.U+1>>1,w.memory=i(h.U+2*U),w.memory==null)return 0;w.ec=w.memory,w.fc=0,w.cc=w.ec,w.dc=w.fc+h.U,w.Mc=w.cc,w.Nc=w.dc+U,w.Ib=Xt,We()}}else alert("todo:EmitYUV");z&&(w.Jb=pr,Q&&_e())}if(Q&&!kg){for(h=0;256>h;++h)nN[h]=89858*(h-128)+oA>>iA,lN[h]=-22014*(h-128)+oA,oN[h]=-45773*(h-128),iN[h]=113618*(h-128)+oA>>iA;for(h=cc;h<lh;++h)w=76283*(h-16)+oA>>iA,cN[h-cc]=or(w,255),dN[h-cc]=or(w+8>>4,15);kg=1}return 1}function Ra(h){var w=h.ma,U=h.U,Q=h.T;return t(!(1&h.ka)),0>=U||0>=Q?0:(U=w.Ib(h,w),w.Jb!=null&&w.Jb(h,w,U),w.Dc+=U,1)}function gr(h){h.ma.memory=null}function St(h,w,U,Q){return oe(h,8)!=47?0:(w[0]=oe(h,14)+1,U[0]=oe(h,14)+1,Q[0]=oe(h,1),oe(h,3)!=0?0:!h.h)}function Ga(h,w){if(4>h)return h+1;var U=h-2>>1;return(2+(1&h)<<U)+oe(w,U)+1}function le(h,w){return 120<w?w-120:1<=(U=((U=V1[w-1])>>4)*h+(8-(15&U)))?U:1;var U}function Le(h,w,U){var Q=B(U),z=h[w+=255&Q].g-8;return 0<z&&(T(U,U.u+8),Q=B(U),w+=h[w].value,w+=Q&(1<<z)-1),T(U,U.u+h[w].g),h[w].value}function De(h,w,U){return U.g+=h.g,U.value+=h.value<<w>>>0,t(8>=U.g),h.g}function ke(h,w,U){var Q=h.xc;return t((w=Q==0?0:h.vc[h.md*(U>>Q)+(w>>Q)])<h.Wb),h.Ya[w]}function Je(h,w,U,Q){var z=h.ab,J=h.c*w,Y=h.C;w=Y+w;var te=U,ae=Q;for(Q=h.Ta,U=h.Ua;0<z--;){var ce=h.gc[z],ge=Y,Fe=w,Ue=te,we=ae,ze=(ae=Q,te=U,ce.Ea);switch(t(ge<Fe),t(Fe<=ce.nc),ce.hc){case 2:Wd(Ue,we,(Fe-ge)*ze,ae,te);break;case 0:var Te=ge,fe=Fe,be=ae,Ve=te,Ge=(nt=ce).Ea;Te==0&&(eh(Ue,we,null,null,1,be,Ve),he(Ue,we+1,0,0,Ge-1,be,Ve+1),we+=Ge,Ve+=Ge,++Te);for(var Ke=1<<nt.b,xt=Ke-1,st=qe(Ge,nt.b),kt=nt.K,nt=nt.w+(Te>>nt.b)*st;Te<fe;){var ls=kt,us=nt,ns=1;for(ac(Ue,we,be,Ve-Ge,1,be,Ve);ns<Ge;){var ts=(ns&~xt)+Ke;ts>Ge&&(ts=Ge),(0,Rn[ls[us++]>>8&15])(Ue,we+ +ns,be,Ve+ns-Ge,ts-ns,be,Ve+ns),ns=ts}we+=Ge,Ve+=Ge,++Te&xt||(nt+=st)}Fe!=ce.nc&&r(ae,te-ze,ae,te+(Fe-ge-1)*ze,ze);break;case 1:for(ze=Ue,fe=we,Ge=(Ue=ce.Ea)-(Ve=Ue&~(be=(we=1<<ce.b)-1)),Te=qe(Ue,ce.b),Ke=ce.K,ce=ce.w+(ge>>ce.b)*Te;ge<Fe;){for(xt=Ke,st=ce,kt=new ve,nt=fe+Ve,ls=fe+Ue;fe<nt;)He(xt[st++],kt),Si(kt,ze,fe,we,ae,te),fe+=we,te+=we;fe<ls&&(He(xt[st++],kt),Si(kt,ze,fe,Ge,ae,te),fe+=Ge,te+=Ge),++ge&be||(ce+=Te)}break;case 3:if(Ue==ae&&we==te&&0<ce.b){for(fe=ae,Ue=ze=te+(Fe-ge)*ze-(Ve=(Fe-ge)*qe(ce.Ea,ce.b)),we=ae,be=te,Te=[],Ve=(Ge=Ve)-1;0<=Ve;--Ve)Te[Ve]=we[be+Ve];for(Ve=Ge-1;0<=Ve;--Ve)fe[Ue+Ve]=Te[Ve];fr(ce,ge,Fe,ae,ze,ae,te)}else fr(ce,ge,Fe,Ue,we,ae,te)}te=Q,ae=U}ae!=U&&r(Q,U,te,ae,J)}function ot(h,w){var U=h.V,Q=h.Ba+h.c*h.C,z=w-h.C;if(t(w<=h.l.o),t(16>=z),0<z){var J=h.l,Y=h.Ta,te=h.Ua,ae=J.width;if(Je(h,z,U,Q),z=te=[te],t((U=h.C)<(Q=w)),t(J.v<J.va),Q>J.o&&(Q=J.o),U<J.j){var ce=J.j-U;U=J.j,z[0]+=ce*ae}if(U>=Q?U=0:(z[0]+=4*J.v,J.ka=U-J.j,J.U=J.va-J.v,J.T=Q-U,U=1),U){if(te=te[0],11>(U=h.ca).S){var ge=U.f.RGBA,Fe=(Q=U.S,z=J.U,J=J.T,ce=ge.eb,ge.A),Ue=J;for(ge=ge.fb+h.Ma*ge.A;0<Ue--;){var we=Y,ze=te,Te=z,fe=ce,be=ge;switch(Q){case tA:Ya(we,ze,Te,fe,be);break;case sA:Oa(we,ze,Te,fe,be);break;case ah:Oa(we,ze,Te,fe,be),vr(fe,be,0,Te,1,0);break;case yg:fn(we,ze,Te,fe,be);break;case aA:Qe(we,ze,Te,fe,be,1);break;case rh:Qe(we,ze,Te,fe,be,1),vr(fe,be,0,Te,1,0);break;case rA:Qe(we,ze,Te,fe,be,0);break;case nA:Qe(we,ze,Te,fe,be,0),vr(fe,be,1,Te,1,0);break;case sh:On(we,ze,Te,fe,be);break;case nh:On(we,ze,Te,fe,be),vs(fe,be,Te,1,0);break;case vg:gn(we,ze,Te,fe,be);break;default:t(0)}te+=ae,ge+=Fe}h.Ma+=J}else alert("todo:EmitRescaledRowsYUVA");t(h.Ma<=U.height)}}h.C=w,t(h.C<=h.i)}function Ne(h){var w;if(0<h.ua)return 0;for(w=0;w<h.Wb;++w){var U=h.Ya[w].G,Q=h.Ya[w].H;if(0<U[1][Q[1]+0].g||0<U[2][Q[2]+0].g||0<U[3][Q[3]+0].g)return 0}return 1}function at(h,w,U,Q,z,J){if(h.Z!=0){var Y=h.qd,te=h.rd;for(t(Vn[h.Z]!=null);w<U;++w)Vn[h.Z](Y,te,Q,z,Q,z,J),Y=Q,te=z,z+=J;h.qd=Y,h.rd=te}}function ct(h,w){var U=h.l.ma,Q=U.Z==0||U.Z==1?h.l.j:h.C;if(Q=h.C<Q?Q:h.C,t(w<=h.l.o),w>Q){var z=h.l.width,J=U.ca,Y=U.tb+z*Q,te=h.V,ae=h.Ba+h.c*Q,ce=h.gc;t(h.ab==1),t(ce[0].hc==3),Jd(ce[0],Q,w,te,ae,J,Y),at(U,Q,w,J,Y,z)}h.C=h.Ma=w}function _s(h,w,U,Q,z,J,Y){var te=h.$/Q,ae=h.$%Q,ce=h.m,ge=h.s,Fe=U+h.$,Ue=Fe;z=U+Q*z;var we=U+Q*J,ze=280+ge.ua,Te=h.Pb?te:16777216,fe=0<ge.ua?ge.Wa:null,be=ge.wc,Ve=Fe<we?ke(ge,ae,te):null;t(h.C<J),t(we<=z);var Ge=!1;e:for(;;){for(;Ge||Fe<we;){var Ke=0;if(te>=Te){var xt=Fe-U;t((Te=h).Pb),Te.wd=Te.m,Te.xd=xt,0<Te.s.ua&&Ce(Te.s.Wa,Te.s.vb),Te=te+z1}if(ae&be||(Ve=ke(ge,ae,te)),t(Ve!=null),Ve.Qb&&(w[Fe]=Ve.qb,Ge=!0),!Ge)if(ne(ce),Ve.jc){Ke=ce,xt=w;var st=Fe,kt=Ve.pd[B(Ke)&ja-1];t(Ve.jc),256>kt.g?(T(Ke,Ke.u+kt.g),xt[st]=kt.value,Ke=0):(T(Ke,Ke.u+kt.g-256),t(256<=kt.value),Ke=kt.value),Ke==0&&(Ge=!0)}else Ke=Le(Ve.G[0],Ve.H[0],ce);if(ce.h)break;if(Ge||256>Ke){if(!Ge)if(Ve.nd)w[Fe]=(Ve.qb|Ke<<8)>>>0;else{if(ne(ce),Ge=Le(Ve.G[1],Ve.H[1],ce),ne(ce),xt=Le(Ve.G[2],Ve.H[2],ce),st=Le(Ve.G[3],Ve.H[3],ce),ce.h)break;w[Fe]=(st<<24|Ge<<16|Ke<<8|xt)>>>0}if(Ge=!1,++Fe,++ae>=Q&&(ae=0,++te,Y!=null&&te<=J&&!(te%16)&&Y(h,te),fe!=null))for(;Ue<Fe;)Ke=w[Ue++],fe.X[(506832829*Ke&4294967295)>>>fe.Mb]=Ke}else if(280>Ke){if(Ke=Ga(Ke-256,ce),xt=Le(Ve.G[4],Ve.H[4],ce),ne(ce),xt=le(Q,xt=Ga(xt,ce)),ce.h)break;if(Fe-U<xt||z-Fe<Ke)break e;for(st=0;st<Ke;++st)w[Fe+st]=w[Fe+st-xt];for(Fe+=Ke,ae+=Ke;ae>=Q;)ae-=Q,++te,Y!=null&&te<=J&&!(te%16)&&Y(h,te);if(t(Fe<=z),ae&be&&(Ve=ke(ge,ae,te)),fe!=null)for(;Ue<Fe;)Ke=w[Ue++],fe.X[(506832829*Ke&4294967295)>>>fe.Mb]=Ke}else{if(!(Ke<ze))break e;for(Ge=Ke-280,t(fe!=null);Ue<Fe;)Ke=w[Ue++],fe.X[(506832829*Ke&4294967295)>>>fe.Mb]=Ke;Ke=Fe,t(!(Ge>>>(xt=fe).Xa)),w[Ke]=xt.X[Ge],Ge=!0}Ge||t(ce.h==$(ce))}if(h.Pb&&ce.h&&Fe<z)t(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&Ce(h.s.vb,h.s.Wa);else{if(ce.h)break e;Y!=null&&Y(h,te>J?J:te),h.a=0,h.$=Fe-U}return 1}return h.a=3,0}function Qs(h){t(h!=null),h.vc=null,h.yc=null,h.Ya=null;var w=h.Wa;w!=null&&(w.X=null),h.vb=null,t(h!=null)}function ua(){var h=new Zm;return h==null?null:(h.a=0,h.xb=Ng,Ze("Predictor","VP8LPredictors"),Ze("Predictor","VP8LPredictors_C"),Ze("PredictorAdd","VP8LPredictorsAdd"),Ze("PredictorAdd","VP8LPredictorsAdd_C"),Wd=Oe,Si=dt,Ya=et,Oa=ta,On=Pt,gn=de,fn=Ee,_.VP8LMapColor32b=ko,_.VP8LMapColor8b=Yd,h)}function Mt(h,w,U,Q,z){var J=1,Y=[h],te=[w],ae=Q.m,ce=Q.s,ge=null,Fe=0;e:for(;;){if(U)for(;J&&oe(ae,1);){var Ue=Y,we=te,ze=Q,Te=1,fe=ze.m,be=ze.gc[ze.ab],Ve=oe(fe,2);if(ze.Oc&1<<Ve)J=0;else{switch(ze.Oc|=1<<Ve,be.hc=Ve,be.Ea=Ue[0],be.nc=we[0],be.K=[null],++ze.ab,t(4>=ze.ab),Ve){case 0:case 1:be.b=oe(fe,3)+2,Te=Mt(qe(be.Ea,be.b),qe(be.nc,be.b),0,ze,be.K),be.K=be.K[0];break;case 3:var Ge,Ke=oe(fe,8)+1,xt=16<Ke?0:4<Ke?1:2<Ke?2:3;if(Ue[0]=qe(be.Ea,xt),be.b=xt,Ge=Te=Mt(Ke,1,0,ze,be.K)){var st,kt=Ke,nt=be,ls=1<<(8>>nt.b),us=i(ls);if(us==null)Ge=0;else{var ns=nt.K[0],ts=nt.w;for(us[0]=nt.K[0][0],st=1;st<1*kt;++st)us[st]=re(ns[ts+st],us[st-1]);for(;st<4*ls;++st)us[st]=0;nt.K[0]=null,nt.K[0]=us,Ge=1}}Te=Ge;break;case 2:break;default:t(0)}J=Te}}if(Y=Y[0],te=te[0],J&&oe(ae,1)&&!(J=1<=(Fe=oe(ae,4))&&11>=Fe)){Q.a=3;break e}var gs;if(gs=J)t:{var xs,Wt,aa,Xa=Q,ra=Y,Za=te,ms=Fe,cr=U,dr=Xa.m,ga=Xa.s,Na=[null],qa=1,Nr=0,tn=K1[ms];s:for(;;){if(cr&&oe(dr,1)){var fa=oe(dr,3)+2,wn=qe(ra,fa),Di=qe(Za,fa),Io=wn*Di;if(!Mt(wn,Di,0,Xa,Na))break s;for(Na=Na[0],ga.xc=fa,xs=0;xs<Io;++xs){var Kn=Na[xs]>>8&65535;Na[xs]=Kn,Kn>=qa&&(qa=Kn+1)}}if(dr.h)break s;for(Wt=0;5>Wt;++Wt){var Rs=wg[Wt];!Wt&&0<ms&&(Rs+=1<<ms),Nr<Rs&&(Nr=Rs)}var ch=o(qa*tn,F),Ug=qa,Dg=o(Ug,P);if(Dg==null)var cA=null;else t(65536>=Ug),cA=Dg;var dc=i(Nr);if(cA==null||dc==null||ch==null){Xa.a=1;break s}var dA=ch;for(xs=aa=0;xs<qa;++xs){var Rr=cA[xs],Lo=Rr.G,To=Rr.H,Ig=0,AA=1,Lg=0;for(Wt=0;5>Wt;++Wt){Rs=wg[Wt],Lo[Wt]=dA,To[Wt]=aa,!Wt&&0<ms&&(Rs+=1<<ms);r:{var uA,dh=Rs,mA=Xa,Ac=dc,mN=dA,hN=aa,Ah=0,zn=mA.m,xN=oe(zn,1);if(n(Ac,0,0,dh),xN){var pN=oe(zn,1)+1,gN=oe(zn,1),Tg=oe(zn,gN==0?1:8);Ac[Tg]=1,pN==2&&(Ac[Tg=oe(zn,8)]=1);var hA=1}else{var Qg=i(19),Pg=oe(zn,4)+4;if(19<Pg){mA.a=3;var xA=0;break r}for(uA=0;uA<Pg;++uA)Qg[$1[uA]]=oe(zn,3);var uh=void 0,uc=void 0,Mg=mA,fN=Qg,pA=dh,Rg=Ac,mh=0,Gn=Mg.m,Og=8,Hg=o(128,F);a:for(;f(Hg,0,7,fN,19);){if(oe(Gn,1)){var bN=2+2*oe(Gn,3);if((uh=2+oe(Gn,bN))>pA)break a}else uh=pA;for(uc=0;uc<pA&&uh--;){ne(Gn);var qg=Hg[0+(127&B(Gn))];T(Gn,Gn.u+qg.g);var Qo=qg.value;if(16>Qo)Rg[uc++]=Qo,Qo!=0&&(Og=Qo);else{var yN=Qo==16,$g=Qo-16,vN=H1[$g],Vg=oe(Gn,O1[$g])+vN;if(uc+Vg>pA)break a;for(var wN=yN?Og:0;0<Vg--;)Rg[uc++]=wN}}mh=1;break a}mh||(Mg.a=3),hA=mh}(hA=hA&&!zn.h)&&(Ah=f(mN,hN,8,Ac,dh)),hA&&Ah!=0?xA=Ah:(mA.a=3,xA=0)}if(xA==0)break s;if(AA&&q1[Wt]==1&&(AA=dA[aa].g==0),Ig+=dA[aa].g,aa+=xA,3>=Wt){var mc,hh=dc[0];for(mc=1;mc<Rs;++mc)dc[mc]>hh&&(hh=dc[mc]);Lg+=hh}}if(Rr.nd=AA,Rr.Qb=0,AA&&(Rr.qb=(Lo[3][To[3]+0].value<<24|Lo[1][To[1]+0].value<<16|Lo[2][To[2]+0].value)>>>0,Ig==0&&256>Lo[0][To[0]+0].value&&(Rr.Qb=1,Rr.qb+=Lo[0][To[0]+0].value<<8)),Rr.jc=!Rr.Qb&&6>Lg,Rr.jc){var gA,jn=Rr;for(gA=0;gA<ja;++gA){var Wn=gA,Jn=jn.pd[Wn],fA=jn.G[0][jn.H[0]+Wn];256<=fA.value?(Jn.g=fA.g+256,Jn.value=fA.value):(Jn.g=0,Jn.value=0,Wn>>=De(fA,8,Jn),Wn>>=De(jn.G[1][jn.H[1]+Wn],16,Jn),Wn>>=De(jn.G[2][jn.H[2]+Wn],0,Jn),De(jn.G[3][jn.H[3]+Wn],24,Jn))}}}ga.vc=Na,ga.Wb=qa,ga.Ya=cA,ga.yc=ch,gs=1;break t}gs=0}if(!(J=gs)){Q.a=3;break e}if(0<Fe){if(ce.ua=1<<Fe,!Xe(ce.Wa,Fe)){Q.a=1,J=0;break e}}else ce.ua=0;var xh=Q,Kg=Y,jN=te,ph=xh.s,gh=ph.xc;if(xh.c=Kg,xh.i=jN,ph.md=qe(Kg,gh),ph.wc=gh==0?-1:(1<<gh)-1,U){Q.xb=eN;break e}if((ge=i(Y*te))==null){Q.a=1,J=0;break e}J=(J=_s(Q,ge,0,Y,te,te,null))&&!ae.h;break e}return J?(z!=null?z[0]=ge:(t(ge==null),t(U)),Q.$=0,U||Qs(ce)):Qs(ce),J}function Ps(h,w){var U=h.c*h.i,Q=U+w+16*w;return t(h.c<=w),h.V=i(Q),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+U+w,1)}function co(h,w){var U=h.C,Q=w-U,z=h.V,J=h.Ba+h.c*U;for(t(w<=h.l.o);0<Q;){var Y=16<Q?16:Q,te=h.l.ma,ae=h.l.width,ce=ae*Y,ge=te.ca,Fe=te.tb+ae*U,Ue=h.Ta,we=h.Ua;Je(h,Y,z,J),zs(Ue,we,ge,Fe,ce),at(te,U,U+Y,ge,Fe,ae),Q-=Y,z+=Y*h.c,U+=Y}t(U==w),h.C=h.Ma=w}function Ao(){this.ub=this.yd=this.td=this.Rb=0}function uo(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function mo(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function kd(){this.Yb=function(){var h=[];return function w(U,Q,z){for(var J=z[Q],Y=0;Y<J&&(U.push(z.length>Q+1?[]:0),!(z.length<Q+1));Y++)w(U[Y],Q+1,z)}(h,0,[3,11]),h}()}function Em(){this.jb=i(3),this.Wc=l([4,8],kd),this.Xc=l([4,17],kd)}function Fm(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function ho(){this.ld=this.La=this.dd=this.tc=0}function Ed(){this.Na=this.la=0}function Um(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Pl(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Dm(){this.uc=this.M=this.Nb=0,this.wa=Array(new ho),this.Y=0,this.ya=Array(new Pl),this.aa=0,this.l=new xo}function Fd(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Im(){this.cb=this.a=0,this.sc="",this.m=new H,this.Od=new Ao,this.Kc=new uo,this.ed=new Fm,this.Qa=new mo,this.Ic=this.$c=this.Aa=0,this.D=new Dm,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,H),this.ia=0,this.pb=o(4,Um),this.Pa=new Em,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Fd),this.Hd=0,this.rb=Array(new Ed),this.sb=0,this.wa=Array(new ho),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Pl),this.L=this.aa=0,this.gd=l([4,2],ho),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function xo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Lm(){var h=new Im;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,lc||(lc=Id)),h}function Vs(h,w,U){return h.a==0&&(h.a=w,h.sc=U,h.cb=0),0}function Ud(h,w,U){return 3<=U&&h[w+0]==157&&h[w+1]==1&&h[w+2]==42}function Dd(h,w){if(h==null)return 0;if(h.a=0,h.sc="OK",w==null)return Vs(h,2,"null VP8Io passed to VP8GetHeaders()");var U=w.data,Q=w.w,z=w.ha;if(4>z)return Vs(h,7,"Truncated header.");var J=U[Q+0]|U[Q+1]<<8|U[Q+2]<<16,Y=h.Od;if(Y.Rb=!(1&J),Y.td=J>>1&7,Y.yd=J>>4&1,Y.ub=J>>5,3<Y.td)return Vs(h,3,"Incorrect keyframe parameters.");if(!Y.yd)return Vs(h,4,"Frame not displayable.");Q+=3,z-=3;var te=h.Kc;if(Y.Rb){if(7>z)return Vs(h,7,"cannot parse picture header");if(!Ud(U,Q,z))return Vs(h,3,"Bad code word");te.c=16383&(U[Q+4]<<8|U[Q+3]),te.Td=U[Q+4]>>6,te.i=16383&(U[Q+6]<<8|U[Q+5]),te.Ud=U[Q+6]>>6,Q+=7,z-=7,h.za=te.c+15>>4,h.Ub=te.i+15>>4,w.width=te.c,w.height=te.i,w.Da=0,w.j=0,w.v=0,w.va=w.width,w.o=w.height,w.da=0,w.ib=w.width,w.hb=w.height,w.U=w.width,w.T=w.height,n((J=h.Pa).jb,0,255,J.jb.length),t((J=h.Qa)!=null),J.Cb=0,J.Bb=0,J.Fb=1,n(J.Zb,0,0,J.Zb.length),n(J.Lb,0,0,J.Lb)}if(Y.ub>z)return Vs(h,7,"bad partition length");Z(J=h.m,U,Q,Y.ub),Q+=Y.ub,z-=Y.ub,Y.Rb&&(te.Ld=me(J),te.Kd=me(J)),te=h.Qa;var ae,ce=h.Pa;if(t(J!=null),t(te!=null),te.Cb=me(J),te.Cb){if(te.Bb=me(J),me(J)){for(te.Fb=me(J),ae=0;4>ae;++ae)te.Zb[ae]=me(J)?X(J,7):0;for(ae=0;4>ae;++ae)te.Lb[ae]=me(J)?X(J,6):0}if(te.Bb)for(ae=0;3>ae;++ae)ce.jb[ae]=me(J)?O(J,8):255}else te.Bb=0;if(J.Ka)return Vs(h,3,"cannot parse segment header");if((te=h.ed).zd=me(J),te.Tb=O(J,6),te.wb=O(J,3),te.Pc=me(J),te.Pc&&me(J)){for(ce=0;4>ce;++ce)me(J)&&(te.vd[ce]=X(J,6));for(ce=0;4>ce;++ce)me(J)&&(te.od[ce]=X(J,6))}if(h.L=te.Tb==0?0:te.zd?1:2,J.Ka)return Vs(h,3,"cannot parse filter header");var ge=z;if(z=ae=Q,Q=ae+ge,te=ge,h.Xb=(1<<O(h.m,2))-1,ge<3*(ce=h.Xb))U=7;else{for(ae+=3*ce,te-=3*ce,ge=0;ge<ce;++ge){var Fe=U[z+0]|U[z+1]<<8|U[z+2]<<16;Fe>te&&(Fe=te),Z(h.Jc[+ge],U,ae,Fe),ae+=Fe,te-=Fe,z+=3}Z(h.Jc[+ce],U,ae,te),U=ae<Q?0:5}if(U!=0)return Vs(h,U,"cannot parse partitions");for(U=O(ae=h.m,7),z=me(ae)?X(ae,4):0,Q=me(ae)?X(ae,4):0,te=me(ae)?X(ae,4):0,ce=me(ae)?X(ae,4):0,ae=me(ae)?X(ae,4):0,ge=h.Qa,Fe=0;4>Fe;++Fe){if(ge.Cb){var Ue=ge.Zb[Fe];ge.Fb||(Ue+=U)}else{if(0<Fe){h.pb[Fe]=h.pb[0];continue}Ue=U}var we=h.pb[Fe];we.Sc[0]=ih[or(Ue+z,127)],we.Sc[1]=oh[or(Ue+0,127)],we.Eb[0]=2*ih[or(Ue+Q,127)],we.Eb[1]=101581*oh[or(Ue+te,127)]>>16,8>we.Eb[1]&&(we.Eb[1]=8),we.Qc[0]=ih[or(Ue+ce,117)],we.Qc[1]=oh[or(Ue+ae,127)],we.lc=Ue+ae}if(!Y.Rb)return Vs(h,4,"Not a key frame.");for(me(J),Y=h.Pa,U=0;4>U;++U){for(z=0;8>z;++z)for(Q=0;3>Q;++Q)for(te=0;11>te;++te)ce=xe(J,X1[U][z][Q][te])?O(J,8):J1[U][z][Q][te],Y.Wc[U][z].Yb[Q][te]=ce;for(z=0;17>z;++z)Y.Xc[U][z]=Y.Wc[U][Z1[z]]}return h.kc=me(J),h.kc&&(h.Bd=O(J,8)),h.cb=1}function Id(h,w,U,Q,z,J,Y){var te=w[z].Yb[U];for(U=0;16>z;++z){if(!xe(h,te[U+0]))return z;for(;!xe(h,te[U+1]);)if(te=w[++z].Yb[0],U=0,z==16)return 16;var ae=w[z+1].Yb;if(xe(h,te[U+2])){var ce=h,ge=0;if(xe(ce,(Ue=te)[(Fe=U)+3]))if(xe(ce,Ue[Fe+6])){for(te=0,Fe=2*(ge=xe(ce,Ue[Fe+8]))+(Ue=xe(ce,Ue[Fe+9+ge])),ge=0,Ue=G1[Fe];Ue[te];++te)ge+=ge+xe(ce,Ue[te]);ge+=3+(8<<Fe)}else xe(ce,Ue[Fe+7])?(ge=7+2*xe(ce,165),ge+=xe(ce,145)):ge=5+xe(ce,159);else ge=xe(ce,Ue[Fe+4])?3+xe(ce,Ue[Fe+5]):2;te=ae[2]}else ge=1,te=ae[1];ae=Y+W1[z],0>(ce=h).b&&ue(ce);var Fe,Ue=ce.b,we=(Fe=ce.Ca>>1)-(ce.I>>Ue)>>31;--ce.b,ce.Ca+=we,ce.Ca|=1,ce.I-=(Fe+1&we)<<Ue,J[ae]=((ge^we)-we)*Q[(0<z)+0]}return 16}function Ml(h){var w=h.rb[h.sb-1];w.la=0,w.Na=0,n(h.zc,0,0,h.zc.length),h.ja=0}function Tm(h,w){if(h==null)return 0;if(w==null)return Vs(h,2,"NULL VP8Io parameter in VP8Decode().");if(!h.cb&&!Dd(h,w))return 0;if(t(h.cb),w.ac==null||w.ac(w)){w.ob&&(h.L=0);var U=lA[h.L];if(h.L==2?(h.yb=0,h.zb=0):(h.yb=w.v-U>>4,h.zb=w.j-U>>4,0>h.yb&&(h.yb=0),0>h.zb&&(h.zb=0)),h.Va=w.o+15+U>>4,h.Hb=w.va+15+U>>4,h.Hb>h.za&&(h.Hb=h.za),h.Va>h.Ub&&(h.Va=h.Ub),0<h.L){var Q=h.ed;for(U=0;4>U;++U){var z;if(h.Qa.Cb){var J=h.Qa.Lb[U];h.Qa.Fb||(J+=Q.Tb)}else J=Q.Tb;for(z=0;1>=z;++z){var Y=h.gd[U][z],te=J;if(Q.Pc&&(te+=Q.vd[0],z&&(te+=Q.od[0])),0<(te=0>te?0:63<te?63:te)){var ae=te;0<Q.wb&&(ae=4<Q.wb?ae>>2:ae>>1)>9-Q.wb&&(ae=9-Q.wb),1>ae&&(ae=1),Y.dd=ae,Y.tc=2*te+ae,Y.ld=40<=te?2:15<=te?1:0}else Y.tc=0;Y.La=z}}}U=0}else Vs(h,6,"Frame setup failed"),U=h.a;if(U=U==0){if(U){h.$c=0,0<h.Aa||(h.Ic=uN);e:{U=h.Ic,Q=4*(ae=h.za);var ce=32*ae,ge=ae+1,Fe=0<h.L?ae*(0<h.Aa?2:1):0,Ue=(h.Aa==2?2:1)*ae;if((Y=Q+832+(z=3*(16*U+lA[h.L])/2*ce)+(J=h.Fa!=null&&0<h.Fa.length?h.Kc.c*h.Kc.i:0))!=Y)U=0;else{if(Y>h.Vb){if(h.Vb=0,h.Ec=i(Y),h.Fc=0,h.Ec==null){U=Vs(h,1,"no memory during frame initialization.");break e}h.Vb=Y}Y=h.Ec,te=h.Fc,h.Ac=Y,h.Bc=te,te+=Q,h.Gd=o(ce,Fd),h.Hd=0,h.rb=o(ge+1,Ed),h.sb=1,h.wa=Fe?o(Fe,ho):null,h.Y=0,h.D.Nb=0,h.D.wa=h.wa,h.D.Y=h.Y,0<h.Aa&&(h.D.Y+=ae),t(!0),h.oc=Y,h.pc=te,te+=832,h.ya=o(Ue,Pl),h.aa=0,h.D.ya=h.ya,h.D.aa=h.aa,h.Aa==2&&(h.D.aa+=ae),h.R=16*ae,h.B=8*ae,ae=(ce=lA[h.L])*h.R,ce=ce/2*h.B,h.sa=Y,h.ta=te+ae,h.qa=h.sa,h.ra=h.ta+16*U*h.R+ce,h.Ha=h.qa,h.Ia=h.ra+8*U*h.B+ce,h.$c=0,te+=z,h.mb=J?Y:null,h.nb=J?te:null,t(te+J<=h.Fc+h.Vb),Ml(h),n(h.Ac,h.Bc,0,Q),U=1}}if(U){if(w.ka=0,w.y=h.sa,w.O=h.ta,w.f=h.qa,w.N=h.ra,w.ea=h.Ha,w.Vd=h.Ia,w.fa=h.R,w.Rc=h.B,w.F=null,w.J=0,!Zd){for(U=-255;255>=U;++U)ma[255+U]=0>U?-U:U;for(U=-1020;1020>=U;++U)yn[1020+U]=-128>U?-128:127<U?127:U;for(U=-112;112>=U;++U)oc[112+U]=-16>U?-16:15<U?15:U;for(U=-255;510>=U;++U)Do[255+U]=0>U?0:255<U?255:U;Zd=1}Eo=Mm,bn=Qm,rc=Td,Ha=Pm,br=Qd,Ks=Ld,Fo=Vl,Xd=Ci,nc=Xm,ki=Kl,Ei=Ym,Hn=vo,Fi=zl,Uo=Kd,Ui=Vd,qn=Zr,ic=pn,yr=Jm,Mr[0]=Xr,Mr[1]=Rm,Mr[2]=$m,Mr[3]=Vm,Mr[4]=Rd,Mr[5]=bo,Mr[6]=Od,Mr[7]=Hl,Mr[8]=zm,Mr[9]=Km,$n[0]=Pd,$n[1]=Hm,$n[2]=xn,$n[3]=go,$n[4]=Sa,$n[5]=qm,$n[6]=Md,vn[0]=Qn,vn[1]=Om,vn[2]=Gm,vn[3]=ql,vn[4]=_i,vn[5]=Wm,vn[6]=$l,U=1}else U=0}U&&(U=function(we,ze){for(we.M=0;we.M<we.Va;++we.M){var Te,fe=we.Jc[we.M&we.Xb],be=we.m,Ve=we;for(Te=0;Te<Ve.za;++Te){var Ge=be,Ke=Ve,xt=Ke.Ac,st=Ke.Bc+4*Te,kt=Ke.zc,nt=Ke.ya[Ke.aa+Te];if(Ke.Qa.Bb?nt.$b=xe(Ge,Ke.Pa.jb[0])?2+xe(Ge,Ke.Pa.jb[2]):xe(Ge,Ke.Pa.jb[1]):nt.$b=0,Ke.kc&&(nt.Ad=xe(Ge,Ke.Bd)),nt.Za=!xe(Ge,145)+0,nt.Za){var ls=nt.Ob,us=0;for(Ke=0;4>Ke;++Ke){var ns,ts=kt[0+Ke];for(ns=0;4>ns;++ns){ts=Y1[xt[st+ns]][ts];for(var gs=jg[xe(Ge,ts[0])];0<gs;)gs=jg[2*gs+xe(Ge,ts[gs])];ts=-gs,xt[st+ns]=ts}r(ls,us,xt,st,4),us+=4,kt[0+Ke]=ts}}else ts=xe(Ge,156)?xe(Ge,128)?1:3:xe(Ge,163)?2:0,nt.Ob[0]=ts,n(xt,st,ts,4),n(kt,0,ts,4);nt.Dd=xe(Ge,142)?xe(Ge,114)?xe(Ge,183)?1:3:2:0}if(Ve.m.Ka)return Vs(we,7,"Premature end-of-partition0 encountered.");for(;we.ja<we.za;++we.ja){if(Ve=fe,Ge=(be=we).rb[be.sb-1],xt=be.rb[be.sb+be.ja],Te=be.ya[be.aa+be.ja],st=be.kc?Te.Ad:0)Ge.la=xt.la=0,Te.Za||(Ge.Na=xt.Na=0),Te.Hc=0,Te.Gc=0,Te.ia=0;else{var xs,Wt;if(Ge=xt,xt=Ve,st=be.Pa.Xc,kt=be.ya[be.aa+be.ja],nt=be.pb[kt.$b],Ke=kt.ad,ls=0,us=be.rb[be.sb-1],ts=ns=0,n(Ke,ls,0,384),kt.Za)var aa=0,Xa=st[3];else{gs=i(16);var ra=Ge.Na+us.Na;if(ra=lc(xt,st[1],ra,nt.Eb,0,gs,0),Ge.Na=us.Na=(0<ra)+0,1<ra)Eo(gs,0,Ke,ls);else{var Za=gs[0]+3>>3;for(gs=0;256>gs;gs+=16)Ke[ls+gs]=Za}aa=1,Xa=st[0]}var ms=15&Ge.la,cr=15&us.la;for(gs=0;4>gs;++gs){var dr=1&cr;for(Za=Wt=0;4>Za;++Za)ms=ms>>1|(dr=(ra=lc(xt,Xa,ra=dr+(1&ms),nt.Sc,aa,Ke,ls))>aa)<<7,Wt=Wt<<2|(3<ra?3:1<ra?2:Ke[ls+0]!=0),ls+=16;ms>>=4,cr=cr>>1|dr<<7,ns=(ns<<8|Wt)>>>0}for(Xa=ms,aa=cr>>4,xs=0;4>xs;xs+=2){for(Wt=0,ms=Ge.la>>4+xs,cr=us.la>>4+xs,gs=0;2>gs;++gs){for(dr=1&cr,Za=0;2>Za;++Za)ra=dr+(1&ms),ms=ms>>1|(dr=0<(ra=lc(xt,st[2],ra,nt.Qc,0,Ke,ls)))<<3,Wt=Wt<<2|(3<ra?3:1<ra?2:Ke[ls+0]!=0),ls+=16;ms>>=2,cr=cr>>1|dr<<5}ts|=Wt<<4*xs,Xa|=ms<<4<<xs,aa|=(240&cr)<<xs}Ge.la=Xa,us.la=aa,kt.Hc=ns,kt.Gc=ts,kt.ia=43690&ts?0:nt.ia,st=!(ns|ts)}if(0<be.L&&(be.wa[be.Y+be.ja]=be.gd[Te.$b][Te.Za],be.wa[be.Y+be.ja].La|=!st),Ve.Ka)return Vs(we,7,"Premature end-of-file encountered.")}if(Ml(we),be=ze,Ve=1,Te=(fe=we).D,Ge=0<fe.L&&fe.M>=fe.zb&&fe.M<=fe.Va,fe.Aa==0)e:{if(Te.M=fe.M,Te.uc=Ge,Zl(fe,Te),Ve=1,Te=(Wt=fe.D).Nb,Ge=(ts=lA[fe.L])*fe.R,xt=ts/2*fe.B,gs=16*Te*fe.R,Za=8*Te*fe.B,st=fe.sa,kt=fe.ta-Ge+gs,nt=fe.qa,Ke=fe.ra-xt+Za,ls=fe.Ha,us=fe.Ia-xt+Za,cr=(ms=Wt.M)==0,ns=ms>=fe.Va-1,fe.Aa==2&&Zl(fe,Wt),Wt.uc)for(dr=(ra=fe).D.M,t(ra.D.uc),Wt=ra.yb;Wt<ra.Hb;++Wt){aa=Wt,Xa=dr;var ga=(Na=(Rs=ra).D).Nb;xs=Rs.R;var Na=Na.wa[Na.Y+aa],qa=Rs.sa,Nr=Rs.ta+16*ga*xs+16*aa,tn=Na.dd,fa=Na.tc;if(fa!=0)if(t(3<=fa),Rs.L==1)0<aa&&qn(qa,Nr,xs,fa+4),Na.La&&yr(qa,Nr,xs,fa),0<Xa&&Ui(qa,Nr,xs,fa+4),Na.La&&ic(qa,Nr,xs,fa);else{var wn=Rs.B,Di=Rs.qa,Io=Rs.ra+8*ga*wn+8*aa,Kn=Rs.Ha,Rs=Rs.Ia+8*ga*wn+8*aa;ga=Na.ld,0<aa&&(Xd(qa,Nr,xs,fa+4,tn,ga),ki(Di,Io,Kn,Rs,wn,fa+4,tn,ga)),Na.La&&(Hn(qa,Nr,xs,fa,tn,ga),Uo(Di,Io,Kn,Rs,wn,fa,tn,ga)),0<Xa&&(Fo(qa,Nr,xs,fa+4,tn,ga),nc(Di,Io,Kn,Rs,wn,fa+4,tn,ga)),Na.La&&(Ei(qa,Nr,xs,fa,tn,ga),Fi(Di,Io,Kn,Rs,wn,fa,tn,ga))}}if(fe.ia&&alert("todo:DitherRow"),be.put!=null){if(Wt=16*ms,ms=16*(ms+1),cr?(be.y=fe.sa,be.O=fe.ta+gs,be.f=fe.qa,be.N=fe.ra+Za,be.ea=fe.Ha,be.W=fe.Ia+Za):(Wt-=ts,be.y=st,be.O=kt,be.f=nt,be.N=Ke,be.ea=ls,be.W=us),ns||(ms-=ts),ms>be.o&&(ms=be.o),be.F=null,be.J=null,fe.Fa!=null&&0<fe.Fa.length&&Wt<ms&&(be.J=Yl(fe,be,Wt,ms-Wt),be.F=fe.mb,be.F==null&&be.F.length==0)){Ve=Vs(fe,3,"Could not decode alpha data.");break e}Wt<be.j&&(ts=be.j-Wt,Wt=be.j,t(!(1&ts)),be.O+=fe.R*ts,be.N+=fe.B*(ts>>1),be.W+=fe.B*(ts>>1),be.F!=null&&(be.J+=be.width*ts)),Wt<ms&&(be.O+=be.v,be.N+=be.v>>1,be.W+=be.v>>1,be.F!=null&&(be.J+=be.v),be.ka=Wt-be.j,be.U=be.va-be.v,be.T=ms-Wt,Ve=be.put(be))}Te+1!=fe.Ic||ns||(r(fe.sa,fe.ta-Ge,st,kt+16*fe.R,Ge),r(fe.qa,fe.ra-xt,nt,Ke+8*fe.B,xt),r(fe.Ha,fe.Ia-xt,ls,us+8*fe.B,xt))}if(!Ve)return Vs(we,6,"Output aborted.")}return 1}(h,w)),w.bc!=null&&w.bc(w),U&=1}return U?(h.cb=0,U):0}function Tr(h,w,U,Q,z){z=h[w+U+32*Q]+(z>>3),h[w+U+32*Q]=-256&z?0>z?0:255:z}function po(h,w,U,Q,z,J){Tr(h,w,0,U,Q+z),Tr(h,w,1,U,Q+J),Tr(h,w,2,U,Q-J),Tr(h,w,3,U,Q-z)}function Wa(h){return(20091*h>>16)+h}function Rl(h,w,U,Q){var z,J=0,Y=i(16);for(z=0;4>z;++z){var te=h[w+0]+h[w+8],ae=h[w+0]-h[w+8],ce=(35468*h[w+4]>>16)-Wa(h[w+12]),ge=Wa(h[w+4])+(35468*h[w+12]>>16);Y[J+0]=te+ge,Y[J+1]=ae+ce,Y[J+2]=ae-ce,Y[J+3]=te-ge,J+=4,w++}for(z=J=0;4>z;++z)te=(h=Y[J+0]+4)+Y[J+8],ae=h-Y[J+8],ce=(35468*Y[J+4]>>16)-Wa(Y[J+12]),Tr(U,Q,0,0,te+(ge=Wa(Y[J+4])+(35468*Y[J+12]>>16))),Tr(U,Q,1,0,ae+ce),Tr(U,Q,2,0,ae-ce),Tr(U,Q,3,0,te-ge),J++,Q+=32}function Ld(h,w,U,Q){var z=h[w+0]+4,J=35468*h[w+4]>>16,Y=Wa(h[w+4]),te=35468*h[w+1]>>16;po(U,Q,0,z+Y,h=Wa(h[w+1]),te),po(U,Q,1,z+J,h,te),po(U,Q,2,z-J,h,te),po(U,Q,3,z-Y,h,te)}function Qm(h,w,U,Q,z){Rl(h,w,U,Q),z&&Rl(h,w+16,U,Q+4)}function Td(h,w,U,Q){bn(h,w+0,U,Q,1),bn(h,w+32,U,Q+128,1)}function Pm(h,w,U,Q){var z;for(h=h[w+0]+4,z=0;4>z;++z)for(w=0;4>w;++w)Tr(U,Q,w,z,h)}function Qd(h,w,U,Q){h[w+0]&&Ha(h,w+0,U,Q),h[w+16]&&Ha(h,w+16,U,Q+4),h[w+32]&&Ha(h,w+32,U,Q+128),h[w+48]&&Ha(h,w+48,U,Q+128+4)}function Mm(h,w,U,Q){var z,J=i(16);for(z=0;4>z;++z){var Y=h[w+0+z]+h[w+12+z],te=h[w+4+z]+h[w+8+z],ae=h[w+4+z]-h[w+8+z],ce=h[w+0+z]-h[w+12+z];J[0+z]=Y+te,J[8+z]=Y-te,J[4+z]=ce+ae,J[12+z]=ce-ae}for(z=0;4>z;++z)Y=(h=J[0+4*z]+3)+J[3+4*z],te=J[1+4*z]+J[2+4*z],ae=J[1+4*z]-J[2+4*z],ce=h-J[3+4*z],U[Q+0]=Y+te>>3,U[Q+16]=ce+ae>>3,U[Q+32]=Y-te>>3,U[Q+48]=ce-ae>>3,Q+=64}function Ol(h,w,U){var Q,z=w-32,J=lr,Y=255-h[z-1];for(Q=0;Q<U;++Q){var te,ae=J,ce=Y+h[w-1];for(te=0;te<U;++te)h[w+te]=ae[ce+h[z+te]];w+=32}}function Rm(h,w){Ol(h,w,4)}function Om(h,w){Ol(h,w,8)}function Hm(h,w){Ol(h,w,16)}function xn(h,w){var U;for(U=0;16>U;++U)r(h,w+32*U,h,w-32,16)}function go(h,w){var U;for(U=16;0<U;--U)n(h,w,h[w-1],16),w+=32}function fo(h,w,U){var Q;for(Q=0;16>Q;++Q)n(w,U+32*Q,h,16)}function Pd(h,w){var U,Q=16;for(U=0;16>U;++U)Q+=h[w-1+32*U]+h[w+U-32];fo(Q>>5,h,w)}function Sa(h,w){var U,Q=8;for(U=0;16>U;++U)Q+=h[w-1+32*U];fo(Q>>4,h,w)}function qm(h,w){var U,Q=8;for(U=0;16>U;++U)Q+=h[w+U-32];fo(Q>>4,h,w)}function Md(h,w){fo(128,h,w)}function Rt(h,w,U){return h+2*w+U+2>>2}function $m(h,w){var U,Q=w-32;for(Q=new Uint8Array([Rt(h[Q-1],h[Q+0],h[Q+1]),Rt(h[Q+0],h[Q+1],h[Q+2]),Rt(h[Q+1],h[Q+2],h[Q+3]),Rt(h[Q+2],h[Q+3],h[Q+4])]),U=0;4>U;++U)r(h,w+32*U,Q,0,Q.length)}function Vm(h,w){var U=h[w-1],Q=h[w-1+32],z=h[w-1+64],J=h[w-1+96];Be(h,w+0,16843009*Rt(h[w-1-32],U,Q)),Be(h,w+32,16843009*Rt(U,Q,z)),Be(h,w+64,16843009*Rt(Q,z,J)),Be(h,w+96,16843009*Rt(z,J,J))}function Xr(h,w){var U,Q=4;for(U=0;4>U;++U)Q+=h[w+U-32]+h[w-1+32*U];for(Q>>=3,U=0;4>U;++U)n(h,w+32*U,Q,4)}function Rd(h,w){var U=h[w-1+0],Q=h[w-1+32],z=h[w-1+64],J=h[w-1-32],Y=h[w+0-32],te=h[w+1-32],ae=h[w+2-32],ce=h[w+3-32];h[w+0+96]=Rt(Q,z,h[w-1+96]),h[w+1+96]=h[w+0+64]=Rt(U,Q,z),h[w+2+96]=h[w+1+64]=h[w+0+32]=Rt(J,U,Q),h[w+3+96]=h[w+2+64]=h[w+1+32]=h[w+0+0]=Rt(Y,J,U),h[w+3+64]=h[w+2+32]=h[w+1+0]=Rt(te,Y,J),h[w+3+32]=h[w+2+0]=Rt(ae,te,Y),h[w+3+0]=Rt(ce,ae,te)}function Od(h,w){var U=h[w+1-32],Q=h[w+2-32],z=h[w+3-32],J=h[w+4-32],Y=h[w+5-32],te=h[w+6-32],ae=h[w+7-32];h[w+0+0]=Rt(h[w+0-32],U,Q),h[w+1+0]=h[w+0+32]=Rt(U,Q,z),h[w+2+0]=h[w+1+32]=h[w+0+64]=Rt(Q,z,J),h[w+3+0]=h[w+2+32]=h[w+1+64]=h[w+0+96]=Rt(z,J,Y),h[w+3+32]=h[w+2+64]=h[w+1+96]=Rt(J,Y,te),h[w+3+64]=h[w+2+96]=Rt(Y,te,ae),h[w+3+96]=Rt(te,ae,ae)}function bo(h,w){var U=h[w-1+0],Q=h[w-1+32],z=h[w-1+64],J=h[w-1-32],Y=h[w+0-32],te=h[w+1-32],ae=h[w+2-32],ce=h[w+3-32];h[w+0+0]=h[w+1+64]=J+Y+1>>1,h[w+1+0]=h[w+2+64]=Y+te+1>>1,h[w+2+0]=h[w+3+64]=te+ae+1>>1,h[w+3+0]=ae+ce+1>>1,h[w+0+96]=Rt(z,Q,U),h[w+0+64]=Rt(Q,U,J),h[w+0+32]=h[w+1+96]=Rt(U,J,Y),h[w+1+32]=h[w+2+96]=Rt(J,Y,te),h[w+2+32]=h[w+3+96]=Rt(Y,te,ae),h[w+3+32]=Rt(te,ae,ce)}function Hl(h,w){var U=h[w+0-32],Q=h[w+1-32],z=h[w+2-32],J=h[w+3-32],Y=h[w+4-32],te=h[w+5-32],ae=h[w+6-32],ce=h[w+7-32];h[w+0+0]=U+Q+1>>1,h[w+1+0]=h[w+0+64]=Q+z+1>>1,h[w+2+0]=h[w+1+64]=z+J+1>>1,h[w+3+0]=h[w+2+64]=J+Y+1>>1,h[w+0+32]=Rt(U,Q,z),h[w+1+32]=h[w+0+96]=Rt(Q,z,J),h[w+2+32]=h[w+1+96]=Rt(z,J,Y),h[w+3+32]=h[w+2+96]=Rt(J,Y,te),h[w+3+64]=Rt(Y,te,ae),h[w+3+96]=Rt(te,ae,ce)}function Km(h,w){var U=h[w-1+0],Q=h[w-1+32],z=h[w-1+64],J=h[w-1+96];h[w+0+0]=U+Q+1>>1,h[w+2+0]=h[w+0+32]=Q+z+1>>1,h[w+2+32]=h[w+0+64]=z+J+1>>1,h[w+1+0]=Rt(U,Q,z),h[w+3+0]=h[w+1+32]=Rt(Q,z,J),h[w+3+32]=h[w+1+64]=Rt(z,J,J),h[w+3+64]=h[w+2+64]=h[w+0+96]=h[w+1+96]=h[w+2+96]=h[w+3+96]=J}function zm(h,w){var U=h[w-1+0],Q=h[w-1+32],z=h[w-1+64],J=h[w-1+96],Y=h[w-1-32],te=h[w+0-32],ae=h[w+1-32],ce=h[w+2-32];h[w+0+0]=h[w+2+32]=U+Y+1>>1,h[w+0+32]=h[w+2+64]=Q+U+1>>1,h[w+0+64]=h[w+2+96]=z+Q+1>>1,h[w+0+96]=J+z+1>>1,h[w+3+0]=Rt(te,ae,ce),h[w+2+0]=Rt(Y,te,ae),h[w+1+0]=h[w+3+32]=Rt(U,Y,te),h[w+1+32]=h[w+3+64]=Rt(Q,U,Y),h[w+1+64]=h[w+3+96]=Rt(z,Q,U),h[w+1+96]=Rt(J,z,Q)}function Gm(h,w){var U;for(U=0;8>U;++U)r(h,w+32*U,h,w-32,8)}function ql(h,w){var U;for(U=0;8>U;++U)n(h,w,h[w-1],8),w+=32}function Ni(h,w,U){var Q;for(Q=0;8>Q;++Q)n(w,U+32*Q,h,8)}function Qn(h,w){var U,Q=8;for(U=0;8>U;++U)Q+=h[w+U-32]+h[w-1+32*U];Ni(Q>>4,h,w)}function Wm(h,w){var U,Q=4;for(U=0;8>U;++U)Q+=h[w+U-32];Ni(Q>>3,h,w)}function _i(h,w){var U,Q=4;for(U=0;8>U;++U)Q+=h[w-1+32*U];Ni(Q>>3,h,w)}function $l(h,w){Ni(128,h,w)}function yo(h,w,U){var Q=h[w-U],z=h[w+0],J=3*(z-Q)+th[1020+h[w-2*U]-h[w+U]],Y=eA[112+(J+4>>3)];h[w-U]=lr[255+Q+eA[112+(J+3>>3)]],h[w+0]=lr[255+z-Y]}function Hd(h,w,U,Q){var z=h[w+0],J=h[w+U];return wr[255+h[w-2*U]-h[w-U]]>Q||wr[255+J-z]>Q}function qd(h,w,U,Q){return 4*wr[255+h[w-U]-h[w+0]]+wr[255+h[w-2*U]-h[w+U]]<=Q}function $d(h,w,U,Q,z){var J=h[w-3*U],Y=h[w-2*U],te=h[w-U],ae=h[w+0],ce=h[w+U],ge=h[w+2*U],Fe=h[w+3*U];return 4*wr[255+te-ae]+wr[255+Y-ce]>Q?0:wr[255+h[w-4*U]-J]<=z&&wr[255+J-Y]<=z&&wr[255+Y-te]<=z&&wr[255+Fe-ge]<=z&&wr[255+ge-ce]<=z&&wr[255+ce-ae]<=z}function Vd(h,w,U,Q){var z=2*Q+1;for(Q=0;16>Q;++Q)qd(h,w+Q,U,z)&&yo(h,w+Q,U)}function Zr(h,w,U,Q){var z=2*Q+1;for(Q=0;16>Q;++Q)qd(h,w+Q*U,1,z)&&yo(h,w+Q*U,1)}function pn(h,w,U,Q){var z;for(z=3;0<z;--z)Vd(h,w+=4*U,U,Q)}function Jm(h,w,U,Q){var z;for(z=3;0<z;--z)Zr(h,w+=4,U,Q)}function Pn(h,w,U,Q,z,J,Y,te){for(J=2*J+1;0<z--;){if($d(h,w,U,J,Y))if(Hd(h,w,U,te))yo(h,w,U);else{var ae=h,ce=w,ge=U,Fe=ae[ce-2*ge],Ue=ae[ce-ge],we=ae[ce+0],ze=ae[ce+ge],Te=ae[ce+2*ge],fe=27*(Ve=th[1020+3*(we-Ue)+th[1020+Fe-ze]])+63>>7,be=18*Ve+63>>7,Ve=9*Ve+63>>7;ae[ce-3*ge]=lr[255+ae[ce-3*ge]+Ve],ae[ce-2*ge]=lr[255+Fe+be],ae[ce-ge]=lr[255+Ue+fe],ae[ce+0]=lr[255+we-fe],ae[ce+ge]=lr[255+ze-be],ae[ce+2*ge]=lr[255+Te-Ve]}w+=Q}}function Qr(h,w,U,Q,z,J,Y,te){for(J=2*J+1;0<z--;){if($d(h,w,U,J,Y))if(Hd(h,w,U,te))yo(h,w,U);else{var ae=h,ce=w,ge=U,Fe=ae[ce-ge],Ue=ae[ce+0],we=ae[ce+ge],ze=eA[112+((Te=3*(Ue-Fe))+4>>3)],Te=eA[112+(Te+3>>3)],fe=ze+1>>1;ae[ce-2*ge]=lr[255+ae[ce-2*ge]+fe],ae[ce-ge]=lr[255+Fe+Te],ae[ce+0]=lr[255+Ue-ze],ae[ce+ge]=lr[255+we-fe]}w+=Q}}function Vl(h,w,U,Q,z,J){Pn(h,w,U,1,16,Q,z,J)}function Ci(h,w,U,Q,z,J){Pn(h,w,1,U,16,Q,z,J)}function Ym(h,w,U,Q,z,J){var Y;for(Y=3;0<Y;--Y)Qr(h,w+=4*U,U,1,16,Q,z,J)}function vo(h,w,U,Q,z,J){var Y;for(Y=3;0<Y;--Y)Qr(h,w+=4,1,U,16,Q,z,J)}function Xm(h,w,U,Q,z,J,Y,te){Pn(h,w,z,1,8,J,Y,te),Pn(U,Q,z,1,8,J,Y,te)}function Kl(h,w,U,Q,z,J,Y,te){Pn(h,w,1,z,8,J,Y,te),Pn(U,Q,1,z,8,J,Y,te)}function zl(h,w,U,Q,z,J,Y,te){Qr(h,w+4*z,z,1,8,J,Y,te),Qr(U,Q+4*z,z,1,8,J,Y,te)}function Kd(h,w,U,Q,z,J,Y,te){Qr(h,w+4,1,z,8,J,Y,te),Qr(U,Q+4,1,z,8,J,Y,te)}function wo(){this.ba=new Tt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ft,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Gl(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Wl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function zd(){this.ua=0,this.Wa=new K,this.vb=new K,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new P,this.yc=new F}function Zm(){this.xb=this.a=0,this.l=new xo,this.ca=new Tt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new I,this.Pb=0,this.wd=new I,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new zd,this.ab=0,this.gc=o(4,Wl),this.Oc=0}function jo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new xo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Bi(h,w,U,Q,z,J,Y){for(h=h==null?0:h[w+0],w=0;w<Y;++w)z[J+w]=h+U[Q+w]&255,h=z[J+w]}function Jl(h,w,U,Q,z,J,Y){var te;if(h==null)Bi(null,null,U,Q,z,J,Y);else for(te=0;te<Y;++te)z[J+te]=h[w+te]+U[Q+te]&255}function Mn(h,w,U,Q,z,J,Y){if(h==null)Bi(null,null,U,Q,z,J,Y);else{var te,ae=h[w+0],ce=ae,ge=ae;for(te=0;te<Y;++te)ce=ge+(ae=h[w+te])-ce,ge=U[Q+te]+(-256&ce?0>ce?0:255:ce)&255,ce=ae,z[J+te]=ge}}function Yl(h,w,U,Q){var z=w.width,J=w.o;if(t(h!=null&&w!=null),0>U||0>=Q||U+Q>J)return null;if(!h.Cc){if(h.ga==null){var Y;if(h.ga=new jo,(Y=h.ga==null)||(Y=w.width*w.o,t(h.Gb.length==0),h.Gb=i(Y),h.Uc=0,h.Gb==null?Y=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,Y=1),Y=!Y),!Y){Y=h.ga;var te=h.Fa,ae=h.P,ce=h.qc,ge=h.mb,Fe=h.nb,Ue=ae+1,we=ce-1,ze=Y.l;if(t(te!=null&&ge!=null&&w!=null),Vn[0]=null,Vn[1]=Bi,Vn[2]=Jl,Vn[3]=Mn,Y.ca=ge,Y.tb=Fe,Y.c=w.width,Y.i=w.height,t(0<Y.c&&0<Y.i),1>=ce)w=0;else if(Y.$a=te[ae+0]>>0&3,Y.Z=te[ae+0]>>2&3,Y.Lc=te[ae+0]>>4&3,ae=te[ae+0]>>6&3,0>Y.$a||1<Y.$a||4<=Y.Z||1<Y.Lc||ae)w=0;else if(ze.put=Ra,ze.ac=Ts,ze.bc=gr,ze.ma=Y,ze.width=w.width,ze.height=w.height,ze.Da=w.Da,ze.v=w.v,ze.va=w.va,ze.j=w.j,ze.o=w.o,Y.$a)e:{t(Y.$a==1),w=ua();t:for(;;){if(w==null){w=0;break e}if(t(Y!=null),Y.mc=w,w.c=Y.c,w.i=Y.i,w.l=Y.l,w.l.ma=Y,w.l.width=Y.c,w.l.height=Y.i,w.a=0,q(w.m,te,Ue,we),!Mt(Y.c,Y.i,1,w,null)||(w.ab==1&&w.gc[0].hc==3&&Ne(w.s)?(Y.ic=1,te=w.c*w.i,w.Ta=null,w.Ua=0,w.V=i(te),w.Ba=0,w.V==null?(w.a=1,w=0):w=1):(Y.ic=0,w=Ps(w,Y.c)),!w))break t;w=1;break e}Y.mc=null,w=0}else w=we>=Y.c*Y.i;Y=!w}if(Y)return null;h.ga.Lc!=1?h.Ga=0:Q=J-U}t(h.ga!=null),t(U+Q<=J);e:{if(w=(te=h.ga).c,J=te.l.o,te.$a==0){if(Ue=h.rc,we=h.Vc,ze=h.Fa,ae=h.P+1+U*w,ce=h.mb,ge=h.nb+U*w,t(ae<=h.P+h.qc),te.Z!=0)for(t(Vn[te.Z]!=null),Y=0;Y<Q;++Y)Vn[te.Z](Ue,we,ze,ae,ce,ge,w),Ue=ce,we=ge,ge+=w,ae+=w;else for(Y=0;Y<Q;++Y)r(ce,ge,ze,ae,w),Ue=ce,we=ge,ge+=w,ae+=w;h.rc=Ue,h.Vc=we}else{if(t(te.mc!=null),w=U+Q,t((Y=te.mc)!=null),t(w<=Y.i),Y.C>=w)w=1;else if(te.ic||_e(),te.ic){te=Y.V,Ue=Y.Ba,we=Y.c;var Te=Y.i,fe=(ze=1,ae=Y.$/we,ce=Y.$%we,ge=Y.m,Fe=Y.s,Y.$),be=we*Te,Ve=we*w,Ge=Fe.wc,Ke=fe<Ve?ke(Fe,ce,ae):null;t(fe<=be),t(w<=Te),t(Ne(Fe));t:for(;;){for(;!ge.h&&fe<Ve;){if(ce&Ge||(Ke=ke(Fe,ce,ae)),t(Ke!=null),ne(ge),256>(Te=Le(Ke.G[0],Ke.H[0],ge)))te[Ue+fe]=Te,++fe,++ce>=we&&(ce=0,++ae<=w&&!(ae%16)&&ct(Y,ae));else{if(!(280>Te)){ze=0;break t}Te=Ga(Te-256,ge);var xt,st=Le(Ke.G[4],Ke.H[4],ge);if(ne(ge),!(fe>=(st=le(we,st=Ga(st,ge)))&&be-fe>=Te)){ze=0;break t}for(xt=0;xt<Te;++xt)te[Ue+fe+xt]=te[Ue+fe+xt-st];for(fe+=Te,ce+=Te;ce>=we;)ce-=we,++ae<=w&&!(ae%16)&&ct(Y,ae);fe<Ve&&ce&Ge&&(Ke=ke(Fe,ce,ae))}t(ge.h==$(ge))}ct(Y,ae>w?w:ae);break t}!ze||ge.h&&fe<be?(ze=0,Y.a=ge.h?5:3):Y.$=fe,w=ze}else w=_s(Y,Y.V,Y.Ba,Y.c,Y.i,w,co);if(!w){Q=0;break e}}U+Q>=J&&(h.Cc=1),Q=1}if(!Q)return null;if(h.Cc&&((Q=h.ga)!=null&&(Q.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+U*z}function k(h,w,U,Q,z,J){for(;0<z--;){var Y,te=h,ae=w+(U?1:0),ce=h,ge=w+(U?0:3);for(Y=0;Y<Q;++Y){var Fe=ce[ge+4*Y];Fe!=255&&(Fe*=32897,te[ae+4*Y+0]=te[ae+4*Y+0]*Fe>>23,te[ae+4*Y+1]=te[ae+4*Y+1]*Fe>>23,te[ae+4*Y+2]=te[ae+4*Y+2]*Fe>>23)}w+=J}}function G(h,w,U,Q,z){for(;0<Q--;){var J;for(J=0;J<U;++J){var Y=h[w+2*J+0],te=15&(ce=h[w+2*J+1]),ae=4369*te,ce=(240&ce|ce>>4)*ae>>16;h[w+2*J+0]=(240&Y|Y>>4)*ae>>16&240|(15&Y|Y<<4)*ae>>16>>4&15,h[w+2*J+1]=240&ce|te}w+=z}}function Ae(h,w,U,Q,z,J,Y,te){var ae,ce,ge=255;for(ce=0;ce<z;++ce){for(ae=0;ae<Q;++ae){var Fe=h[w+ae];J[Y+4*ae]=Fe,ge&=Fe}w+=U,Y+=te}return ge!=255}function pe(h,w,U,Q,z){var J;for(J=0;J<z;++J)U[Q+J]=h[w+J]>>8}function _e(){vr=k,vs=G,ws=Ae,zs=pe}function Re(h,w,U){_[h]=function(Q,z,J,Y,te,ae,ce,ge,Fe,Ue,we,ze,Te,fe,be,Ve,Ge){var Ke,xt=Ge-1>>1,st=te[ae+0]|ce[ge+0]<<16,kt=Fe[Ue+0]|we[ze+0]<<16;t(Q!=null);var nt=3*st+kt+131074>>2;for(w(Q[z+0],255&nt,nt>>16,Te,fe),J!=null&&(nt=3*kt+st+131074>>2,w(J[Y+0],255&nt,nt>>16,be,Ve)),Ke=1;Ke<=xt;++Ke){var ls=te[ae+Ke]|ce[ge+Ke]<<16,us=Fe[Ue+Ke]|we[ze+Ke]<<16,ns=st+ls+kt+us+524296,ts=ns+2*(ls+kt)>>3;nt=ts+st>>1,st=(ns=ns+2*(st+us)>>3)+ls>>1,w(Q[z+2*Ke-1],255&nt,nt>>16,Te,fe+(2*Ke-1)*U),w(Q[z+2*Ke-0],255&st,st>>16,Te,fe+(2*Ke-0)*U),J!=null&&(nt=ns+kt>>1,st=ts+us>>1,w(J[Y+2*Ke-1],255&nt,nt>>16,be,Ve+(2*Ke-1)*U),w(J[Y+2*Ke+0],255&st,st>>16,be,Ve+(2*Ke+0)*U)),st=ls,kt=us}1&Ge||(nt=3*st+kt+131074>>2,w(Q[z+Ge-1],255&nt,nt>>16,Te,fe+(Ge-1)*U),J!=null&&(nt=3*kt+st+131074>>2,w(J[Y+Ge-1],255&nt,nt>>16,be,Ve+(Ge-1)*U)))}}function We(){jr[tA]=tN,jr[sA]=_g,jr[yg]=sN,jr[aA]=Cg,jr[rA]=Bg,jr[sh]=Sg,jr[vg]=aN,jr[ah]=_g,jr[rh]=Cg,jr[nA]=Bg,jr[nh]=Sg}function mt(h){return h&-16384?0>h?0:255:h>>rN}function Ct(h,w){return mt((19077*h>>8)+(26149*w>>8)-14234)}function Kt(h,w,U){return mt((19077*h>>8)-(6419*w>>8)-(13320*U>>8)+8708)}function Ht(h,w){return mt((19077*h>>8)+(33050*w>>8)-17685)}function as(h,w,U,Q,z){Q[z+0]=Ct(h,U),Q[z+1]=Kt(h,w,U),Q[z+2]=Ht(h,w)}function Us(h,w,U,Q,z){Q[z+0]=Ht(h,w),Q[z+1]=Kt(h,w,U),Q[z+2]=Ct(h,U)}function Ms(h,w,U,Q,z){var J=Kt(h,w,U);w=J<<3&224|Ht(h,w)>>3,Q[z+0]=248&Ct(h,U)|J>>5,Q[z+1]=w}function sa(h,w,U,Q,z){var J=240&Ht(h,w)|15;Q[z+0]=240&Ct(h,U)|Kt(h,w,U)>>4,Q[z+1]=J}function ka(h,w,U,Q,z){Q[z+0]=255,as(h,w,U,Q,z+1)}function pa(h,w,U,Q,z){Us(h,w,U,Q,z),Q[z+3]=255}function Pr(h,w,U,Q,z){as(h,w,U,Q,z),Q[z+3]=255}function or(h,w){return 0>h?0:h>w?w:h}function en(h,w,U){_[h]=function(Q,z,J,Y,te,ae,ce,ge,Fe){for(var Ue=ge+(-2&Fe)*U;ge!=Ue;)w(Q[z+0],J[Y+0],te[ae+0],ce,ge),w(Q[z+1],J[Y+0],te[ae+0],ce,ge+U),z+=2,++Y,++ae,ge+=2*U;1&Fe&&w(Q[z+0],J[Y+0],te[ae+0],ce,ge)}}function Gd(h,w,U){return U==0?h==0?w==0?6:5:w==0?4:0:U}function Xl(h,w,U,Q,z){switch(h>>>30){case 3:bn(w,U,Q,z,0);break;case 2:Ks(w,U,Q,z);break;case 1:Ha(w,U,Q,z)}}function Zl(h,w){var U,Q,z=w.M,J=w.Nb,Y=h.oc,te=h.pc+40,ae=h.oc,ce=h.pc+584,ge=h.oc,Fe=h.pc+600;for(U=0;16>U;++U)Y[te+32*U-1]=129;for(U=0;8>U;++U)ae[ce+32*U-1]=129,ge[Fe+32*U-1]=129;for(0<z?Y[te-1-32]=ae[ce-1-32]=ge[Fe-1-32]=129:(n(Y,te-32-1,127,21),n(ae,ce-32-1,127,9),n(ge,Fe-32-1,127,9)),Q=0;Q<h.za;++Q){var Ue=w.ya[w.aa+Q];if(0<Q){for(U=-1;16>U;++U)r(Y,te+32*U-4,Y,te+32*U+12,4);for(U=-1;8>U;++U)r(ae,ce+32*U-4,ae,ce+32*U+4,4),r(ge,Fe+32*U-4,ge,Fe+32*U+4,4)}var we=h.Gd,ze=h.Hd+Q,Te=Ue.ad,fe=Ue.Hc;if(0<z&&(r(Y,te-32,we[ze].y,0,16),r(ae,ce-32,we[ze].f,0,8),r(ge,Fe-32,we[ze].ea,0,8)),Ue.Za){var be=Y,Ve=te-32+16;for(0<z&&(Q>=h.za-1?n(be,Ve,we[ze].y[15],4):r(be,Ve,we[ze+1].y,0,4)),U=0;4>U;U++)be[Ve+128+U]=be[Ve+256+U]=be[Ve+384+U]=be[Ve+0+U];for(U=0;16>U;++U,fe<<=2)be=Y,Ve=te+Eg[U],Mr[Ue.Ob[U]](be,Ve),Xl(fe,Te,16*+U,be,Ve)}else if(be=Gd(Q,z,Ue.Ob[0]),$n[be](Y,te),fe!=0)for(U=0;16>U;++U,fe<<=2)Xl(fe,Te,16*+U,Y,te+Eg[U]);for(U=Ue.Gc,be=Gd(Q,z,Ue.Dd),vn[be](ae,ce),vn[be](ge,Fe),fe=Te,be=ae,Ve=ce,255&(Ue=U>>0)&&(170&Ue?rc(fe,256,be,Ve):br(fe,256,be,Ve)),Ue=ge,fe=Fe,255&(U>>=8)&&(170&U?rc(Te,320,Ue,fe):br(Te,320,Ue,fe)),z<h.Ub-1&&(r(we[ze].y,0,Y,te+480,16),r(we[ze].f,0,ae,ce+224,8),r(we[ze].ea,0,ge,Fe+224,8)),U=8*J*h.B,we=h.sa,ze=h.ta+16*Q+16*J*h.R,Te=h.qa,Ue=h.ra+8*Q+U,fe=h.Ha,be=h.Ia+8*Q+U,U=0;16>U;++U)r(we,ze+U*h.R,Y,te+32*U,16);for(U=0;8>U;++U)r(Te,Ue+U*h.B,ae,ce+32*U,8),r(fe,be+U*h.B,ge,Fe+32*U,8)}}function No(h,w,U,Q,z,J,Y,te,ae){var ce=[0],ge=[0],Fe=0,Ue=ae!=null?ae.kd:0,we=ae??new Gl;if(h==null||12>U)return 7;we.data=h,we.w=w,we.ha=U,w=[w],U=[U],we.gb=[we.gb];e:{var ze=w,Te=U,fe=we.gb;if(t(h!=null),t(Te!=null),t(fe!=null),fe[0]=0,12<=Te[0]&&!a(h,ze[0],"RIFF")){if(a(h,ze[0]+8,"WEBP")){fe=3;break e}var be=Pe(h,ze[0]+4);if(12>be||4294967286<be){fe=3;break e}if(Ue&&be>Te[0]-8){fe=7;break e}fe[0]=be,ze[0]+=12,Te[0]-=12}fe=0}if(fe!=0)return fe;for(be=0<we.gb[0],U=U[0];;){e:{var Ve=h;Te=w,fe=U;var Ge=ce,Ke=ge,xt=ze=[0];if((nt=Fe=[Fe])[0]=0,8>fe[0])fe=7;else{if(!a(Ve,Te[0],"VP8X")){if(Pe(Ve,Te[0]+4)!=10){fe=3;break e}if(18>fe[0]){fe=7;break e}var st=Pe(Ve,Te[0]+8),kt=1+je(Ve,Te[0]+12);if(2147483648<=kt*(Ve=1+je(Ve,Te[0]+15))){fe=3;break e}xt!=null&&(xt[0]=st),Ge!=null&&(Ge[0]=kt),Ke!=null&&(Ke[0]=Ve),Te[0]+=18,fe[0]-=18,nt[0]=1}fe=0}}if(Fe=Fe[0],ze=ze[0],fe!=0)return fe;if(Te=!!(2&ze),!be&&Fe)return 3;if(J!=null&&(J[0]=!!(16&ze)),Y!=null&&(Y[0]=Te),te!=null&&(te[0]=0),Y=ce[0],ze=ge[0],Fe&&Te&&ae==null){fe=0;break}if(4>U){fe=7;break}if(be&&Fe||!be&&!Fe&&!a(h,w[0],"ALPH")){U=[U],we.na=[we.na],we.P=[we.P],we.Sa=[we.Sa];e:{st=h,fe=w,be=U;var nt=we.gb;Ge=we.na,Ke=we.P,xt=we.Sa,kt=22,t(st!=null),t(be!=null),Ve=fe[0];var ls=be[0];for(t(Ge!=null),t(xt!=null),Ge[0]=null,Ke[0]=null,xt[0]=0;;){if(fe[0]=Ve,be[0]=ls,8>ls){fe=7;break e}var us=Pe(st,Ve+4);if(4294967286<us){fe=3;break e}var ns=8+us+1&-2;if(kt+=ns,0<nt&&kt>nt){fe=3;break e}if(!a(st,Ve,"VP8 ")||!a(st,Ve,"VP8L")){fe=0;break e}if(ls[0]<ns){fe=7;break e}a(st,Ve,"ALPH")||(Ge[0]=st,Ke[0]=Ve+8,xt[0]=us),Ve+=ns,ls-=ns}}if(U=U[0],we.na=we.na[0],we.P=we.P[0],we.Sa=we.Sa[0],fe!=0)break}U=[U],we.Ja=[we.Ja],we.xa=[we.xa];e:if(nt=h,fe=w,be=U,Ge=we.gb[0],Ke=we.Ja,xt=we.xa,st=fe[0],Ve=!a(nt,st,"VP8 "),kt=!a(nt,st,"VP8L"),t(nt!=null),t(be!=null),t(Ke!=null),t(xt!=null),8>be[0])fe=7;else{if(Ve||kt){if(nt=Pe(nt,st+4),12<=Ge&&nt>Ge-12){fe=3;break e}if(Ue&&nt>be[0]-8){fe=7;break e}Ke[0]=nt,fe[0]+=8,be[0]-=8,xt[0]=kt}else xt[0]=5<=be[0]&&nt[st+0]==47&&!(nt[st+4]>>5),Ke[0]=be[0];fe=0}if(U=U[0],we.Ja=we.Ja[0],we.xa=we.xa[0],w=w[0],fe!=0)break;if(4294967286<we.Ja)return 3;if(te==null||Te||(te[0]=we.xa?2:1),Y=[Y],ze=[ze],we.xa){if(5>U){fe=7;break}te=Y,Ue=ze,Te=J,h==null||5>U?h=0:5<=U&&h[w+0]==47&&!(h[w+4]>>5)?(be=[0],nt=[0],Ge=[0],q(Ke=new I,h,w,U),St(Ke,be,nt,Ge)?(te!=null&&(te[0]=be[0]),Ue!=null&&(Ue[0]=nt[0]),Te!=null&&(Te[0]=Ge[0]),h=1):h=0):h=0}else{if(10>U){fe=7;break}te=ze,h==null||10>U||!Ud(h,w+3,U-3)?h=0:(Ue=h[w+0]|h[w+1]<<8|h[w+2]<<16,Te=16383&(h[w+7]<<8|h[w+6]),h=16383&(h[w+9]<<8|h[w+8]),1&Ue||3<(Ue>>1&7)||!(Ue>>4&1)||Ue>>5>=we.Ja||!Te||!h?h=0:(Y&&(Y[0]=Te),te&&(te[0]=h),h=1))}if(!h||(Y=Y[0],ze=ze[0],Fe&&(ce[0]!=Y||ge[0]!=ze)))return 3;ae!=null&&(ae[0]=we,ae.offset=w-ae.w,t(4294967286>w-ae.w),t(ae.offset==ae.ha-U));break}return fe==0||fe==7&&Fe&&ae==null?(J!=null&&(J[0]|=we.na!=null&&0<we.na.length),Q!=null&&(Q[0]=Y),z!=null&&(z[0]=ze),0):fe}function ec(h,w,U){var Q=w.width,z=w.height,J=0,Y=0,te=Q,ae=z;if(w.Da=h!=null&&0<h.Da,w.Da&&(te=h.cd,ae=h.bd,J=h.v,Y=h.j,11>U||(J&=-2,Y&=-2),0>J||0>Y||0>=te||0>=ae||J+te>Q||Y+ae>z))return 0;if(w.v=J,w.j=Y,w.va=J+te,w.o=Y+ae,w.U=te,w.T=ae,w.da=h!=null&&0<h.da,w.da){if(!Me(te,ae,U=[h.ib],J=[h.hb]))return 0;w.ib=U[0],w.hb=J[0]}return w.ob=h!=null&&h.ob,w.Kb=h==null||!h.Sd,w.da&&(w.ob=w.ib<3*Q/4&&w.hb<3*z/4,w.Kb=0),1}function tc(h){if(h==null)return 2;if(11>h.S){var w=h.f.RGBA;w.fb+=(h.height-1)*w.A,w.A=-w.A}else w=h.f.kb,h=h.height,w.O+=(h-1)*w.fa,w.fa=-w.fa,w.N+=(h-1>>1)*w.Ab,w.Ab=-w.Ab,w.W+=(h-1>>1)*w.Db,w.Db=-w.Db,w.F!=null&&(w.J+=(h-1)*w.lb,w.lb=-w.lb);return 0}function _o(h,w,U,Q){if(Q==null||0>=h||0>=w)return 2;if(U!=null){if(U.Da){var z=U.cd,J=U.bd,Y=-2&U.v,te=-2&U.j;if(0>Y||0>te||0>=z||0>=J||Y+z>h||te+J>w)return 2;h=z,w=J}if(U.da){if(!Me(h,w,z=[U.ib],J=[U.hb]))return 2;h=z[0],w=J[0]}}Q.width=h,Q.height=w;e:{var ae=Q.width,ce=Q.height;if(h=Q.S,0>=ae||0>=ce||!(h>=tA&&13>h))h=2;else{if(0>=Q.Rd&&Q.sd==null){Y=J=z=w=0;var ge=(te=ae*Fg[h])*ce;if(11>h||(J=(ce+1)/2*(w=(ae+1)/2),h==12&&(Y=(z=ae)*ce)),(ce=i(ge+2*J+Y))==null){h=1;break e}Q.sd=ce,11>h?((ae=Q.f.RGBA).eb=ce,ae.fb=0,ae.A=te,ae.size=ge):((ae=Q.f.kb).y=ce,ae.O=0,ae.fa=te,ae.Fd=ge,ae.f=ce,ae.N=0+ge,ae.Ab=w,ae.Cd=J,ae.ea=ce,ae.W=0+ge+J,ae.Db=w,ae.Ed=J,h==12&&(ae.F=ce,ae.J=0+ge+2*J),ae.Tc=Y,ae.lb=z)}if(w=1,z=Q.S,J=Q.width,Y=Q.height,z>=tA&&13>z)if(11>z)h=Q.f.RGBA,w&=(te=Math.abs(h.A))*(Y-1)+J<=h.size,w&=te>=J*Fg[z],w&=h.eb!=null;else{h=Q.f.kb,te=(J+1)/2,ge=(Y+1)/2,ae=Math.abs(h.fa),ce=Math.abs(h.Ab);var Fe=Math.abs(h.Db),Ue=Math.abs(h.lb),we=Ue*(Y-1)+J;w&=ae*(Y-1)+J<=h.Fd,w&=ce*(ge-1)+te<=h.Cd,w=(w&=Fe*(ge-1)+te<=h.Ed)&ae>=J&ce>=te&Fe>=te,w&=h.y!=null,w&=h.f!=null,w&=h.ea!=null,z==12&&(w&=Ue>=J,w&=we<=h.Tc,w&=h.F!=null)}else w=0;h=w?0:2}}return h!=0||U!=null&&U.fd&&(h=tc(Q)),h}var ja=64,Co=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Bo=24,So=32,sc=8,Ja=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ie("Predictor0","PredictorAdd0"),_.Predictor0=function(){return 4278190080},_.Predictor1=function(h){return h},_.Predictor2=function(h,w,U){return w[U+0]},_.Predictor3=function(h,w,U){return w[U+1]},_.Predictor4=function(h,w,U){return w[U-1]},_.Predictor5=function(h,w,U){return ye(ye(h,w[U+1]),w[U+0])},_.Predictor6=function(h,w,U){return ye(h,w[U-1])},_.Predictor7=function(h,w,U){return ye(h,w[U+0])},_.Predictor8=function(h,w,U){return ye(w[U-1],w[U+0])},_.Predictor9=function(h,w,U){return ye(w[U+0],w[U+1])},_.Predictor10=function(h,w,U){return ye(ye(h,w[U-1]),ye(w[U+0],w[U+1]))},_.Predictor11=function(h,w,U){var Q=w[U+0];return 0>=Ie(Q>>24&255,h>>24&255,(w=w[U-1])>>24&255)+Ie(Q>>16&255,h>>16&255,w>>16&255)+Ie(Q>>8&255,h>>8&255,w>>8&255)+Ie(255&Q,255&h,255&w)?Q:h},_.Predictor12=function(h,w,U){var Q=w[U+0];return($e((h>>24&255)+(Q>>24&255)-((w=w[U-1])>>24&255))<<24|$e((h>>16&255)+(Q>>16&255)-(w>>16&255))<<16|$e((h>>8&255)+(Q>>8&255)-(w>>8&255))<<8|$e((255&h)+(255&Q)-(255&w)))>>>0},_.Predictor13=function(h,w,U){var Q=w[U-1];return(it((h=ye(h,w[U+0]))>>24&255,Q>>24&255)<<24|it(h>>16&255,Q>>16&255)<<16|it(h>>8&255,Q>>8&255)<<8|it(h>>0&255,Q>>0&255))>>>0};var eh=_.PredictorAdd0;_.PredictorAdd1=he,ie("Predictor2","PredictorAdd2"),ie("Predictor3","PredictorAdd3"),ie("Predictor4","PredictorAdd4"),ie("Predictor5","PredictorAdd5"),ie("Predictor6","PredictorAdd6"),ie("Predictor7","PredictorAdd7"),ie("Predictor8","PredictorAdd8"),ie("Predictor9","PredictorAdd9"),ie("Predictor10","PredictorAdd10"),ie("Predictor11","PredictorAdd11"),ie("Predictor12","PredictorAdd12"),ie("Predictor13","PredictorAdd13");var ac=_.PredictorAdd2;Bt("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),Bt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var Wd,fr=_.ColorIndexInverseTransform,ko=_.MapARGB,Jd=_.VP8LColorIndexInverseTransformAlpha,Yd=_.MapAlpha,Rn=_.VP8LPredictorsAdd=[];Rn.length=16,(_.VP8LPredictors=[]).length=16,(_.VP8LPredictorsAdd_C=[]).length=16,(_.VP8LPredictors_C=[]).length=16;var Si,Ya,Oa,On,gn,fn,Eo,bn,Ks,rc,Ha,br,Fo,Xd,nc,ki,Ei,Hn,Fi,Uo,Ui,qn,ic,yr,vr,vs,ws,zs,ma=i(511),yn=i(2041),oc=i(225),Do=i(767),Zd=0,th=yn,eA=oc,lr=Do,wr=ma,tA=0,sA=1,yg=2,aA=3,rA=4,sh=5,vg=6,ah=7,rh=8,nA=9,nh=10,O1=[2,3,7],H1=[3,3,11],wg=[280,256,256,256,40],q1=[0,1,1,1,0],$1=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],V1=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],K1=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],z1=8,ih=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],oh=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],lc=null,G1=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],W1=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],jg=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],J1=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Y1=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],X1=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Z1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],$n=[],Mr=[],vn=[],eN=1,Ng=2,Vn=[],jr=[];Re("UpsampleRgbLinePair",as,3),Re("UpsampleBgrLinePair",Us,3),Re("UpsampleRgbaLinePair",Pr,4),Re("UpsampleBgraLinePair",pa,4),Re("UpsampleArgbLinePair",ka,4),Re("UpsampleRgba4444LinePair",sa,2),Re("UpsampleRgb565LinePair",Ms,2);var tN=_.UpsampleRgbLinePair,sN=_.UpsampleBgrLinePair,_g=_.UpsampleRgbaLinePair,Cg=_.UpsampleBgraLinePair,Bg=_.UpsampleArgbLinePair,Sg=_.UpsampleRgba4444LinePair,aN=_.UpsampleRgb565LinePair,iA=16,oA=1<<iA-1,cc=-227,lh=482,rN=6,kg=0,nN=i(256),iN=i(256),oN=i(256),lN=i(256),cN=i(lh-cc),dN=i(lh-cc);en("YuvToRgbRow",as,3),en("YuvToBgrRow",Us,3),en("YuvToRgbaRow",Pr,4),en("YuvToBgraRow",pa,4),en("YuvToArgbRow",ka,4),en("YuvToRgba4444Row",sa,2),en("YuvToRgb565Row",Ms,2);var Eg=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],lA=[0,2,8],AN=[8,7,6,4,4,2,2,2,1,1,1,1],uN=1;this.WebPDecodeRGBA=function(h,w,U,Q,z){var J=sA,Y=new wo,te=new Tt;Y.ba=te,te.S=J,te.width=[te.width],te.height=[te.height];var ae=te.width,ce=te.height,ge=new Yt;if(ge==null||h==null)var Fe=2;else t(ge!=null),Fe=No(h,w,U,ge.width,ge.height,ge.Pd,ge.Qd,ge.format,null);if(Fe!=0?ae=0:(ae!=null&&(ae[0]=ge.width[0]),ce!=null&&(ce[0]=ge.height[0]),ae=1),ae){te.width=te.width[0],te.height=te.height[0],Q!=null&&(Q[0]=te.width),z!=null&&(z[0]=te.height);e:{if(Q=new xo,(z=new Gl).data=h,z.w=w,z.ha=U,z.kd=1,w=[0],t(z!=null),((h=No(z.data,z.w,z.ha,null,null,null,w,null,z))==0||h==7)&&w[0]&&(h=4),(w=h)==0){if(t(Y!=null),Q.data=z.data,Q.w=z.w+z.offset,Q.ha=z.ha-z.offset,Q.put=Ra,Q.ac=Ts,Q.bc=gr,Q.ma=Y,z.xa){if((h=ua())==null){Y=1;break e}if(function(Ue,we){var ze=[0],Te=[0],fe=[0];t:for(;;){if(Ue==null)return 0;if(we==null)return Ue.a=2,0;if(Ue.l=we,Ue.a=0,q(Ue.m,we.data,we.w,we.ha),!St(Ue.m,ze,Te,fe)){Ue.a=3;break t}if(Ue.xb=Ng,we.width=ze[0],we.height=Te[0],!Mt(ze[0],Te[0],1,Ue,null))break t;return 1}return t(Ue.a!=0),0}(h,Q)){if(Q=(w=_o(Q.width,Q.height,Y.Oa,Y.ba))==0){t:{Q=h;s:for(;;){if(Q==null){Q=0;break t}if(t(Q.s.yc!=null),t(Q.s.Ya!=null),t(0<Q.s.Wb),t((U=Q.l)!=null),t((z=U.ma)!=null),Q.xb!=0){if(Q.ca=z.ba,Q.tb=z.tb,t(Q.ca!=null),!ec(z.Oa,U,aA)){Q.a=2;break s}if(!Ps(Q,U.width)||U.da)break s;if((U.da||Ye(Q.ca.S))&&_e(),11>Q.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Q.ca.f.kb.F!=null&&_e()),Q.Pb&&0<Q.s.ua&&Q.s.vb.X==null&&!Xe(Q.s.vb,Q.s.Wa.Xa)){Q.a=1;break s}Q.xb=0}if(!_s(Q,Q.V,Q.Ba,Q.c,Q.i,U.o,ot))break s;z.Dc=Q.Ma,Q=1;break t}t(Q.a!=0),Q=0}Q=!Q}Q&&(w=h.a)}else w=h.a}else{if((h=new Lm)==null){Y=1;break e}if(h.Fa=z.na,h.P=z.P,h.qc=z.Sa,Dd(h,Q)){if((w=_o(Q.width,Q.height,Y.Oa,Y.ba))==0){if(h.Aa=0,U=Y.Oa,t((z=h)!=null),U!=null){if(0<(ae=0>(ae=U.Md)?0:100<ae?255:255*ae/100)){for(ce=ge=0;4>ce;++ce)12>(Fe=z.pb[ce]).lc&&(Fe.ia=ae*AN[0>Fe.lc?0:Fe.lc]>>3),ge|=Fe.ia;ge&&(alert("todo:VP8InitRandom"),z.ia=1)}z.Ga=U.Id,100<z.Ga?z.Ga=100:0>z.Ga&&(z.Ga=0)}Tm(h,Q)||(w=h.a)}}else w=h.a}w==0&&Y.Oa!=null&&Y.Oa.fd&&(w=tc(Y.ba))}Y=w}J=Y!=0?null:11>J?te.f.RGBA.eb:te.f.kb.y}else J=null;return J};var Fg=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(_,C){for(var L="",f=0;f<4;f++)L+=String.fromCharCode(_[C++]);return L}function A(_,C){return(_[C+0]<<0|_[C+1]<<8|_[C+2]<<16)>>>0}function u(_,C){return(_[C+0]<<0|_[C+1]<<8|_[C+2]<<16|_[C+3]<<24)>>>0}new c;var x=[0],m=[0],y=[],g=new c,b=s,p=function(_,C){var L={},f=0,F=!1,M=0,P=0;if(L.frames=[],!function(B,$,T,ne){for(var ue=0;ue<ne;ue++)if(B[$+ue]!=T.charCodeAt(ue))return!0;return!1}(_,C,"RIFF",4)){var Z,O;for(u(_,C+=4),C+=8;C<_.length;){var X=d(_,C),q=u(_,C+=4);C+=4;var V=q+(1&q);switch(X){case"VP8 ":case"VP8L":L.frames[f]===void 0&&(L.frames[f]={}),(I=L.frames[f]).src_off=F?P:C-8,I.src_size=M+q+8,f++,F&&(F=!1,M=0,P=0);break;case"VP8X":(I=L.header={}).feature_flags=_[C];var oe=C+4;I.canvas_width=1+A(_,oe),oe+=3,I.canvas_height=1+A(_,oe),oe+=3;break;case"ALPH":F=!0,M=V+8,P=C-8;break;case"ANIM":(I=L.header).bgcolor=u(_,C),oe=C+4,I.loop_count=(Z=_)[(O=oe)+0]<<0|Z[O+1]<<8,oe+=2;break;case"ANMF":var H,I;(I=L.frames[f]={}).offset_x=2*A(_,C),C+=3,I.offset_y=2*A(_,C),C+=3,I.width=1+A(_,C),C+=3,I.height=1+A(_,C),C+=3,I.duration=A(_,C),C+=3,H=_[C++],I.dispose=1&H,I.blend=H>>1&1}X!="ANMF"&&(C+=V)}return L}}(b,0);p.response=b,p.rgbaoutput=!0,p.dataurl=!1;var v=p.header?p.header:null,N=p.frames?p.frames:null;if(v){v.loop_counter=v.loop_count,x=[v.canvas_height],m=[v.canvas_width];for(var D=0;D<N.length&&N[D].blend!=0;D++);}var S=N[0],E=g.WebPDecodeRGBA(b,S.src_off,S.src_size,m,x);S.rgba=E,S.imgwidth=m[0],S.imgheight=x[0];for(var R=0;R<m[0]*x[0]*4;R++)y[R]=E[R];return this.width=m,this.height=x,this.data=y,this}(function(s){var t=function(){return typeof G0=="function"},a=function(x,m,y,g){var b=4,p=o;switch(g){case s.image_compression.FAST:b=1,p=i;break;case s.image_compression.MEDIUM:b=6,p=l;break;case s.image_compression.SLOW:b=9,p=c}x=r(x,m,y,p);var v=G0(x,{level:b});return s.__addimage__.arrayBufferToBinaryString(v)},r=function(x,m,y,g){for(var b,p,v,N=x.length/m,D=new Uint8Array(x.length+N),S=A(),E=0;E<N;E+=1){if(v=E*m,b=x.subarray(v,v+m),g)D.set(g(b,y,p),v+E);else{for(var R,_=S.length,C=[];R<_;R+=1)C[R]=S[R](b,y,p);var L=u(C.concat());D.set(C[L],v+E)}p=b}return D},n=function(x){var m=Array.apply([],x);return m.unshift(0),m},i=function(x,m){var y,g=[],b=x.length;g[0]=1;for(var p=0;p<b;p+=1)y=x[p-m]||0,g[p+1]=x[p]-y+256&255;return g},o=function(x,m,y){var g,b=[],p=x.length;b[0]=2;for(var v=0;v<p;v+=1)g=y&&y[v]||0,b[v+1]=x[v]-g+256&255;return b},l=function(x,m,y){var g,b,p=[],v=x.length;p[0]=3;for(var N=0;N<v;N+=1)g=x[N-m]||0,b=y&&y[N]||0,p[N+1]=x[N]+256-(g+b>>>1)&255;return p},c=function(x,m,y){var g,b,p,v,N=[],D=x.length;N[0]=4;for(var S=0;S<D;S+=1)g=x[S-m]||0,b=y&&y[S]||0,p=y&&y[S-m]||0,v=d(g,b,p),N[S+1]=x[S]-v+256&255;return N},d=function(x,m,y){if(x===m&&m===y)return x;var g=Math.abs(m-y),b=Math.abs(x-y),p=Math.abs(x+m-y-y);return g<=b&&g<=p?x:b<=p?m:y},A=function(){return[n,i,o,l,c]},u=function(x){var m=x.map(function(y){return y.reduce(function(g,b){return g+Math.abs(b)},0)});return m.indexOf(Math.min.apply(null,m))};s.processPNG=function(x,m,y,g){var b,p,v,N,D,S,E,R,_,C,L,f,F,M,P,Z=this.decode.FLATE_DECODE,O="";if(this.__addimage__.isArrayBuffer(x)&&(x=new Uint8Array(x)),this.__addimage__.isArrayBufferView(x)){if(x=(v=new x8(x)).imgData,p=v.bits,b=v.colorSpace,D=v.colors,[4,6].indexOf(v.colorType)!==-1){if(v.bits===8){_=(R=v.pixelBitlength==32?new Uint32Array(v.decodePixels().buffer):v.pixelBitlength==16?new Uint16Array(v.decodePixels().buffer):new Uint8Array(v.decodePixels().buffer)).length,L=new Uint8Array(_*v.colors),C=new Uint8Array(_);var X,q=v.pixelBitlength-v.bits;for(M=0,P=0;M<_;M++){for(F=R[M],X=0;X<q;)L[P++]=F>>>X&255,X+=v.bits;C[M]=F>>>X&255}}if(v.bits===16){_=(R=new Uint32Array(v.decodePixels().buffer)).length,L=new Uint8Array(_*(32/v.pixelBitlength)*v.colors),C=new Uint8Array(_*(32/v.pixelBitlength)),f=v.colors>1,M=0,P=0;for(var V=0;M<_;)F=R[M++],L[P++]=F>>>0&255,f&&(L[P++]=F>>>16&255,F=R[M++],L[P++]=F>>>0&255),C[V++]=F>>>16&255;p=8}g!==s.image_compression.NONE&&t()?(x=a(L,v.width*v.colors,v.colors,g),E=a(C,v.width,1,g)):(x=L,E=C,Z=void 0)}if(v.colorType===3&&(b=this.color_spaces.INDEXED,S=v.palette,v.transparency.indexed)){var oe=v.transparency.indexed,H=0;for(M=0,_=oe.length;M<_;++M)H+=oe[M];if((H/=255)===_-1&&oe.indexOf(0)!==-1)N=[oe.indexOf(0)];else if(H!==_){for(R=v.decodePixels(),C=new Uint8Array(R.length),M=0,_=R.length;M<_;M++)C[M]=oe[R[M]];E=a(C,v.width,1)}}var I=function(B){var $;switch(B){case s.image_compression.FAST:$=11;break;case s.image_compression.MEDIUM:$=13;break;case s.image_compression.SLOW:$=14;break;default:$=12}return $}(g);return Z===this.decode.FLATE_DECODE&&(O="/Predictor "+I+" "),O+="/Colors "+D+" /BitsPerComponent "+p+" /Columns "+v.width,(this.__addimage__.isArrayBuffer(x)||this.__addimage__.isArrayBufferView(x))&&(x=this.__addimage__.arrayBufferToBinaryString(x)),(E&&this.__addimage__.isArrayBuffer(E)||this.__addimage__.isArrayBufferView(E))&&(E=this.__addimage__.arrayBufferToBinaryString(E)),{alias:y,data:x,index:m,filter:Z,decodeParameters:O,transparency:N,palette:S,sMask:E,predictor:I,width:v.width,height:v.height,bitsPerComponent:p,colorSpace:b}}}})(Ft.API),function(s){s.processGIF89A=function(t,a,r,n){var i=new p8(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},A=new Bx(100).encode(d,100);return s.processJPEG.call(this,A,a,r,n)},s.processGIF87A=s.processGIF89A}(Ft.API),Hr.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var s=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(s);for(var t=0;t<s;t++){var a=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:n,green:r,blue:a,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Hr.prototype.parseBGR=function(){this.pos=this.offset;try{var s="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[s]()}catch(a){fs.log("bit decode error:"+a)}},Hr.prototype.bit1=function(){var s,t=Math.ceil(this.width/8),a=t%4;for(s=this.height-1;s>=0;s--){for(var r=this.bottom_up?s:this.height-1-s,n=0;n<t;n++)for(var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*n*4,l=0;l<8&&8*n+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}a!==0&&(this.pos+=4-a)}},Hr.prototype.bit4=function(){for(var s=Math.ceil(this.width/2),t=s%4,a=this.height-1;a>=0;a--){for(var r=this.bottom_up?a:this.height-1-a,n=0;n<s;n++){var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*n*4,l=i>>4,c=15&i,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*n+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Hr.prototype.bit8=function(){for(var s=this.width%4,t=this.height-1;t>=0;t--){for(var a=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=a*this.width*4+4*r;if(n<this.palette.length){var o=this.palette[n];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}s!==0&&(this.pos+=4-s)}},Hr.prototype.bit15=function(){for(var s=this.width%3,t=parseInt("11111",2),a=this.height-1;a>=0;a--){for(var r=this.bottom_up?a:this.height-1-a,n=0;n<this.width;n++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,d=i>>15?255:0,A=r*this.width*4+4*n;this.data[A]=c,this.data[A+1]=l,this.data[A+2]=o,this.data[A+3]=d}this.pos+=s}},Hr.prototype.bit16=function(){for(var s=this.width%3,t=parseInt("11111",2),a=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&a)/a*255|0,d=(o>>11)/t*255|0,A=n*this.width*4+4*i;this.data[A]=d,this.data[A+1]=c,this.data[A+2]=l,this.data[A+3]=255}this.pos+=s}},Hr.prototype.bit24=function(){for(var s=this.height-1;s>=0;s--){for(var t=this.bottom_up?s:this.height-1-s,a=0;a<this.width;a++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*a;this.data[o]=i,this.data[o+1]=n,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Hr.prototype.bit32=function(){for(var s=this.height-1;s>=0;s--)for(var t=this.bottom_up?s:this.height-1-s,a=0;a<this.width;a++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*a;this.data[l]=i,this.data[l+1]=n,this.data[l+2]=r,this.data[l+3]=o}},Hr.prototype.getData=function(){return this.data},function(s){s.processBMP=function(t,a,r,n){var i=new Hr(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new Bx(100).encode(c,100);return s.processJPEG.call(this,d,a,r,n)}}(Ft.API),iv.prototype.getData=function(){return this.data},function(s){s.processWEBP=function(t,a,r,n){var i=new iv(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new Bx(100).encode(c,100);return s.processJPEG.call(this,d,a,r,n)}}(Ft.API),Ft.API.processRGBA=function(s,t,a){for(var r=s.data,n=r.length,i=new Uint8Array(n/4*3),o=new Uint8Array(n/4),l=0,c=0,d=0;d<n;d+=4){var A=r[d],u=r[d+1],x=r[d+2],m=r[d+3];i[l++]=A,i[l++]=u,i[l++]=x,o[c++]=m}var y=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:y,index:t,alias:a,colorSpace:"DeviceRGB",bitsPerComponent:8,width:s.width,height:s.height}},Ft.API.setLanguage=function(s){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[s]!==void 0&&(this.internal.languageSettings.languageCode=s,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Yo=Ft.API,tu=Yo.getCharWidthsArray=function(s,t){var a,r,n=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:n.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:n.metadata.Unicode.kerning,A=d.fof?d.fof:1,u=t.doKerning!==!1,x=0,m=s.length,y=0,g=l[0]||c,b=[];for(a=0;a<m;a++)r=s.charCodeAt(a),typeof n.metadata.widthOfString=="function"?b.push((n.metadata.widthOfGlyph(n.metadata.characterToGlyph(r))+o*(1e3/i)||0)/1e3):(x=u&&hs(d[r])==="object"&&!isNaN(parseInt(d[r][y],10))?d[r][y]/A:0,b.push((l[r]||g)/c+x)),y=r;return b},sv=Yo.getStringUnitWidth=function(s,t){var a=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),n=t.charSpace||this.internal.getCharSpace();return Yo.processArabic&&(s=Yo.processArabic(s)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(s,a,n)/a:tu.apply(this,arguments).reduce(function(i,o){return i+o},0)},av=function(s,t,a,r){for(var n=[],i=0,o=s.length,l=0;i!==o&&l+t[i]<a;)l+=t[i],i++;n.push(s.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>r&&(n.push(s.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&n.push(s.slice(c,i)),n},rv=function(s,t,a){a||(a={});var r,n,i,o,l,c,d,A=[],u=[A],x=a.textIndent||0,m=0,y=0,g=s.split(" "),b=tu.apply(this,[" ",a])[0];if(c=a.lineIndent===-1?g[0].length+2:a.lineIndent||0){var p=Array(c).join(" "),v=[];g.map(function(D){(D=D.split(/\s*\n/)).length>1?v=v.concat(D.map(function(S,E){return(E&&S.length?`
`:"")+S})):v.push(D[0])}),g=v,c=sv.apply(this,[p,a])}for(i=0,o=g.length;i<o;i++){var N=0;if(r=g[i],c&&r[0]==`
`&&(r=r.substr(1),N=1),x+m+(y=(n=tu.apply(this,[r,a])).reduce(function(D,S){return D+S},0))>t||N){if(y>t){for(l=av.apply(this,[r,n,t-(x+m),t]),A.push(l.shift()),A=[l.pop()];l.length;)u.push([l.shift()]);y=n.slice(r.length-(A[0]?A[0].length:0)).reduce(function(D,S){return D+S},0)}else A=[r];u.push(A),x=y+c,m=b}else A.push(r),x+=m+y,m=b}return d=c?function(D,S){return(S?p:"")+D.join(" ")}:function(D){return D.join(" ")},u.map(d)},Yo.splitTextToSize=function(s,t,a){var r,n=(a=a||{}).fontSize||this.internal.getFontSize(),i=(function(A){if(A.widths&&A.kerning)return{widths:A.widths,kerning:A.kerning};var u=this.internal.getFont(A.fontName,A.fontStyle);return u.metadata.Unicode?{widths:u.metadata.Unicode.widths||{0:1},kerning:u.metadata.Unicode.kerning||{}}:{font:u.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,a);r=Array.isArray(s)?s:String(s).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/n;i.textIndent=a.textIndent?1*a.textIndent*this.internal.scaleFactor/n:0,i.lineIndent=a.lineIndent;var l,c,d=[];for(l=0,c=r.length;l<c;l++)d=d.concat(rv.apply(this,[r[l],o,i]));return d},function(s){s.__fontmetrics__=s.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",a={},r={},n=0;n<t.length;n++)a[t[n]]="0123456789abcdef"[n],r["0123456789abcdef"[n]]=t[n];var i=function(u){return"0x"+parseInt(u,10).toString(16)},o=s.__fontmetrics__.compress=function(u){var x,m,y,g,b=["{"];for(var p in u){if(x=u[p],isNaN(parseInt(p,10))?m="'"+p+"'":(p=parseInt(p,10),m=(m=i(p).slice(2)).slice(0,-1)+r[m.slice(-1)]),typeof x=="number")x<0?(y=i(x).slice(3),g="-"):(y=i(x).slice(2),g=""),y=g+y.slice(0,-1)+r[y.slice(-1)];else{if(hs(x)!=="object")throw new Error("Don't know what to do with value type "+hs(x)+".");y=o(x)}b.push(m+y)}return b.push("}"),b.join("")},l=s.__fontmetrics__.uncompress=function(u){if(typeof u!="string")throw new Error("Invalid argument passed to uncompress.");for(var x,m,y,g,b={},p=1,v=b,N=[],D="",S="",E=u.length-1,R=1;R<E;R+=1)(g=u[R])=="'"?x?(y=x.join(""),x=void 0):x=[]:x?x.push(g):g=="{"?(N.push([v,y]),v={},y=void 0):g=="}"?((m=N.pop())[0][m[1]]=v,y=void 0,v=m[0]):g=="-"?p=-1:y===void 0?a.hasOwnProperty(g)?(D+=a[g],y=parseInt(D,16)*p,p=1,D=""):D+=g:a.hasOwnProperty(g)?(S+=a[g],v[y]=parseInt(S,16)*p,p=1,y=void 0,S=""):S+=g;return b},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},A={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};s.events.push(["addFont",function(u){var x=u.font,m=A.Unicode[x.postScriptName];m&&(x.metadata.Unicode={},x.metadata.Unicode.widths=m.widths,x.metadata.Unicode.kerning=m.kerning);var y=d.Unicode[x.postScriptName];y&&(x.metadata.Unicode.encoding=y,x.encoding=y.codePages[0])}])}(Ft.API),function(s){var t=function(a){for(var r=a.length,n=new Uint8Array(r),i=0;i<r;i++)n[i]=a.charCodeAt(i);return n};s.API.events.push(["addFont",function(a){var r=void 0,n=a.font,i=a.instance;if(!n.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");if(typeof(r=i.existsFileInVFS(n.postScriptName)===!1?i.loadFile(n.postScriptName):i.getFileFromVFS(n.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(Xc(l)),o.metadata=s.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(n,r)}}])}(Ft),function(s){function t(){return(Dt.canvg?Promise.resolve(Dt.canvg):fi(()=>import("./index.es-KuV02_Rf.js"),__vite__mapDeps([0,1,2,3]))).catch(function(a){return Promise.reject(new Error("Could not load canvg: "+a))}).then(function(a){return a.default?a.default:a})}Ft.API.addSvgAsImage=function(a,r,n,i,o,l,c,d){if(isNaN(r)||isNaN(n))throw fs.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw fs.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var A=document.createElement("canvas");A.width=i,A.height=o;var u=A.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,A.width,A.height);var x={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return t().then(function(y){return y.fromString(u,a,x)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(x)}).then(function(){m.addImage(A.toDataURL("image/jpeg",1),r,n,i,o,c,d)})}}(),Ft.API.putTotalPages=function(s){var t,a=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(s,"g"),a=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(s,this.internal.getFont()),"g"),a=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var n=0;n<this.internal.pages[r].length;n++)this.internal.pages[r][n]=this.internal.pages[r][n].replace(t,a);return this},Ft.API.viewerPreferences=function(s,t){var a;s=s||{},t=t||!1;var r,n,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,A=0,u=0;function x(y,g){var b,p=!1;for(b=0;b<y.length;b+=1)y[b]===g&&(p=!0);return p}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),a=this.internal.viewerpreferences.configuration,s==="reset"||t===!0){var m=l.length;for(u=0;u<m;u+=1)a[l[u]].value=a[l[u]].defaultValue,a[l[u]].explicitSet=!1}if(hs(s)==="object"){for(n in s)if(i=s[n],x(l,n)&&i!==void 0){if(a[n].type==="boolean"&&typeof i=="boolean")a[n].value=i;else if(a[n].type==="name"&&x(a[n].valueSet,i))a[n].value=i;else if(a[n].type==="integer"&&Number.isInteger(i))a[n].value=i;else if(a[n].type==="array"){for(d=0;d<i.length;d+=1)if(r=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(A=0;A<i[d].length;A+=1)typeof i[d][A]!="number"&&(r=!1);r===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}a[n].value="["+c.join(" ")+"]"}else a[n].value=a[n].defaultValue;a[n].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,g=[];for(y in a)a[y].explicitSet===!0&&(a[y].type==="name"?g.push("/"+y+" /"+a[y].value):g.push("/"+y+" "+a[y].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=a,this},function(s){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',n=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+o.length+l.length+n.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(n+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},a=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};s.addMetadata=function(r,n){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:n||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",a),this.internal.events.subscribe("postPutResources",t)),this}}(Ft.API),function(s){var t=s.API,a=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],A=[""],u=0,x=i.length;u<x;++u){if(l=o.metadata.characterToGlyph(i.charCodeAt(u)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(u),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return A.join("");l=l.toString(16),A.push(d[4-l.length],l)}return A.join("")},r=function(i){var o,l,c,d,A,u,x;for(A=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],u=0,x=(l=Object.keys(i).sort(function(m,y){return m-y})).length;u<x;u++)o=l[u],c.length>=100&&(A+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(d=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(A+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),A+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,A=o.putStream;if(l.metadata instanceof s.API.TTFFont&&l.encoding==="Identity-H"){for(var u=l.metadata.Unicode.widths,x=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",y=0;y<x.length;y++)m+=String.fromCharCode(x[y]);var g=d();A({data:m,addLength1:!0,objectId:g}),c("endobj");var b=d();A({data:r(l.metadata.toUnicode),addLength1:!0,objectId:b}),c("endobj");var p=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+al(l.fontName)),c("/FontFile2 "+g+" 0 R"),c("/FontBBox "+s.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var v=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+al(l.fontName)),c("/FontDescriptor "+p+" 0 R"),c("/W "+s.API.PDFObject.convert(u)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+b+" 0 R"),c("/BaseFont /"+al(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+v+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,A=o.putStream;if(l.metadata instanceof s.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var u=l.metadata.rawData,x="",m=0;m<u.length;m++)x+=String.fromCharCode(u[m]);var y=d();A({data:x,addLength1:!0,objectId:y}),c("endobj");var g=d();A({data:r(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var b=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+y+" 0 R"),c("/Flags 96"),c("/FontBBox "+s.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+al(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var p=0;p<l.metadata.hmtx.widths.length;p++)l.metadata.hmtx.widths[p]=parseInt(l.metadata.hmtx.widths[p]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+al(l.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+s.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var n=function(i){var o,l=i.text||"",c=i.x,d=i.y,A=i.options||{},u=i.mutex||{},x=u.pdfEscape,m=u.activeFontKey,y=u.fonts,g=m,b="",p=0,v="",N=y[g].encoding;if(y[g].encoding!=="Identity-H")return{text:l,x:c,y:d,options:A,mutex:u};for(v=l,g=m,Array.isArray(l)&&(v=l[0]),p=0;p<v.length;p+=1)y[g].metadata.hasOwnProperty("cmap")&&(o=y[g].metadata.cmap.unicode.codeMap[v[p].charCodeAt(0)]),o||v[p].charCodeAt(0)<256&&y[g].metadata.hasOwnProperty("Unicode")?b+=v[p]:b+="";var D="";return parseInt(g.slice(1))<14||N==="WinAnsiEncoding"?D=x(b,g).split("").map(function(S){return S.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(D=a(b,y[g])),u.isHex=!0,{text:D,x:c,y:d,options:A,mutex:u}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([n(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(n(Object.assign({},c,{text:o[d]})).text);i.text=l}else i.text=n(Object.assign({},c,{text:o})).text}])}(Ft),function(s){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};s.existsFileInVFS=function(a){return t.call(this),this.internal.vFS[a]!==void 0},s.addFileToVFS=function(a,r){return t.call(this),this.internal.vFS[a]=r,this},s.getFileFromVFS=function(a){return t.call(this),this.internal.vFS[a]!==void 0?this.internal.vFS[a]:null}}(Ft.API),function(s){s.__bidiEngine__=s.prototype.__bidiEngine__=function(r){var n,i,o,l,c,d,A,u=t,x=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],p=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),v=!1,N=0;this.__bidiEngine__={};var D=function(f){var F=f.charCodeAt(),M=F>>8,P=g[M];return P!==void 0?u[256*P+(255&F)]:M===252||M===253?"AL":p.test(M)?"L":M===8?"R":"N"},S=function(f){for(var F,M=0;M<f.length;M++){if((F=D(f.charAt(M)))==="L")return!1;if(F==="R")return!0}return!1},E=function(f,F,M,P){var Z,O,X,q,V=F[P];switch(V){case"L":case"R":v=!1;break;case"N":case"AN":break;case"EN":v&&(V="AN");break;case"AL":v=!0,V="R";break;case"WS":V="N";break;case"CS":P<1||P+1>=F.length||(Z=M[P-1])!=="EN"&&Z!=="AN"||(O=F[P+1])!=="EN"&&O!=="AN"?V="N":v&&(O="AN"),V=O===Z?O:"N";break;case"ES":V=(Z=P>0?M[P-1]:"B")==="EN"&&P+1<F.length&&F[P+1]==="EN"?"EN":"N";break;case"ET":if(P>0&&M[P-1]==="EN"){V="EN";break}if(v){V="N";break}for(X=P+1,q=F.length;X<q&&F[X]==="ET";)X++;V=X<q&&F[X]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(q=F.length,X=P+1;X<q&&F[X]==="NSM";)X++;if(X<q){var oe=f[P],H=oe>=1425&&oe<=2303||oe===64286;if(Z=F[X],H&&(Z==="R"||Z==="AL")){V="R";break}}}V=P<1||(Z=F[P-1])==="B"?"N":M[P-1];break;case"B":v=!1,n=!0,V=N;break;case"S":i=!0,V="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":v=!1;break;case"BN":V="N"}return V},R=function(f,F,M){var P=f.split("");return M&&_(P,M,{hiLevel:N}),P.reverse(),F&&F.reverse(),P.join("")},_=function(f,F,M){var P,Z,O,X,q,V=-1,oe=f.length,H=0,I=[],B=N?m:x,$=[];for(v=!1,n=!1,i=!1,Z=0;Z<oe;Z++)$[Z]=D(f[Z]);for(O=0;O<oe;O++){if(q=H,I[O]=E(f,$,I,O),P=240&(H=B[q][y[I[O]]]),H&=15,F[O]=X=B[H][5],P>0)if(P===16){for(Z=V;Z<O;Z++)F[Z]=1;V=-1}else V=-1;if(B[H][6])V===-1&&(V=O);else if(V>-1){for(Z=V;Z<O;Z++)F[Z]=X;V=-1}$[O]==="B"&&(F[O]=0),M.hiLevel|=X}i&&function(T,ne,ue){for(var me=0;me<ue;me++)if(T[me]==="S"){ne[me]=N;for(var xe=me-1;xe>=0&&T[xe]==="WS";xe--)ne[xe]=N}}($,F,oe)},C=function(f,F,M,P,Z){if(!(Z.hiLevel<f)){if(f===1&&N===1&&!n)return F.reverse(),void(M&&M.reverse());for(var O,X,q,V,oe=F.length,H=0;H<oe;){if(P[H]>=f){for(q=H+1;q<oe&&P[q]>=f;)q++;for(V=H,X=q-1;V<X;V++,X--)O=F[V],F[V]=F[X],F[X]=O,M&&(O=M[V],M[V]=M[X],M[X]=O);H=q}H++}}},L=function(f,F,M){var P=f.split(""),Z={hiLevel:N};return M||(M=[]),_(P,M,Z),function(O,X,q){if(q.hiLevel!==0&&A)for(var V,oe=0;oe<O.length;oe++)X[oe]===1&&(V=b.indexOf(O[oe]))>=0&&(O[oe]=b[V+1])}(P,M,Z),C(2,P,F,M,Z),C(1,P,F,M,Z),P.join("")};return this.__bidiEngine__.doBidiReorder=function(f,F,M){if(function(Z,O){if(O)for(var X=0;X<Z.length;X++)O[X]=X;l===void 0&&(l=S(Z)),d===void 0&&(d=S(Z))}(f,F),o||!c||d)if(o&&c&&l^d)N=l?1:0,f=R(f,F,M);else if(!o&&c&&d)N=l?1:0,f=L(f,F,M),f=R(f,F);else if(!o||l||c||d){if(o&&!c&&l^d)f=R(f,F),l?(N=0,f=L(f,F,M)):(N=1,f=L(f,F,M),f=R(f,F));else if(o&&l&&!c&&d)N=1,f=L(f,F,M),f=R(f,F);else if(!o&&!c&&l^d){var P=A;l?(N=1,f=L(f,F,M),N=0,A=!1,f=L(f,F,M),A=P):(N=0,f=L(f,F,M),f=R(f,F),N=1,A=!1,f=L(f,F,M),A=P,f=R(f,F))}}else N=0,f=L(f,F,M);else N=l?1:0,f=L(f,F,M);return f},this.__bidiEngine__.setOptions=function(f){f&&(o=f.isInputVisual,c=f.isOutputVisual,l=f.isInputRtl,d=f.isOutputRtl,A=f.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],a=new s.__bidiEngine__({isInputVisual:!0});s.API.events.push(["postProcessText",function(r){var n=r.text,i=(r.x,r.y,r.options||{}),o=(r.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,a.setOptions(i),Object.prototype.toString.call(n)==="[object Array]"){var l=0;for(o=[],l=0;l<n.length;l+=1)Object.prototype.toString.call(n[l])==="[object Array]"?o.push([a.doBidiReorder(n[l][0]),n[l][1],n[l][2]]):o.push([a.doBidiReorder(n[l])]);r.text=o}else r.text=a.doBidiReorder(n);a.setOptions({isInputVisual:!0})}])}(Ft),Ft.API.TTFFont=function(){function s(t){var a;if(this.rawData=t,a=this.contents=new vi(t),this.contents.pos=4,a.readString(4)==="ttcf")throw new Error("TTCF not supported.");a.pos=0,this.parse(),this.subset=new F8(this),this.registerTTF()}return s.open=function(t){return new s(t)},s.prototype.parse=function(){return this.directory=new g8(this.contents),this.head=new b8(this),this.name=new N8(this),this.cmap=new p1(this),this.toUnicode={},this.hhea=new y8(this),this.maxp=new _8(this),this.hmtx=new C8(this),this.post=new w8(this),this.os2=new v8(this),this.loca=new E8(this),this.glyf=new B8(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},s.prototype.registerTTF=function(){var t,a,r,n,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(r=255&(n=this.post.italic_angle),32768&(a=n>>16)&&(a=-(1+(65535^a))),this.italicAngle=+(a+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},s.prototype.characterToGlyph=function(t){var a;return((a=this.cmap.unicode)!=null?a.codeMap[t]:void 0)||0},s.prototype.widthOfGlyph=function(t){var a;return a=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*a},s.prototype.widthOfString=function(t,a,r){var n,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)n=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(n))+r*(1e3/a)||0;return o*(a/1e3)},s.prototype.lineHeight=function(t,a){var r;return a==null&&(a=!1),r=a?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},s}();var Yr,vi=function(){function s(t){this.data=t??[],this.pos=0,this.length=this.data.length}return s.prototype.readByte=function(){return this.data[this.pos++]},s.prototype.writeByte=function(t){return this.data[this.pos++]=t},s.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},s.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},s.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},s.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},s.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},s.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},s.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},s.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},s.prototype.readString=function(t){var a,r;for(r=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)r[a]=String.fromCharCode(this.readByte());return r.join("")},s.prototype.writeString=function(t){var a,r,n;for(n=[],a=0,r=t.length;0<=r?a<r:a>r;a=0<=r?++a:--a)n.push(this.writeByte(t.charCodeAt(a)));return n},s.prototype.readShort=function(){return this.readInt16()},s.prototype.writeShort=function(t){return this.writeInt16(t)},s.prototype.readLongLong=function(){var t,a,r,n,i,o,l,c;return t=this.readByte(),a=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^a)+1099511627776*(255^r)+4294967296*(255^n)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*a+1099511627776*r+4294967296*n+16777216*i+65536*o+256*l+c},s.prototype.writeLongLong=function(t){var a,r;return a=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},s.prototype.readInt=function(){return this.readInt32()},s.prototype.writeInt=function(t){return this.writeInt32(t)},s.prototype.read=function(t){var a,r;for(a=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)a.push(this.readByte());return a},s.prototype.write=function(t){var a,r,n,i;for(i=[],r=0,n=t.length;r<n;r++)a=t[r],i.push(this.writeByte(a));return i},s}(),g8=function(){var s;function t(a){var r,n,i;for(this.scalarType=a.readInt(),this.tableCount=a.readShort(),this.searchRange=a.readShort(),this.entrySelector=a.readShort(),this.rangeShift=a.readShort(),this.tables={},n=0,i=this.tableCount;0<=i?n<i:n>i;n=0<=i?++n:--n)r={tag:a.readString(4),checksum:a.readInt(),offset:a.readInt(),length:a.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(a){var r,n,i,o,l,c,d,A,u,x,m,y,g;for(g in m=Object.keys(a).length,c=Math.log(2),u=16*Math.floor(Math.log(m)/c),o=Math.floor(u/c),A=16*m-u,(n=new vi).writeInt(this.scalarType),n.writeShort(m),n.writeShort(u),n.writeShort(o),n.writeShort(A),i=16*m,d=n.pos+i,l=null,y=[],a)for(x=a[g],n.writeString(g),n.writeInt(s(x)),n.writeInt(d),n.writeInt(x.length),y=y.concat(x),g==="head"&&(l=d),d+=x.length;d%4;)y.push(0),d++;return n.write(y),r=2981146554-s(n.data),n.pos=l+8,n.writeUInt32(r),n.data},s=function(a){var r,n,i,o;for(a=g1.call(a);a.length%4;)a.push(0);for(i=new vi(a),n=0,r=0,o=a.length;r<o;r=r+=4)n+=i.readUInt32();return 4294967295&n},t}(),f8={}.hasOwnProperty,hn=function(s,t){for(var a in t)f8.call(t,a)&&(s[a]=t[a]);function r(){this.constructor=s}return r.prototype=t.prototype,s.prototype=new r,s.__super__=t.prototype,s};Yr=function(){function s(t){var a;this.file=t,a=this.file.directory.tables[this.tag],this.exists=!!a,a&&(this.offset=a.offset,this.length=a.length,this.parse(this.file.contents))}return s.prototype.parse=function(){},s.prototype.encode=function(){},s.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},s}();var b8=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return hn(t,Yr),t.prototype.tag="head",t.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.revision=a.readInt(),this.checkSumAdjustment=a.readInt(),this.magicNumber=a.readInt(),this.flags=a.readShort(),this.unitsPerEm=a.readShort(),this.created=a.readLongLong(),this.modified=a.readLongLong(),this.xMin=a.readShort(),this.yMin=a.readShort(),this.xMax=a.readShort(),this.yMax=a.readShort(),this.macStyle=a.readShort(),this.lowestRecPPEM=a.readShort(),this.fontDirectionHint=a.readShort(),this.indexToLocFormat=a.readShort(),this.glyphDataFormat=a.readShort()},t.prototype.encode=function(a){var r;return(r=new vi).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(a),r.writeShort(this.glyphDataFormat),r.data},t}(),ov=function(){function s(t,a){var r,n,i,o,l,c,d,A,u,x,m,y,g,b,p,v,N;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=a+t.readInt(),u=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(m=t.readUInt16(),x=m/2,t.pos+=6,i=function(){var D,S;for(S=[],c=D=0;0<=x?D<x:D>x;c=0<=x?++D:--D)S.push(t.readUInt16());return S}(),t.pos+=2,g=function(){var D,S;for(S=[],c=D=0;0<=x?D<x:D>x;c=0<=x?++D:--D)S.push(t.readUInt16());return S}(),d=function(){var D,S;for(S=[],c=D=0;0<=x?D<x:D>x;c=0<=x?++D:--D)S.push(t.readUInt16());return S}(),A=function(){var D,S;for(S=[],c=D=0;0<=x?D<x:D>x;c=0<=x?++D:--D)S.push(t.readUInt16());return S}(),n=(this.length-t.pos+this.offset)/2,l=function(){var D,S;for(S=[],c=D=0;0<=n?D<n:D>n;c=0<=n?++D:--D)S.push(t.readUInt16());return S}(),c=p=0,N=i.length;p<N;c=++p)for(b=i[c],r=v=y=g[c];y<=b?v<=b:v>=b;r=y<=b?++v:--v)A[c]===0?o=r+d[c]:(o=l[A[c]/2+(r-y)-(x-c)]||0)!==0&&(o+=d[c]),this.codeMap[r]=65535&o}t.pos=u}return s.encode=function(t,a){var r,n,i,o,l,c,d,A,u,x,m,y,g,b,p,v,N,D,S,E,R,_,C,L,f,F,M,P,Z,O,X,q,V,oe,H,I,B,$,T,ne,ue,me,xe,Be,ee,je;switch(P=new vi,o=Object.keys(t).sort(function(Pe,Xe){return Pe-Xe}),a){case"macroman":for(g=0,b=function(){var Pe=[];for(y=0;y<256;++y)Pe.push(0);return Pe}(),v={0:0},i={},Z=0,V=o.length;Z<V;Z++)v[xe=t[n=o[Z]]]==null&&(v[xe]=++g),i[n]={old:t[n],new:v[t[n]]},b[n]=v[t[n]];return P.writeUInt16(1),P.writeUInt16(0),P.writeUInt32(12),P.writeUInt16(0),P.writeUInt16(262),P.writeUInt16(0),P.write(b),{charMap:i,subtable:P.data,maxGlyphID:g+1};case"unicode":for(F=[],u=[],N=0,v={},r={},p=d=null,O=0,oe=o.length;O<oe;O++)v[S=t[n=o[O]]]==null&&(v[S]=++N),r[n]={old:S,new:v[S]},l=v[S]-n,p!=null&&l===d||(p&&u.push(p),F.push(n),d=l),p=n;for(p&&u.push(p),u.push(65535),F.push(65535),L=2*(C=F.length),_=2*Math.pow(Math.log(C)/Math.LN2,2),x=Math.log(_/2)/Math.LN2,R=2*C-_,c=[],E=[],m=[],y=X=0,H=F.length;X<H;y=++X){if(f=F[y],A=u[y],f===65535){c.push(0),E.push(0);break}if(f-(M=r[f].new)>=32768)for(c.push(0),E.push(2*(m.length+C-y)),n=q=f;f<=A?q<=A:q>=A;n=f<=A?++q:--q)m.push(r[n].new);else c.push(M-f),E.push(0)}for(P.writeUInt16(3),P.writeUInt16(1),P.writeUInt32(12),P.writeUInt16(4),P.writeUInt16(16+8*C+2*m.length),P.writeUInt16(0),P.writeUInt16(L),P.writeUInt16(_),P.writeUInt16(x),P.writeUInt16(R),ue=0,I=u.length;ue<I;ue++)n=u[ue],P.writeUInt16(n);for(P.writeUInt16(0),me=0,B=F.length;me<B;me++)n=F[me],P.writeUInt16(n);for(Be=0,$=c.length;Be<$;Be++)l=c[Be],P.writeUInt16(l);for(ee=0,T=E.length;ee<T;ee++)D=E[ee],P.writeUInt16(D);for(je=0,ne=m.length;je<ne;je++)g=m[je],P.writeUInt16(g);return{charMap:r,subtable:P.data,maxGlyphID:N+1}}},s}(),p1=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return hn(t,Yr),t.prototype.tag="cmap",t.prototype.parse=function(a){var r,n,i;for(a.pos=this.offset,this.version=a.readUInt16(),i=a.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)r=new ov(a,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(a,r){var n,i;return r==null&&(r="macroman"),n=ov.encode(a,r),(i=new vi).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},t}(),y8=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return hn(t,Yr),t.prototype.tag="hhea",t.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.ascender=a.readShort(),this.decender=a.readShort(),this.lineGap=a.readShort(),this.advanceWidthMax=a.readShort(),this.minLeftSideBearing=a.readShort(),this.minRightSideBearing=a.readShort(),this.xMaxExtent=a.readShort(),this.caretSlopeRise=a.readShort(),this.caretSlopeRun=a.readShort(),this.caretOffset=a.readShort(),a.pos+=8,this.metricDataFormat=a.readShort(),this.numberOfMetrics=a.readUInt16()},t}(),v8=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return hn(t,Yr),t.prototype.tag="OS/2",t.prototype.parse=function(a){if(a.pos=this.offset,this.version=a.readUInt16(),this.averageCharWidth=a.readShort(),this.weightClass=a.readUInt16(),this.widthClass=a.readUInt16(),this.type=a.readShort(),this.ySubscriptXSize=a.readShort(),this.ySubscriptYSize=a.readShort(),this.ySubscriptXOffset=a.readShort(),this.ySubscriptYOffset=a.readShort(),this.ySuperscriptXSize=a.readShort(),this.ySuperscriptYSize=a.readShort(),this.ySuperscriptXOffset=a.readShort(),this.ySuperscriptYOffset=a.readShort(),this.yStrikeoutSize=a.readShort(),this.yStrikeoutPosition=a.readShort(),this.familyClass=a.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(a.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(a.readInt());return n}(),this.vendorID=a.readString(4),this.selection=a.readShort(),this.firstCharIndex=a.readShort(),this.lastCharIndex=a.readShort(),this.version>0&&(this.ascent=a.readShort(),this.descent=a.readShort(),this.lineGap=a.readShort(),this.winAscent=a.readShort(),this.winDescent=a.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(a.readInt());return n}(),this.version>1))return this.xHeight=a.readShort(),this.capHeight=a.readShort(),this.defaultChar=a.readShort(),this.breakChar=a.readShort(),this.maxContext=a.readShort()},t}(),w8=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return hn(t,Yr),t.prototype.tag="post",t.prototype.parse=function(a){var r,n,i;switch(a.pos=this.offset,this.format=a.readInt(),this.italicAngle=a.readInt(),this.underlinePosition=a.readShort(),this.underlineThickness=a.readShort(),this.isFixedPitch=a.readInt(),this.minMemType42=a.readInt(),this.maxMemType42=a.readInt(),this.minMemType1=a.readInt(),this.maxMemType1=a.readInt(),this.format){case 65536:break;case 131072:var o;for(n=a.readUInt16(),this.glyphNameIndex=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)this.glyphNameIndex.push(a.readUInt16());for(this.names=[],i=[];a.pos<this.offset+this.length;)r=a.readByte(),i.push(this.names.push(a.readString(r)));return i;case 151552:return n=a.readUInt16(),this.offsets=a.read(n);case 196608:break;case 262144:return this.map=(function(){var l,c,d;for(d=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)d.push(a.readUInt32());return d}).call(this)}},t}(),j8=function(s,t){this.raw=s,this.length=s.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},N8=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return hn(t,Yr),t.prototype.tag="name",t.prototype.parse=function(a){var r,n,i,o,l,c,d,A,u,x,m;for(a.pos=this.offset,a.readShort(),r=a.readShort(),c=a.readShort(),n=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)n.push({platformID:a.readShort(),encodingID:a.readShort(),languageID:a.readShort(),nameID:a.readShort(),length:a.readShort(),offset:this.offset+c+a.readShort()});for(d={},o=u=0,x=n.length;u<x;o=++u)i=n[o],a.pos=i.offset,A=a.readString(i.length),l=new j8(A,i),d[m=i.nameID]==null&&(d[m]=[]),d[i.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t}(),_8=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return hn(t,Yr),t.prototype.tag="maxp",t.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.numGlyphs=a.readUInt16(),this.maxPoints=a.readUInt16(),this.maxContours=a.readUInt16(),this.maxCompositePoints=a.readUInt16(),this.maxComponentContours=a.readUInt16(),this.maxZones=a.readUInt16(),this.maxTwilightPoints=a.readUInt16(),this.maxStorage=a.readUInt16(),this.maxFunctionDefs=a.readUInt16(),this.maxInstructionDefs=a.readUInt16(),this.maxStackElements=a.readUInt16(),this.maxSizeOfInstructions=a.readUInt16(),this.maxComponentElements=a.readUInt16(),this.maxComponentDepth=a.readUInt16()},t}(),C8=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return hn(t,Yr),t.prototype.tag="hmtx",t.prototype.parse=function(a){var r,n,i,o,l,c,d;for(a.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:a.readUInt16(),lsb:a.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var A,u;for(u=[],r=A=0;0<=i?A<i:A>i;r=0<=i?++A:--A)u.push(a.readInt16());return u}(),this.widths=(function(){var A,u,x,m;for(m=[],A=0,u=(x=this.metrics).length;A<u;A++)o=x[A],m.push(o.advance);return m}).call(this),n=this.widths[this.widths.length-1],d=[],r=l=0;0<=i?l<i:l>i;r=0<=i?++l:--l)d.push(this.widths.push(n));return d},t.prototype.forGlyph=function(a){return a in this.metrics?this.metrics[a]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[a-this.metrics.length]}},t}(),g1=[].slice,B8=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return hn(t,Yr),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(a){var r,n,i,o,l,c,d,A,u,x;return a in this.cache?this.cache[a]:(o=this.file.loca,r=this.file.contents,n=o.indexOf(a),(i=o.lengthOf(a))===0?this.cache[a]=null:(r.pos=this.offset+n,l=(c=new vi(r.read(i))).readShort(),A=c.readShort(),x=c.readShort(),d=c.readShort(),u=c.readShort(),this.cache[a]=l===-1?new k8(c,A,x,d,u):new S8(c,l,A,x,d,u),this.cache[a]))},t.prototype.encode=function(a,r,n){var i,o,l,c,d;for(l=[],o=[],c=0,d=r.length;c<d;c++)i=a[r[c]],o.push(l.length),i&&(l=l.concat(i.encode(n)));return o.push(l.length),{table:l,offsets:o}},t}(),S8=function(){function s(t,a,r,n,i,o){this.raw=t,this.numberOfContours=a,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=o,this.compound=!1}return s.prototype.encode=function(){return this.raw.data},s}(),k8=function(){function s(t,a,r,n,i){var o,l;for(this.raw=t,this.xMin=a,this.yMin=r,this.xMax=n,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return s.prototype.encode=function(){var t,a,r;for(a=new vi(g1.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)a.pos=this.glyphOffsets[t];return a.data},s}(),E8=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return hn(t,Yr),t.prototype.tag="loca",t.prototype.parse=function(a){var r,n;return a.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,o;for(o=[],n=0,i=this.length;n<i;n+=2)o.push(2*a.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],n=0,i=this.length;n<i;n+=4)o.push(a.readUInt32());return o}).call(this)},t.prototype.indexOf=function(a){return this.offsets[a]},t.prototype.lengthOf=function(a){return this.offsets[a+1]-this.offsets[a]},t.prototype.encode=function(a,r){for(var n=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<n.length;++l)if(n[l]=i,o<r.length&&r[o]==l){++o,n[l]=i;var c=this.offsets[l],d=this.offsets[l+1]-c;d>0&&(i+=d)}for(var A=new Array(4*n.length),u=0;u<n.length;++u)A[4*u+3]=255&n[u],A[4*u+2]=(65280&n[u])>>8,A[4*u+1]=(16711680&n[u])>>16,A[4*u]=(4278190080&n[u])>>24;return A},t}(),F8=function(){function s(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return s.prototype.generateCmap=function(){var t,a,r,n,i;for(a in n=this.font.cmap.tables[0].codeMap,t={},i=this.subset)r=i[a],t[a]=n[r];return t},s.prototype.glyphsFor=function(t){var a,r,n,i,o,l,c;for(n={},o=0,l=t.length;o<l;o++)n[i=t[o]]=this.font.glyf.glyphFor(i);for(i in a=[],n)(r=n[i])!=null&&r.compound&&a.push.apply(a,r.glyphIDs);if(a.length>0)for(i in c=this.glyphsFor(a))r=c[i],n[i]=r;return n},s.prototype.encode=function(t,a){var r,n,i,o,l,c,d,A,u,x,m,y,g,b,p;for(n in r=p1.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),m={0:0},p=r.charMap)m[(c=p[n]).old]=c.new;for(y in x=r.maxGlyphID,o)y in m||(m[y]=x++);return A=function(v){var N,D;for(N in D={},v)D[v[N]]=N;return D}(m),u=Object.keys(A).sort(function(v,N){return v-N}),g=function(){var v,N,D;for(D=[],v=0,N=u.length;v<N;v++)l=u[v],D.push(A[l]);return D}(),i=this.font.glyf.encode(o,g,m),d=this.font.loca.encode(i.offsets,g),b={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(a)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},s}();Ft.API.PDFObject=function(){var s;function t(){}return s=function(a,r){return(Array(r+1).join("0")+a).slice(-r)},t.convert=function(a){var r,n,i,o;if(Array.isArray(a))return"["+function(){var l,c,d;for(d=[],l=0,c=a.length;l<c;l++)r=a[l],d.push(t.convert(r));return d}().join(" ")+"]";if(typeof a=="string")return"/"+a;if(a!=null&&a.isString)return"("+a+")";if(a instanceof Date)return"(D:"+s(a.getUTCFullYear(),4)+s(a.getUTCMonth(),2)+s(a.getUTCDate(),2)+s(a.getUTCHours(),2)+s(a.getUTCMinutes(),2)+s(a.getUTCSeconds(),2)+"Z)";if({}.toString.call(a)==="[object Object]"){for(n in i=["<<"],a)o=a[n],i.push("/"+n+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+a},t}();const U8=()=>{const{isAdmin:s}=rs(),t=ys(),[a,r]=j.useState(""),[n,i]=j.useState("all"),[o,l]=j.useState(!1),[c,d]=j.useState(!1),[A,u]=j.useState(null),[x,m]=j.useState(null),[y,g]=j.useState(!1),[b,p]=j.useState(!1),[v,N]=j.useState(0),[D,S]=j.useState([]),[E,R]=j.useState(!0),[_,C]=j.useState(null),L=j.useRef(null),[f,F]=j.useState({name:"",category:"",quantity:0,min_stock:0,unit:"un",cost:0,price:0,supplier:"",description:"",sku:"",location:"",created_at:"",updated_at:""});j.useEffect(()=>{M()},[]);const M=async()=>{try{R(!0);const T=await dU();S(T||[]),C(null)}catch(T){console.error("Error loading inventory items:",T),C("Erro ao carregar itens do estoque"),S([])}finally{R(!1)}},P=["all",...Array.from(new Set(D.map(T=>T.category)))],Z=D.filter(T=>{const ne=T.name.toLowerCase().includes(a.toLowerCase())||T.supplier.toLowerCase().includes(a.toLowerCase())||T.sku&&T.sku.toLowerCase().includes(a.toLowerCase()),ue=n==="all"||T.category===n;return ne&&ue}),O=T=>{switch(q(T.quantity,T.min_stock)){case"in_stock":return"bg-green-100 text-green-800";case"low_stock":return"bg-yellow-100 text-yellow-800";case"out_of_stock":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},X=T=>{switch(q(T.quantity,T.min_stock)){case"in_stock":return"Em Estoque";case"low_stock":return"Estoque Baixo";case"out_of_stock":return"Sem Estoque";default:return"Desconhecido"}},q=(T,ne)=>T===0?"out_of_stock":T<ne?"low_stock":"in_stock",V={total:D.length,inStock:D.filter(T=>q(T.quantity,T.min_stock)==="in_stock").length,lowStock:D.filter(T=>q(T.quantity,T.min_stock)==="low_stock").length,outOfStock:D.filter(T=>q(T.quantity,T.min_stock)==="out_of_stock").length,totalValue:D.reduce((T,ne)=>T+ne.quantity*ne.price,0)},oe=async()=>{var T,ne;if(!f.name||!f.category||!f.supplier){alert("Por favor, preencha todos os campos obrigatrios");return}try{const ue={name:f.name,category:f.category,quantity:f.quantity,min_stock:f.min_stock,price:f.price,supplier:f.supplier,description:f.description,sku:f.sku,location:f.location},me=await AU(ue);S([...D,me]),F({name:"",category:"",quantity:0,min_stock:0,price:0,cost:0,unit:"un",supplier:"",description:"",sku:"",location:"",created_at:"",updated_at:""}),l(!1),alert("Item adicionado com sucesso!")}catch(ue){console.error("Error creating item:",ue);let me="Erro ao adicionar item";(T=ue==null?void 0:ue.message)!=null&&T.includes("duplicate key")||(ne=ue==null?void 0:ue.message)!=null&&ne.includes("already exists")?me="J existe um item com este cdigo/SKU. Por favor, use um cdigo diferente ou deixe em branco para gerar automaticamente.":ue!=null&&ue.message&&(me=`Erro: ${ue.message}`),alert(me)}},H=async()=>{if(A)try{const T={name:A.name,category:A.category,quantity:A.quantity,min_stock:A.min_stock,price:A.price,supplier:A.supplier,description:A.description,sku:A.sku,location:A.location},ne=await uU(A.id,T);S(D.map(ue=>ue.id===ne.id?ne:ue)),d(!1),u(null),alert("Item atualizado com sucesso!")}catch(T){console.error("Error updating item:",T),alert("Erro ao atualizar item")}},I=async T=>{try{await mU(T),S(D.filter(ne=>ne.id!==T)),m(null),u(null),alert("Item excludo com sucesso!")}catch(ne){console.error("Error deleting item:",ne),alert("Erro ao excluir item")}},B=T=>{F({name:`${T.name} (Cpia)`,category:T.category,quantity:0,min_stock:T.min_stock,unit:T.unit,cost:T.cost,price:T.price,supplier:T.supplier,description:T.description,sku:T.sku?`${T.sku}-COPIA`:"",location:T.location,created_at:"",updated_at:""}),l(!0)},$=async()=>{if(L.current){g(!0),p(!0),N(10);try{const T=setInterval(()=>{N(ee=>ee>=90?(clearInterval(T),90):ee+10)},300),ne=await hg(L.current,{scale:1,useCORS:!0,logging:!1});N(95);const ue=ne.toDataURL("image/png"),me=new Ft({orientation:"portrait",unit:"mm",format:"a4"});me.setFillColor(59,130,246),me.rect(0,0,me.internal.pageSize.width,20,"F"),me.setTextColor(255,255,255),me.setFontSize(14),me.text("Relatrio de Estoque - GiarTech",10,10),me.setFontSize(10),me.text(`Gerado em: ${new Date().toLocaleString("pt-BR")}`,10,16);const xe=me.internal.pageSize.width,Be=ne.height*xe/ne.width;me.addImage(ue,"PNG",0,25,xe,Be),me.save("relatorio-estoque.pdf"),N(100),setTimeout(()=>{g(!1),p(!1),N(0)},1e3)}catch(T){console.error("Error generating PDF:",T),g(!1),p(!1),alert("Error generating PDF. Please try again.")}}};return e.jsxs("div",{className:"space-y-6",ref:L,children:[_&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(cs,{className:"h-5 w-5 text-red-500 mr-2"}),e.jsx("span",{className:"text-red-700",children:_})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Estoque"}),e.jsxs("div",{className:"flex gap-3",children:[V.lowStock>0&&e.jsxs("button",{onClick:()=>t("/purchasing"),className:"bg-gradient-to-r from-red-500 to-orange-500 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:shadow-lg transition-all animate-pulse",children:[e.jsx(cs,{className:"h-4 w-4"}),e.jsxs("span",{children:[V.lowStock," ",V.lowStock===1?"Item":"Itens"," Necessitando Compra"]}),e.jsx(Sn,{className:"h-4 w-4"})]}),e.jsxs("button",{onClick:()=>l(!0),className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-2 rounded-lg flex items-center space-x-2 hover:shadow-lg transition-all",children:[e.jsx(bt,{className:"h-4 w-4"}),e.jsx("span",{children:"Novo Item"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[{label:"Total de Itens",value:V.total,color:"from-blue-500 to-cyan-500",icon:wt},{label:"Em Estoque",value:V.inStock,color:"from-green-500 to-emerald-500",icon:zt},{label:"Estoque Baixo",value:V.lowStock,color:"from-yellow-500 to-orange-500",icon:cs},{label:"Sem Estoque",value:V.outOfStock,color:"from-red-500 to-pink-500",icon:nr},{label:"Valor Total",value:`R$ ${V.totalValue.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,color:"from-purple-500 to-indigo-500",icon:wt,adminOnly:!0}].filter(T=>!T.adminOnly||T.adminOnly&&s).map((T,ne)=>e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:ne*.1},className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:`w-10 h-10 bg-gradient-to-r ${T.color} rounded-lg flex items-center justify-center`,children:e.jsx(T.icon,{className:"h-5 w-5 text-white"})})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:T.value}),e.jsx("p",{className:"text-sm text-gray-600",children:T.label})]},T.label))}),e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-md border border-gray-100",children:e.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4 md:items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4 flex-grow",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{type:"text",placeholder:"Buscar por nome, fornecedor ou SKU...",value:a,onChange:T=>r(T.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(io,{className:"h-5 w-5 text-gray-400"}),e.jsx("select",{value:n,onChange:T=>i(T.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:P.map(T=>e.jsx("option",{value:T,children:T==="all"?"Todas as Categorias":T},T))})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:$,className:"px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors flex items-center space-x-1",children:[e.jsx(ut,{className:"h-4 w-4"}),e.jsx("span",{children:"Relatrio"})]}),e.jsxs("button",{onClick:()=>l(!0),className:"px-3 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors flex items-center space-x-1",children:[e.jsx(bt,{className:"h-4 w-4"}),e.jsx("span",{children:"Novo Item"})]})]})]})}),E?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Carregando estoque..."})]}):e.jsx("div",{className:"space-y-4",children:Z.length>0?Z.map((T,ne)=>e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:ne*.05},className:"bg-white rounded-xl p-6 shadow-md border border-gray-100 hover:shadow-xl transition-all duration-200",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${q(T.quantity,T.min_stock)==="in_stock"?"bg-green-100 text-green-600":q(T.quantity,T.min_stock)==="low_stock"?"bg-yellow-100 text-yellow-600":"bg-red-100 text-red-600"}`,children:e.jsx(wt,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:T.name}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:T.category}),T.sku&&e.jsxs("span",{className:"text-xs text-gray-500",children:["SKU: ",T.sku]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${O(T)}`,children:X(T)}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>{u(T),d(!0)},className:"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors",title:"Editar",children:e.jsx(pj,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>B(T),className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200 transition-colors",title:"Duplicar Item",children:e.jsx(Gr,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>m(T.id),className:"p-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors",title:"Excluir",children:e.jsx(Vt,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Quantidade"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:T.quantity})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Estoque Mnimo"}),e.jsx("p",{className:"text-sm text-gray-900",children:T.min_stock})]}),s&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Preo Unitrio"}),e.jsxs("p",{className:"text-sm text-green-600",children:["R$ ",T.price.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Fornecedor"}),e.jsx("p",{className:"text-sm text-gray-900",children:T.supplier})]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[e.jsx("span",{children:"Nvel de Estoque"}),e.jsxs("span",{children:[T.quantity,"/",T.min_stock," mn"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${T.quantity>T.min_stock?"bg-green-500":T.quantity>0?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(T.quantity/(T.min_stock*2)*100,100)}%`}})})]}),T.location&&e.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:[e.jsx("span",{className:"font-medium",children:"Localizao:"})," ",T.location]})]},T.id)):e.jsxs("div",{className:"bg-white rounded-xl p-10 shadow-md border border-gray-100 text-center",children:[e.jsx(wt,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhum item encontrado"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"No encontramos itens de estoque com os filtros selecionados."}),e.jsx("button",{onClick:()=>{r(""),i("all")},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Limpar filtros"})]})}),e.jsx(rt,{children:o&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>l(!1),className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"relative bg-white rounded-xl p-6 w-full max-w-2xl shadow-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Novo Item de Estoque"}),e.jsx("button",{onClick:()=>l(!1),children:e.jsx(ht,{className:"h-6 w-6 text-gray-400"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(wt,{className:"h-5 w-5 mr-2 text-blue-500"}),"Informaes Bsicas"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Item"}),e.jsx("input",{type:"text",value:f.name,onChange:T=>F({...f,name:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nome completo do item",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria"}),e.jsx("input",{type:"text",value:f.category,onChange:T=>F({...f,category:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Equipamentos, Peas, etc.",required:!0,list:"categories"}),e.jsx("datalist",{id:"categories",children:P.filter(T=>T!=="all").map(T=>e.jsx("option",{value:T},T))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["SKU / Cdigo ",e.jsx("span",{className:"text-gray-400 text-xs",children:"(opcional)"})]}),e.jsx("input",{type:"text",value:f.sku,onChange:T=>F({...f,sku:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Deixe em branco para gerar automaticamente"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{value:f.description,onChange:T=>F({...f,description:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Descrio detalhada do item"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(wt,{className:"h-5 w-5 mr-2 text-blue-500"}),"Informaes de Estoque"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantidade Inicial"}),e.jsx("input",{type:"number",value:f.quantity,onChange:T=>F({...f,quantity:parseFloat(T.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",step:"0.01",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estoque Mnimo"}),e.jsx("input",{type:"number",value:f.min_stock,onChange:T=>F({...f,min_stock:parseFloat(T.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",step:"0.01",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unidade de Medida"}),e.jsxs("select",{value:f.unit||"un",onChange:T=>F({...f,unit:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"un",children:"Unidade (un)"}),e.jsx("option",{value:"m",children:"Metro (m)"}),e.jsx("option",{value:"m2",children:"Metro Quadrado (m)"}),e.jsx("option",{value:"m3",children:"Metro Cbico (m)"}),e.jsx("option",{value:"kg",children:"Quilograma (kg)"}),e.jsx("option",{value:"g",children:"Grama (g)"}),e.jsx("option",{value:"l",children:"Litro (l)"}),e.jsx("option",{value:"ml",children:"Mililitro (ml)"}),e.jsx("option",{value:"cx",children:"Caixa (cx)"}),e.jsx("option",{value:"pc",children:"Pea (pc)"}),e.jsx("option",{value:"par",children:"Par"}),e.jsx("option",{value:"rolo",children:"Rolo"}),e.jsx("option",{value:"pct",children:"Pacote (pct)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor de Custo (R$)"}),e.jsx("input",{type:"number",value:f.cost,onChange:T=>F({...f,cost:parseFloat(T.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",step:"0.01",placeholder:"Preo de compra"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor de Venda (R$)"}),e.jsx("input",{type:"number",value:f.price,onChange:T=>F({...f,price:parseFloat(T.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",step:"0.01",placeholder:"Preo de venda",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fornecedor"}),e.jsx("input",{type:"text",value:f.supplier,onChange:T=>F({...f,supplier:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nome do fornecedor"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Localizao"}),e.jsx("input",{type:"text",value:f.location,onChange:T=>F({...f,location:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Prateleira A3"})]})]})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>l(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsxs("button",{onClick:oe,className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:shadow-lg",children:[e.jsx(Gt,{className:"h-4 w-4 mr-2 inline"}),"Salvar Item"]})]})]})]})}),e.jsx(rt,{children:c&&A&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>d(!1),className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"relative bg-white rounded-xl p-6 w-full max-w-2xl shadow-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Editar Item"}),e.jsx("button",{onClick:()=>d(!1),children:e.jsx(ht,{className:"h-6 w-6 text-gray-400"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(wt,{className:"h-5 w-5 mr-2 text-blue-500"}),"Informaes Bsicas"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Item"}),e.jsx("input",{type:"text",value:A.name,onChange:T=>u({...A,name:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nome completo do item",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria"}),e.jsx("input",{type:"text",value:A.category,onChange:T=>u({...A,category:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Equipamentos, Peas, etc.",required:!0,list:"edit-categories"}),e.jsx("datalist",{id:"edit-categories",children:P.filter(T=>T!=="all").map(T=>e.jsx("option",{value:T},T))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["SKU / Cdigo ",e.jsx("span",{className:"text-gray-400 text-xs",children:"(opcional)"})]}),e.jsx("input",{type:"text",value:A.sku||"",onChange:T=>u({...A,sku:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Cdigo nico do item"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{value:A.description||"",onChange:T=>u({...A,description:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Descrio detalhada do item"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(wt,{className:"h-5 w-5 mr-2 text-blue-500"}),"Informaes de Estoque"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantidade"}),e.jsx("input",{type:"number",value:A.quantity,onChange:T=>u({...A,quantity:parseInt(T.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estoque Mnimo"}),e.jsx("input",{type:"number",value:A.min_stock,onChange:T=>u({...A,min_stock:parseInt(T.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preo Unitrio (R$)"}),e.jsx("input",{type:"number",value:A.price,onChange:T=>u({...A,price:parseFloat(T.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",step:"0.01",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fornecedor"}),e.jsx("input",{type:"text",value:A.supplier,onChange:T=>u({...A,supplier:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nome do fornecedor",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Localizao"}),e.jsx("input",{type:"text",value:A.location||"",onChange:T=>u({...A,location:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Prateleira A3"})]})]})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>d(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsxs("button",{onClick:H,className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:shadow-lg",children:[e.jsx(Gt,{className:"h-4 w-4 mr-2 inline"}),"Salvar Alteraes"]})]})]})]})}),e.jsx(rt,{children:x!==null&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>m(null),className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"relative bg-white rounded-xl p-6 w-full max-w-md shadow-2xl",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 text-red-600",children:[e.jsx(cs,{className:"h-8 w-8"}),e.jsx("h3",{className:"text-xl font-bold",children:"Confirmar Excluso"})]}),e.jsx("p",{className:"text-gray-700 mb-6",children:"Tem certeza que deseja excluir este item do estoque? Esta ao no pode ser desfeita."}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>m(null),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{onClick:()=>x&&I(x),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Excluir"})]})]})]})}),e.jsx(rt,{children:b&&e.jsxs(W.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-white rounded-lg shadow-xl border border-gray-200 p-4 w-80 z-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Gerando Relatrio"}),v===100&&e.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ht,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[v<100?e.jsx(Dl,{className:"h-5 w-5 text-blue-500 animate-spin"}):e.jsx(Aa,{className:"h-5 w-5 text-green-500"}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${v}%`}})})}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[v,"%"]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:v<100?"Processando dados e gerando relatrio...":"Relatrio gerado com sucesso!"})]})})]})},D8=()=>{const{id:s}=Gu(),t=ys(),{isAdmin:a}=rs(),[r,n]=j.useState(!1),[i,o]=j.useState(0),[l,c]=j.useState(""),[d,A]=j.useState("details"),u={name:"Ar Condicionado Split 12.000 BTUs",category:"Equipamentos",quantity:5,minStock:2,price:1800,supplier:"Fornecedor A",status:"in_stock",description:"Ar condicionado split 12.000 BTUs, 220V, com controle remoto e instalao bsica includa.",sku:"AC-12000-220",location:"Prateleira A3",history:[{date:"2023-12-15",type:"entrada",quantity:10,user:"Admin",notes:"Compra inicial"},{date:"2023-12-16",type:"saida",quantity:2,user:"Carlos Tcnico",notes:"OS-2023-001"},{date:"2023-12-17",type:"saida",quantity:3,user:"Ana Tcnica",notes:"OS-2023-002"}]},x=b=>{switch(b){case"in_stock":return"bg-green-100 text-green-800";case"low_stock":return"bg-yellow-100 text-yellow-800";case"out_of_stock":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},m=b=>{switch(b){case"in_stock":return"Em Estoque";case"low_stock":return"Estoque Baixo";case"out_of_stock":return"Sem Estoque";default:return"Desconhecido"}},y=b=>{switch(b){case"entrada":return"text-green-600";case"saida":return"text-red-600";case"ajuste":return"text-blue-600";default:return"text-gray-600"}},g=()=>{i!==0&&(console.log("Adjusting stock by:",i,"Reason:",l),n(!1),o(0),c(""))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t("/inventory"),className:"p-2 rounded-lg text-gray-500 hover:bg-gray-100",children:e.jsx(An,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:u.name})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${x(u.status)}`,children:m(u.status)})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>n(!0),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center space-x-2",children:[e.jsx(zt,{className:"h-4 w-4"}),e.jsx("span",{children:"Ajustar Estoque"})]}),e.jsxs("button",{onClick:()=>t(`/inventory/${s}/edit`),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center space-x-2",children:[e.jsx(rr,{className:"h-4 w-4"}),e.jsx("span",{children:"Editar"})]}),a&&e.jsxs("button",{className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors flex items-center space-x-2",children:[e.jsx(Vt,{className:"h-4 w-4"}),e.jsx("span",{children:"Excluir"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>A("details"),className:`flex-1 flex items-center justify-center space-x-2 py-4 px-6 transition-colors ${d==="details"?"bg-blue-50 text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(wt,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Detalhes"})]}),e.jsxs("button",{onClick:()=>A("history"),className:`flex-1 flex items-center justify-center space-x-2 py-4 px-6 transition-colors ${d==="history"?"bg-blue-50 text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(vt,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Histrico"})]}),a&&e.jsxs("button",{onClick:()=>A("analytics"),className:`flex-1 flex items-center justify-center space-x-2 py-4 px-6 transition-colors ${d==="analytics"?"bg-blue-50 text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(Ls,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Anlise"})]})]}),e.jsxs("div",{className:"p-6",children:[d==="details"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(wt,{className:"h-4 w-4 mr-2 text-blue-500"}),"Informaes Bsicas"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Categoria"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:u.category})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"SKU"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:u.sku})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Fornecedor"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:u.supplier})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Localizao"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:u.location})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(zt,{className:"h-4 w-4 mr-2 text-blue-500"}),"Informaes de Estoque"]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Quantidade Atual"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.quantity})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Estoque Mnimo"}),e.jsx("p",{className:"text-lg font-medium text-gray-900",children:u.minStock})]}),a&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Valor Unitrio"}),e.jsxs("p",{className:"text-lg font-medium text-green-600",children:["R$ ",u.price.toFixed(2)]})]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[e.jsx("span",{children:"Nvel de Estoque"}),e.jsxs("span",{children:[u.quantity,"/",u.minStock," mn"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"h-2 rounded-full transition-all duration-300 bg-green-500",style:{width:`${Math.min(u.quantity/(u.minStock*2)*100,100)}%`}})})]}),u.quantity<=u.minStock]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(wt,{className:"h-4 w-4 mr-2 text-blue-500"}),"Descrio"]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-gray-700",children:u.description})})]})]}),d==="history"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 flex items-center",children:[e.jsx(vt,{className:"h-4 w-4 mr-2 text-blue-500"}),"Histrico de Movimentaes"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-gray-200"}),e.jsx("div",{className:"space-y-6",children:u.history.map((b,p)=>e.jsxs("div",{className:"relative pl-10",children:[e.jsx("div",{className:`absolute left-0 top-0 w-8 h-8 rounded-full flex items-center justify-center ${b.type==="entrada"?"bg-green-100":"bg-red-100"}`,children:b.type==="entrada"?e.jsx(bt,{className:"h-4 w-4 text-green-600"}):e.jsx(_u,{className:"h-4 w-4 text-red-600"})}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("h4",{className:`font-medium ${y(b.type)}`,children:[b.type==="entrada"?"Entrada":"Sada"," de ",b.quantity," unidades"]}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(b.date).toLocaleDateString("pt-BR")})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Realizado por: ",b.user]}),b.notes&&e.jsxs("p",{className:"text-sm text-gray-700",children:["Observao: ",b.notes]})]})]},p))})]})]}),d==="analytics"&&a&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 flex items-center",children:[e.jsx(Ls,{className:"h-4 w-4 mr-2 text-blue-500"}),"Anlise de Consumo"]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 text-center",children:[e.jsx(Ls,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-700 mb-2",children:"Anlise de consumo em desenvolvimento"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Em breve voc poder visualizar grficos de consumo, previses de estoque e muito mais."})]})]})]})]}),r&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>n(!1)}),e.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"relative bg-white rounded-xl p-6 w-full max-w-md shadow-2xl",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Ajustar Estoque"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantidade Atual"}),e.jsx("input",{type:"text",value:u.quantity,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ajuste"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>o(b=>b-1),className:"p-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:e.jsx(_u,{className:"h-5 w-5"})}),e.jsx("input",{type:"number",value:i,onChange:b=>o(parseInt(b.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-center"}),e.jsx("button",{type:"button",onClick:()=>o(b=>b+1),className:"p-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:e.jsx(bt,{className:"h-5 w-5"})})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[i>0?"Entrada":i<0?"Sada":"Sem alterao"," de ",Math.abs(i)," unidades"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nova Quantidade"}),e.jsx("input",{type:"text",value:u.quantity+i,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 font-bold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motivo do Ajuste"}),e.jsx("textarea",{value:l,onChange:b=>c(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Descreva o motivo deste ajuste...",required:!0})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>n(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{onClick:g,disabled:i===0||!l,className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Confirmar Ajuste"})]})]})]})]})},I8=()=>{const s=ys(),[t,a]=j.useState({name:"",category:"",quantity:0,minStock:0,price:0,supplier:"",description:"",sku:"",location:""}),r=["Equipamentos","Acessrios","Materiais","Peas","Ferramentas"],n=o=>{const{name:l,value:c}=o.target;a(l==="price"||l==="quantity"||l==="minStock"?{...t,[l]:parseFloat(c)||0}:{...t,[l]:c})},i=o=>{o.preventDefault(),console.log("Form submitted:",t),s("/inventory")};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>s("/inventory"),className:"p-2 rounded-lg text-gray-500 hover:bg-gray-100",children:e.jsx(An,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Novo Item de Estoque"})]})}),e.jsxs("form",{onSubmit:i,className:"space-y-6",children:[e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl p-6 shadow-md border border-gray-100",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(wt,{className:"h-5 w-5 mr-2 text-blue-500"}),"Informaes Bsicas"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Item"}),e.jsx("input",{type:"text",name:"name",value:t.name,onChange:n,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nome completo do item",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria"}),e.jsxs("select",{name:"category",value:t.category,onChange:n,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Selecione uma categoria"}),r.map(o=>e.jsx("option",{value:o,children:o},o))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU / Cdigo"}),e.jsx("input",{type:"text",name:"sku",value:t.sku,onChange:n,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Cdigo nico do item"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{name:"description",value:t.description,onChange:n,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Descrio detalhada do item"})]})]})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl p-6 shadow-md border border-gray-100",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(wt,{className:"h-5 w-5 mr-2 text-blue-500"}),"Informaes de Estoque"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantidade Inicial"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{type:"button",onClick:()=>a(o=>({...o,quantity:Math.max(0,o.quantity-1)})),className:"p-2 bg-gray-100 text-gray-700 rounded-l-lg hover:bg-gray-200",children:e.jsx(_u,{className:"h-4 w-4"})}),e.jsx("input",{type:"number",name:"quantity",value:t.quantity,onChange:n,className:"w-full px-4 py-2 border-y border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent text-center",min:"0",required:!0}),e.jsx("button",{type:"button",onClick:()=>a(o=>({...o,quantity:o.quantity+1})),className:"p-2 bg-gray-100 text-gray-700 rounded-r-lg hover:bg-gray-200",children:e.jsx(bt,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estoque Mnimo"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{type:"button",onClick:()=>a(o=>({...o,minStock:Math.max(0,o.minStock-1)})),className:"p-2 bg-gray-100 text-gray-700 rounded-l-lg hover:bg-gray-200",children:e.jsx(_u,{className:"h-4 w-4"})}),e.jsx("input",{type:"number",name:"minStock",value:t.minStock,onChange:n,className:"w-full px-4 py-2 border-y border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent text-center",min:"0",required:!0}),e.jsx("button",{type:"button",onClick:()=>a(o=>({...o,minStock:o.minStock+1})),className:"p-2 bg-gray-100 text-gray-700 rounded-r-lg hover:bg-gray-200",children:e.jsx(bt,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preo Unitrio (R$)"}),e.jsx("input",{type:"number",name:"price",value:t.price,onChange:n,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",step:"0.01",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fornecedor"}),e.jsx("input",{type:"text",name:"supplier",value:t.supplier,onChange:n,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nome do fornecedor",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Localizao"}),e.jsx("input",{type:"text",name:"location",value:t.location,onChange:n,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Prateleira A3"})]})]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>s("/inventory"),className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex-1",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:shadow-lg transition-all flex-1 flex items-center justify-center",children:[e.jsx(Gt,{className:"h-5 w-5 mr-2"}),"Salvar Item"]})]})]})]})};Wu.register(Ju,Yu,rp,Xu,Zu,em,np,ip,op,lp);const f1=()=>{const{isAdmin:s}=rs(),[t,a]=j.useState("service-orders"),[r,n]=j.useState("month"),[i,o]=j.useState(""),[l,c]=j.useState(""),[d,A]=j.useState(!1),[u,x]=j.useState(!1),[m,y]=j.useState(!1),[g,b]=j.useState(null),[p,v]=j.useState(0),D=[{id:"service-orders",name:"Ordens de Servio",icon:ea,adminOnly:!1},{id:"inventory",name:"Movimentao de Estoque",icon:wt,adminOnly:!1},{id:"technicians",name:"Desempenho de Tcnicos",icon:Nt,adminOnly:!0},{id:"financial",name:"Relatrio Financeiro",icon:Ut,adminOnly:!0}].filter(B=>!B.adminOnly||B.adminOnly&&s),S=()=>{console.log("Generating report:",{type:t,dateRange:r,startDate:i,endDate:l}),A(!0)},E=B=>{console.log(`Exporting report as ${B}`),alert(`Relatrio exportado como ${B}`)},R=[{month:"Jan",income:12500,expense:8200},{month:"Fev",income:14800,expense:9100},{month:"Mar",income:13200,expense:8700},{month:"Abr",income:15850,expense:9320},{month:"Mai",income:16200,expense:9800},{month:"Jun",income:17500,expense:10200}],_=[{name:"Concludos",value:5},{name:"Em Progresso",value:6},{name:"Planejados",value:1}],C=[{name:"Servios",value:15850},{name:"Materiais",value:4200},{name:"Administrativo",value:3e3},{name:"Folha de Pagamento",value:8500}],L={labels:R.map(B=>B.month),datasets:[{label:"Receitas",data:R.map(B=>B.income),backgroundColor:"rgba(74, 222, 128, 0.6)",borderColor:"rgb(74, 222, 128)",borderWidth:1},{label:"Despesas",data:R.map(B=>B.expense),backgroundColor:"rgba(248, 113, 113, 0.6)",borderColor:"rgb(248, 113, 113)",borderWidth:1}]},f={labels:_.map(B=>B.name),datasets:[{data:_.map(B=>B.value),backgroundColor:["rgba(74, 222, 128, 0.6)","rgba(59, 130, 246, 0.6)","rgba(139, 92, 246, 0.6)"],borderColor:["rgb(74, 222, 128)","rgb(59, 130, 246)","rgb(139, 92, 246)"],borderWidth:1}]},F={labels:R.map(B=>B.month),datasets:[{label:"Receitas",data:R.map(B=>B.income),borderColor:"rgb(74, 222, 128)",backgroundColor:"rgba(74, 222, 128, 0.1)",tension:.3,fill:!0},{label:"Despesas",data:R.map(B=>B.expense),borderColor:"rgb(248, 113, 113)",backgroundColor:"rgba(248, 113, 113, 0.1)",tension:.3,fill:!0}]},M=5,P=[{id:1,name:"Relatrio de OS - Dezembro 2023",type:"Ordens de Servio",date:"2023-12-15",user:"Admin Demo"},{id:2,name:"Movimentao de Estoque - Dezembro 2023",type:"Estoque",date:"2023-12-14",user:"Admin Demo"},{id:3,name:"Desempenho de Tcnicos - Novembro 2023",type:"Desempenho",date:"2023-12-01",user:"Admin Demo"},{id:4,name:"Relatrio Financeiro - Dezembro 2023",type:"Financeiro",date:"2023-12-31",user:"Admin Demo"},{id:5,name:"Anlise de Clientes - Dezembro 2023",type:"Clientes",date:"2023-12-20",user:"Admin Demo"},{id:6,name:"Relatrio de OS - Novembro 2023",type:"Ordens de Servio",date:"2023-11-30",user:"Admin Demo"},{id:7,name:"Movimentao de Estoque - Novembro 2023",type:"Estoque",date:"2023-11-29",user:"Admin Demo"},{id:8,name:"Desempenho de Tcnicos - Outubro 2023",type:"Desempenho",date:"2023-11-01",user:"Admin Demo"},{id:9,name:"Relatrio Financeiro - Novembro 2023",type:"Financeiro",date:"2023-11-30",user:"Admin Demo"},{id:10,name:"Anlise de Clientes - Novembro 2023",type:"Clientes",date:"2023-11-20",user:"Admin Demo"}],Z=Math.ceil(P.length/M),O=P.slice(p*M,(p+1)*M),[X,q]=j.useState(null),[V,oe]=j.useState("bar"),H=(B,$)=>{q(JSON.parse(JSON.stringify($))),oe(B),y(!0)},I=(B,$,T)=>{if(!X)return;const ne={...X};if($==="label")ne.labels[B]=T;else{const ue=parseInt($.split("-")[1]),me=$.split("-")[2];me==="label"?ne.datasets[ue].label=T:me==="data"&&(ne.datasets[ue].data[B]=parseFloat(T)||0)}q(ne)};return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Relatrios"}),e.jsxs("button",{onClick:()=>x(!u),className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx(lm,{className:"h-4 w-4"}),e.jsx("span",{children:"Filtros"}),e.jsx(Ir,{className:`h-4 w-4 transition-transform ${u?"rotate-180":""}`})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg flex items-center justify-center",children:e.jsx(ea,{className:"h-5 w-5 text-white"})})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"48"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ordens de Servio"})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg flex items-center justify-center",children:e.jsx(wt,{className:"h-5 w-5 text-white"})})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"156"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Itens em Estoque"})]}),s&&e.jsxs(e.Fragment,{children:[e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center",children:e.jsx(Nt,{className:"h-5 w-5 text-white"})})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"8"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Tcnicos Ativos"})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-lg flex items-center justify-center",children:e.jsx(Ut,{className:"h-5 w-5 text-white"})})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"R$ 15.850"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Faturamento Mensal"})]})]})]}),e.jsx(rt,{children:u&&e.jsx(W.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(ut,{className:"h-5 w-5 mr-2 text-blue-500"}),"Gerador de Relatrios"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Relatrio"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:D.map(B=>e.jsxs("button",{type:"button",onClick:()=>a(B.id),className:`flex items-center space-x-2 p-3 rounded-lg border-2 transition-colors ${t===B.id?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:[e.jsx(B.icon,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm",children:B.name})]},B.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Perodo"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("button",{type:"button",onClick:()=>n("week"),className:`p-3 rounded-lg border-2 transition-colors text-sm ${r==="week"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:"ltima Semana"}),e.jsx("button",{type:"button",onClick:()=>n("month"),className:`p-3 rounded-lg border-2 transition-colors text-sm ${r==="month"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:"ltimo Ms"}),e.jsx("button",{type:"button",onClick:()=>n("custom"),className:`p-3 rounded-lg border-2 transition-colors text-sm ${r==="custom"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:"Personalizado"})]})]}),r==="custom"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Inicial"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ot,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"date",value:i,onChange:B=>o(B.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:r==="custom"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Final"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ot,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"date",value:l,onChange:B=>c(B.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:r==="custom"})]})]})]}),e.jsx("div",{className:"pt-4",children:e.jsxs("button",{type:"button",onClick:S,className:"w-full px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:shadow-lg transition-all flex items-center justify-center",children:[e.jsx(Ls,{className:"h-5 w-5 mr-2"}),"Gerar Relatrio"]})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Pr-visualizao"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>E("pdf"),className:"p-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors",title:"Exportar como PDF",children:e.jsx(ut,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",onClick:()=>E("excel"),className:"p-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors",title:"Exportar como Excel",children:e.jsx(wa,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",onClick:()=>E("print"),className:"p-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors",title:"Imprimir",children:e.jsx(Bu,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:d?e.jsx("div",{className:"w-full h-full",children:e.jsx("div",{className:"h-40 w-full bg-white rounded-lg border border-gray-200 flex items-center justify-center",children:e.jsx(au,{data:L,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Receitas vs Despesas"}}}})})}):e.jsxs("div",{className:"text-center",children:[e.jsx(Ls,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 mb-2",children:"Selecione as opes e gere o relatrio"}),e.jsx("p",{className:"text-sm text-gray-400",children:"A pr-visualizao aparecer aqui"})]})})]})]})]})})}),d&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl p-6 shadow-md border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Receitas vs Despesas"}),e.jsxs("button",{onClick:()=>H("bar",L),className:"p-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors flex items-center space-x-1",children:[e.jsx(rr,{className:"h-4 w-4"}),e.jsx("span",{children:"Editar"})]})]}),e.jsx("div",{className:"h-80",children:e.jsx(au,{data:L,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Receitas vs Despesas"}}}})})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl p-6 shadow-md border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Tendncia de Fluxo de Caixa"}),e.jsxs("button",{onClick:()=>H("line",F),className:"p-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors flex items-center space-x-1",children:[e.jsx(rr,{className:"h-4 w-4"}),e.jsx("span",{children:"Editar"})]})]}),e.jsx("div",{className:"h-80",children:e.jsx(Lx,{data:F,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Tendncia de Fluxo de Caixa"}}}})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl p-6 shadow-md border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Status dos Projetos"}),e.jsxs("button",{onClick:()=>H("pie",f),className:"p-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors flex items-center space-x-1",children:[e.jsx(rr,{className:"h-4 w-4"}),e.jsx("span",{children:"Editar"})]})]}),e.jsx("div",{className:"h-64",children:e.jsx(fh,{data:f,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Status dos Projetos"}}}})})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl p-6 shadow-md border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Categorias de Transaes"}),e.jsxs("button",{onClick:()=>H("pie",f),className:"p-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors flex items-center space-x-1",children:[e.jsx(rr,{className:"h-4 w-4"}),e.jsx("span",{children:"Editar"})]})]}),e.jsx("div",{className:"h-64",children:e.jsx(fh,{data:{labels:C.map(B=>B.name),datasets:[{data:C.map(B=>B.value),backgroundColor:["rgba(74, 222, 128, 0.6)","rgba(59, 130, 246, 0.6)","rgba(139, 92, 246, 0.6)","rgba(248, 113, 113, 0.6)"],borderColor:["rgb(74, 222, 128)","rgb(59, 130, 246)","rgb(139, 92, 246)","rgb(248, 113, 113)"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Categorias de Transaes"}}}})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md border border-gray-100",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(ut,{className:"h-5 w-5 mr-2 text-blue-500"}),"Relatrios Recentes"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nome"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gerado por"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:O.map(B=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:B.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-500",children:B.type})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-500",children:new Date(B.date).toLocaleDateString("pt-BR")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-500",children:B.user})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:e.jsx($s,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-green-600 hover:text-green-900",children:e.jsx(wa,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-red-600 hover:text-red-900",children:e.jsx(Bu,{className:"h-4 w-4"})})]})})]},B.id))})]})}),Z>1&&e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("button",{onClick:()=>v(B=>Math.max(0,B-1)),disabled:p===0,className:`flex items-center space-x-1 px-3 py-1 rounded-lg ${p===0?"text-gray-400 cursor-not-allowed":"text-blue-600 hover:bg-blue-50"}`,children:[e.jsx(An,{className:"h-4 w-4"}),e.jsx("span",{children:"Anterior"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",p+1," de ",Z]}),e.jsxs("button",{onClick:()=>v(B=>Math.min(Z-1,B+1)),disabled:p===Z-1,className:`flex items-center space-x-1 px-3 py-1 rounded-lg ${p===Z-1?"text-gray-400 cursor-not-allowed":"text-blue-600 hover:bg-blue-50"}`,children:[e.jsx("span",{children:"Prximo"}),e.jsx(za,{className:"h-4 w-4"})]})]})]}),e.jsx(rt,{children:m&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>y(!1),className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"relative bg-white rounded-xl p-6 w-full max-w-4xl shadow-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Editar Grfico"}),e.jsx("button",{onClick:()=>y(!1),children:e.jsx(ht,{className:"h-6 w-6 text-gray-400"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Grfico"}),e.jsxs("select",{value:V,onChange:B=>oe(B.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"bar",children:"Barras"}),e.jsx("option",{value:"line",children:"Linhas"}),e.jsx("option",{value:"pie",children:"Pizza"}),e.jsx("option",{value:"area",children:"rea"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estilo"}),e.jsxs("select",{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{children:"Padro"}),e.jsx("option",{children:"Gradiente"}),e.jsx("option",{children:"Monocromtico"}),e.jsx("option",{children:"Pastel"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dados do Grfico"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ms"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Receitas"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Despesas"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map((B,$)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"text",defaultValue:B.month,onChange:T=>I($,"label",T.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded-md"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"number",defaultValue:B.income,onChange:T=>I($,"0-data",T.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded-md"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"number",defaultValue:B.expense,onChange:T=>I($,"1-data",T.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded-md"})})]},$))})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Visualizao"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg h-64",children:[V==="bar"&&e.jsx(au,{data:L,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Receitas vs Despesas"}}}}),V==="line"&&e.jsx(Lx,{data:F,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Tendncia de Fluxo de Caixa"}}}}),V==="pie"&&e.jsx(fh,{data:f,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Status dos Projetos"}}}})]})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>y(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsxs("button",{onClick:()=>{y(!1),alert("Alteraes salvas com sucesso!")},className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:shadow-lg",children:[e.jsx(Gt,{className:"h-4 w-4 mr-2 inline"}),"Salvar Alteraes"]})]})]})]})})]})},L8={name:"Meu Tema Personalizado",description:"",primary_color:"#2563eb",secondary_color:"#7c3aed",accent_color:"#10b981",success_color:"#10b981",warning_color:"#f59e0b",error_color:"#ef4444",info_color:"#3b82f6",background_color:"#f9fafb",surface_color:"#ffffff",surface_secondary_color:"#f3f4f6",text_primary_color:"#111827",text_secondary_color:"#6b7280",text_muted_color:"#9ca3af",sidebar_bg_color:"#1f2937",sidebar_text_color:"#f9fafb",sidebar_active_color:"#3b82f6",header_bg_color:"#ffffff",header_text_color:"#111827",border_color:"#e5e7eb",font_family:"Inter, system-ui, sans-serif",font_size_base:"14px",border_radius_sm:"0.375rem",border_radius_md:"0.5rem",border_radius_lg:"0.75rem",is_dark_mode:!1,is_public:!1},T8=({initialTheme:s,onSave:t,onPreview:a,saving:r})=>{const[n,i]=j.useState(s||L8),[o,l]=j.useState("colors"),c=(x,m)=>{const y={...n,[x]:m};i(y),a(y)},d=()=>{const x=Math.floor(Math.random()*360),m=`hsl(${x}, 70%, 55%)`,y=`hsl(${(x+60)%360}, 70%, 55%)`,g=`hsl(${(x+120)%360}, 70%, 55%)`;c("primary_color",m),c("secondary_color",y),c("accent_color",g)},A=()=>{n.is_dark_mode?(c("background_color","#f9fafb"),c("surface_color","#ffffff"),c("surface_secondary_color","#f3f4f6"),c("text_primary_color","#111827"),c("text_secondary_color","#6b7280"),c("text_muted_color","#9ca3af"),c("border_color","#e5e7eb"),c("header_bg_color","#ffffff"),c("header_text_color","#111827")):(c("background_color","#0f172a"),c("surface_color","#1e293b"),c("surface_secondary_color","#334155"),c("text_primary_color","#f1f5f9"),c("text_secondary_color","#94a3b8"),c("text_muted_color","#64748b"),c("border_color","#334155"),c("header_bg_color","#1e293b"),c("header_text_color","#f1f5f9")),c("is_dark_mode",!n.is_dark_mode)},u=[{id:"colors",name:"Cores",icon:Il},{id:"typography",name:"Tipografia",icon:Ph},{id:"layout",name:"Layout",icon:Qh}];return e.jsxs(W.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:"flex gap-2",children:u.map(x=>{const m=x.icon;return e.jsxs("button",{onClick:()=>l(x.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${o===x.id?"bg-blue-600 text-white shadow-sm":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(m,{className:"w-4 h-4"}),e.jsx("span",{children:x.name})]},x.id)})})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors",children:[e.jsx(mk,{className:"w-4 h-4"}),"Gerar Cores"]}),e.jsxs("button",{onClick:()=>t(n),disabled:r,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[e.jsx(Gt,{className:"w-4 h-4"}),r?"Salvando...":"Salvar Tema"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Informaes do Tema"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Tema"}),e.jsx("input",{type:"text",value:n.name,onChange:x=>c("name",x.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Meu Tema Azul"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrio"}),e.jsx("input",{type:"text",value:n.description||"",onChange:x=>c("description",x.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Breve descrio do tema"})]})]}),e.jsxs("div",{className:"flex items-center gap-6 mt-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.is_dark_mode,onChange:A,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700 flex items-center gap-1",children:[n.is_dark_mode?e.jsx(Xp,{className:"w-4 h-4"}):e.jsx(tg,{className:"w-4 h-4"}),"Modo ",n.is_dark_mode?"Escuro":"Claro"]})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.is_public||!1,onChange:x=>c("is_public",x.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700 flex items-center gap-1",children:[n.is_public?e.jsx(cm,{className:"w-4 h-4"}):e.jsx(Va,{className:"w-4 h-4"}),n.is_public?"Pblico":"Privado"]})]})]})]}),o==="colors"&&e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsx(_c,{title:"Cores Principais",icon:iS,colors:[{label:"Primria",field:"primary_color",value:n.primary_color},{label:"Secundria",field:"secondary_color",value:n.secondary_color},{label:"Destaque",field:"accent_color",value:n.accent_color}],onUpdate:c}),e.jsx(_c,{title:"Cores de Status",icon:Jp,colors:[{label:"Sucesso",field:"success_color",value:n.success_color},{label:"Aviso",field:"warning_color",value:n.warning_color},{label:"Erro",field:"error_color",value:n.error_color},{label:"Info",field:"info_color",value:n.info_color}],onUpdate:c}),e.jsx(_c,{title:"Cores de Fundo",icon:Qh,colors:[{label:"Fundo",field:"background_color",value:n.background_color},{label:"Superfcie",field:"surface_color",value:n.surface_color},{label:"Superfcie Secundria",field:"surface_secondary_color",value:n.surface_secondary_color}],onUpdate:c}),e.jsx(_c,{title:"Cores de Texto",icon:Ph,colors:[{label:"Texto Primrio",field:"text_primary_color",value:n.text_primary_color},{label:"Texto Secundrio",field:"text_secondary_color",value:n.text_secondary_color},{label:"Texto Suave",field:"text_muted_color",value:n.text_muted_color}],onUpdate:c}),e.jsx(_c,{title:"Cores de Interface",icon:eg,colors:[{label:"Sidebar Fundo",field:"sidebar_bg_color",value:n.sidebar_bg_color},{label:"Sidebar Texto",field:"sidebar_text_color",value:n.sidebar_text_color},{label:"Sidebar Ativo",field:"sidebar_active_color",value:n.sidebar_active_color},{label:"Header Fundo",field:"header_bg_color",value:n.header_bg_color},{label:"Header Texto",field:"header_text_color",value:n.header_text_color},{label:"Bordas",field:"border_color",value:n.border_color}],onUpdate:c})]}),o==="typography"&&e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(Ph,{className:"w-5 h-5 text-gray-700"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Tipografia"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Famlia de Fontes"}),e.jsxs("select",{value:n.font_family,onChange:x=>c("font_family",x.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"Inter, system-ui, sans-serif",children:"Inter"}),e.jsx("option",{value:"'Roboto', sans-serif",children:"Roboto"}),e.jsx("option",{value:"'Open Sans', sans-serif",children:"Open Sans"}),e.jsx("option",{value:"'Poppins', sans-serif",children:"Poppins"}),e.jsx("option",{value:"'Montserrat', sans-serif",children:"Montserrat"}),e.jsx("option",{value:"system-ui, sans-serif",children:"System UI"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tamanho Base da Fonte: ",n.font_size_base]}),e.jsx("input",{type:"range",min:"12",max:"18",value:parseInt(n.font_size_base),onChange:x=>c("font_size_base",`${x.target.value}px`),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"12px"}),e.jsx("span",{children:"18px"})]})]})]})]}),o==="layout"&&e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(Qh,{className:"w-5 h-5 text-gray-700"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Layout"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Raio de Borda Pequeno"}),e.jsx("input",{type:"text",value:n.border_radius_sm,onChange:x=>c("border_radius_sm",x.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: 0.375rem"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Raio de Borda Mdio"}),e.jsx("input",{type:"text",value:n.border_radius_md,onChange:x=>c("border_radius_md",x.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: 0.5rem"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Raio de Borda Grande"}),e.jsx("input",{type:"text",value:n.border_radius_lg,onChange:x=>c("border_radius_lg",x.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: 0.75rem"})]})]})]})]},"creator")},_c=({title:s,icon:t,colors:a,onUpdate:r})=>e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(t,{className:"w-5 h-5 text-gray-700"}),e.jsx("h3",{className:"text-lg font-semibold",children:s})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(({label:n,field:i,value:o})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:o,onChange:l=>r(i,l.target.value),className:"w-12 h-10 rounded border border-gray-300 cursor-pointer"}),e.jsx("input",{type:"text",value:o,onChange:l=>r(i,l.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm"})]})]},i))})]}),Q8=({onClose:s})=>{const{user:t}=rs(),[a,r]=j.useState("presets"),[n,i]=j.useState([]),[o,l]=j.useState([]),[c,d]=j.useState(null),[A,u]=j.useState(null),[x,m]=j.useState(!0),[y,g]=j.useState(!1),[b,p]=j.useState(!1);j.useEffect(()=>{v()},[]);const v=async()=>{try{m(!0);const{data:C,error:L}=await se.from("theme_presets").select("*").order("is_featured",{ascending:!1}).order("display_name");if(L)throw L;if(i(C||[]),t!=null&&t.id){const{data:f,error:F}=await se.from("custom_themes").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});if(F)throw F;l(f||[])}}catch(C){console.error("Error loading themes:",C)}finally{m(!1)}},N=C=>{console.log(" [APPLY THEME] Iniciando...",C.name),console.log(" [DADOS]:",C),document.body.style.backgroundColor=C.background_color,document.body.style.color=C.text_primary_color,console.log(" [BODY] Background:",C.background_color),C.is_dark_mode?(document.documentElement.classList.add("dark"),document.body.classList.add("dark"),console.log(" [DARK MODE] Ativado")):(document.documentElement.classList.remove("dark"),document.body.classList.remove("dark"),console.log(" [LIGHT MODE] Ativado")),console.log(" [CONCLUDO] Tema aplicado!")},D=C=>{console.log(" [PREVIEW] Boto clicado!",C.name),u(C),N(C)},S=async C=>{if(console.log(" [APPLY] Boto clicado!",C.name),!(t!=null&&t.id)){console.error(" [ERRO] Usurio no autenticado!"),alert("ERRO: Voc precisa estar autenticado!");return}try{g(!0),console.log(" [APPLY] Aplicando tema visualmente..."),N(C),console.log(" [BANCO] Salvando no banco de dados...");const{data:L,error:f}=await se.from("user_settings").update({theme:C.is_dark_mode?"dark":"light",custom_theme_id:C.id||null,updated_at:new Date().toISOString()}).eq("user_id",t.id).select();if(f)throw console.error(" [BANCO] Erro:",f),f;console.log(" [BANCO] Salvo com sucesso!",L),p(!0),setTimeout(()=>p(!1),3e3)}catch(L){console.error(" [ERRO GERAL]:",L),alert("ERRO ao aplicar tema! Veja o console para detalhes.")}finally{g(!1)}},E=async C=>{if(t!=null&&t.id)try{g(!0);const L={...C,user_id:t.id};if(C.id){const{error:f}=await se.from("custom_themes").update(L).eq("id",C.id);if(f)throw f}else{const{data:f,error:F}=await se.from("custom_themes").insert([L]).select().single();if(F)throw F;l([f,...o])}p(!0),setTimeout(()=>p(!1),2e3),await v()}catch(L){console.error("Error saving custom theme:",L)}finally{g(!1)}},R=async C=>{if(confirm("Deseja realmente excluir este tema?"))try{const{error:L}=await se.from("custom_themes").delete().eq("id",C);if(L)throw L;l(o.filter(f=>f.id!==C))}catch(L){console.error("Error deleting theme:",L)}},_=async C=>{const L={...C,id:void 0,name:`${C.name} (Cpia)`,is_public:!1};await E(L)};return x?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando temas..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-2xl shadow-2xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-purple-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl",children:e.jsx(Il,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Gerenciador de Temas"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Personalize a aparncia do sistema"})]})]}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx("span",{className:"text-2xl text-gray-500",children:""})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Sx,{active:a==="presets",onClick:()=>r("presets"),icon:c6,label:"Temas Prontos",count:n.length}),e.jsx(Sx,{active:a==="custom",onClick:()=>r("custom"),icon:Jp,label:"Meus Temas",count:o.length}),e.jsx(Sx,{active:a==="create",onClick:()=>r("create"),icon:bt,label:"Criar Tema"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs(rt,{mode:"wait",children:[a==="presets"&&e.jsx(P8,{presets:n,onPreview:D,onApply:S,onDuplicate:_,saving:y}),a==="custom"&&e.jsx(M8,{themes:o,onPreview:D,onApply:S,onDelete:R,onDuplicate:_,saving:y}),a==="create"&&e.jsx(T8,{onSave:E,onPreview:D,saving:y})]})}),b&&e.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"p-4 bg-green-50 border-t border-green-200",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-700",children:[e.jsx(As,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Tema aplicado com sucesso!"})]})})]})})},Sx=({active:s,onClick:t,icon:a,label:r,count:n})=>e.jsxs("button",{onClick:t,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${s?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:bg-white/50"}`,children:[e.jsx(a,{className:"w-4 h-4"}),e.jsx("span",{children:r}),n!==void 0&&e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${s?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,children:n})]}),P8=({presets:s,onPreview:t,onApply:a,onDuplicate:r,saving:n})=>{const[i,o]=j.useState("all"),l=["all",...Array.from(new Set(s.map(d=>d.category)))],c=i==="all"?s:s.filter(d=>d.category===i);return e.jsxs(W.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},children:[e.jsx("div",{className:"flex gap-2 mb-6 flex-wrap",children:l.map(d=>e.jsx("button",{onClick:()=>o(d),className:`px-4 py-2 rounded-lg font-medium transition-colors capitalize ${i===d?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:d==="all"?"Todos":d},d))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(d=>e.jsx(b1,{theme:d,onPreview:t,onApply:a,onDuplicate:r,saving:n,isFeatured:d.is_featured},d.id))})]},"presets")},M8=({themes:s,onPreview:t,onApply:a,onDelete:r,onDuplicate:n,saving:i})=>s.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(Jp,{className:"w-16 h-16 text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Nenhum tema personalizado"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Crie seu primeiro tema personalizado ou duplique um tema pronto"})]}):e.jsx(W.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(o=>e.jsx(b1,{theme:o,onPreview:t,onApply:a,onDelete:r,onDuplicate:n,saving:i,isCustom:!0},o.id))},"custom"),b1=({theme:s,onPreview:t,onApply:a,onDelete:r,onDuplicate:n,saving:i,isFeatured:o,isCustom:l})=>e.jsxs(W.div,{whileHover:{y:-4},className:"bg-white border-2 border-gray-200 rounded-xl overflow-hidden hover:border-blue-300 hover:shadow-lg transition-all",children:[e.jsxs("div",{className:"h-32 p-4 relative",style:{backgroundColor:s.background_color},children:[o&&e.jsxs("div",{className:"absolute top-2 right-2 px-2 py-1 bg-yellow-400 text-yellow-900 text-xs font-bold rounded-full flex items-center gap-1",children:[e.jsx(hr,{className:"w-3 h-3"}),"Destaque"]}),e.jsxs("div",{className:"flex gap-2 h-full",children:[e.jsx("div",{className:"flex-1 rounded-lg",style:{backgroundColor:s.sidebar_bg_color}}),e.jsxs("div",{className:"flex-1 rounded-lg",style:{backgroundColor:s.surface_color},children:[e.jsx("div",{className:"h-4 rounded-t-lg",style:{backgroundColor:s.header_bg_color}}),e.jsxs("div",{className:"p-2 space-y-1",children:[e.jsx("div",{className:"h-2 rounded",style:{backgroundColor:s.primary_color}}),e.jsx("div",{className:"h-2 rounded w-2/3",style:{backgroundColor:s.secondary_color}})]})]})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:s.name}),s.description&&e.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:s.description})]}),s.is_dark_mode?e.jsx(Xp,{className:"w-4 h-4 text-gray-400 flex-shrink-0 ml-2"}):e.jsx(tg,{className:"w-4 h-4 text-yellow-500 flex-shrink-0 ml-2"})]}),e.jsx("div",{className:"flex gap-1 mb-3",children:[s.primary_color,s.secondary_color,s.accent_color,s.success_color,s.warning_color].map((c,d)=>e.jsx("div",{className:"w-6 h-6 rounded-md border border-gray-200",style:{backgroundColor:c}},d))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>t(s),className:"flex-1 px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-1",children:[e.jsx($s,{className:"w-4 h-4"}),"Preview"]}),e.jsxs("button",{onClick:()=>a(s),disabled:i,className:"flex-1 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors disabled:opacity-50 flex items-center justify-center gap-1",children:[e.jsx(As,{className:"w-4 h-4"}),"Aplicar"]})]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs("button",{onClick:()=>n(s),className:"flex-1 px-2 py-1.5 text-xs text-gray-600 hover:bg-gray-50 rounded transition-colors flex items-center justify-center gap-1",children:[e.jsx(Gr,{className:"w-3 h-3"}),"Duplicar"]}),l&&r&&s.id&&e.jsxs("button",{onClick:()=>r(s.id),className:"flex-1 px-2 py-1.5 text-xs text-red-600 hover:bg-red-50 rounded transition-colors flex items-center justify-center gap-1",children:[e.jsx(Vt,{className:"w-3 h-3"}),"Excluir"]}),s.is_public&&e.jsxs("div",{className:"px-2 py-1.5 text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(cm,{className:"w-3 h-3"}),"Pblico"]})]})]})]}),R8=()=>{const{user:s}=rs(),[t,a]=j.useState("profile"),[r,n]=j.useState(!0),[i,o]=j.useState(!1),[l,c]=j.useState(!1),[d,A]=j.useState(null),[u,x]=j.useState(null);j.useEffect(()=>{m()},[s]);const m=async()=>{if(s!=null&&s.id)try{n(!0),console.log(" Loading settings for user:",s.id);const b=await BU(s.id);console.log(" Settings loaded:",b),x(b)}catch(b){console.error(" Error loading settings:",b),A("Erro ao carregar configuraes")}finally{n(!1)}},y=async(b,p)=>{if(console.log(` [SETTINGS] Iniciando salvamento da seo: ${b}`),console.log(" [DADOS]:",p),!(s!=null&&s.id)){console.error(" [ERRO] Usurio no autenticado"),A("Usurio no autenticado"),alert("ERRO: Voc precisa estar autenticado!");return}if(!(u!=null&&u.id)){console.error(" [ERRO] Settings no carregadas"),A("Configuraes no carregadas"),alert("ERRO: Configuraes no carregadas!");return}try{o(!0),A(null),console.log(` [SALVANDO] Seo ${b} para usurio:`,s.id);const v=await kU(s.id,p);console.log(" [RESULTADO]:",v),x(N=>({...N,...p})),c(!0),setTimeout(()=>c(!1),3e3),console.log(" [SUCESSO] Configuraes salvas!")}catch(v){console.error(" [ERRO] Ao salvar configuraes:",v),A(`Erro ao salvar: ${v.message}`),alert(`ERRO ao salvar configuraes: ${v.message}`)}finally{o(!1)}},g=[{id:"profile",name:"Perfil",icon:Jt},{id:"notifications",name:"Notificaes",icon:En},{id:"appearance",name:"Aparncia",icon:Il},{id:"privacy",name:"Privacidade",icon:$s},{id:"backup",name:"Backup",icon:jd},{id:"sync",name:"Sincronizao",icon:hj},{id:"productivity",name:"Produtividade",icon:Fs},{id:"security",name:"Segurana",icon:os}];return r?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando configuraes..."})]})}):u?e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(xr,{className:"w-8 h-8"}),"Configuraes"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Personalize sua experincia no sistema"})]}),l&&e.jsxs(W.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2 text-green-800",children:[e.jsx(As,{className:"w-5 h-5"}),e.jsx("span",{children:"Configuraes salvas com sucesso!"})]}),d&&e.jsxs(W.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-800",children:[e.jsx(es,{className:"w-5 h-5"}),e.jsx("span",{children:d})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sticky top-6",children:g.map(b=>{const p=b.icon;return e.jsxs("button",{onClick:()=>a(b.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg mb-2 transition-all ${t===b.id?"bg-blue-50 text-blue-600 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(p,{className:"w-5 h-5"}),e.jsx("span",{children:b.name})]},b.id)})})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[t==="profile"&&e.jsx(O8,{settings:u,onSave:y,saving:i}),t==="notifications"&&e.jsx(H8,{settings:u,onSave:y,saving:i}),t==="appearance"&&e.jsx(q8,{settings:u,onSave:y,saving:i}),t==="privacy"&&e.jsx($8,{settings:u,onSave:y,saving:i}),t==="backup"&&e.jsx(V8,{settings:u,onSave:y,saving:i}),t==="sync"&&e.jsx(K8,{settings:u,onSave:y,saving:i}),t==="productivity"&&e.jsx(z8,{settings:u,onSave:y,saving:i}),t==="security"&&e.jsx(G8,{settings:u,onSave:y,saving:i})]})})]})]})}):e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx(es,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Erro ao carregar configuraes"}),e.jsx("button",{onClick:m,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Tentar novamente"})]})})},O8=({settings:s,onSave:t,saving:a})=>{const[r,n]=j.useState({display_name:(s==null?void 0:s.display_name)||"",phone:(s==null?void 0:s.phone)||"",bio:(s==null?void 0:s.bio)||"",avatar_url:(s==null?void 0:s.avatar_url)||""});return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Perfil"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome de Exibio"}),e.jsx("input",{type:"text",value:r.display_name,onChange:i=>n({...r,display_name:i.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Seu nome"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone"}),e.jsx("input",{type:"tel",value:r.phone,onChange:i=>n({...r,phone:i.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"(11) 99999-9999"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),e.jsx("textarea",{value:r.bio,onChange:i=>n({...r,bio:i.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Conte um pouco sobre voc..."})]}),e.jsxs("button",{onClick:()=>t("profile",r),disabled:a,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Gt,{className:"w-5 h-5"}),a?"Salvando...":"Salvar Alteraes"]})]})]})},H8=({settings:s,onSave:t,saving:a})=>{const[r,n]=j.useState({notifications_enabled:(s==null?void 0:s.notifications_enabled)??!0,email_notifications:(s==null?void 0:s.email_notifications)??!0,push_notifications:(s==null?void 0:s.push_notifications)??!0,sms_notifications:(s==null?void 0:s.sms_notifications)??!1,notify_new_order:(s==null?void 0:s.notify_new_order)??!0,notify_order_status:(s==null?void 0:s.notify_order_status)??!0,notify_payment:(s==null?void 0:s.notify_payment)??!0,notify_deadline:(s==null?void 0:s.notify_deadline)??!0,notify_team_mention:(s==null?void 0:s.notify_team_mention)??!0}),i=o=>{n({...r,[o]:!r[o]})};return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Notificaes"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Canais de Notificao"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Ds,{label:"Notificaes Gerais",description:"Ativar/desativar todas as notificaes",checked:r.notifications_enabled,onChange:()=>i("notifications_enabled")}),e.jsx(Ds,{label:"Email",description:"Receber notificaes por email",checked:r.email_notifications,onChange:()=>i("email_notifications")}),e.jsx(Ds,{label:"Push",description:"Notificaes push no navegador",checked:r.push_notifications,onChange:()=>i("push_notifications")}),e.jsx(Ds,{label:"SMS",description:"Receber notificaes por SMS",checked:r.sms_notifications,onChange:()=>i("sms_notifications")})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Tipos de Notificao"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Ds,{label:"Novos Pedidos",description:"Notificar quando receber novo pedido",checked:r.notify_new_order,onChange:()=>i("notify_new_order")}),e.jsx(Ds,{label:"Status de Pedidos",description:"Mudanas no status dos pedidos",checked:r.notify_order_status,onChange:()=>i("notify_order_status")}),e.jsx(Ds,{label:"Pagamentos",description:"Notificar sobre pagamentos recebidos",checked:r.notify_payment,onChange:()=>i("notify_payment")}),e.jsx(Ds,{label:"Prazos",description:"Alertas de prazos se aproximando",checked:r.notify_deadline,onChange:()=>i("notify_deadline")}),e.jsx(Ds,{label:"Menes da Equipe",description:"Quando algum mencionar voc",checked:r.notify_team_mention,onChange:()=>i("notify_team_mention")})]})]}),e.jsxs("button",{onClick:()=>t("notifications",r),disabled:a,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(Gt,{className:"w-5 h-5"}),a?"Salvando...":"Salvar Preferncias"]})]})]})},q8=({settings:s,onSave:t,saving:a})=>{const[r,n]=j.useState({theme:(s==null?void 0:s.theme)||"light",language:(s==null?void 0:s.language)||"pt-BR",timezone:(s==null?void 0:s.timezone)||"America/Sao_Paulo",date_format:(s==null?void 0:s.date_format)||"DD/MM/YYYY",currency_format:(s==null?void 0:s.currency_format)||"BRL",compact_mode:(s==null?void 0:s.compact_mode)||!1,animations_enabled:(s==null?void 0:s.animations_enabled)??!0,reduced_motion:(s==null?void 0:s.reduced_motion)||!1,high_contrast:(s==null?void 0:s.high_contrast)||!1,font_scale:(s==null?void 0:s.font_scale)||1,sidebar_position:(s==null?void 0:s.sidebar_position)||"left",header_style:(s==null?void 0:s.header_style)||"default",sidebar_style:(s==null?void 0:s.sidebar_style)||"default"}),[i,o]=j.useState(!1);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Aparncia"}),e.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl",children:[e.jsx(hr,{className:"w-5 h-5"}),"Gerenciador de Temas Avanado"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Configuraes Bsicas"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tema"}),e.jsxs("select",{value:r.theme,onChange:l=>n({...r,theme:l.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"light",children:"Claro"}),e.jsx("option",{value:"dark",children:"Escuro"}),e.jsx("option",{value:"auto",children:"Automtico"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Idioma"}),e.jsxs("select",{value:r.language,onChange:l=>n({...r,language:l.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"pt-BR",children:"Portugus (Brasil)"}),e.jsx("option",{value:"en-US",children:"English (US)"}),e.jsx("option",{value:"es-ES",children:"Espaol"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fuso Horrio"}),e.jsxs("select",{value:r.timezone,onChange:l=>n({...r,timezone:l.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"America/Sao_Paulo",children:"So Paulo (GMT-3)"}),e.jsx("option",{value:"America/New_York",children:"Nova York (GMT-5)"}),e.jsx("option",{value:"Europe/London",children:"Londres (GMT+0)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Formato de Data"}),e.jsxs("select",{value:r.date_format,onChange:l=>n({...r,date_format:l.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),e.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),e.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Layout"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estilo do Header"}),e.jsxs("select",{value:r.header_style,onChange:l=>n({...r,header_style:l.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"default",children:"Padro"}),e.jsx("option",{value:"compact",children:"Compacto"}),e.jsx("option",{value:"transparent",children:"Transparente"}),e.jsx("option",{value:"minimal",children:"Minimalista"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estilo da Sidebar"}),e.jsxs("select",{value:r.sidebar_style,onChange:l=>n({...r,sidebar_style:l.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"default",children:"Padro"}),e.jsx("option",{value:"compact",children:"Compacto"}),e.jsx("option",{value:"mini",children:"Mini"}),e.jsx("option",{value:"overlay",children:"Sobreposto"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Posio da Sidebar"}),e.jsxs("select",{value:r.sidebar_position,onChange:l=>n({...r,sidebar_position:l.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"left",children:"Esquerda"}),e.jsx("option",{value:"right",children:"Direita"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Escala da Fonte: ",(r.font_scale*100).toFixed(0),"%"]}),e.jsx("input",{type:"range",min:"0.8",max:"1.5",step:"0.1",value:r.font_scale,onChange:l=>n({...r,font_scale:parseFloat(l.target.value)}),className:"w-full"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Acessibilidade"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Ds,{label:"Modo Compacto",description:"Reduzir espaamento entre elementos",checked:r.compact_mode,onChange:()=>n({...r,compact_mode:!r.compact_mode})}),e.jsx(Ds,{label:"Animaes",description:"Ativar animaes e transies",checked:r.animations_enabled,onChange:()=>n({...r,animations_enabled:!r.animations_enabled})}),e.jsx(Ds,{label:"Movimento Reduzido",description:"Reduzir movimento para usurios sensveis",checked:r.reduced_motion,onChange:()=>n({...r,reduced_motion:!r.reduced_motion})}),e.jsx(Ds,{label:"Alto Contraste",description:"Aumentar contraste para melhor visibilidade",checked:r.high_contrast,onChange:()=>n({...r,high_contrast:!r.high_contrast})})]})]}),e.jsxs("button",{onClick:()=>t("appearance",r),disabled:a,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(Gt,{className:"w-5 h-5"}),a?"Salvando...":"Salvar Preferncias"]})]}),e.jsx(rt,{children:i&&e.jsx(Q8,{onClose:()=>o(!1)})})]})},$8=({settings:s,onSave:t,saving:a})=>{const[r,n]=j.useState({profile_visibility:(s==null?void 0:s.profile_visibility)||"team",show_online_status:(s==null?void 0:s.show_online_status)??!0,allow_contact:(s==null?void 0:s.allow_contact)??!0});return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Privacidade"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Visibilidade do Perfil"}),e.jsxs("select",{value:r.profile_visibility,onChange:i=>n({...r,profile_visibility:i.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"private",children:"Privado"}),e.jsx("option",{value:"team",children:"Equipe"}),e.jsx("option",{value:"company",children:"Empresa"}),e.jsx("option",{value:"public",children:"Pblico"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Ds,{label:"Mostrar Status Online",description:"Outros podem ver quando voc est online",checked:r.show_online_status,onChange:()=>n({...r,show_online_status:!r.show_online_status})}),e.jsx(Ds,{label:"Permitir Contato",description:"Outros podem entrar em contato direto",checked:r.allow_contact,onChange:()=>n({...r,allow_contact:!r.allow_contact})})]}),e.jsxs("button",{onClick:()=>t("privacy",r),disabled:a,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(Gt,{className:"w-5 h-5"}),a?"Salvando...":"Salvar Configuraes"]})]})]})},V8=({settings:s,onSave:t,saving:a})=>{const[r,n]=j.useState({auto_backup:(s==null?void 0:s.auto_backup)??!0,backup_frequency:(s==null?void 0:s.backup_frequency)||"daily",backup_time:(s==null?void 0:s.backup_time)||"00:00",keep_backups_days:(s==null?void 0:s.keep_backups_days)||30});return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Backup"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ds,{label:"Backup Automtico",description:"Fazer backup automtico dos seus dados",checked:r.auto_backup,onChange:()=>n({...r,auto_backup:!r.auto_backup})}),r.auto_backup&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Frequncia"}),e.jsxs("select",{value:r.backup_frequency,onChange:i=>n({...r,backup_frequency:i.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"realtime",children:"Tempo Real"}),e.jsx("option",{value:"hourly",children:"A cada hora"}),e.jsx("option",{value:"daily",children:"Diariamente"}),e.jsx("option",{value:"weekly",children:"Semanalmente"}),e.jsx("option",{value:"monthly",children:"Mensalmente"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Horrio do Backup"}),e.jsx("input",{type:"time",value:r.backup_time,onChange:i=>n({...r,backup_time:i.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Manter Backups por (dias)"}),e.jsx("input",{type:"number",value:r.keep_backups_days,onChange:i=>n({...r,keep_backups_days:parseInt(i.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"1",max:"365"})]})]}),e.jsxs("button",{onClick:()=>t("backup",r),disabled:a,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(Gt,{className:"w-5 h-5"}),a?"Salvando...":"Salvar Configuraes"]})]})]})},K8=({settings:s,onSave:t,saving:a})=>{const[r,n]=j.useState({realtime_sync:(s==null?void 0:s.realtime_sync)??!0,offline_mode:(s==null?void 0:s.offline_mode)??!0,sync_on_wifi_only:(s==null?void 0:s.sync_on_wifi_only)??!1});return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Sincronizao"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Ds,{label:"Sincronizao em Tempo Real",description:"Sincronizar dados imediatamente",checked:r.realtime_sync,onChange:()=>n({...r,realtime_sync:!r.realtime_sync})}),e.jsx(Ds,{label:"Modo Offline",description:"Trabalhar sem conexo e sincronizar depois",checked:r.offline_mode,onChange:()=>n({...r,offline_mode:!r.offline_mode})}),e.jsx(Ds,{label:"Sincronizar Apenas no Wi-Fi",description:"Economizar dados mveis",checked:r.sync_on_wifi_only,onChange:()=>n({...r,sync_on_wifi_only:!r.sync_on_wifi_only})}),e.jsxs("button",{onClick:()=>t("sync",r),disabled:a,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 mt-6",children:[e.jsx(Gt,{className:"w-5 h-5"}),a?"Salvando...":"Salvar Configuraes"]})]})]})},z8=({settings:s,onSave:t,saving:a})=>{const[r,n]=j.useState({default_view:(s==null?void 0:s.default_view)||"kanban",items_per_page:(s==null?void 0:s.items_per_page)||20,show_completed_tasks:(s==null?void 0:s.show_completed_tasks)??!1,auto_refresh:(s==null?void 0:s.auto_refresh)??!0,refresh_interval:(s==null?void 0:s.refresh_interval)||30});return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Produtividade"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Visualizao Padro"}),e.jsxs("select",{value:r.default_view,onChange:i=>n({...r,default_view:i.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"list",children:"Lista"}),e.jsx("option",{value:"kanban",children:"Kanban"}),e.jsx("option",{value:"calendar",children:"Calendrio"}),e.jsx("option",{value:"timeline",children:"Timeline"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Itens por Pgina"}),e.jsxs("select",{value:r.items_per_page,onChange:i=>n({...r,items_per_page:parseInt(i.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"20",children:"20"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"100",children:"100"})]})]}),e.jsx(Ds,{label:"Mostrar Tarefas Concludas",description:"Exibir tarefas finalizadas na listagem",checked:r.show_completed_tasks,onChange:()=>n({...r,show_completed_tasks:!r.show_completed_tasks})}),e.jsx(Ds,{label:"Atualizao Automtica",description:"Recarregar dados automaticamente",checked:r.auto_refresh,onChange:()=>n({...r,auto_refresh:!r.auto_refresh})}),r.auto_refresh&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Intervalo de Atualizao (segundos)"}),e.jsx("input",{type:"number",value:r.refresh_interval,onChange:i=>n({...r,refresh_interval:parseInt(i.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"10",max:"300"})]}),e.jsxs("button",{onClick:()=>t("productivity",r),disabled:a,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(Gt,{className:"w-5 h-5"}),a?"Salvando...":"Salvar Preferncias"]})]})]})},G8=({settings:s,onSave:t,saving:a})=>{const[r,n]=j.useState({two_factor_enabled:(s==null?void 0:s.two_factor_enabled)??!1,session_timeout:(s==null?void 0:s.session_timeout)||60,require_password_change:(s==null?void 0:s.require_password_change)??!1});return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Segurana"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ds,{label:"Autenticao de Dois Fatores",description:"Adicionar camada extra de segurana",checked:r.two_factor_enabled,onChange:()=>n({...r,two_factor_enabled:!r.two_factor_enabled})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timeout de Sesso (minutos)"}),e.jsx("input",{type:"number",value:r.session_timeout,onChange:i=>n({...r,session_timeout:parseInt(i.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"5",max:"480"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Tempo de inatividade antes de desconectar automaticamente"})]}),e.jsx(Ds,{label:"Exigir Troca de Senha",description:"Solicitar alterao de senha periodicamente",checked:r.require_password_change,onChange:()=>n({...r,require_password_change:!r.require_password_change})}),e.jsxs("button",{onClick:()=>t("security",r),disabled:a,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(Gt,{className:"w-5 h-5"}),a?"Salvando...":"Salvar Configuraes"]})]})]})},Ds=({label:s,description:t,checked:a,onChange:r})=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s}),e.jsx("p",{className:"text-sm text-gray-500",children:t})]}),e.jsx("button",{onClick:r,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${a?"bg-blue-600":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${a?"translate-x-6":"translate-x-1"}`})})]}),W8=({isOpen:s,onClose:t,onSave:a,serviceId:r,duplicateFromId:n})=>{const[i,o]=j.useState("dados"),[l,c]=j.useState(!1),[d,A]=j.useState(!1),[u,x]=j.useState({nome:"",descricao:"",categoria:"",preco_base:0,tempo_estimado_minutos:0,observacoes:""}),[m,y]=j.useState({name:"",sku:"",unit:"UN",quantity:0,unit_cost:0,sale_price:0,min_quantity:0}),[g,b]=j.useState([]),[p,v]=j.useState([]),[N,D]=j.useState(""),[S,E]=j.useState(null);j.useEffect(()=>{s?(R(),r?_(r,!1):n?_(n,!0):(x({nome:"",descricao:"",categoria:"",preco_base:0,tempo_estimado_minutos:0,observacoes:""}),v([]))):(E(null),D(""))},[s,r,n]);const R=async()=>{try{const{data:q}=await se.from("materials").select("id, name, unit, quantity, unit_cost, sale_price, sku").eq("active",!0).order("name");b(q||[])}catch(q){console.error("Error loading materials:",q)}},_=async(q,V)=>{if(q)try{const{data:oe}=await se.from("service_catalog").select("*").eq("id",q).single();oe&&x({nome:V?`${oe.name} (Cpia)`:oe.name||"",descricao:oe.description||"",categoria:oe.category||"",preco_base:oe.base_price||0,tempo_estimado_minutos:oe.estimated_duration||0,observacoes:""});const{data:H}=await se.from("service_catalog_materials").select("*").eq("service_catalog_id",q);H&&v(H.map(I=>({id:V?`new-${Date.now()}-${Math.random()}`:I.id,material_id:I.material_id||"",nome_material:I.material_name||"",quantidade_padrao:I.quantity||0,unidade_medida:I.material_unit||"un",preco_compra_unitario:I.unit_cost_at_time||0,preco_venda_unitario:I.unit_sale_price||0,custo_total:I.total_cost||0,valor_total:I.total_sale_price||0,lucro:(I.total_sale_price||0)-(I.total_cost||0),obrigatorio:!I.is_optional})))}catch(oe){console.error("Error loading service data:",oe)}},C=()=>{v([{id:`new-${Date.now()}`,material_id:"",nome_material:"",quantidade_padrao:1,unidade_medida:"UN",preco_compra_unitario:0,preco_venda_unitario:0,custo_total:0,valor_total:0,lucro:0,obrigatorio:!0},...p])},L=(q,V)=>{v(p.map(oe=>{if(oe.id===q){const H={...oe,...V},I=H.preco_compra_unitario||0,B=H.preco_venda_unitario||0;return H.custo_total=H.quantidade_padrao*I,H.valor_total=H.quantidade_padrao*B,H.lucro=H.valor_total-H.custo_total,H}return oe}))},f=(q,V)=>{const oe=g.find(H=>H.id===V);oe&&(L(q,{material_id:V,nome_material:oe.name,unidade_medida:oe.unit||"un",preco_compra_unitario:Number(oe.unit_cost)||0,preco_venda_unitario:Number(oe.sale_price)||0}),D(""),E(null))},F=q=>{v(p.filter(V=>V.id!==q))},M=async()=>{try{if(!m.name){alert("Nome do material  obrigatrio!");return}c(!0);const{data:q,error:V}=await se.from("materials").insert([{name:m.name,sku:m.sku||null,unit:m.unit,quantity:Number(m.quantity),unit_cost:Number(m.unit_cost),sale_price:Number(m.sale_price),min_quantity:Number(m.min_quantity),active:!0}]).select().single();if(V)throw V;await R(),y({name:"",sku:"",unit:"UN",quantity:0,unit_cost:0,sale_price:0,min_quantity:0}),A(!1),alert("Material criado com sucesso!")}catch(q){console.error("Error creating material:",q),alert("Erro ao criar material!")}finally{c(!1)}},P=()=>{const q=p.reduce(($,T)=>$+T.custo_total,0),V=p.reduce(($,T)=>$+T.valor_total,0),oe=q,H=V+u.preco_base,I=H-oe,B=oe>0?I/oe*100:0;return{custoMateriais:q,valorMateriais:V,custoTotal:oe,valorTotal:H,lucroTotal:I,margemLucro:B}},Z=async()=>{try{if(!u.nome){alert("Nome do servio  obrigatrio!");return}c(!0);const q=P();let V=r;const oe={name:u.nome,description:u.descricao,category:u.categoria,base_price:u.preco_base,estimated_duration:u.tempo_estimado_minutos,active:!0};if(r)await se.from("service_catalog").update(oe).eq("id",r);else{const{data:I,error:B}=await se.from("service_catalog").insert([oe]).select().single();if(B)throw B;V=I.id}const{error:H}=await se.from("service_catalog_materials").delete().eq("service_catalog_id",V);H&&console.error("Error deleting materials:",H);for(const I of p){const{error:B}=await se.from("service_catalog_materials").insert([{service_catalog_id:V,material_id:I.material_id,material_name:I.nome_material,quantity:I.quantidade_padrao,material_unit:I.unidade_medida,is_optional:!I.obrigatorio,unit_cost_at_time:I.preco_compra_unitario,unit_sale_price:I.preco_venda_unitario}]);if(B)throw console.error("Error inserting material:",B),B}a(),t()}catch(q){console.error("Error saving:",q),alert("Erro ao salvar servio!")}finally{c(!1)}},O=q=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(q),X=P();return s?e.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between bg-gradient-to-r from-green-600 to-emerald-700 text-white",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:r?"Editar Servio":"Novo Servio no Catlogo"}),e.jsx("p",{className:"text-green-100 text-sm",children:"Configure materiais, mo de obra e custos completos"})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(ht,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"flex border-b bg-gray-50",children:[{id:"dados",label:"Dados Principais",icon:pl},{id:"materiais",label:"Materiais",icon:wt},{id:"resumo",label:"Resumo Financeiro",icon:ub}].map(q=>{const V=q.icon;return e.jsxs("button",{onClick:()=>o(q.id),className:`flex-1 px-6 py-4 font-medium text-sm flex items-center justify-center gap-2 border-b-2 transition-all ${i===q.id?"border-green-600 text-green-600 bg-white":"border-transparent text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[e.jsx(V,{className:"h-4 w-4"}),q.label]},q.id)})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs(rt,{mode:"wait",children:[i==="dados"&&e.jsxs(W.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nome do Servio *"}),e.jsx("input",{type:"text",value:u.nome,onChange:q=>x({...u,nome:q.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",placeholder:"Ex: Instalao de Ar Condicionado Split 12k BTU"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descrio"}),e.jsx("textarea",{value:u.descricao,onChange:q=>x({...u,descricao:q.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",rows:3,placeholder:"Descreva o servio em detalhes..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Categoria"}),e.jsxs("select",{value:u.categoria,onChange:q=>x({...u,categoria:q.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"",children:"Selecione..."}),e.jsx("option",{value:"instalacao",children:"Instalao"}),e.jsx("option",{value:"manutencao",children:"Manuteno"}),e.jsx("option",{value:"reparo",children:"Reparo"}),e.jsx("option",{value:"limpeza",children:"Limpeza"}),e.jsx("option",{value:"vistoria",children:"Vistoria"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tempo Estimado (minutos)"}),e.jsx("input",{type:"number",value:u.tempo_estimado_minutos,onChange:q=>x({...u,tempo_estimado_minutos:Number(q.target.value)}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Preo Base do Servio (R$)"}),e.jsx("input",{type:"number",value:u.preco_base,step:"0.01",onChange:q=>x({...u,preco_base:Number(q.target.value)}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",placeholder:"Valor da mo de obra"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Observaes"}),e.jsx("textarea",{value:u.observacoes,onChange:q=>x({...u,observacoes:q.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",rows:2,placeholder:"Observaes internas sobre o servio..."})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(pl,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("p",{className:"font-medium mb-1",children:"Configure o servio completo"}),e.jsxs("p",{children:["Nas prximas abas, voc pode adicionar materiais e mo de obra. ",e.jsx("span",{className:"font-medium",children:"Ambos so opcionais"})," - voc pode criar servios sem materiais ou sem mo de obra, dependendo do tipo de servio."]})]})]})]},"dados"),i==="materiais"&&e.jsxs(W.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Materiais Necessrios ",e.jsx("span",{className:"text-sm text-gray-500 font-normal",children:"(Opcional)"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Liste todos os materiais usados neste servio. Ex: Consultoria, Vistoria, Laudo no precisam de materiais."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>A(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(bt,{className:"h-4 w-4"}),"Criar Novo Material"]}),e.jsxs("button",{onClick:C,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(bt,{className:"h-4 w-4"}),"Adicionar do Estoque"]})]})]}),p.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg border-2 border-dashed",children:[e.jsx(wt,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"font-medium",children:"Nenhum material adicionado"}),e.jsx("p",{className:"text-sm",children:"Materiais so opcionais para este servio"}),e.jsx("p",{className:"text-xs mt-1 text-gray-400",children:'Clique em "Adicionar Material" se o servio precisar de materiais'})]}),p.map((q,V)=>e.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-900",children:["Material #",V+1,q.nome_material&&e.jsxs("span",{className:"ml-2 text-green-600",children:["- ",q.nome_material]})]}),q.material_id&&!q.nome_material&&e.jsx("span",{className:"text-xs text-gray-500",children:"Material selecionado"})]}),e.jsx("button",{onClick:()=>F(q.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(Vt,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 mb-3",children:[e.jsxs("div",{className:"md:col-span-3 relative",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:" Buscar Material do Estoque"}),e.jsx("input",{type:"text",value:N,onChange:oe=>D(oe.target.value),onFocus:()=>E(q.id),className:"w-full px-4 py-2 border-2 rounded-lg focus:ring-2 focus:ring-green-500",placeholder:"Digite para buscar no estoque..."}),N&&S===q.id&&g.filter(oe=>oe.name.toLowerCase().includes(N.toLowerCase())||oe.sku&&oe.sku.toLowerCase().includes(N.toLowerCase())).length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:g.filter(oe=>oe.name.toLowerCase().includes(N.toLowerCase())||oe.sku&&oe.sku.toLowerCase().includes(N.toLowerCase())).map(oe=>e.jsxs("button",{type:"button",onClick:()=>f(q.id,oe.id),className:"w-full px-4 py-3 text-left hover:bg-green-50 border-b last:border-0 transition-colors",children:[e.jsx("div",{className:"font-medium text-gray-900",children:oe.name}),e.jsxs("div",{className:"text-sm text-gray-600 flex items-center justify-between",children:[e.jsxs("span",{children:[oe.sku&&e.jsxs("span",{className:"mr-2",children:["Cd: ",oe.sku]}),e.jsxs("span",{children:["Estoque: ",oe.quantity," ",oe.unit]})]}),e.jsxs("span",{className:"font-semibold text-green-600",children:["R$ ",Number(oe.sale_price).toFixed(2),"/",oe.unit]})]})]},oe.id))})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quantidade"}),e.jsx("input",{type:"number",value:q.quantidade_padrao,min:"0.01",step:"0.01",onChange:oe=>L(q.id,{quantidade_padrao:Number(oe.target.value)}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500"}),q.unidade_medida&&e.jsx("span",{className:"absolute right-3 top-9 text-xs text-gray-500 font-semibold",children:q.unidade_medida})]}),e.jsx("div",{className:"md:col-span-2 flex items-end",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:q.obrigatorio,onChange:oe=>L(q.id,{obrigatorio:oe.target.checked}),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Obrigatrio"})]})})]}),q.material_id&&e.jsxs("div",{className:"grid grid-cols-5 gap-3 text-xs bg-white rounded p-3 border",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Custo Unit:"}),e.jsx("p",{className:"font-bold text-orange-600",children:O(q.preco_compra_unitario)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Venda Unit:"}),e.jsx("p",{className:"font-bold text-green-600",children:O(q.preco_venda_unitario)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Custo Total:"}),e.jsx("p",{className:"font-bold text-orange-700",children:O(q.custo_total)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Valor Total:"}),e.jsx("p",{className:"font-bold text-green-700",children:O(q.valor_total)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Lucro:"}),e.jsx("p",{className:"font-bold text-blue-700",children:O(q.lucro)})]})]})]},q.id)),e.jsx("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold text-green-900",children:"Total Materiais:"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm text-green-700",children:["Custo: ",O(X.custoMateriais)]}),e.jsxs("p",{className:"text-lg font-bold text-green-900",children:["Venda: ",O(X.valorMateriais)]})]})]})})]},"materiais"),i==="resumo"&&e.jsxs(W.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Resumo Financeiro Completo"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[e.jsxs("h4",{className:"font-semibold text-orange-900 mb-3 flex items-center gap-2",children:[e.jsx(wt,{className:"h-5 w-5"}),"Custos de Materiais"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Quantidade de Itens:"}),e.jsx("span",{className:"font-semibold",children:p.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Custo Total:"}),e.jsx("span",{className:"font-bold text-orange-700",children:O(X.custoMateriais)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Valor de Venda:"}),e.jsx("span",{className:"font-bold text-green-700",children:O(X.valorMateriais)})]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 border border-gray-300",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(ub,{className:"h-5 w-5"}),"Totais do Servio"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Custo Total (Materiais):"}),e.jsx("span",{className:"font-bold text-gray-900",children:O(X.custoTotal)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Preo Base do Servio:"}),e.jsx("span",{className:"font-bold text-gray-900",children:O(u.preco_base)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Valor dos Materiais:"}),e.jsx("span",{className:"font-bold text-gray-900",children:O(X.valorMateriais)})]}),e.jsxs("div",{className:"border-t pt-3 flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Preo Total Sugerido:"}),e.jsx("span",{className:"font-bold text-xl text-green-600",children:O(X.valorTotal)})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-4 border-2 border-green-300",children:[e.jsxs("h4",{className:"font-semibold text-green-900 mb-3 flex items-center gap-2",children:[e.jsx(zt,{className:"h-5 w-5"}),"Anlise de Lucro"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-800",children:"Lucro Bruto:"}),e.jsx("span",{className:"font-bold text-xl text-green-700",children:O(X.lucroTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-800",children:"Margem de Lucro:"}),e.jsxs("span",{className:"font-bold text-2xl text-green-600",children:[X.margemLucro.toFixed(1),"%"]})]})]})]})]})]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(es,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-900",children:[e.jsx("p",{className:"font-medium mb-1",children:"Ateno"}),e.jsx("p",{children:"Estes valores so calculados automaticamente e serviro como base para os oramentos. Voc poder ajustar as quantidades em cada Ordem de Servio."})]})]})]},"resumo")]})}),e.jsxs("div",{className:"p-6 border-t bg-gray-50 flex gap-3",children:[e.jsx("button",{onClick:t,className:"flex-1 px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors font-medium",children:"Cancelar"}),e.jsx("button",{onClick:Z,disabled:l,className:"flex-1 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors font-medium flex items-center justify-center gap-2",children:l?e.jsx(e.Fragment,{children:"Salvando..."}):e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"h-5 w-5"}),"Salvar Servio no Catlogo"]})})]})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:e.jsxs(W.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-blue-600 text-white p-6 flex items-center justify-between z-10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Criar Novo Material"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Adicione ao estoque e use neste servio"})]}),e.jsx("button",{onClick:()=>A(!1),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(ht,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nome do Material *"}),e.jsx("input",{type:"text",value:m.name,onChange:q=>y({...m,name:q.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Cabo de Rede Cat6"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"SKU / Cdigo"}),e.jsx("input",{type:"text",value:m.sku,onChange:q=>y({...m,sku:q.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: MAT-001"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Unidade de Medida"}),e.jsxs("select",{value:m.unit,onChange:q=>y({...m,unit:q.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"UN",children:"Unidade (UN)"}),e.jsx("option",{value:"MT",children:"Metro (MT)"}),e.jsx("option",{value:"M2",children:"Metro Quadrado (M)"}),e.jsx("option",{value:"KG",children:"Quilograma (KG)"}),e.jsx("option",{value:"LT",children:"Litro (LT)"}),e.jsx("option",{value:"CX",children:"Caixa (CX)"}),e.jsx("option",{value:"PC",children:"Pea (PC)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quantidade Inicial"}),e.jsx("input",{type:"number",value:m.quantity,onChange:q=>y({...m,quantity:Number(q.target.value)}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Custo Unitrio (R$)"}),e.jsx("input",{type:"number",value:m.unit_cost,onChange:q=>y({...m,unit_cost:Number(q.target.value)}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Preo de Venda (R$)"}),e.jsx("input",{type:"number",value:m.sale_price,onChange:q=>y({...m,sale_price:Number(q.target.value)}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Estoque Mnimo"}),e.jsx("input",{type:"number",value:m.min_quantity,onChange:q=>y({...m,min_quantity:Number(q.target.value)}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(pl,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("p",{className:"font-medium mb-1",children:"Material no Estoque"}),e.jsx("p",{children:"Este material ser adicionado ao seu estoque e ficar disponvel para uso em servios e ordens de servio."})]})]})})]}),e.jsxs("div",{className:"p-6 border-t bg-gray-50 flex gap-3",children:[e.jsx("button",{onClick:()=>A(!1),className:"flex-1 px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors font-medium",children:"Cancelar"}),e.jsx("button",{onClick:M,disabled:l,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors font-medium flex items-center justify-center gap-2",children:l?e.jsx(e.Fragment,{children:"Criando..."}):e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"h-5 w-5"}),"Criar e Salvar no Estoque"]})})]})]})})]}):null},J8=()=>{const{isAdmin:s}=rs();ys();const[t,a]=j.useState(""),[r,n]=j.useState("all"),[i,o]=j.useState([]),[l,c]=j.useState(!0),[d,A]=j.useState(null),[u,x]=j.useState(!1),[m,y]=j.useState(null),[g,b]=j.useState(void 0),[p,v]=j.useState(void 0),[N,D]=j.useState(null),[S,E]=j.useState({name:"",category:"",description:"",estimated_time:"",base_price:0,materials:[],instructions:[]});j.useEffect(()=>{R()},[]);const R=async()=>{try{c(!0);const M=await hU();o(M||[]),A(null)}catch(M){console.error("Error loading services:",M),A("Erro ao carregar catlogo de servios")}finally{c(!1)}},_=["all",...Array.from(new Set(i.map(M=>M.category)))],C=i.filter(M=>{const P=M.name.toLowerCase().includes(t.toLowerCase())||M.description.toLowerCase().includes(t.toLowerCase()),Z=r==="all"||M.category===r;return P&&Z}),L=async()=>{if(!S.name||!S.category){alert("Por favor, preencha todos os campos obrigatrios");return}try{const M={name:S.name,category:S.category,description:S.description,estimated_time:S.estimated_time,base_price:S.base_price,materials:S.materials,instructions:S.instructions,is_active:!0},P=await xU(M);o([...i,P]),E({name:"",category:"",description:"",estimated_time:"",base_price:0,materials:[],instructions:[]}),x(!1),alert("Servio adicionado com sucesso!")}catch(M){console.error("Error creating service:",M),alert("Erro ao adicionar servio")}},f=async()=>{if(m)try{const M={name:m.name,category:m.category,description:m.description,estimated_time:m.estimated_time,base_price:m.base_price,materials:m.materials,instructions:m.instructions,is_active:m.is_active},P=await pU(m.id,M);o(i.map(Z=>Z.id===P.id?P:Z)),y(null),alert("Servio atualizado com sucesso!")}catch(M){console.error("Error updating service:",M),alert("Erro ao atualizar servio")}},F=async M=>{try{await gU(M),o(i.filter(P=>P.id!==M)),D(null),alert("Servio excludo com sucesso!")}catch(P){console.error("Error deleting service:",P),alert("Erro ao excluir servio")}};return e.jsxs("div",{className:"space-y-6",children:[d&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(cs,{className:"h-5 w-5 text-red-500 mr-2"}),e.jsx("span",{className:"text-red-700",children:d})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Catlogo de Servios"}),e.jsxs("button",{onClick:()=>x(!0),className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-2 rounded-lg flex items-center space-x-2 hover:shadow-lg transition-all",children:[e.jsx(bt,{className:"h-4 w-4"}),e.jsx("span",{children:"Novo Servio"})]})]}),e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-md border border-gray-100",children:e.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{type:"text",placeholder:"Buscar por nome ou descrio...",value:t,onChange:M=>a(M.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(io,{className:"h-5 w-5 text-gray-400"}),e.jsx("select",{value:r,onChange:M=>n(M.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:_.map(M=>e.jsx("option",{value:M,children:M==="all"?"Todas as Categorias":M},M))})]})]})}),l?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Carregando servios..."})]}):e.jsx("div",{className:"space-y-4",children:C.length>0?C.map((M,P)=>{var Z;return e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:P*.05},className:"bg-white rounded-xl p-6 shadow-md border border-gray-100 hover:shadow-xl transition-all duration-200 cursor-pointer",onClick:()=>y(M),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center",children:e.jsx(ut,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:M.name}),e.jsx("p",{className:"text-sm text-gray-600",children:M.category})]})]}),s&&e.jsxs("div",{className:"text-lg font-bold text-green-600",children:["R$ ",M.base_price.toFixed(2)]})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-4 line-clamp-2",children:M.description||"Sem descrio"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[e.jsx(wt,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{children:[((Z=M.materials)==null?void 0:Z.length)||0," materiais"]})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[e.jsx(vt,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:M.estimated_time||"No definido"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:O=>{O.stopPropagation(),y(M),b(M.id)},className:"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors",title:"Editar servio",children:e.jsx(Es,{className:"h-4 w-4"})}),e.jsx("button",{onClick:O=>{O.stopPropagation(),v(M.id)},className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200 transition-colors",title:"Duplicar servio",children:e.jsx(Gr,{className:"h-4 w-4"})}),e.jsx("button",{onClick:O=>{O.stopPropagation(),D(M.id)},className:"p-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors",title:"Excluir servio",children:e.jsx(Vt,{className:"h-4 w-4"})})]})]})]},M.id)}):e.jsxs("div",{className:"bg-white rounded-xl p-10 shadow-md border border-gray-100 text-center",children:[e.jsx(ut,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhum servio encontrado"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"No encontramos servios com os filtros selecionados."}),e.jsx("button",{onClick:()=>{a(""),n("all")},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Limpar filtros"})]})}),e.jsx(rt,{children:u&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>x(!1),className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"relative bg-white rounded-xl p-6 w-full max-w-2xl shadow-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Novo Servio"}),e.jsx("button",{onClick:()=>x(!1),children:e.jsx(ht,{className:"h-6 w-6 text-gray-400"})})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Servio"}),e.jsx("input",{type:"text",value:S.name,onChange:M=>E({...S,name:M.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nome do servio",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria"}),e.jsx("input",{type:"text",value:S.category,onChange:M=>E({...S,category:M.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Instalao, Manuteno",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tempo Estimado"}),e.jsx("input",{type:"text",value:S.estimated_time,onChange:M=>E({...S,estimated_time:M.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: 2 horas"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preo Base (R$)"}),e.jsx("input",{type:"number",value:S.base_price,onChange:M=>E({...S,base_price:parseFloat(M.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",step:"0.01"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{value:S.description,onChange:M=>E({...S,description:M.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Descrio detalhada do servio"})]})]})}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>x(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsxs("button",{onClick:L,className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:shadow-lg",children:[e.jsx(Gt,{className:"h-4 w-4 mr-2 inline"}),"Salvar Servio"]})]})]})]})}),e.jsx(rt,{children:m&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>y(null),className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"relative bg-white rounded-xl p-6 w-full max-w-2xl shadow-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Editar Servio"}),e.jsx("button",{onClick:()=>y(null),children:e.jsx(ht,{className:"h-6 w-6 text-gray-400"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Servio"}),e.jsx("input",{type:"text",value:m.name,onChange:M=>y({...m,name:M.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria"}),e.jsx("input",{type:"text",value:m.category,onChange:M=>y({...m,category:M.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tempo Estimado"}),e.jsx("input",{type:"text",value:m.estimated_time||"",onChange:M=>y({...m,estimated_time:M.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preo Base (R$)"}),e.jsx("input",{type:"number",value:m.base_price,onChange:M=>y({...m,base_price:parseFloat(M.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",step:"0.01"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{value:m.description||"",onChange:M=>y({...m,description:M.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Materiais Necessrios"}),m.materials&&m.materials.length>0?e.jsx("div",{className:"space-y-2",children:m.materials.map((M,P)=>e.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-gray-50 rounded-lg",children:[e.jsx(wt,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"flex-1 text-sm",children:M.name}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Qtd: ",M.quantity]})]},P))}):e.jsx("p",{className:"text-sm text-gray-500",children:"Nenhum material definido"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Instrues"}),m.instructions&&m.instructions.length>0?e.jsx("ol",{className:"list-decimal list-inside space-y-1",children:m.instructions.map((M,P)=>e.jsx("li",{className:"text-sm text-gray-700",children:M},P))}):e.jsx("p",{className:"text-sm text-gray-500",children:"Nenhuma instruo definida"})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>y(null),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsxs("button",{onClick:f,className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:shadow-lg",children:[e.jsx(Gt,{className:"h-4 w-4 mr-2 inline"}),"Salvar Alteraes"]})]})]})]})}),e.jsx(rt,{children:N&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>D(null),className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"relative bg-white rounded-xl p-6 w-full max-w-md shadow-2xl",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 text-red-600",children:[e.jsx(cs,{className:"h-8 w-8"}),e.jsx("h3",{className:"text-xl font-bold",children:"Confirmar Excluso"})]}),e.jsx("p",{className:"text-gray-700 mb-6",children:"Tem certeza que deseja excluir este servio? Esta ao no pode ser desfeita."}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>D(null),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{onClick:()=>F(N),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Excluir"})]})]})]})}),e.jsx(W8,{isOpen:u||m!==null||p!==void 0,onClose:()=>{x(!1),y(null),b(void 0),v(void 0)},onSave:()=>{R(),x(!1),y(null),b(void 0),v(void 0)},serviceId:g,duplicateFromId:p})]})},Y8=({isOpen:s,onComplete:t})=>{const[a,r]=j.useState(0),n=[{title:"Bem-vindo ao Sistema OS!",description:"Vamos fazer um tour rpido pelas principais funcionalidades do sistema.",image:e.jsx(ea,{className:"h-12 w-12 text-blue-500"}),highlight:null},{title:"Ordens de Servio",description:"Crie, gerencie e acompanhe todas as suas ordens de servio em um s lugar. Adicione fotos, materiais e acompanhe o status em tempo real.",image:e.jsx(ea,{className:"h-12 w-12 text-blue-500"}),highlight:"service-orders"},{title:"Estoque Integrado",description:"Controle seu estoque de materiais com baixa automtica quando uma OS  finalizada. Receba alertas de estoque mnimo.",image:e.jsx(wt,{className:"h-12 w-12 text-green-500"}),highlight:"inventory"},{title:"Catlogo de Servios",description:"Crie servios pr-definidos com descries, materiais necessrios e valores para agilizar a criao de novas ordens.",image:e.jsx(ut,{className:"h-12 w-12 text-purple-500"}),highlight:"service-catalog"},{title:"Relatrios Detalhados",description:"Acompanhe o desempenho do seu negcio com relatrios detalhados e grficos interativos.",image:e.jsx(Ls,{className:"h-12 w-12 text-orange-500"}),highlight:"reports"},{title:"Controle de Acesso",description:"Diferentes nveis de acesso para administradores, tcnicos e funcionrios externos, garantindo a segurana das informaes.",image:e.jsx(xr,{className:"h-12 w-12 text-gray-500"}),highlight:"settings"}],i=()=>{a<n.length-1?r(a+1):t()},o=()=>{a>0&&r(a-1)},l=()=>{t()};return e.jsx(rt,{children:s&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),e.jsxs(W.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"relative bg-white rounded-3xl shadow-2xl max-w-md w-full",children:[e.jsxs("div",{className:"relative bg-gradient-to-r from-blue-600 to-purple-600 p-6 text-white rounded-t-3xl",children:[e.jsx("button",{onClick:l,className:"absolute top-4 right-4 p-2 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(ht,{className:"h-5 w-5"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-3",children:n[a].image}),e.jsx("h2",{className:"text-xl font-bold",children:n[a].title})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-600 text-center mb-6 leading-relaxed",children:n[a].description}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-2",children:[e.jsx("span",{children:"Progresso"}),e.jsxs("span",{children:[a+1," de ",n.length]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx(W.div,{initial:{width:0},animate:{width:`${(a+1)/n.length*100}%`},className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-300"})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("button",{onClick:o,disabled:a===0,className:`flex items-center px-4 py-2 rounded-xl transition-all duration-200 ${a===0?"text-gray-400 cursor-not-allowed":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(An,{className:"h-4 w-4 mr-2"}),"Anterior"]}),e.jsx("div",{className:"flex space-x-2",children:n.map((c,d)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-200 ${d===a?"bg-blue-500 w-6":d<a?"bg-green-500":"bg-gray-300"}`},d))}),e.jsx("button",{onClick:i,className:"flex items-center px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl hover:shadow-lg transition-all duration-200",children:a===n.length-1?e.jsxs(e.Fragment,{children:["Concluir",e.jsx(As,{className:"h-4 w-4 ml-2"})]}):e.jsxs(e.Fragment,{children:["Prximo",e.jsx(za,{className:"h-4 w-4 ml-2"})]})})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("button",{onClick:l,className:"text-sm text-gray-500 hover:text-gray-700 transition-colors",children:"Pular tutorial"})})]})]})]})})},X8=()=>{const[s,t]=j.useState(null),[a,r]=j.useState([]),[n,i]=j.useState([]),[o,l]=j.useState([]),[c,d]=j.useState(!0),[A,u]=j.useState("overview");j.useEffect(()=>{x()},[]);const x=async()=>{try{d(!0);const[p,v,N,D]=await Promise.all([se.from("v_business_kpis").select("*").maybeSingle(),se.from("v_service_performance").select("*").order("total_revenue",{ascending:!1}),se.from("v_customer_profitability").select("*").order("total_revenue",{ascending:!1}).limit(20),se.from("v_team_productivity").select("*").order("total_revenue_generated",{ascending:!1})]);p.data&&t(p.data),v.data&&r(v.data),N.data&&i(N.data),D.data&&l(D.data)}catch(p){console.error("Erro ao carregar KPIs:",p)}finally{d(!1)}},m=p=>p==null||isNaN(p)?"R$ 0,00":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(p),y=p=>p==null||isNaN(p)?"0.0%":`${p.toFixed(1)}%`;if(c)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});const g=[{title:"Taxa de Converso",value:y((s==null?void 0:s.conversion_rate)||0),target:"80%",progress:(s==null?void 0:s.conversion_rate)||0,icon:Pa,color:"blue",trend:((s==null?void 0:s.conversion_rate)||0)>=80?"up":"down"},{title:"Ticket Mdio",value:m((s==null?void 0:s.avg_order_value)||0),target:"R$ 5.000",progress:((s==null?void 0:s.avg_order_value)||0)/5e3*100,icon:Ut,color:"green",trend:"up"},{title:"Margem de Lucro",value:y((s==null?void 0:s.profit_margin)||0),target:"30%",progress:(s==null?void 0:s.profit_margin)||0,icon:zt,color:"purple",trend:((s==null?void 0:s.profit_margin)||0)>=30?"up":"down"},{title:"Tempo Mdio Atendimento",value:`${(((s==null?void 0:s.avg_service_time_hours)??0)||0).toFixed(1)}h`,target:"24h",progress:Math.min(100,(24-(((s==null?void 0:s.avg_service_time_hours)??0)||0))/24*100),icon:vt,color:"orange",trend:((s==null?void 0:s.avg_service_time_hours)||0)<=24?"up":"down"}],b=[{label:"OSs Concludas",value:(s==null?void 0:s.total_completed_orders)||0,icon:is,color:"text-green-600 bg-green-50"},{label:"OSs em Andamento",value:(s==null?void 0:s.orders_in_progress)||0,icon:gi,color:"text-blue-600 bg-blue-50"},{label:"Clientes Ativos",value:(s==null?void 0:s.active_customers)||0,icon:Nt,color:"text-purple-600 bg-purple-50"},{label:"Itens em Estoque",value:(s==null?void 0:s.materials_in_stock)||0,icon:wt,color:"text-orange-600 bg-orange-50"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"KPIs e OKRs"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Indicadores-chave de performance e objetivos"})]}),e.jsx("button",{onClick:x,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Atualizar"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:g.map((p,v)=>e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:v*.1},className:"bg-white rounded-xl p-6 shadow-md border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`w-12 h-12 bg-${p.color}-50 rounded-lg flex items-center justify-center`,children:e.jsx(p.icon,{className:`h-6 w-6 text-${p.color}-600`})}),p.trend==="up"?e.jsx(ii,{className:"h-5 w-5 text-green-500"}):e.jsx(zp,{className:"h-5 w-5 text-red-500"})]}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:p.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-2",children:p.value}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-gray-500",children:["Meta: ",p.target]}),e.jsxs("span",{className:`font-medium ${p.progress>=100?"text-green-600":"text-orange-600"}`,children:[Math.min(100,p.progress||0).toFixed(0),"%"]})]}),e.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`bg-${p.color}-600 h-2 rounded-full transition-all duration-500`,style:{width:`${Math.min(100,p.progress)}%`}})})]},p.title))}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:b.map((p,v)=>e.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4+v*.05},className:`${p.color} rounded-xl p-4`,children:[e.jsx(p.icon,{className:"h-8 w-8 mb-2"}),e.jsx("p",{className:"text-2xl font-bold mb-1",children:p.value}),e.jsx("p",{className:"text-sm opacity-80",children:p.label})]},p.label))}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"flex border-b border-gray-200",children:[{id:"overview",label:"Viso Geral"},{id:"services",label:"Servios"},{id:"customers",label:"Clientes"},{id:"team",label:"Equipe"}].map(p=>e.jsx("button",{onClick:()=>u(p.id),className:`flex-1 px-6 py-4 text-sm font-medium transition-colors ${A===p.id?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:p.label},p.id))}),e.jsxs("div",{className:"p-6",children:[A==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-6 border border-green-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Desempenho Financeiro"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-700",children:"Receita Total"}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:m((s==null?void 0:s.total_income)||0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-700",children:"Despesas Totais"}),e.jsx("span",{className:"text-lg font-bold text-red-600",children:m((s==null?void 0:s.total_expenses)||0)})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-green-300",children:[e.jsx("span",{className:"text-gray-900 font-semibold",children:"Lucro Lquido"}),e.jsx("span",{className:"text-xl font-bold text-green-700",children:m((s==null?void 0:s.net_profit)||0)})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 border border-purple-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Potencial de Estoque"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-700",children:"Valor em Estoque"}),e.jsx("span",{className:"text-lg font-bold text-purple-600",children:m((s==null?void 0:s.total_inventory_value)||0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-700",children:"Lucro Potencial"}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:m((s==null?void 0:s.potential_profit)||0)})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-purple-300",children:[e.jsx("span",{className:"text-gray-900 font-semibold",children:"Margem Potencial"}),e.jsx("span",{className:"text-xl font-bold text-purple-700",children:y(((s==null?void 0:s.potential_profit)||0)/((s==null?void 0:s.total_inventory_value)||1)*100)})]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-6 border border-blue-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contas a Receber e Pagar"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"A Receber"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:m((s==null?void 0:s.accounts_receivable)||0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"A Pagar"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:m((s==null?void 0:s.accounts_payable)||0)})]})]})]})]}),A==="services"&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Servio"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"OSs"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Taxa Concluso"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Receita Total"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Ticket Mdio"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Tempo Mdio"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(p=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:p.service_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:p.total_orders}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${p.completion_rate>=80?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:y(p.completion_rate)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-900",children:m(p.total_revenue)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:m(p.avg_revenue_per_service)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:[(p.avg_completion_time_hours||0).toFixed(1),"h"]})]},p.service_name))})]})}),A==="customers"&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"OSs"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Receita"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Lucro Bruto"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Margem"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"ltimo Pedido"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(p=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:p.customer_name}),p.company_name&&e.jsx("div",{className:"text-sm text-gray-500",children:p.company_name})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:p.total_orders}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-900",children:m(p.total_revenue)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-semibold text-green-600",children:m(p.gross_profit)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${p.profit_margin>=30?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:y(p.profit_margin)})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:[p.days_since_last_order," dias"]})]},p.customer_name))})]})}),A==="team"&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Colaborador"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cargo"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"OSs"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Taxa Concluso"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Receita Gerada"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"ROI Salarial"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(p=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:p.employee_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:p.role}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:[p.completed_orders,"/",p.total_orders_assigned]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${p.completion_rate>=80?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:y(p.completion_rate)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-900",children:m(p.total_revenue_generated)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center",children:e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${p.revenue_to_salary_ratio>=5?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:[(p.revenue_to_salary_ratio||0).toFixed(1),"x"]})})]},p.employee_name))})]})})]})]})]})};Wu.register(Ju,Yu,ip,op,Xu,Zu,em,lp);const y1=()=>{const{hasPermission:s}=rs(),t=s("view_bank_balances"),[a,r]=j.useState("overview"),[n,i]=j.useState([]),[o,l]=j.useState([]),[c,d]=j.useState([]),[A,u]=j.useState([]),[x,m]=j.useState([]),[y,g]=j.useState(!0),[b,p]=j.useState("month"),[v,N]=j.useState(""),[D,S]=j.useState(""),[E,R]=j.useState({totalReceitas:0,totalDespesas:0,lucro:0,custoFolha:0,receitasMes:0,despesasMes:0,lucroMes:0,contasReceber:0,contasPagar:0,margemLucro:0,ticketMedio:0,valorEstoque:0,valorVendaEstoque:0,lucroEstoque:0}),[_,C]=j.useState({receitas:[],despesas:[],totalReceitas:0,totalDespesas:0,lucroOperacional:0,margemOperacional:0}),[L,f]=j.useState({labels:[],receitas:[],despesas:[],saldo:[]});j.useEffect(()=>{F()},[b]);const F=async()=>{try{g(!0);const[V,oe,H,I,B]=await Promise.all([se.from("finance_entries").select("*").order("data",{ascending:!1}),se.from("financial_categories").select("*"),se.from("employees").select("id, name, salary"),se.from("inventory_items").select("unit_cost, unit_price, quantity").eq("active",!0),se.rpc("get_bank_accounts_with_transactions")]);if(V.error)throw V.error;if(oe.error)throw oe.error;if(H.error)throw H.error;if(I.error)throw I.error;B.error&&console.error("Erro ao carregar contas bancrias:",B.error);const $=V.data||[],T=oe.data||[],ne=H.data||[],ue=I.data||[],me=B.data||[];console.log(" Contas bancrias carregadas:",me),i($),l(T),d(ne),u(ue),m(me),M($,ne,ue),P($,T,ne),Z($)}catch(V){console.error("Error loading data:",V)}finally{g(!1)}},M=(V,oe,H)=>{const I=new Date,B=I.getMonth(),$=I.getFullYear(),T=V.filter(re=>re.tipo==="receita"&&re.status==="recebido").reduce((re,ie)=>re+Number(ie.valor),0),ne=V.filter(re=>re.tipo==="despesa"&&re.status==="pago").reduce((re,ie)=>re+Number(ie.valor),0),ue=oe.reduce((re,ie)=>re+Number(ie.salary||0),0),me=V.filter(re=>re.tipo==="receita"&&re.status==="a_receber").reduce((re,ie)=>re+Number(ie.valor),0),xe=V.filter(re=>re.tipo==="despesa"&&re.status==="a_pagar").reduce((re,ie)=>re+Number(ie.valor),0),Be=V.filter(re=>{const ie=new Date(re.data);return re.tipo==="receita"&&re.status==="recebido"&&ie.getMonth()===B&&ie.getFullYear()===$}).reduce((re,ie)=>re+Number(ie.valor),0),ee=V.filter(re=>{const ie=new Date(re.data);return re.tipo==="despesa"&&re.status==="pago"&&ie.getMonth()===B&&ie.getFullYear()===$}).reduce((re,ie)=>re+Number(ie.valor),0),je=V.filter(re=>re.tipo==="receita"&&re.status==="recebido").length,Pe=je>0?T/je:0,Xe=H.reduce((re,ie)=>re+Number(ie.unit_cost||0)*Number(ie.quantity||0),0),Ce=H.reduce((re,ie)=>re+Number(ie.unit_price||0)*Number(ie.quantity||0),0),K=Ce-Xe,Me=T-ne,qe=T>0?Me/T*100:0;R({totalReceitas:T,totalDespesas:ne,lucro:Me,custoFolha:ue,receitasMes:Be,despesasMes:ee,lucroMes:Be-ee,contasReceber:me,contasPagar:xe,margemLucro:qe,ticketMedio:Pe,valorEstoque:Xe,valorVendaEstoque:Ce,lucroEstoque:K})},P=(V,oe,H)=>{const I={},B={};V.forEach(ee=>{if(ee.categoria_id){const je=oe.find(Pe=>Pe.id===ee.categoria_id);if(je){if(ee.tipo==="receita"&&ee.status==="recebido"){const Pe=je.dre_grupo||je.nome;I[Pe]||(I[Pe]={valor:0,grupo:je.dre_grupo}),I[Pe].valor+=Number(ee.valor)}else if(ee.tipo==="despesa"&&ee.status==="pago"){const Pe=je.dre_grupo||je.nome;B[Pe]||(B[Pe]={valor:0,grupo:je.dre_grupo}),B[Pe].valor+=Number(ee.valor)}}}});const $=H.reduce((ee,je)=>ee+Number(je.salary||0),0);$>0&&(B["Folha de Pagamento"]={valor:$,grupo:"Despesas Operacionais"});const T=Object.values(I).reduce((ee,je)=>ee+je.valor,0),ne=Object.values(B).reduce((ee,je)=>ee+je.valor,0),ue=Object.entries(I).map(([ee,je])=>({categoria:ee,valor:je.valor,percentual:T>0?je.valor/T*100:0})).sort((ee,je)=>je.valor-ee.valor),me=Object.entries(B).map(([ee,je])=>({categoria:ee,valor:je.valor,percentual:ne>0?je.valor/ne*100:0})).sort((ee,je)=>je.valor-ee.valor),xe=T-ne,Be=T>0?xe/T*100:0;C({receitas:ue,despesas:me,totalReceitas:T,totalDespesas:ne,lucroOperacional:xe,margemOperacional:Be})},Z=V=>{const oe=new Date,H=[],I=[],B=[],$=[];for(let T=5;T>=0;T--){const ne=new Date(oe.getFullYear(),oe.getMonth()-T,1),ue=ne.toLocaleDateString("pt-BR",{month:"short",year:"2-digit"});H.push(ue);const me=V.filter(Be=>{const ee=new Date(Be.data);return Be.tipo==="receita"&&Be.status==="recebido"&&ee.getMonth()===ne.getMonth()&&ee.getFullYear()===ne.getFullYear()}).reduce((Be,ee)=>Be+Number(ee.valor),0),xe=V.filter(Be=>{const ee=new Date(Be.data);return Be.tipo==="despesa"&&Be.status==="pago"&&ee.getMonth()===ne.getMonth()&&ee.getFullYear()===ne.getFullYear()}).reduce((Be,ee)=>Be+Number(ee.valor),0);I.push(me),B.push(xe),$.push(me-xe)}f({labels:H,receitas:I,despesas:B,saldo:$})},O=V=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(V),X=V=>V.toFixed(1)+"%",q=()=>{let V="";a==="dre"&&(V=`DRE - Demonstrativo de Resultados

`,V+=`RECEITAS
`,V+=`Categoria,Valor,Percentual
`,_.receitas.forEach(B=>{V+=`${B.categoria},${B.valor},${B.percentual.toFixed(2)}%
`}),V+=`
TOTAL RECEITAS,${_.totalReceitas}

`,V+=`DESPESAS
`,V+=`Categoria,Valor,Percentual
`,_.despesas.forEach(B=>{V+=`${B.categoria},${B.valor},${B.percentual.toFixed(2)}%
`}),V+=`
TOTAL DESPESAS,${_.totalDespesas}

`,V+=`LUCRO OPERACIONAL,${_.lucroOperacional}
`,V+=`MARGEM OPERACIONAL,${_.margemOperacional.toFixed(2)}%
`);const oe=new Blob([V],{type:"text/csv"}),H=window.URL.createObjectURL(oe),I=document.createElement("a");I.href=H,I.download=`relatorio-financeiro-${new Date().toISOString().split("T")[0]}.csv`,I.click()};return y?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Ut,{className:"h-8 w-8 text-green-600"}),"Dashboard Financeiro Completo"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Relatrios financeiros e anlises em tempo real"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:q,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(wa,{className:"h-4 w-4"}),"Exportar"]})})]}),e.jsx("div",{className:"flex gap-2 border-b border-gray-200 overflow-x-auto",children:[{id:"overview",label:"Viso Geral",icon:Yp},{id:"kpis",label:"KPIs e OKRs",icon:zt},{id:"dre",label:"DRE",icon:ut},{id:"cashflow",label:"Fluxo de Caixa",icon:a3},{id:"reports",label:"Relatrios",icon:HS}].map(V=>{const oe=V.icon;return e.jsxs("button",{onClick:()=>r(V.id),className:`px-6 py-3 font-medium text-sm flex items-center gap-2 border-b-2 transition-colors whitespace-nowrap ${a===V.id?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[e.jsx(oe,{className:"h-4 w-4"}),V.label]},V.id)})}),a==="overview"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(ii,{className:"h-5 w-5"})}),e.jsx(zt,{className:"h-4 w-4 opacity-80"})]}),e.jsx("p",{className:"text-green-100 text-xs font-medium mb-1",children:"Total Receitas"}),e.jsx("h2",{className:"text-2xl font-bold",children:O(E.totalReceitas)}),e.jsx("div",{className:"mt-2 pt-2 border-t border-white/20",children:e.jsxs("p",{className:"text-xs text-green-100",children:["Ms: ",O(E.receitasMes)]})})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-gradient-to-br from-red-500 to-red-600 rounded-lg p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(zp,{className:"h-5 w-5"})}),e.jsx(nr,{className:"h-4 w-4 opacity-80"})]}),e.jsx("p",{className:"text-red-100 text-xs font-medium mb-1",children:"Total Despesas"}),e.jsx("h2",{className:"text-2xl font-bold",children:O(E.totalDespesas)}),e.jsx("div",{className:"mt-2 pt-2 border-t border-white/20",children:e.jsxs("p",{className:"text-xs text-red-100",children:["Ms: ",O(E.despesasMes)]})})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:`bg-gradient-to-br ${E.lucro>=0?"from-blue-500 to-blue-600":"from-orange-500 to-orange-600"} rounded-lg p-4 text-white shadow-lg`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(_A,{className:"h-5 w-5"})}),e.jsx(Ut,{className:"h-4 w-4 opacity-80"})]}),e.jsx("p",{className:"text-blue-100 text-xs font-medium mb-1",children:"Lucro Lquido"}),e.jsx("h2",{className:"text-2xl font-bold",children:O(E.lucro)}),e.jsx("div",{className:"mt-2 pt-2 border-t border-white/20",children:e.jsxs("p",{className:"text-xs text-blue-100",children:["Margem: ",X(E.margemLucro)]})})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-4 text-white shadow-lg",children:[e.jsx("div",{className:"flex items-center justify-between mb-1",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(Nt,{className:"h-5 w-5"})})}),e.jsx("p",{className:"text-purple-100 text-xs font-medium mb-1",children:"Custo Folha"}),e.jsx("h2",{className:"text-2xl font-bold",children:O(E.custoFolha)}),e.jsx("div",{className:"mt-2 pt-2 border-t border-white/20",children:e.jsxs("p",{className:"text-xs text-purple-100",children:[c.length," funcionrios"]})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(_A,{className:"h-5 w-5 text-blue-600"}),"Contas Bancrias"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[x.length," conta(s)"]})]}),t?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:[x.map((V,oe)=>e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:oe*.05},className:`relative rounded-lg p-3 border-2 transition-all hover:shadow-md ${V.saldo_calculado>=0?"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200":"bg-gradient-to-br from-red-50 to-orange-50 border-red-200"}`,children:[V.is_default&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("span",{className:"bg-blue-600 text-white text-xs px-2 py-0.5 rounded-full font-medium",children:"Principal"})}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_A,{className:`h-4 w-4 ${V.saldo_calculado>=0?"text-green-600":"text-red-600"}`}),e.jsx("h4",{className:"font-semibold text-sm text-gray-900 truncate",children:V.bank_name})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-2 truncate",children:V.account_name}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Saldo:"}),e.jsx("span",{className:`text-sm font-bold ${V.saldo_calculado>=0?"text-green-700":"text-red-700"}`,children:O(Number(V.saldo_calculado))})]}),e.jsxs("div",{className:"pt-1.5 border-t border-gray-200",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-0.5",children:[e.jsx("span",{className:"text-green-600",children:"Receitas:"}),e.jsx("span",{className:"font-medium text-green-700",children:O(Number(V.total_receitas))})]}),e.jsxs("div",{className:"flex justify-between text-xs mb-0.5",children:[e.jsx("span",{className:"text-red-600",children:"Despesas:"}),e.jsx("span",{className:"font-medium text-red-700",children:O(Number(V.total_despesas))})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"Transaes:"}),e.jsx("span",{className:"font-medium text-gray-700",children:V.total_transactions})]})]})]})]},V.id)),x.length===0&&e.jsxs("div",{className:"col-span-full text-center py-8 text-gray-400",children:[e.jsx(_A,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Nenhuma conta bancria cadastrada"})]})]}):e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[e.jsx(Va,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Acesso Restrito"}),e.jsxs("p",{className:"text-sm text-gray-500 max-w-md mx-auto",children:["Voc no tem permisso para visualizar os saldos das contas bancrias.",e.jsx("br",{}),"Entre em contato com o administrador para solicitar acesso."]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-gradient-to-br from-amber-500 to-orange-600 rounded-lg p-4 text-white shadow-lg",children:[e.jsx("div",{className:"flex items-center justify-between mb-1",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(wt,{className:"h-5 w-5"})})}),e.jsx("p",{className:"text-amber-100 text-xs font-medium mb-1",children:"Investido em Estoque"}),e.jsx("h2",{className:"text-2xl font-bold",children:O(E.valorEstoque)}),e.jsx("div",{className:"mt-2 pt-2 border-t border-white/20",children:e.jsxs("p",{className:"text-xs text-amber-100",children:["Venda: ",O(E.valorVendaEstoque)]})})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-lg p-4 text-white shadow-lg",children:[e.jsx("div",{className:"flex items-center justify-between mb-1",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(zt,{className:"h-5 w-5"})})}),e.jsx("p",{className:"text-emerald-100 text-xs font-medium mb-1",children:"Lucro Potencial Estoque"}),e.jsx("h2",{className:"text-2xl font-bold",children:O(E.lucroEstoque)}),e.jsx("div",{className:"mt-2 pt-2 border-t border-white/20",children:e.jsxs("p",{className:"text-xs text-emerald-100",children:["Margem: ",X(E.valorEstoque>0?E.lucroEstoque/E.valorEstoque*100:0)]})})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-lg p-4 text-white shadow-lg",children:[e.jsx("div",{className:"flex items-center justify-between mb-1",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(wt,{className:"h-5 w-5"})})}),e.jsx("p",{className:"text-cyan-100 text-xs font-medium mb-1",children:"Itens em Estoque"}),e.jsx("h2",{className:"text-2xl font-bold",children:A.length}),e.jsx("div",{className:"mt-2 pt-2 border-t border-white/20",children:e.jsx("p",{className:"text-xs text-cyan-100",children:"Produtos disponveis"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contas a Receber"}),e.jsx("div",{className:"text-3xl font-bold text-green-600 mb-4",children:O(E.contasReceber)}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:n.filter(V=>V.tipo==="receita"&&V.status==="a_receber").slice(0,5).map(V=>e.jsx("div",{className:"p-3 bg-green-50 rounded-lg",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:V.descricao}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(V.data).toLocaleDateString("pt-BR")})]}),e.jsx("p",{className:"font-bold text-green-600",children:O(Number(V.valor))})]})},V.id))})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contas a Pagar"}),e.jsx("div",{className:"text-3xl font-bold text-red-600 mb-4",children:O(E.contasPagar)}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:n.filter(V=>V.tipo==="despesa"&&V.status==="a_pagar").slice(0,5).map(V=>e.jsx("div",{className:"p-3 bg-red-50 rounded-lg",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:V.descricao}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(V.data).toLocaleDateString("pt-BR")})]}),e.jsx("p",{className:"font-bold text-red-600",children:O(Number(V.valor))})]})},V.id))})]})]})]}),a==="dre"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"DRE - Demonstrativo de Resultados"}),e.jsx(Ot,{className:"h-6 w-6 text-gray-400"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-700",children:"RECEITAS"}),e.jsx("span",{className:"text-2xl font-bold text-green-700",children:O(_.totalReceitas)})]}),e.jsx("div",{className:"space-y-2",children:_.receitas.map((V,oe)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:V.categoria}),e.jsx("div",{className:"mt-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-green-500 rounded-full",style:{width:`${V.percentual}%`}})})]}),e.jsxs("div",{className:"ml-4 text-right",children:[e.jsx("p",{className:"font-bold text-gray-900",children:O(V.valor)}),e.jsx("p",{className:"text-sm text-gray-500",children:X(V.percentual)})]})]},oe))})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-700",children:"DESPESAS"}),e.jsx("span",{className:"text-2xl font-bold text-red-700",children:O(_.totalDespesas)})]}),e.jsx("div",{className:"space-y-2",children:_.despesas.map((V,oe)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:V.categoria}),e.jsx("div",{className:"mt-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-red-500 rounded-full",style:{width:`${V.percentual}%`}})})]}),e.jsxs("div",{className:"ml-4 text-right",children:[e.jsx("p",{className:"font-bold text-gray-900",children:O(V.valor)}),e.jsx("p",{className:"text-sm text-gray-500",children:X(V.percentual)})]})]},oe))})]}),e.jsx("div",{className:"border-t pt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:`p-6 rounded-xl ${_.lucroOperacional>=0?"bg-blue-50 border-2 border-blue-200":"bg-orange-50 border-2 border-orange-200"}`,children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Lucro Operacional"}),e.jsx("p",{className:`text-4xl font-bold ${_.lucroOperacional>=0?"text-blue-700":"text-orange-700"}`,children:O(_.lucroOperacional)})]}),e.jsxs("div",{className:`p-6 rounded-xl ${_.margemOperacional>=0?"bg-blue-50 border-2 border-blue-200":"bg-orange-50 border-2 border-orange-200"}`,children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Margem Operacional"}),e.jsx("p",{className:`text-4xl font-bold ${_.margemOperacional>=0?"text-blue-700":"text-orange-700"}`,children:X(_.margemOperacional)})]})]})})]})]})}),a==="cashflow"&&e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Fluxo de Caixa - ltimos 6 Meses"}),e.jsx("div",{className:"h-96",children:e.jsx(Lx,{data:{labels:L.labels,datasets:[{label:"Receitas",data:L.receitas,borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.1)",fill:!0,tension:.4},{label:"Despesas",data:L.despesas,borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.1)",fill:!0,tension:.4},{label:"Saldo",data:L.saldo,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:V=>`${V.dataset.label}: ${O(V.parsed.y)}`}}},scales:{y:{ticks:{callback:V=>O(Number(V))}}}}})})]}),a==="kpis"&&e.jsx(X8,{}),a==="reports"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Ticket Mdio"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:O(E.ticketMedio)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Margem de Lucro"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:X(E.margemLucro)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Lucro do Ms"}),e.jsx("p",{className:`text-3xl font-bold ${E.lucroMes>=0?"text-blue-600":"text-red-600"}`,children:O(E.lucroMes)})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"ltimos Lanamentos"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Data"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Cdigo"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Descrio"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Tipo"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500",children:"Valor"})]})}),e.jsx("tbody",{className:"divide-y",children:n.slice(0,10).map(V=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(V.data).toLocaleDateString("pt-BR")}),e.jsx("td",{className:"px-4 py-3 text-sm font-mono",children:V.codigo}),e.jsx("td",{className:"px-4 py-3 text-sm",children:V.descricao}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${V.tipo==="receita"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:V.tipo})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${V.status==="recebido"||V.status==="pago"?"bg-blue-100 text-blue-700":"bg-yellow-100 text-yellow-700"}`,children:V.status})}),e.jsx("td",{className:"px-4 py-3 text-sm text-right font-semibold",children:O(Number(V.valor))})]},V.id))})]})})]})]})]})},Z8="https://hevvpugkhcmujiyncysq.supabase.co",eP="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhldnZwdWdraGNtdWppeW5jeXNxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3NjkwNDAsImV4cCI6MjA3NTM0NTA0MH0.THnFgVOEDqtcVTcEyzfSwvjvlkfxJjRmSZtn2woIYEs",v1=async s=>{try{const t=s.replace(/\D/g,"");if(t.length!==14)throw new Error("CNPJ deve conter 14 dgitos");const a=await fetch(`${Z8}/functions/v1/buscar-cnpj?cnpj=${t}`,{method:"GET",headers:{Authorization:`Bearer ${eP}`,"Content-Type":"application/json"}});if(!a.ok){const n=await a.json().catch(()=>({}));throw new Error(n.error||"Erro ao buscar CNPJ")}const r=await a.json();if(r.status==="ERROR")throw new Error(r.error||"CNPJ no encontrado");return r}catch(t){throw console.error("Erro ao buscar CNPJ:",t),t}},w1=s=>{const t=s.replace(/\D/g,"");return t.length<=14?t.replace(/^(\d{2})(\d)/,"$1.$2").replace(/^(\d{2})\.(\d{3})(\d)/,"$1.$2.$3").replace(/\.(\d{3})(\d)/,".$1/$2").replace(/(\d{4})(\d)/,"$1-$2"):s},tP=({cnpj:s,onCnpjChange:t,onDataFilled:a})=>{const[r,n]=j.useState(!1),[i,o]=j.useState(""),[l,c]=j.useState(!1),d=async()=>{if(!s||s.replace(/\D/g,"").length!==14){o("CNPJ deve conter 14 dgitos");return}n(!0),o(""),c(!1);try{const m=await v1(s);m&&(a({razao_social:m.razao_social,nome_fantasia:m.nome_fantasia,email:m.email,telefone:m.telefone,logradouro:m.logradouro,numero:m.numero,complemento:m.complemento,bairro:m.bairro,cidade:m.municipio,estado:m.uf,cep:m.cep}),c(!0),setTimeout(()=>c(!1),3e3))}catch(m){o(m instanceof Error?m.message:"Erro ao buscar CNPJ")}finally{n(!1)}},A=m=>{const y=w1(m);t(y),o(""),c(!1)},u=()=>{s&&s.replace(/\D/g,"").length===14&&d()},x=m=>{m.key==="Enter"&&(m.preventDefault(),d())};return e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["CNPJ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:e.jsx(Er,{className:"w-5 h-5"})}),e.jsx("input",{type:"text",value:s,onChange:m=>A(m.target.value),onBlur:u,onKeyPress:x,placeholder:"00.000.000/0000-00",maxLength:18,className:`w-full pl-10 pr-10 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i?"border-red-500":l?"border-green-500":"border-gray-300"}`}),e.jsx("button",{type:"button",onClick:d,disabled:r||!s,className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-blue-600 hover:text-blue-700 disabled:text-gray-400",title:"Buscar dados da empresa",children:r?e.jsx(Dl,{className:"w-5 h-5 animate-spin"}):e.jsx(Qt,{className:"w-5 h-5"})})]}),i&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i}),l&&e.jsxs("p",{className:"mt-1 text-sm text-green-600 flex items-center gap-1",children:[e.jsx(Er,{className:"w-4 h-4"}),"Dados da empresa preenchidos automaticamente"]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Digite o CNPJ e pressione Enter ou clique na lupa para buscar os dados automaticamente"})]})},sP=({isOpen:s,onClose:t,onSave:a,customerId:r})=>{const[n,i]=j.useState("dados"),[o,l]=j.useState(!1),[c,d]=j.useState({tipo_pessoa:"fisica",nome_razao:"",nome_fantasia:"",cpf:"",rg:"",cnpj:"",inscricao_estadual:"",inscricao_municipal:"",data_nascimento:"",data_fundacao:"",email:"",telefone:"",celular:"",observacoes:""}),[A,u]=j.useState([]),[x,m]=j.useState([]),[y,g]=j.useState([]);j.useEffect(()=>{r&&b()},[r]);const b=async()=>{if(r)try{const{data:_}=await se.from("customers").select("*").eq("id",r).single();_&&d({tipo_pessoa:_.tipo_pessoa||"fisica",nome_razao:_.nome_razao||"",nome_fantasia:_.nome_fantasia||"",cpf:_.cpf||"",rg:_.rg||"",cnpj:_.cnpj||"",inscricao_estadual:_.inscricao_estadual||"",inscricao_municipal:_.inscricao_municipal||"",data_nascimento:_.data_nascimento||"",data_fundacao:_.data_fundacao||"",email:_.email||"",telefone:_.telefone||"",celular:_.celular||"",observacoes:_.observacoes||""});const{data:C}=await se.from("customer_addresses").select("*").eq("customer_id",r),{data:L}=await se.from("customer_contacts").select("*").eq("customer_id",r),{data:f}=await se.from("customer_equipment").select("*").eq("customer_id",r);u(C||[]),m(L||[]),g(f||[])}catch(_){console.error("Error loading customer:",_)}},p=async()=>{try{if(!c.nome_razao){alert("Nome/Razo Social  obrigatrio!");return}l(!0);let _=r;const C={nome_razao:c.nome_razao,tipo_pessoa:c.tipo_pessoa||"fisica",cpf:c.cpf||null,cnpj:c.cnpj||null,rg:c.rg||null,email:c.email||null,telefone:c.telefone||null,celular:c.celular||null,inscricao_estadual:c.inscricao_estadual||null,inscricao_municipal:c.inscricao_municipal||null,nome_fantasia:c.nome_fantasia||null,data_nascimento:c.data_nascimento||null,data_fundacao:c.data_fundacao||null,observacoes:c.observacoes||null};if(r){const{error:f}=await se.from("customers").update(C).eq("id",r);if(f)throw console.error("Error updating customer:",f),f}else{const{data:f,error:F}=await se.from("customers").insert([C]).select().single();if(F)throw console.error("Error inserting customer:",F),alert(`Erro ao salvar cliente: ${F.message}`),F;_=f.id}const L={};for(const f of A)if(f.id.startsWith("new-")){console.log(" ENDEREO ORIGINAL:",JSON.stringify(f,null,2));const{data:F,error:M}=await se.rpc("insert_customer_address",{p_customer_id:_,p_tipo:f.tipo||"comercial",p_nome_identificacao:f.nome_identificacao||"",p_cep:f.cep||"",p_logradouro:f.logradouro||"",p_numero:f.numero||"",p_complemento:f.complemento||"",p_bairro:f.bairro||"",p_cidade:f.cidade||"",p_estado:f.estado||"",p_principal:f.principal||!1});if(M)throw console.error(" ERRO ao inserir endereo:",M),alert(`Erro ao salvar endereo: ${M.message}`),M;F&&(L[f.id]=F,console.log(` Endereo criado: ${f.id}  ${F}`))}else{const{error:F}=await se.rpc("update_customer_address",{p_id:f.id,p_tipo:f.tipo||"comercial",p_nome_identificacao:f.nome_identificacao||"",p_cep:f.cep||"",p_logradouro:f.logradouro||"",p_numero:f.numero||"",p_complemento:f.complemento||"",p_bairro:f.bairro||"",p_cidade:f.cidade||"",p_estado:f.estado||"",p_principal:f.principal||!1});if(F)throw console.error(" ERRO ao atualizar endereo:",F),alert(`Erro ao atualizar endereo: ${F.message}`),F}for(const f of x)if(f.id.startsWith("new-")){const F={customer_id:_,nome:String(f.nome||""),cargo:String(f.cargo||""),email:String(f.email||""),telefone:String(f.telefone||""),celular:String(f.celular||""),departamento:String(f.departamento||""),principal:!!f.principal,recebe_notificacoes:f.recebe_notificacoes!==void 0?!!f.recebe_notificacoes:!0},{error:M}=await se.from("customer_contacts").insert([F]);if(M)throw console.error(" ERRO ao inserir contato:",M),M}else{const F={nome:String(f.nome||""),cargo:String(f.cargo||""),email:String(f.email||""),telefone:String(f.telefone||""),celular:String(f.celular||""),departamento:String(f.departamento||""),principal:!!f.principal,recebe_notificacoes:f.recebe_notificacoes!==void 0?!!f.recebe_notificacoes:!0},{error:M}=await se.from("customer_contacts").update(F).eq("id",f.id);if(M)throw console.error(" ERRO ao atualizar contato:",M),M}for(const f of y)if(f.id.startsWith("new-")){let F=f.customer_address_id;F&&F.startsWith("new-")&&(F=L[F]||null);const M={customer_id:_,customer_address_id:F||null,tipo_equipamento:String(f.tipo_equipamento||""),marca:String(f.marca||""),modelo:String(f.modelo||""),numero_serie:String(f.numero_serie||""),capacidade:String(f.capacidade||""),data_instalacao:f.data_instalacao||null};console.log(" Inserindo equipamento:",M);const{error:P}=await se.from("customer_equipment").insert([M]);if(P)throw console.error(" ERRO ao inserir equipamento:",P),P}else{const F={customer_address_id:f.customer_address_id||null,tipo_equipamento:String(f.tipo_equipamento||""),marca:String(f.marca||""),modelo:String(f.modelo||""),numero_serie:String(f.numero_serie||""),capacidade:String(f.capacidade||""),data_instalacao:f.data_instalacao||null},{error:M}=await se.from("customer_equipment").update(F).eq("id",f.id);if(M)throw console.error(" ERRO ao atualizar equipamento:",M),M}a(),t()}catch(_){console.error("Error saving:",_),alert("Erro ao salvar cliente!")}finally{l(!1)}},v=()=>{u([...A,{id:`new-${Date.now()}`,tipo:"comercial",nome_identificacao:"",cep:"",logradouro:"",numero:"",complemento:"",bairro:"",cidade:"",estado:"",principal:A.length===0}])},N=()=>{m([...x,{id:`new-${Date.now()}`,nome:"",cargo:"",email:"",telefone:"",celular:"",departamento:"",principal:x.length===0,recebe_notificacoes:!0}])},D=()=>{var _;g([...y,{id:`new-${Date.now()}`,customer_address_id:((_=A[0])==null?void 0:_.id)||"",tipo_equipamento:"",marca:"",modelo:"",numero_serie:"",capacidade:"",data_instalacao:""}])},S=_=>_.replace(/\D/g,"").replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"),E=_=>_.replace(/\D/g,"").replace(/(\d{5})(\d{3})/,"$1-$2"),R=_=>{if(d({...c,nome_razao:_.razao_social||c.nome_razao,nome_fantasia:_.nome_fantasia||c.nome_fantasia,email:_.email||c.email,telefone:_.telefone||c.telefone}),_.logradouro&&_.cidade&&_.estado){const C={id:`new-${Date.now()}`,tipo:"comercial",nome_identificacao:"Sede",cep:_.cep||"",logradouro:_.logradouro||"",numero:_.numero||"",complemento:_.complemento||"",bairro:_.bairro||"",cidade:_.cidade||"",estado:_.estado||"",principal:A.length===0};u([...A,C])}};return s?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between bg-gradient-to-r from-blue-600 to-blue-700 text-white",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:r?"Editar Cliente":"Novo Cliente"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Cadastro completo com endereos, contatos e equipamentos"})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(ht,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"flex border-b bg-gray-50",children:[{id:"dados",label:"Dados Principais",icon:Jt},{id:"enderecos",label:"Endereos",icon:da},{id:"contatos",label:"Contatos",icon:Nt},{id:"equipamentos",label:"Equipamentos",icon:wt}].map(_=>{const C=_.icon;return e.jsxs("button",{onClick:()=>i(_.id),className:`flex-1 px-6 py-4 font-medium text-sm flex items-center justify-center gap-2 border-b-2 transition-all ${n===_.id?"border-blue-600 text-blue-600 bg-white":"border-transparent text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[e.jsx(C,{className:"h-4 w-4"}),_.label]},_.id)})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs(rt,{mode:"wait",children:[n==="dados"&&e.jsxs(W.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",checked:c.tipo_pessoa==="fisica",onChange:()=>d({...c,tipo_pessoa:"fisica"}),className:"w-4 h-4"}),e.jsx(Jt,{className:"h-4 w-4"}),e.jsx("span",{children:"Pessoa Fsica"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",checked:c.tipo_pessoa==="juridica",onChange:()=>d({...c,tipo_pessoa:"juridica"}),className:"w-4 h-4"}),e.jsx(Zi,{className:"h-4 w-4"}),e.jsx("span",{children:"Pessoa Jurdica"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:c.tipo_pessoa==="fisica"?"Nome Completo *":"Razo Social *"}),e.jsx("input",{type:"text",value:c.nome_razao,onChange:_=>d({...c,nome_razao:_.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),c.tipo_pessoa==="juridica"&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nome Fantasia"}),e.jsx("input",{type:"text",value:c.nome_fantasia,onChange:_=>d({...c,nome_fantasia:_.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),c.tipo_pessoa==="fisica"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"CPF *"}),e.jsx("input",{type:"text",value:c.cpf,maxLength:14,onChange:_=>d({...c,cpf:S(_.target.value)}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"000.000.000-00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"RG"}),e.jsx("input",{type:"text",value:c.rg,onChange:_=>d({...c,rg:_.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Data de Nascimento"}),e.jsx("input",{type:"date",value:c.data_nascimento,onChange:_=>d({...c,data_nascimento:_.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(tP,{cnpj:c.cnpj,onCnpjChange:_=>d({...c,cnpj:_}),onDataFilled:R}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Inscrio Estadual"}),e.jsx("input",{type:"text",value:c.inscricao_estadual,onChange:_=>d({...c,inscricao_estadual:_.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Inscrio Municipal"}),e.jsx("input",{type:"text",value:c.inscricao_municipal,onChange:_=>d({...c,inscricao_municipal:_.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Data de Fundao"}),e.jsx("input",{type:"date",value:c.data_fundacao,onChange:_=>d({...c,data_fundacao:_.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),e.jsx("input",{type:"email",value:c.email,onChange:_=>d({...c,email:_.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: contato@empresa.com.br"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Telefone"}),e.jsx("input",{type:"tel",value:c.telefone,onChange:_=>d({...c,telefone:_.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: (11) 3333-4444"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Celular / WhatsApp"}),e.jsx("input",{type:"tel",value:c.celular,onChange:_=>d({...c,celular:_.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: (11) 99999-8888"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Observaes"}),e.jsx("textarea",{value:c.observacoes,onChange:_=>d({...c,observacoes:_.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Ex: Cliente preferencial, Pagamento  vista, Desconto corporativo..."})]})]})]},"dados"),n==="enderecos"&&e.jsxs(W.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Endereos do Cliente"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:" Digite o CEP e os dados sero preenchidos automaticamente"})]}),e.jsxs("button",{onClick:v,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(bt,{className:"h-4 w-4"}),"Adicionar Endereo"]})]}),A.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(da,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Nenhum endereo cadastrado"})]}),A.map((_,C)=>e.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-semibold",children:["Endereo #",C+1]}),e.jsx("button",{onClick:()=>u(A.filter(L=>L.id!==_.id)),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(Vt,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tipo"}),e.jsxs("select",{value:_.tipo,onChange:L=>u(A.map(f=>f.id===_.id?{...f,tipo:L.target.value}:f)),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"comercial",children:"Comercial"}),e.jsx("option",{value:"residencial",children:"Residencial"}),e.jsx("option",{value:"filial",children:"Filial"}),e.jsx("option",{value:"outro",children:"Outro"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Identificao (Ex: Matriz, Filial Centro)"}),e.jsx("input",{type:"text",value:_.nome_identificacao||"",onChange:L=>u(A.map(f=>f.id===_.id?{...f,nome_identificacao:L.target.value}:f)),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Matriz, Filial So Paulo, Depsito Centro"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"CEP"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",value:_.cep||"",maxLength:9,onChange:L=>u(A.map(f=>f.id===_.id?{...f,cep:E(L.target.value)}:f)),onBlur:async L=>{const f=L.target.value.replace(/\D/g,"");if(f.length===8)try{const M=await(await fetch(`https://viacep.com.br/ws/${f}/json/`)).json();M.erro||u(A.map(P=>P.id===_.id?{...P,logradouro:M.logradouro||P.logradouro,bairro:M.bairro||P.bairro,cidade:M.localidade||P.cidade,estado:M.uf||P.estado,complemento:M.complemento||P.complemento}:P))}catch{console.log("CEP no encontrado, preencha manualmente")}},className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"00000-000"})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Logradouro (Rua/Avenida)"}),e.jsx("input",{type:"text",value:_.logradouro||"",onChange:L=>u(A.map(f=>f.id===_.id?{...f,logradouro:L.target.value}:f)),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Rua das Flores, Avenida Paulista"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nmero"}),e.jsx("input",{type:"text",value:_.numero||"",onChange:L=>u(A.map(f=>f.id===_.id?{...f,numero:L.target.value}:f)),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: 123, S/N"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Complemento"}),e.jsx("input",{type:"text",value:_.complemento||"",onChange:L=>u(A.map(f=>f.id===_.id?{...f,complemento:L.target.value}:f)),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Apto 101, Bloco A, Sala 205"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bairro"}),e.jsx("input",{type:"text",value:_.bairro||"",onChange:L=>u(A.map(f=>f.id===_.id?{...f,bairro:L.target.value}:f)),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Centro, Vila Mariana"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Cidade"}),e.jsx("input",{type:"text",value:_.cidade||"",onChange:L=>u(A.map(f=>f.id===_.id?{...f,cidade:L.target.value}:f)),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: So Paulo"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Estado"}),e.jsx("input",{type:"text",value:_.estado||"",maxLength:2,onChange:L=>u(A.map(f=>f.id===_.id?{...f,estado:L.target.value.toUpperCase()}:f)),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"SP"})]}),e.jsx("div",{className:"md:col-span-3",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:_.principal,onChange:L=>u(A.map(f=>f.id===_.id?{...f,principal:L.target.checked}:{...f,principal:!1})),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Endereo Principal"})]})})]})]},_.id))]},"enderecos"),n==="contatos"&&e.jsxs(W.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Contatos e Responsveis"}),e.jsxs("button",{onClick:N,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(bt,{className:"h-4 w-4"}),"Adicionar Contato"]})]}),x.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Nt,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Nenhum contato cadastrado"})]}),x.map((_,C)=>e.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-semibold",children:["Contato #",C+1]}),e.jsx("button",{onClick:()=>m(x.filter(L=>L.id!==_.id)),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(Vt,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nome Completo"}),e.jsx("input",{type:"text",value:_.nome,onChange:L=>m(x.map(f=>f.id===_.id?{...f,nome:L.target.value}:f)),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Joo da Silva"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Cargo"}),e.jsx("input",{type:"text",value:_.cargo,onChange:L=>m(x.map(f=>f.id===_.id?{...f,cargo:L.target.value}:f)),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Gerente de Compras, Diretor"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),e.jsx("input",{type:"email",value:_.email,onChange:L=>m(x.map(f=>f.id===_.id?{...f,email:L.target.value}:f)),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: joao@empresa.com.br"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Telefone"}),e.jsx("input",{type:"tel",value:_.telefone,onChange:L=>m(x.map(f=>f.id===_.id?{...f,telefone:L.target.value}:f)),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: (11) 3333-4444"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Celular"}),e.jsx("input",{type:"tel",value:_.celular,onChange:L=>m(x.map(f=>f.id===_.id?{...f,celular:L.target.value}:f)),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: (11) 99999-8888"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Departamento"}),e.jsx("input",{type:"text",value:_.departamento,onChange:L=>m(x.map(f=>f.id===_.id?{...f,departamento:L.target.value}:f)),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Financeiro, Compras, T.I."})]}),e.jsxs("div",{className:"md:col-span-2 flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:_.principal,onChange:L=>m(x.map(f=>f.id===_.id?{...f,principal:L.target.checked}:{...f,principal:!1})),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Contato Principal"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:_.recebe_notificacoes,onChange:L=>m(x.map(f=>f.id===_.id?{...f,recebe_notificacoes:L.target.checked}:f)),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Recebe Notificaes"})]})]})]})]},_.id))]},"contatos"),n==="equipamentos"&&e.jsxs(W.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Inventrio de Equipamentos"}),e.jsxs("button",{onClick:D,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(bt,{className:"h-4 w-4"}),"Adicionar Equipamento"]})]}),A.length===0&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(es,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-900",children:"Cadastre endereos primeiro"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Para registrar equipamentos,  necessrio ter pelo menos um endereo cadastrado."})]})]}),y.length===0&&A.length>0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(wt,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Nenhum equipamento cadastrado"})]}),y.map((_,C)=>e.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-semibold",children:["Equipamento #",C+1]}),e.jsx("button",{onClick:()=>g(y.filter(L=>L.id!==_.id)),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(Vt,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Localizao"}),e.jsxs("select",{value:_.customer_address_id,onChange:L=>g(y.map(f=>f.id===_.id?{...f,customer_address_id:L.target.value}:f)),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione o endereo..."}),A.map(L=>e.jsx("option",{value:L.id,children:L.nome_identificacao||`${L.logradouro}, ${L.numero}`},L.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tipo de Equipamento"}),e.jsx("input",{type:"text",value:_.tipo_equipamento,onChange:L=>g(y.map(f=>f.id===_.id?{...f,tipo_equipamento:L.target.value}:f)),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Ar Condicionado Split"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Marca"}),e.jsx("input",{type:"text",value:_.marca,onChange:L=>g(y.map(f=>f.id===_.id?{...f,marca:L.target.value}:f)),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Modelo"}),e.jsx("input",{type:"text",value:_.modelo,onChange:L=>g(y.map(f=>f.id===_.id?{...f,modelo:L.target.value}:f)),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nmero de Srie"}),e.jsx("input",{type:"text",value:_.numero_serie,onChange:L=>g(y.map(f=>f.id===_.id?{...f,numero_serie:L.target.value}:f)),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Capacidade"}),e.jsx("input",{type:"text",value:_.capacidade,onChange:L=>g(y.map(f=>f.id===_.id?{...f,capacidade:L.target.value}:f)),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: 12000 BTU, 18000 BTU"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Data de Instalao"}),e.jsx("input",{type:"date",value:_.data_instalacao,onChange:L=>g(y.map(f=>f.id===_.id?{...f,data_instalacao:L.target.value}:f)),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]},_.id))]},"equipamentos")]})}),e.jsxs("div",{className:"p-6 border-t bg-gray-50 flex gap-3",children:[e.jsx("button",{onClick:t,className:"flex-1 px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors font-medium",children:"Cancelar"}),e.jsx("button",{onClick:p,disabled:o,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors font-medium flex items-center justify-center gap-2",children:o?e.jsx(e.Fragment,{children:"Salvando..."}):e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"h-5 w-5"}),"Salvar Cliente"]})})]})]})}):null},aP=()=>{const{isAdmin:s}=rs(),t=ys(),[a,r]=j.useState([]),[n,i]=j.useState([]),[o,l]=j.useState([]),[c,d]=j.useState([]),[A,u]=j.useState(!0),[x,m]=j.useState(null),[y,g]=j.useState(""),[b,p]=j.useState("all"),[v,N]=j.useState(!1),[D,S]=j.useState(null),[E,R]=j.useState(void 0),[_,C]=j.useState(null),[L,f]=j.useState(null),[F,M]=j.useState(!1),[P,Z]=j.useState(null),[O,X]=j.useState([]),[q,V]=j.useState(1),oe=10,[H,I]=j.useState({name:"",email:"",phone:"",address:"",client_type:"PF",document:""}),[B,$]=j.useState({title:"",contract_type:"maintenance",start_date:"",end_date:"",frequency:"monthly",value:0,sla_response_time:4,sla_resolution_time:24,sla_availability:99,next_service_date:"",terms_and_conditions:"",notes:""});j.useEffect(()=>{T()},[]);const T=async()=>{try{u(!0);const he=await fU();r(he||[]),m(null)}catch(he){console.error("Error loading clients:",he),m("Erro ao carregar clientes"),r([{id:"1",name:"Joo Silva",email:"joao@email.com",phone:"(11) 99999-1234",address:"Rua das Flores, 123 - So Paulo, SP",client_type:"PF",document:"123.456.789-00",created_at:"2023-12-15T08:00:00",updated_at:"2023-12-15T08:00:00"},{id:"2",name:"Empresa ABC Ltda",email:"contato@empresaabc.com",phone:"(11) 98888-5678",address:"Av. Paulista, 1000 - So Paulo, SP",client_type:"PJ",document:"12.345.678/0001-90",created_at:"2023-12-14T08:00:00",updated_at:"2023-12-14T08:00:00"}])}finally{u(!1)}},ne=async he=>{try{return await yU(he)||[]}catch(Oe){return console.error("Error loading client contracts:",Oe),[]}},ue=async he=>{try{const{data:Oe,error:He}=await se.from("service_orders").select("*").eq("customer_id",he).order("opened_at",{ascending:!1});if(He)throw He;return Oe||[]}catch(Oe){return console.error("Error loading service orders:",Oe),[]}},me=async he=>{try{const{data:Oe,error:He}=await se.from("customer_equipment").select("*").eq("customer_id",he).order("created_at",{ascending:!1});if(He)throw He;return Oe||[]}catch(Oe){return console.error("Error loading equipments:",Oe),[]}},xe=a.filter(he=>{var dt,Bt,et;const Oe=((dt=he.name)==null?void 0:dt.toLowerCase().includes(y.toLowerCase()))||((Bt=he.email)==null?void 0:Bt.toLowerCase().includes(y.toLowerCase()))||((et=he.phone)==null?void 0:et.toLowerCase().includes(y.toLowerCase()))||!1,He=b==="all"||he.client_type===b;return Oe&&He}),Be=Math.ceil(xe.length/oe),ee=(q-1)*oe,je=ee+oe,Pe=xe.slice(ee,je),Xe=a.filter(he=>n.some(Oe=>Oe.customer_id===he.id&&Oe.status==="active")).length;j.useEffect(()=>{V(1)},[y,b]);const Ce=async he=>{try{await bU(he),r(a.filter(Oe=>Oe.id!==he)),C(null),alert("Cliente excludo com sucesso!")}catch(Oe){console.error("Error deleting client:",Oe),alert("Erro ao excluir cliente")}},K=async()=>{if(!L){alert("Por favor, selecione um cliente");return}try{const he={client_id:L.id,contract_number:`CONT-${new Date().getFullYear()}-${String(n.length+1).padStart(3,"0")}`,title:B.title,start_date:B.start_date,end_date:B.end_date,contract_type:B.contract_type,frequency:B.frequency,value:B.value,status:"active",sla_response_time:B.sla_response_time,sla_resolution_time:B.sla_resolution_time,sla_availability:B.sla_availability,next_service_date:B.next_service_date,terms_and_conditions:B.terms_and_conditions,notes:B.notes},Oe=await vU(he);i([...n,Oe]),$({title:"",contract_type:"maintenance",start_date:"",end_date:"",frequency:"monthly",value:0,sla_response_time:4,sla_resolution_time:24,sla_availability:99,next_service_date:"",terms_and_conditions:"",notes:""}),M(!1),f(null),alert("Contrato criado com sucesso!")}catch(he){console.error("Error creating contract:",he),alert("Erro ao criar contrato")}},Me=async()=>{if(P)try{const he={title:P.title,start_date:P.start_date,end_date:P.end_date,contract_type:P.contract_type,frequency:P.frequency,value:P.value,status:P.status,sla_response_time:P.sla_response_time,sla_resolution_time:P.sla_resolution_time,sla_availability:P.sla_availability,next_service_date:P.next_service_date,terms_and_conditions:P.terms_and_conditions,notes:P.notes},Oe=await wU(P.id,he);i(n.map(He=>He.id===Oe.id?Oe:He)),Z(null),alert("Contrato atualizado com sucesso!")}catch(he){console.error("Error updating contract:",he),alert("Erro ao atualizar contrato")}},qe=async he=>{try{await jU(he),i(n.filter(Oe=>Oe.id!==he)),alert("Contrato excludo com sucesso!")}catch(Oe){console.error("Error deleting contract:",Oe),alert("Erro ao excluir contrato")}},re=async he=>{if(O.includes(he))X(O.filter(Oe=>Oe!==he));else{X([...O,he]);const[Oe,He,dt]=await Promise.all([ne(he),ue(he),me(he)]);i(Bt=>[...Bt.filter(et=>et.client_id!==he),...Oe]),l(Bt=>[...Bt.filter(et=>et.customer_id!==he),...He]),d(Bt=>[...Bt.filter(et=>et.customer_id!==he),...dt])}},ie=he=>{switch(he){case"pending":return"bg-yellow-100 text-yellow-800";case"in_progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},ve=he=>{switch(he){case"pending":return"Pendente";case"in_progress":return"Em Andamento";case"completed":return"Concluda";case"cancelled":return"Cancelada";default:return he}},ye=he=>{switch(he){case"active":return"bg-green-100 text-green-800";case"expired":return"bg-red-100 text-red-800";case"cancelled":return"bg-gray-100 text-gray-800";case"suspended":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},$e=he=>{switch(he){case"active":return"Ativo";case"expired":return"Expirado";case"cancelled":return"Cancelado";case"suspended":return"Suspenso";default:return"Desconhecido"}},it=he=>{switch(he){case"maintenance":return"Manuteno";case"support":return"Suporte";case"service":return"Servio";default:return he}},Ie=he=>{switch(he){case"monthly":return"Mensal";case"quarterly":return"Trimestral";case"biannual":return"Semestral";case"annual":return"Anual";default:return"No definida"}};return e.jsxs("div",{className:"space-y-6",children:[x&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(cs,{className:"h-5 w-5 text-red-500 mr-2"}),e.jsx("span",{className:"text-red-700",children:x})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gesto de Clientes"}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs("button",{onClick:()=>N(!0),className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-2 rounded-lg flex items-center space-x-2 hover:shadow-lg transition-all",children:[e.jsx(bt,{className:"h-4 w-4"}),e.jsx("span",{children:"Novo Cliente"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg flex items-center justify-center",children:e.jsx(Nt,{className:"h-5 w-5 text-white"})})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:a.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total de Clientes"})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg flex items-center justify-center",children:e.jsx(Jt,{className:"h-5 w-5 text-white"})})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:a.filter(he=>he.client_type==="PF").length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Pessoa Fsica"})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center",children:e.jsx(Zi,{className:"h-5 w-5 text-white"})})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:a.filter(he=>he.client_type==="PJ").length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Pessoa Jurdica"})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-lg flex items-center justify-center",children:e.jsx(ut,{className:"h-5 w-5 text-white"})})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:Xe}),e.jsx("p",{className:"text-sm text-gray-600",children:"Clientes com Contrato"})]})]}),e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-md border border-gray-100",children:e.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{type:"text",placeholder:"Buscar por nome, email ou telefone...",value:y,onChange:he=>g(he.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(io,{className:"h-5 w-5 text-gray-400"}),e.jsxs("select",{value:b,onChange:he=>p(he.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todos os Tipos"}),e.jsx("option",{value:"PF",children:"Pessoa Fsica"}),e.jsx("option",{value:"PJ",children:"Pessoa Jurdica"})]})]})]})}),A?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Carregando clientes..."})]}):e.jsxs("div",{className:"space-y-4",children:[Pe.length>0?Pe.map((he,Oe)=>e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:Oe*.05},className:"bg-white rounded-xl p-6 shadow-md border border-gray-100 hover:shadow-lg transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${he.client_type==="PF"?"bg-green-100 text-green-600":"bg-blue-100 text-blue-600"}`,children:he.client_type==="PF"?e.jsx(Jt,{className:"h-6 w-6"}):e.jsx(Zi,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:he.name}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${he.client_type==="PF"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:he.client_type}),he.document&&e.jsx("span",{className:"text-xs text-gray-500",children:he.document})]})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("button",{onClick:()=>re(he.id),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:O.includes(he.id)?e.jsx(Fn,{className:"h-4 w-4"}):e.jsx(Ir,{className:"h-4 w-4"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(la,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-700",children:he.phone})]}),he.email&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Cs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-700",children:he.email})]}),e.jsxs("div",{className:"flex items-center space-x-2 md:col-span-2",children:[e.jsx(da,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-700",children:he.address})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>{S(he),R(he.id)},className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors flex items-center space-x-2",children:[e.jsx(Es,{className:"h-4 w-4"}),e.jsx("span",{children:"Editar"})]}),e.jsxs("button",{onClick:()=>C(he.id),className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors flex items-center space-x-2",children:[e.jsx(Vt,{className:"h-4 w-4"}),e.jsx("span",{children:"Excluir"})]})]}),e.jsx(rt,{children:O.includes(he.id)&&e.jsxs(W.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(ut,{className:"h-5 w-5 mr-2 text-blue-500"}),"Contratos"]}),e.jsxs("button",{onClick:()=>{f(he),M(!0)},className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors flex items-center space-x-1 text-sm",children:[e.jsx(bt,{className:"h-3 w-3"}),e.jsx("span",{children:"Novo Contrato"})]})]}),n.filter(He=>He.customer_id===he.id).length>0?e.jsx("div",{className:"space-y-3",children:n.filter(He=>He.customer_id===he.id).map(He=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:He.title}),e.jsx("p",{className:"text-sm text-gray-600",children:He.contract_number})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ye(He.status)}`,children:$e(He.status)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Tipo:"}),e.jsx("p",{className:"font-medium",children:it(He.contract_type)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Frequncia:"}),e.jsx("p",{className:"font-medium",children:Ie(He.frequency)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Valor:"}),e.jsxs("p",{className:"font-medium text-green-600",children:["R$ ",He.value.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Vigncia:"}),e.jsxs("p",{className:"font-medium",children:[new Date(He.start_date).toLocaleDateString("pt-BR")," - ",new Date(He.end_date).toLocaleDateString("pt-BR")]})]}),He.next_service_date&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Prximo Servio:"}),e.jsx("p",{className:"font-medium",children:new Date(He.next_service_date).toLocaleDateString("pt-BR")})]}),He.sla_response_time&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"SLA Resposta:"}),e.jsxs("p",{className:"font-medium",children:[He.sla_response_time,"h"]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>Z(He),className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors flex items-center space-x-1 text-sm",children:[e.jsx(Es,{className:"h-3 w-3"}),e.jsx("span",{children:"Editar"})]}),e.jsxs("button",{onClick:()=>qe(He.id),className:"px-3 py-1 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors flex items-center space-x-1 text-sm",children:[e.jsx(Vt,{className:"h-3 w-3"}),e.jsx("span",{children:"Excluir"})]})]})]},He.id))}):e.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx(ut,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Nenhum contrato cadastrado"}),e.jsx("button",{onClick:()=>{f(he),M(!0)},className:"mt-2 px-3 py-1 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm",children:"Criar Primeiro Contrato"})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center mb-3",children:[e.jsx(ea,{className:"h-5 w-5 mr-2 text-green-500"}),"Histrico de Servios"]}),o.filter(He=>He.customer_id===he.id).length>0?e.jsxs("div",{className:"space-y-2",children:[o.filter(He=>He.customer_id===he.id).slice(0,5).map(He=>e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 hover:bg-gray-100 transition-colors cursor-pointer",onClick:()=>t(`/ordens-servico/${He.id}`),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-gray-900",children:He.order_number}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${ie(He.status)}`,children:ve(He.status)})]}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-1",children:He.description||"Sem descrio"}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ot,{className:"h-3 w-3"}),He.opened_at?new Date(He.opened_at).toLocaleDateString("pt-BR"):"N/A"]}),He.total_value&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ut,{className:"h-3 w-3"}),"R$ ",He.total_value.toFixed(2)]})]})]}),e.jsx(za,{className:"h-4 w-4 text-gray-400"})]})},He.id)),o.filter(He=>He.customer_id===he.id).length>5&&e.jsxs("button",{onClick:()=>t("/ordens-servico"),className:"w-full py-2 text-sm text-blue-600 hover:text-blue-700 font-medium",children:["Ver todas as ",o.filter(He=>He.customer_id===he.id).length," ordens de servio"]})]}):e.jsxs("div",{className:"text-center py-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx(ea,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Nenhuma ordem de servio realizada"})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center mb-3",children:[e.jsx(wt,{className:"h-5 w-5 mr-2 text-purple-500"}),"Equipamentos"]}),c.filter(He=>He.customer_id===he.id).length>0?e.jsx("div",{className:"space-y-2",children:c.filter(He=>He.customer_id===he.id).map(He=>e.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:He.equipment_name||"Equipamento"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 text-xs text-gray-600",children:[He.brand&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Marca:"})," ",He.brand]}),He.model&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Modelo:"})," ",He.model]}),He.serial_number&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Srie:"})," ",He.serial_number]}),He.installation_date&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Instalado em:"})," ",new Date(He.installation_date).toLocaleDateString("pt-BR")]})]})]})})},He.id))}):e.jsxs("div",{className:"text-center py-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx(wt,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Nenhum equipamento cadastrado"})]})]})]})})]},he.id)):e.jsxs("div",{className:"bg-white rounded-xl p-10 shadow-md border border-gray-100 text-center",children:[e.jsx(Nt,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhum cliente encontrado"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"No encontramos clientes com os filtros selecionados."}),e.jsx("button",{onClick:()=>{g(""),p("all")},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Limpar filtros"})]}),xe.length>0&&Be>1&&e.jsxs("div",{className:"flex justify-center items-center space-x-2 mt-6",children:[e.jsx("button",{onClick:()=>V(he=>Math.max(he-1,1)),disabled:q===1,className:`px-4 py-2 rounded-lg ${q===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:"Anterior"}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Be},(he,Oe)=>Oe+1).map(he=>e.jsx("button",{onClick:()=>V(he),className:`w-10 h-10 rounded-lg ${q===he?"bg-gradient-to-r from-blue-500 to-purple-500 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:he},he))}),e.jsx("button",{onClick:()=>V(he=>Math.min(he+1,Be)),disabled:q===Be,className:`px-4 py-2 rounded-lg ${q===Be?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:"Prxima"}),e.jsxs("span",{className:"ml-4 text-sm text-gray-600",children:["Mostrando ",ee+1,"-",Math.min(je,xe.length)," de ",xe.length," clientes"]})]})]}),e.jsx(sP,{isOpen:v||D!==null,onClose:()=>{N(!1),S(null),R(void 0)},onSave:()=>{T(),N(!1),S(null),R(void 0)},customerId:E}),e.jsx(rt,{children:!1}),e.jsx(rt,{children:!1}),e.jsx(rt,{children:_&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>C(null),className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"relative bg-white rounded-xl p-6 w-full max-w-md shadow-2xl",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 text-red-600",children:[e.jsx(cs,{className:"h-8 w-8"}),e.jsx("h3",{className:"text-xl font-bold",children:"Confirmar Excluso"})]}),e.jsx("p",{className:"text-gray-700 mb-6",children:"Tem certeza que deseja excluir este cliente? Esta ao no pode ser desfeita."}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>C(null),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{onClick:()=>Ce(_),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Excluir"})]})]})]})}),e.jsx(rt,{children:F&&L&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>M(!1),className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"relative bg-white rounded-xl p-6 w-full max-w-2xl shadow-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Novo Contrato"}),e.jsx("button",{onClick:()=>M(!1),children:e.jsx(ht,{className:"h-6 w-6 text-gray-400"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Cliente Selecionado"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${L.client_type==="PF"?"bg-green-100 text-green-600":"bg-blue-100 text-blue-600"}`,children:L.client_type==="PF"?e.jsx(Jt,{className:"h-5 w-5"}):e.jsx(Zi,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:L.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[L.client_type," - ",L.phone]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informaes do Contrato"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ttulo do Contrato"}),e.jsx("input",{type:"text",value:B.title,onChange:he=>$({...B,title:he.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Contrato de Manuteno Preventiva",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Contrato"}),e.jsxs("select",{value:B.contract_type,onChange:he=>$({...B,contract_type:he.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"maintenance",children:"Manuteno"}),e.jsx("option",{value:"support",children:"Suporte"}),e.jsx("option",{value:"service",children:"Servio"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Frequncia"}),e.jsxs("select",{value:B.frequency,onChange:he=>$({...B,frequency:he.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"monthly",children:"Mensal"}),e.jsx("option",{value:"quarterly",children:"Trimestral"}),e.jsx("option",{value:"biannual",children:"Semestral"}),e.jsx("option",{value:"annual",children:"Anual"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Incio"}),e.jsx("input",{type:"date",value:B.start_date,onChange:he=>$({...B,start_date:he.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Trmino"}),e.jsx("input",{type:"date",value:B.end_date,onChange:he=>$({...B,end_date:he.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor do Contrato (R$)"}),e.jsx("input",{type:"number",value:B.value,onChange:he=>$({...B,value:parseFloat(he.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prximo Servio"}),e.jsx("input",{type:"date",value:B.next_service_date,onChange:he=>$({...B,next_service_date:he.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(os,{className:"h-5 w-5 mr-2 text-blue-500"}),"Configurao de SLA"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tempo de Resposta (horas)"}),e.jsx("input",{type:"number",value:B.sla_response_time,onChange:he=>$({...B,sla_response_time:parseInt(he.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tempo de Resoluo (horas)"}),e.jsx("input",{type:"number",value:B.sla_resolution_time,onChange:he=>$({...B,sla_resolution_time:parseInt(he.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Disponibilidade (%)"}),e.jsx("input",{type:"number",value:B.sla_availability,onChange:he=>$({...B,sla_availability:parseFloat(he.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",max:"100",step:"0.1"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Termos e Observaes"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Termos e Condies"}),e.jsx("textarea",{value:B.terms_and_conditions,onChange:he=>$({...B,terms_and_conditions:he.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,placeholder:"Descreva os termos e condies do contrato..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaes"}),e.jsx("textarea",{value:B.notes,onChange:he=>$({...B,notes:he.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Observaes adicionais..."})]})]})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>M(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsxs("button",{onClick:K,className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:shadow-lg",children:[e.jsx(Gt,{className:"h-4 w-4 mr-2 inline"}),"Criar Contrato"]})]})]})]})}),e.jsx(rt,{children:P&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>Z(null),className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"relative bg-white rounded-xl p-6 w-full max-w-2xl shadow-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Editar Contrato"}),e.jsx("button",{onClick:()=>Z(null),children:e.jsx(ht,{className:"h-6 w-6 text-gray-400"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informaes do Contrato"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ttulo do Contrato"}),e.jsx("input",{type:"text",value:P.title,onChange:he=>Z({...P,title:he.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Contrato"}),e.jsxs("select",{value:P.contract_type,onChange:he=>Z({...P,contract_type:he.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"maintenance",children:"Manuteno"}),e.jsx("option",{value:"support",children:"Suporte"}),e.jsx("option",{value:"service",children:"Servio"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:P.status,onChange:he=>Z({...P,status:he.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"active",children:"Ativo"}),e.jsx("option",{value:"suspended",children:"Suspenso"}),e.jsx("option",{value:"cancelled",children:"Cancelado"}),e.jsx("option",{value:"expired",children:"Expirado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Frequncia"}),e.jsxs("select",{value:P.frequency,onChange:he=>Z({...P,frequency:he.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"monthly",children:"Mensal"}),e.jsx("option",{value:"quarterly",children:"Trimestral"}),e.jsx("option",{value:"biannual",children:"Semestral"}),e.jsx("option",{value:"annual",children:"Anual"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor do Contrato (R$)"}),e.jsx("input",{type:"number",value:P.value,onChange:he=>Z({...P,value:parseFloat(he.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",step:"0.01"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(os,{className:"h-5 w-5 mr-2 text-blue-500"}),"Configurao de SLA"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tempo de Resposta (horas)"}),e.jsx("input",{type:"number",value:P.sla_response_time||0,onChange:he=>Z({...P,sla_response_time:parseInt(he.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tempo de Resoluo (horas)"}),e.jsx("input",{type:"number",value:P.sla_resolution_time||0,onChange:he=>Z({...P,sla_resolution_time:parseInt(he.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Disponibilidade (%)"}),e.jsx("input",{type:"number",value:P.sla_availability||0,onChange:he=>Z({...P,sla_availability:parseFloat(he.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",max:"100",step:"0.1"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Termos e Observaes"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Termos e Condies"}),e.jsx("textarea",{value:P.terms_and_conditions||"",onChange:he=>Z({...P,terms_and_conditions:he.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaes"}),e.jsx("textarea",{value:P.notes||"",onChange:he=>Z({...P,notes:he.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3})]})]})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>Z(null),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsxs("button",{onClick:Me,className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:shadow-lg",children:[e.jsx(Gt,{className:"h-4 w-4 mr-2 inline"}),"Salvar Alteraes"]})]})]})]})})]})},rP=({onPremiumFeature:s})=>{const[t,a]=j.useState("themes"),[r,n]=j.useState(null),[i,o]=j.useState(null),[l,c]=j.useState("desktop"),[d,A]=j.useState("light"),[u,x]=j.useState({id:"custom",name:"Tema Personalizado",primary:"#3b82f6",secondary:"#64748b",accent:"#8b5cf6",success:"#10b981",warning:"#f59e0b",error:"#ef4444",neutral:"#6b7280",background:"#ffffff",surface:"#f8fafc",text:"#1f2937"});j.useEffect(()=>{const p=localStorage.getItem("giartech-theme");if(p){const v=JSON.parse(p);o(v),m(v)}},[]);const m=p=>{const v=document.documentElement,N=p.palette;v.style.setProperty("--color-primary",N.primary),v.style.setProperty("--color-secondary",N.secondary),v.style.setProperty("--color-accent",N.accent),v.style.setProperty("--color-success",N.success),v.style.setProperty("--color-warning",N.warning),v.style.setProperty("--color-error",N.error),v.style.setProperty("--color-neutral",N.neutral),v.style.setProperty("--color-background",N.background),v.style.setProperty("--color-surface",N.surface),v.style.setProperty("--color-text",N.text)},y=p=>{o(p),m(p),localStorage.setItem("giartech-theme",JSON.stringify(p));const v=document.createElement("div");v.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 animate-fade-in",v.innerHTML=` Tema "${p.name}" aplicado com sucesso!`,document.body.appendChild(v),setTimeout(()=>{v.style.transition="opacity 0.3s",v.style.opacity="0",setTimeout(()=>v.remove(),300)},2e3)},g=()=>{const p={id:"custom-"+Date.now(),name:u.name,description:"Tema personalizado criado pelo usurio",palette:u,typography:{fontFamily:"Inter",fontSize:"14px",lineHeight:"1.5"},spacing:"8px",borderRadius:"8px",shadows:!0,animations:!0,isCustom:!0};y(p)},b=[{id:"default",name:"Tema Padro",description:"Tema clssico azul e branco",palette:{id:"default",name:"Padro",primary:"#3b82f6",secondary:"#64748b",accent:"#8b5cf6",success:"#10b981",warning:"#f59e0b",error:"#ef4444",neutral:"#6b7280",background:"#ffffff",surface:"#f8fafc",text:"#1f2937"},typography:{fontFamily:"Inter",fontSize:"14px",lineHeight:"1.5"},spacing:"8px",borderRadius:"8px",shadows:!0,animations:!0,isCustom:!1},{id:"dark",name:"Tema Escuro",description:"Tema escuro moderno",palette:{id:"dark",name:"Escuro",primary:"#60a5fa",secondary:"#94a3b8",accent:"#a78bfa",success:"#34d399",warning:"#fbbf24",error:"#f87171",neutral:"#9ca3af",background:"#111827",surface:"#1f2937",text:"#f9fafb"},typography:{fontFamily:"Inter",fontSize:"14px",lineHeight:"1.5"},spacing:"8px",borderRadius:"12px",shadows:!0,animations:!0,isCustom:!1},{id:"nature",name:"Natureza",description:"Tons verdes e terrosos",palette:{id:"nature",name:"Natureza",primary:"#059669",secondary:"#6b7280",accent:"#d97706",success:"#10b981",warning:"#f59e0b",error:"#dc2626",neutral:"#78716c",background:"#f0fdf4",surface:"#ecfdf5",text:"#1f2937"},typography:{fontFamily:"Inter",fontSize:"14px",lineHeight:"1.6"},spacing:"8px",borderRadius:"16px",shadows:!1,animations:!0,isCustom:!1}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Personalizao Visual"}),i&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Tema ativo: ",e.jsx("span",{className:"font-semibold text-green-600",children:i.name})]})]}),e.jsxs("button",{onClick:()=>alert("Novo tema em breve!"),className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-2 rounded-lg flex items-center space-x-2 hover:shadow-lg transition-all",children:[e.jsx(bt,{className:"h-4 w-4"}),e.jsx("span",{children:"Novo Tema"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>a("themes"),className:`flex-1 flex items-center justify-center space-x-2 py-4 px-6 transition-colors ${t==="themes"?"bg-blue-50 text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(Il,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Temas"})]}),e.jsxs("button",{onClick:()=>a("colors"),className:`flex-1 flex items-center justify-center space-x-2 py-4 px-6 transition-colors ${t==="colors"?"bg-blue-50 text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(xr,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Cores"})]}),e.jsxs("button",{onClick:()=>a("preview"),className:`flex-1 flex items-center justify-center space-x-2 py-4 px-6 transition-colors ${t==="preview"?"bg-blue-50 text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx($s,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Preview"})]})]}),e.jsxs("div",{className:"p-6",children:[t==="themes"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Temas Disponveis"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map((p,v)=>e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:v*.1},className:`p-6 rounded-xl border-2 cursor-pointer transition-all relative ${(i==null?void 0:i.id)===p.id?"border-green-500 bg-green-50":(r==null?void 0:r.id)===p.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>n(p),children:[(i==null?void 0:i.id)===p.id&&e.jsxs("div",{className:"absolute top-2 right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full flex items-center space-x-1",children:[e.jsx(As,{className:"h-3 w-3"}),e.jsx("span",{children:"Ativo"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex space-x-1 mb-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:p.palette.primary}}),e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:p.palette.secondary}}),e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:p.palette.accent}})]}),e.jsxs("div",{className:"w-full h-16 rounded-lg border",style:{backgroundColor:p.palette.background,borderColor:p.palette.neutral},children:[e.jsx("div",{className:"h-4 rounded-t-lg",style:{backgroundColor:p.palette.primary}}),e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"w-full h-2 rounded mb-1",style:{backgroundColor:p.palette.surface}}),e.jsx("div",{className:"w-3/4 h-2 rounded",style:{backgroundColor:p.palette.surface}})]})]})]}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:p.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:p.description}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:N=>{N.stopPropagation(),n(p),a("preview")},className:"flex-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm",children:[e.jsx($s,{className:"h-4 w-4 mr-1 inline"}),"Preview"]}),e.jsxs("button",{onClick:N=>{N.stopPropagation(),y(p)},className:`flex-1 px-3 py-1 rounded-lg transition-colors text-sm ${(i==null?void 0:i.id)===p.id?"bg-green-500 text-white":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:[e.jsx(As,{className:"h-4 w-4 mr-1 inline"}),(i==null?void 0:i.id)===p.id?"Ativo":"Aplicar"]})]})]},p.id))})]}),t==="colors"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Editor de Cores"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(u).filter(([p])=>p!=="id"&&p!=="name").map(([p,v])=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 capitalize",children:p==="primary"?"Cor Primria":p==="secondary"?"Cor Secundria":p==="accent"?"Cor de Destaque":p==="success"?"Cor de Sucesso":p==="warning"?"Cor de Aviso":p==="error"?"Cor de Erro":p==="neutral"?"Cor Neutra":p==="background"?"Cor de Fundo":p==="surface"?"Cor de Superfcie":p==="text"?"Cor do Texto":p}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"color",value:v,onChange:N=>x({...u,[p]:N.target.value}),className:"w-12 h-12 rounded-lg border border-gray-300 cursor-pointer"}),e.jsx("input",{type:"text",value:v,onChange:N=>x({...u,[p]:N.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm"}),e.jsx("button",{onClick:()=>navigator.clipboard.writeText(v),className:"p-2 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition-colors",children:e.jsx(Gr,{className:"h-4 w-4"})})]})]},p))}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:g,className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:shadow-lg transition-all",children:[e.jsx(Gt,{className:"h-4 w-4 mr-2 inline"}),"Salvar e Aplicar Paleta"]}),e.jsxs("button",{onClick:()=>x(b[0].palette),className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx(bs,{className:"h-4 w-4 mr-2 inline"}),"Resetar"]})]})]}),t==="preview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Preview do Tema"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>c("desktop"),className:`p-2 rounded-md transition-colors ${l==="desktop"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:e.jsx(Z6,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>c("tablet"),className:`p-2 rounded-md transition-colors ${l==="tablet"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:e.jsx($S,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>c("mobile"),className:`p-2 rounded-md transition-colors ${l==="mobile"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:e.jsx(Nd,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>A("light"),className:`p-2 rounded-md transition-colors ${d==="light"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:e.jsx(tg,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>A("dark"),className:`p-2 rounded-md transition-colors ${d==="dark"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:e.jsx(Xp,{className:"h-4 w-4"})})]})]})]}),e.jsx("div",{className:"bg-gray-100 p-8 rounded-xl",children:e.jsxs("div",{className:`mx-auto rounded-lg shadow-lg overflow-hidden transition-all ${l==="mobile"?"max-w-sm":l==="tablet"?"max-w-2xl":"max-w-4xl"}`,style:{backgroundColor:(r==null?void 0:r.palette.background)||u.background,color:(r==null?void 0:r.palette.text)||u.text},children:[e.jsx("div",{className:"p-4",style:{backgroundColor:(r==null?void 0:r.palette.primary)||u.primary},children:e.jsx("h3",{className:"text-white font-semibold",children:"Sistema GiarTech"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:(r==null?void 0:r.palette.surface)||u.surface},children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Ls,{className:"h-5 w-5",style:{color:(r==null?void 0:r.palette.primary)||u.primary}}),e.jsx("span",{className:"font-medium",children:"Analytics"})]}),e.jsx("p",{className:"text-2xl font-bold",children:"1,234"})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:(r==null?void 0:r.palette.surface)||u.surface},children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Nt,{className:"h-5 w-5",style:{color:(r==null?void 0:r.palette.success)||u.success}}),e.jsx("span",{className:"font-medium",children:"Usurios"})]}),e.jsx("p",{className:"text-2xl font-bold",children:"567"})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:(r==null?void 0:r.palette.surface)||u.surface},children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(wt,{className:"h-5 w-5",style:{color:(r==null?void 0:r.palette.accent)||u.accent}}),e.jsx("span",{className:"font-medium",children:"Produtos"})]}),e.jsx("p",{className:"text-2xl font-bold",children:"89"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{className:"w-full py-2 px-4 rounded-lg text-white font-medium",style:{backgroundColor:(r==null?void 0:r.palette.primary)||u.primary},children:"Boto Primrio"}),e.jsx("button",{className:"w-full py-2 px-4 rounded-lg text-white font-medium",style:{backgroundColor:(r==null?void 0:r.palette.success)||u.success},children:"Boto de Sucesso"}),e.jsx("button",{className:"w-full py-2 px-4 rounded-lg text-white font-medium",style:{backgroundColor:(r==null?void 0:r.palette.warning)||u.warning},children:"Boto de Aviso"})]})]})]})})]})]})]})]})},nP=({isOpen:s,onClose:t,onSave:a,title:r,children:n,showControls:i=!0,currentStep:o,totalSteps:l,onPrevStep:c,onNextStep:d})=>e.jsx(rt,{children:s&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs(W.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"relative bg-white rounded-xl p-6 w-full max-w-4xl shadow-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($s,{className:"h-5 w-5 text-blue-500"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:r})]}),e.jsx("button",{onClick:t,children:e.jsx(ht,{className:"h-6 w-6 text-gray-400"})})]}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200 mb-6",children:n}),i&&e.jsxs("div",{className:"flex justify-between items-center",children:[o!==void 0&&l!==void 0?e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:c,disabled:o<=0,className:`flex items-center space-x-1 px-4 py-2 rounded-lg ${o<=0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(An,{className:"h-4 w-4"}),e.jsx("span",{children:"Anterior"})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Passo ",o+1," de ",l]}),e.jsxs("button",{onClick:d,disabled:o>=l-1,className:`flex items-center space-x-1 px-4 py-2 rounded-lg ${o>=l-1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx("span",{children:"Prximo"}),e.jsx(za,{className:"h-4 w-4"})]})]}):e.jsx("div",{}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Fechar"}),a&&e.jsxs("button",{onClick:a,className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:shadow-lg transition-all duration-200 flex items-center space-x-2",children:[e.jsx(Gt,{className:"h-4 w-4"}),e.jsx("span",{children:"Salvar Alteraes"})]})]})]})]})]})}),iP=({onPremiumFeature:s,onEnterpriseFeature:t})=>{var Z;const{isPremium:a,isEnterprise:r}=rs(),[n,i]=j.useState([{id:"inventory",name:"Estoque de Materiais",description:"Controle de produtos, quantidades e movimentaes",icon:wt,enabled:!0,metrics:["Quantidade em estoque","Produtos em falta","Valor total","Rotatividade"],color:"from-blue-500 to-cyan-500"},{id:"orders",name:"Ordens de Servio",description:"Gesto de pedidos e acompanhamento de status",icon:ea,enabled:!0,metrics:["Ordens abertas","Ordens concludas","Tempo mdio","Satisfao"],color:"from-green-500 to-emerald-500"},{id:"team",name:"Desempenho da Equipe",description:"Produtividade e performance dos colaboradores",icon:Nt,enabled:!1,metrics:["Tarefas concludas","Horas trabalhadas","Eficincia","Avaliaes"],color:"from-purple-500 to-pink-500",requiresPremium:!0},{id:"financial",name:"Financeiro",description:"Receitas, despesas e indicadores financeiros",icon:Ut,enabled:!1,metrics:["Receita mensal","Despesas","Lucro lquido","Fluxo de caixa"],color:"from-orange-500 to-red-500",requiresPremium:!0},{id:"delivery",name:"Entregas",description:"Acompanhamento de entregas e logstica",icon:sg,enabled:!0,metrics:["Entregas no prazo","Atrasos","Distncia percorrida","Custos"],color:"from-indigo-500 to-purple-500"},{id:"quality",name:"Qualidade",description:"Controle de qualidade e no conformidades",icon:cs,enabled:!1,metrics:["No conformidades","Reclamaes","ndice de qualidade","Melhorias"],color:"from-yellow-500 to-orange-500",requiresEnterprise:!0}]),[o,l]=j.useState([{id:"realtime",name:"Monitoramento em Tempo Real",description:"Configuraes para monitoramento em tempo real",icon:Fs,requiresEnterprise:!0,settings:[{id:"interval",name:"Intervalo de Atualizao",description:"Frequncia de atualizao dos dados em tempo real",type:"select",value:"5s",options:["1s","5s","10s","30s","1m"]},{id:"alerts",name:"Alertas Automticos",description:"Enviar alertas automticos quando mtricas ultrapassarem limites",type:"toggle",value:!0},{id:"threshold",name:"Limite de Alerta",description:"Percentual de desvio para disparar alertas",type:"range",value:15,min:5,max:50,step:5}]},{id:"security",name:"Segurana Avanada",description:"Configuraes de segurana para monitoramento",icon:os,requiresEnterprise:!0,settings:[{id:"encryption",name:"Criptografia de Dados",description:"Criptografar dados sensveis de monitoramento",type:"toggle",value:!0},{id:"access",name:"Controle de Acesso",description:"Nvel de permisso para visualizar dados de monitoramento",type:"select",value:"admin",options:["admin","manager","all"]},{id:"audit",name:"Trilha de Auditoria",description:"Manter logs de acesso aos dados de monitoramento",type:"toggle",value:!0}]},{id:"notifications",name:"Notificaes",description:"Configuraes de notificaes de monitoramento",icon:En,requiresEnterprise:!0,settings:[{id:"channels",name:"Canais de Notificao",description:"Canais para envio de notificaes",type:"select",value:"all",options:["email","push","sms","all"]},{id:"frequency",name:"Frequncia de Resumos",description:"Frequncia de envio de resumos de monitoramento",type:"select",value:"daily",options:["hourly","daily","weekly"]},{id:"quiet",name:"Perodo de Silncio",description:"Horrio em que notificaes no sero enviadas",type:"input",value:"22:00 - 08:00"}]},{id:"integration",name:"Integraes",description:"Configuraes de integrao com sistemas externos",icon:_S,requiresEnterprise:!0,settings:[{id:"api",name:"API Externa",description:"Integrar com API externa para monitoramento",type:"toggle",value:!1},{id:"endpoint",name:"Endpoint da API",description:"URL do endpoint da API externa",type:"input",value:"https://api.example.com/monitoring"},{id:"format",name:"Formato de Dados",description:"Formato dos dados enviados para API externa",type:"select",value:"json",options:["json","xml","csv"]}]},{id:"storage",name:"Armazenamento de Dados",description:"Configuraes de armazenamento de dados de monitoramento",icon:jd,requiresEnterprise:!0,settings:[{id:"retention",name:"Perodo de Reteno",description:"Tempo de reteno dos dados de monitoramento",type:"select",value:"90d",options:["30d","90d","180d","365d","unlimited"]},{id:"compression",name:"Compresso de Dados",description:"Comprimir dados histricos para economizar espao",type:"toggle",value:!0},{id:"backup",name:"Backup Automtico",description:"Frequncia de backup dos dados de monitoramento",type:"select",value:"daily",options:["daily","weekly","monthly"]}]}]),[c,d]=j.useState(!1),[A,u]=j.useState(!1),[x,m]=j.useState(((Z=o[0])==null?void 0:Z.id)||""),[y,g]=j.useState({name:"",description:"",metrics:[""]}),[b,p]=j.useState(null),[v,N]=j.useState(["areas","enterprise"]),[D,S]=j.useState(!1),E=O=>{N(X=>X.includes(O)?X.filter(q=>q!==O):[...X,O])},R=O=>{const X=n.find(V=>V.id===O);if(X!=null&&X.requiresPremium&&!a){s&&s("Monitoramento Avanado");return}if(X!=null&&X.requiresEnterprise&&!r){t&&t("Monitoramento Enterprise");return}i(n.map(V=>V.id===O?{...V,enabled:!V.enabled}:V));const q=document.getElementById(`area-${O}`);q&&(q.classList.add("bg-blue-50"),setTimeout(()=>{q.classList.remove("bg-blue-50")},300))},_=()=>{console.log("Configuraes salvas:",n.filter(X=>X.enabled));const O=document.getElementById("save-config-button");if(O){const X=O.innerText;O.innerText="Salvo!",O.classList.add("bg-green-500"),O.classList.remove("from-green-500","to-emerald-500"),setTimeout(()=>{O.innerText=X,O.classList.remove("bg-green-500"),O.classList.add("bg-gradient-to-r","from-green-500","to-emerald-500")},2e3)}alert("Configuraes de monitoramento salvas com sucesso!")},C=()=>{g(O=>({...O,metrics:[...O.metrics,""]}))},L=(O,X)=>{g(q=>({...q,metrics:q.metrics.map((V,oe)=>oe===O?X:V)}))},f=O=>{g(X=>({...X,metrics:X.metrics.filter((q,V)=>V!==O)}))},F=()=>{if(!a){s&&s("reas de Monitoramento Personalizadas"),d(!1);return}if(y.name.trim()){const O={id:Date.now().toString(),name:y.name,description:y.description,icon:Ls,enabled:!0,metrics:y.metrics.filter(X=>X.trim()),color:"from-gray-500 to-gray-600"};i([...n,O]),g({name:"",description:"",metrics:[""]}),d(!1),setTimeout(()=>{const X=document.getElementById(`area-${O.id}`);X&&(X.classList.add("bg-green-50"),setTimeout(()=>{X.classList.remove("bg-green-50")},1e3))},100)}},M=(O,X,q)=>{if(!r){t&&t("Configuraes Enterprise");return}l(oe=>oe.map(H=>H.id===O?{...H,settings:H.settings.map(I=>I.id===X?{...I,value:q}:I)}:H));const V=document.getElementById(`setting-${O}-${X}`);V&&(V.classList.add("bg-blue-50"),setTimeout(()=>{V.classList.remove("bg-blue-50")},300))},P=O=>{p(O),u(!0)};return e.jsxs("div",{className:"p-3 space-y-3",children:[e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl p-3 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-base font-bold text-gray-900 mb-1",children:"Configurao de Monitoramento"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Configure quais reas voc deseja monitorar nas anlises"})]}),e.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[e.jsxs("button",{onClick:()=>S(!D),className:"bg-blue-100 text-blue-700 px-2 py-1.5 rounded-lg flex items-center space-x-1 hover:bg-blue-200 transition-all text-xs",children:[e.jsx(b3,{className:"h-3 w-3"}),e.jsx("span",{children:"Ajuda"})]}),e.jsxs("button",{onClick:()=>d(!0),className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-2 py-1.5 rounded-lg flex items-center space-x-1 hover:shadow-lg transition-all text-xs",children:[e.jsx(bt,{className:"h-3 w-3"}),e.jsx("span",{children:"Nova rea"})]}),e.jsxs("button",{id:"save-config-button",onClick:_,className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white px-2 py-1.5 rounded-lg flex items-center space-x-1 hover:shadow-lg transition-all text-xs",children:[e.jsx(Gt,{className:"h-3 w-3"}),e.jsx("span",{children:"Salvar"})]})]})]}),!a&&e.jsx("div",{className:"mt-3 p-2 bg-blue-50 border border-blue-100 rounded-lg",children:e.jsxs("p",{className:"text-xs text-blue-700 flex items-center",children:[e.jsx(xr,{className:"h-3 w-3 mr-1"}),"Plano Bsico: Limitado a 3 reas de monitoramento. Faa upgrade para monitoramento avanado."]})})]}),e.jsx(rt,{children:D&&e.jsxs(W.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-blue-50 rounded-xl p-3 shadow-md border border-blue-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h2",{className:"text-sm font-semibold text-blue-800 flex items-center",children:[e.jsx(pl,{className:"h-4 w-4 mr-1"}),"Como configurar o monitoramento"]}),e.jsx("button",{onClick:()=>S(!1),className:"text-blue-500 hover:text-blue-700 p-1 rounded-full hover:bg-blue-100",children:e.jsx(ht,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"bg-white rounded-lg p-2 border border-blue-200",children:[e.jsx("h3",{className:"font-medium text-blue-800 mb-1 text-xs",children:"reas de Monitoramento"}),e.jsx("p",{className:"text-xs text-blue-700",children:"Ative ou desative reas especficas para monitoramento. Cada rea contm mtricas relevantes que sero exibidas nos dashboards e relatrios."})]}),e.jsxs("div",{className:"bg-white rounded-lg p-2 border border-blue-200",children:[e.jsx("h3",{className:"font-medium text-blue-800 mb-1 text-xs",children:"Configuraes Enterprise"}),e.jsx("p",{className:"text-xs text-blue-700",children:"Configure opes avanadas como monitoramento em tempo real, segurana, notificaes e integraes. Disponvel apenas para planos Enterprise."})]}),e.jsxs("div",{className:"bg-white rounded-lg p-2 border border-blue-200",children:[e.jsx("h3",{className:"font-medium text-blue-800 mb-1 text-xs",children:"Dicas de Uso"}),e.jsxs("ul",{className:"text-xs text-blue-700 space-y-1 list-disc pl-4",children:[e.jsx("li",{children:"Clique no cone de olho para ativar/desativar uma rea"}),e.jsx("li",{children:'Use o boto "Nova rea" para criar reas personalizadas'}),e.jsx("li",{children:'Clique em "Salvar" aps fazer alteraes'}),e.jsx("li",{children:"Use o boto de visualizao para ver detalhes de cada rea"})]})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>E("areas"),children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-900 flex items-center",children:[e.jsx(xr,{className:"h-4 w-4 mr-1 text-blue-500"}),"reas de Monitoramento"]}),v.includes("areas")?e.jsx(Fn,{className:"h-4 w-4 text-gray-500"}):e.jsx(Ir,{className:"h-4 w-4 text-gray-500"})]}),e.jsx(rt,{children:v.includes("areas")&&e.jsx(W.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-3",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2",children:n.map(O=>e.jsxs(W.div,{id:`area-${O.id}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-white rounded-lg p-3 border border-gray-100 transition-all duration-200 ${O.enabled?"ring-1 ring-blue-200":"opacity-75"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:`w-8 h-8 bg-gradient-to-r ${O.color} rounded-lg flex items-center justify-center`,children:e.jsx(O.icon,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"flex items-center space-x-1",children:[O.requiresPremium&&!a||O.requiresEnterprise&&!r?e.jsx("div",{className:"p-1.5 bg-gray-100 text-gray-400 rounded-lg",children:e.jsx(Va,{className:"h-3.5 w-3.5"})}):e.jsx("button",{onClick:()=>R(O.id),className:`p-1.5 rounded-lg transition-colors ${O.enabled?"bg-green-100 text-green-600 hover:bg-green-200":"bg-gray-100 text-gray-400 hover:bg-gray-200"}`,"aria-label":O.enabled?"Desativar rea":"Ativar rea",children:O.enabled?e.jsx($s,{className:"h-3.5 w-3.5"}):e.jsx(Bl,{className:"h-3.5 w-3.5"})}),e.jsx("button",{onClick:()=>P(O),className:"p-1.5 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors","aria-label":"Visualizar detalhes",children:e.jsx($s,{className:"h-3.5 w-3.5"})})]})]}),e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:O.name}),e.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:O.description}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-700",children:"Mtricas:"}),e.jsxs("div",{className:"space-y-0.5",children:[O.metrics.slice(0,2).map((X,q)=>e.jsxs("div",{className:"flex items-center text-xs text-gray-600",children:[e.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full mr-1.5"}),X]},q)),O.metrics.length>2&&e.jsxs("div",{className:"text-xs text-gray-500",children:["+",O.metrics.length-2," mais"]})]})]}),e.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[e.jsx("div",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${O.enabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:O.enabled?"Ativo":"Inativo"}),(O.requiresPremium||O.requiresEnterprise)&&e.jsxs("div",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 flex items-center",children:[e.jsx(Va,{className:"h-2.5 w-2.5 mr-0.5"}),O.requiresEnterprise?"Enterprise":"Premium"]})]})]},O.id))})})})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>E("enterprise"),children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-900 flex items-center",children:[e.jsx(os,{className:"h-4 w-4 mr-1 text-purple-500"}),"Configuraes Enterprise"]}),v.includes("enterprise")?e.jsx(Fn,{className:"h-4 w-4 text-gray-500"}):e.jsx(Ir,{className:"h-4 w-4 text-gray-500"})]}),e.jsx(rt,{children:v.includes("enterprise")&&e.jsx(W.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-3",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-b border-gray-200 mb-3 overflow-x-auto hide-scrollbar",children:e.jsx("div",{className:"flex",children:o.map(O=>e.jsxs("button",{onClick:()=>m(O.id),className:`flex items-center space-x-1 px-3 py-1.5 border-b-2 whitespace-nowrap text-xs ${x===O.id?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(O.icon,{className:"h-3 w-3"}),e.jsx("span",{children:O.name})]},O.id))})}),o.map(O=>e.jsxs("div",{className:x===O.id?"block":"hidden",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:O.name}),e.jsx("p",{className:"text-xs text-gray-600",children:O.description})]}),e.jsx("div",{className:"space-y-3",children:O.settings.map(X=>{var q;return e.jsxs("div",{id:`setting-${O.id}-${X.id}`,className:"bg-gray-50 rounded-lg p-3 transition-colors duration-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:X.name}),e.jsx("p",{className:"text-xs text-gray-600",children:X.description})]}),X.type==="toggle"&&e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:X.value,onChange:()=>M(O.id,X.id,!X.value),className:"sr-only peer"}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-purple-600"})]})]}),X.type==="select"&&e.jsx("select",{value:X.value,onChange:V=>M(O.id,X.id,V.target.value),className:"w-full px-2 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent mt-1 text-xs",children:(q=X.options)==null?void 0:q.map(V=>e.jsx("option",{value:V,children:V},V))}),X.type==="input"&&e.jsx("input",{type:"text",value:X.value,onChange:V=>M(O.id,X.id,V.target.value),className:"w-full px-2 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent mt-1 text-xs"}),X.type==="range"&&e.jsxs("div",{className:"mt-1",children:[e.jsx("input",{type:"range",min:X.min,max:X.max,step:X.step,value:X.value,onChange:V=>M(O.id,X.id,parseInt(V.target.value)),className:"w-full h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsxs("span",{children:[X.min,"%"]}),e.jsxs("span",{children:[X.value,"%"]}),e.jsxs("span",{children:[X.max,"%"]})]})]})]},X.id)})})]},O.id))]}):e.jsxs("div",{className:"py-6 text-center",children:[e.jsx(os,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:"Recursos Enterprise"}),e.jsx("p",{className:"text-xs text-gray-600 mb-4 max-w-md mx-auto",children:"Acesse configuraes avanadas de monitoramento com o plano Enterprise."}),e.jsx("button",{onClick:()=>t&&t("Configuraes Enterprise"),className:"px-4 py-1.5 bg-gradient-to-r from-purple-500 to-indigo-500 text-white rounded-lg hover:shadow-lg transition-all text-xs",children:"Ver Plano Enterprise"})]})})})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl p-3 shadow-lg border border-gray-100",children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Resumo da Configurao"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[e.jsxs("div",{className:"text-center p-2 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600",children:n.filter(O=>O.enabled).length}),e.jsx("div",{className:"text-xs text-gray-600",children:"reas Ativas"})]}),e.jsxs("div",{className:"text-center p-2 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:n.filter(O=>O.enabled).reduce((O,X)=>O+X.metrics.length,0)}),e.jsx("div",{className:"text-xs text-gray-600",children:"Mtricas Monitoradas"})]}),e.jsxs("div",{className:"text-center p-2 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[Math.round(n.filter(O=>O.enabled).length/n.length*100),"%"]}),e.jsx("div",{className:"text-xs text-gray-600",children:"Cobertura"})]})]}),!r&&e.jsx("div",{className:"mt-3 p-2 bg-purple-50 border border-purple-100 rounded-lg",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ls,{className:"h-4 w-4 text-purple-600 mr-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-purple-800 text-xs",children:"Monitoramento em Tempo Real"}),e.jsx("p",{className:"text-xs text-purple-600",children:"Alertas instantneos e dashboards ao vivo"})]})]}),e.jsxs("button",{onClick:()=>t&&t("Monitoramento em Tempo Real"),className:"px-2 py-1 bg-purple-200 text-purple-700 rounded-lg flex items-center space-x-1 hover:bg-purple-300 transition-colors text-xs",children:[e.jsx(Va,{className:"h-2.5 w-2.5 mr-0.5"}),e.jsx("span",{children:"Enterprise"}),e.jsx(vd,{className:"h-2.5 w-2.5 ml-0.5"})]})]})})]}),e.jsx(rt,{children:c&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>d(!1),className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"relative bg-white rounded-xl p-4 w-full max-w-md shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Nova rea de Monitoramento"}),e.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600 p-1 rounded-full hover:bg-gray-100","aria-label":"Fechar",children:e.jsx(ht,{className:"h-5 w-5"})})]}),a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Nome da rea"}),e.jsx("input",{type:"text",value:y.name,onChange:O=>g({...y,name:O.target.value}),className:"w-full px-2 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Ex: Vendas Online"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{value:y.description,onChange:O=>g({...y,description:O.target.value}),className:"w-full px-2 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",rows:2,placeholder:"Descreva o que ser monitorado nesta rea"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Mtricas"}),e.jsxs("button",{onClick:C,className:"text-blue-600 hover:text-blue-800 text-xs flex items-center",children:[e.jsx(bt,{className:"h-3 w-3 mr-0.5"}),"Adicionar"]})]}),e.jsx("div",{className:"space-y-1.5",children:y.metrics.map((O,X)=>e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("input",{type:"text",value:O,onChange:q=>L(X,q.target.value),className:"flex-1 px-2 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Nome da mtrica"}),y.metrics.length>1&&e.jsx("button",{onClick:()=>f(X),className:"text-red-500 hover:text-red-700 p-1 rounded-full hover:bg-red-50","aria-label":"Remover mtrica",children:e.jsx(ht,{className:"h-3 w-3"})})]},X))})]})]}),e.jsxs("div",{className:"flex space-x-2 mt-4",children:[e.jsx("button",{onClick:()=>d(!1),className:"flex-1 px-3 py-1.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 text-sm",children:"Cancelar"}),e.jsx("button",{onClick:F,className:"flex-1 px-3 py-1.5 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:shadow-lg text-sm",children:"Criar rea"})]})]}):e.jsxs("div",{className:"text-center py-5",children:[e.jsx(Va,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:"Recurso Premium"}),e.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:"reas de monitoramento personalizadas esto disponveis apenas para assinantes do plano Premium."}),e.jsx("button",{onClick:()=>{s&&s("reas de Monitoramento Personalizadas"),d(!1)},className:"px-4 py-1.5 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:shadow-lg transition-all text-sm",children:"Ver Plano Premium"})]})]})]})}),e.jsx(nP,{isOpen:A,onClose:()=>u(!1),title:`Preview: ${(b==null?void 0:b.name)||"Configurao"}`,children:b&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${b.color} rounded-xl flex items-center justify-center`,children:e.jsx(b.icon,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900",children:b.name}),e.jsx("p",{className:"text-sm text-gray-600",children:b.description})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2 text-sm",children:"Mtricas Monitoradas"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:b.metrics.map((O,X)=>e.jsxs("div",{className:"flex items-center space-x-1.5 p-1.5 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-xs text-gray-700",children:O})]},X))})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2 text-sm",children:"Visualizao de Dashboard"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 h-32 flex items-center justify-center",children:e.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["Aqui ser exibido o dashboard de monitoramento para ",b.name.toLowerCase(),".",e.jsx("br",{}),e.jsx("span",{className:"text-xs",children:"Os dados sero atualizados em tempo real quando esta rea estiver ativa."})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2 text-sm",children:"Status"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${b.enabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:b.enabled?"Ativo":"Inativo"}),(b.requiresPremium||b.requiresEnterprise)&&e.jsxs("div",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 flex items-center",children:[e.jsx(Va,{className:"h-2.5 w-2.5 mr-0.5"}),b.requiresEnterprise?"Enterprise":"Premium"]})]})]})]})})]})},lv=(s,t)=>{const[a,r,n]=s.split("-").map(Number),[i,o]=t.split(":").map(Number);return new Date(a,r-1,n,i,o,0)},Ji=s=>{const t=s.getFullYear(),a=String(s.getMonth()+1).padStart(2,"0"),r=String(s.getDate()).padStart(2,"0");return`${t}-${a}-${r}`},Al=s=>{const t=String(s.getHours()).padStart(2,"0"),a=String(s.getMinutes()).padStart(2,"0");return`${t}:${a}`},oP=s=>{const t=s.start_date||s.start_time,a=s.end_date||s.start_date||s.start_time;if(!t)return console.error("Event without start date:",s),null;const r=new Date(t),n=new Date(a);return isNaN(r.getTime())||isNaN(n.getTime())?(console.error("Invalid date in event:",s),null):{id:s.id,title:s.title||"Sem ttulo",start:r,end:n,date:Ji(r),time:Al(r),endDate:Ji(n),endTime:Al(n),type:s.event_type||"pessoal",priority:s.priority||"medium",status:s.status||"a_fazer",assignedTo:s.employee_id,location:s.location||"",description:s.description||s.notes||"",customer:s.customer||null,employee:s.employee||null,service_order:s.service_order||null}},kx=s=>{let t,a;if(typeof s.start=="string"||!s.start){const i=s.date||Ji(new Date),o=s.time||"00:00";t=lv(i,o);const l=s.endDate||i,c=s.endTime||o;a=lv(l,c)}else t=s.start instanceof Date?s.start:new Date(s.start),a=s.end instanceof Date?s.end:new Date(s.end);if(isNaN(t.getTime()))throw new Error("Data de incio invlida");if(isNaN(a.getTime()))throw new Error("Data de trmino invlida");if(a<t)throw new Error("Data de trmino no pode ser anterior  data de incio");const r=i=>!i||typeof i!="string"?!1:/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(i),n={title:s.title,start_date:t.toISOString(),end_date:a.toISOString(),event_type:s.type||"pessoal",priority:s.priority||"medium",status:s.status||"a_fazer"};return r(s.assignedTo)&&(n.employee_id=s.assignedTo),r(s.customerId)&&(n.customer_id=s.customerId),r(s.serviceOrderId)&&(n.service_order_id=s.serviceOrderId),s.location&&s.location.trim()&&(n.location=s.location),s.description&&s.description.trim()&&(n.description=s.description),n},lP=s=>{const t=[];return s.forEach(a=>{const r=new Date(a.start),n=new Date(a.end);if(cv(r,n)){t.push({...a,id:a.id,date:Ji(r),time:Al(r),endDate:Ji(n),endTime:Al(n)});return}const i=new Date(r);let o=0;for(;i<=n;){const c=cv(i,n)?new Date(n):new Date(i.getFullYear(),i.getMonth(),i.getDate(),23,59,59),d=Ji(i);t.push({...a,id:`${a.id}-${d}`,originalId:a.id,start:new Date(i),end:c,date:d,time:Al(i),endDate:Ji(c),endTime:Al(c),isMultiDay:!0,dayIndex:o}),i.setDate(i.getDate()+1),i.setHours(0,0,0,0),o++}}),t},cv=(s,t)=>s.getFullYear()===t.getFullYear()&&s.getMonth()===t.getMonth()&&s.getDate()===t.getDate(),cP=({onPremiumFeature:s})=>{const{isPremium:t}=rs(),[a,r]=j.useState(new Date),[n,i]=j.useState("calendar"),[o,l]=j.useState("monthly"),[c,d]=j.useState(!1),[A,u]=j.useState(null),[x,m]=j.useState(null),[y,g]=j.useState([]),[b,p]=j.useState(!0);j.useEffect(()=>{v()},[]);const v=async()=>{try{p(!0),console.log(" Loading agenda events...");const de=await NU();console.log(` Received ${de.length} events from database`);const Ee=de.map(oP).filter(Ze=>Ze!==null);console.log(` Mapped ${Ee.length} calendar events`);const Qe=lP(Ee);console.log(` Expanded to ${Qe.length} events (multi-day)`),g(Qe),console.log(" Events loaded successfully")}catch(de){console.error(" Error loading events:",de),g([])}finally{p(!1)}},[N,D]=j.useState({title:"",date:"",time:"",endDate:"",endTime:"",type:"pessoal",priority:"medium",status:"a_fazer",location:"",assignedTo:"",customerId:"",serviceOrderId:"",description:""}),[S,E]=j.useState(""),[R,_]=j.useState([]),[C,L]=j.useState(""),[f,F]=j.useState([]),[M,P]=j.useState(""),[Z,O]=j.useState([]),[X,q]=j.useState("month"),[V,oe]=j.useState("date");j.useEffect(()=>{(async()=>{if(S.length>=2){const{data:Ee}=await se.from("customers").select("id, nome_razao, nome_fantasia, email, telefone, celular, tipo_pessoa, cpf, cnpj").or(`nome_razao.ilike.%${S}%,nome_fantasia.ilike.%${S}%,cpf.ilike.%${S}%,cnpj.ilike.%${S}%`).limit(10);_(Ee||[])}else _([])})()},[S]),j.useEffect(()=>{(async()=>{if(C.length>=2){const{data:Ee}=await se.from("employees").select("id, name, email, phone").ilike("name",`%${C}%`).limit(10);F(Ee||[])}else F([])})()},[C]),j.useEffect(()=>{(async()=>{if(M.length>=1){const{data:Ee}=await se.from("service_orders").select("id, order_number, status, customer_id, customers(nome_razao, nome_fantasia)").or(`order_number.ilike.%${M}%`).limit(10);O(Ee||[])}else O([])})()},[M]);function H(){const de=new Date;return de.setDate(de.getDate()+1),de.toISOString().split("T")[0]}const I=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],B=["D","S","T","Q","Q","S","S"],$=de=>{const Ee=de.getFullYear(),Qe=de.getMonth(),Ze=new Date(Ee,Qe,1),It=new Date(Ee,Qe+1,0).getDate(),lt=Ze.getDay(),Tt=[];for(let ft=lt-1;ft>=0;ft--){const _t=new Date(Ee,Qe,-ft);Tt.push({date:_t,isCurrentMonth:!1})}for(let ft=1;ft<=It;ft++){const _t=new Date(Ee,Qe,ft);Tt.push({date:_t,isCurrentMonth:!0})}const Yt=42-Tt.length;for(let ft=1;ft<=Yt;ft++){const _t=new Date(Ee,Qe+1,ft);Tt.push({date:_t,isCurrentMonth:!1})}return Tt},T=de=>{const Ee=de.toISOString().split("T")[0];return y.filter(Qe=>Qe.date===Ee)},ne=()=>{const de=new Date().toISOString().split("T")[0];return y.filter(Ee=>Ee.date===de).sort((Ee,Qe)=>Ee.time.localeCompare(Qe.time))},ue=()=>{const de=H();return y.filter(Ee=>Ee.date===de).sort((Ee,Qe)=>Ee.time.localeCompare(Qe.time))},me=()=>{r(new Date(a.getFullYear(),a.getMonth()-1))},xe=()=>{r(new Date(a.getFullYear(),a.getMonth()+1))},Be=de=>{if(m(de),D(Ee=>({...Ee,date:de.toISOString().split("T")[0]})),!t&&y.length>=3){s&&s("Eventos Ilimitados");return}d(!0)},ee=async()=>{if(N.title&&N.date&&N.time)try{console.log("Creating event with data:",N);const de=kx(N);console.log("Mapped to agenda event:",de);const Ee=await _U(de);console.log("Event created:",Ee),await v(),D({title:"",date:"",time:"",endDate:"",endTime:"",type:"pessoal",priority:"medium",status:"a_fazer",location:"",assignedTo:"",customerId:"",serviceOrderId:"",description:""}),E(""),L(""),P(""),d(!1)}catch(de){console.error("Error creating event:",de),alert(`Erro ao criar evento: ${de instanceof Error?de.message:"Verifique os campos de data e hora."}`)}else alert("Por favor, preencha ttulo, data e horrio de incio.")},je=async()=>{if(A)try{const de=kx(A),Ee=A.originalId||A.id;await Gh(Ee,de),await v(),u(null)}catch(de){console.error("Error updating event:",de),alert("Erro ao atualizar evento")}},Pe=async de=>{if(confirm("Tem certeza que deseja excluir este evento?"))try{const Ee=y.find(Ze=>Ze.id===de),Qe=(Ee==null?void 0:Ee.originalId)||de;await CU(Qe),await v(),u(null)}catch(Ee){console.error("Error deleting event:",Ee),alert("Erro ao excluir evento")}},Xe=async de=>{try{const Ee=y.find(Ze=>Ze.id===de),Qe=(Ee==null?void 0:Ee.originalId)||de;await Gh(Qe,{status:"feito"}),await v()}catch(Ee){console.error("Error completing task:",Ee),alert("Erro ao completar tarefa")}},Ce=de=>({pessoal:"bg-purple-600",networking:"bg-blue-500",financeiro:"bg-green-500",operacional:"bg-orange-500",cobrar:"bg-yellow-500",pagar:"bg-red-500"})[de]||"bg-gray-500",K=de=>{switch(de){case"pessoal":return"Pessoal";case"networking":return"Networking";case"financeiro":return"Financeiro";case"operacional":return"Operacional";case"cobrar":return"Cobrar";case"pagar":return"Pagar";default:return"Evento"}},Me=de=>{switch(de){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},qe=de=>{switch(de){case"high":return"Alta";case"medium":return"Mdia";case"low":return"Baixa";default:return"Normal"}},re=de=>{switch(de){case"a_fazer":return"bg-yellow-100 text-yellow-800";case"em_andamento":return"bg-blue-100 text-blue-800";case"feito":return"bg-green-100 text-green-800";case"cancelado":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},ie=de=>{switch(de){case"a_fazer":return"A Fazer";case"em_andamento":return"Em Andamento";case"feito":return"Concludo";case"cancelado":return"Cancelado";default:return"Desconhecido"}},ve=()=>{const de=new Date,Ee=de.getFullYear(),Qe=de.getMonth();return[...y.filter(It=>{const lt=new Date(It.date),Tt=lt.getFullYear(),Yt=lt.getMonth();switch(X){case"month":return Yt===Qe&&Tt===Ee;case"quarter":const ft=Qe-1,_t=Qe+1;return ft<0?Yt===11&&Tt===Ee-1||Yt===Qe&&Tt===Ee||Yt===_t&&Tt===Ee:_t>11?Yt===ft&&Tt===Ee||Yt===Qe&&Tt===Ee||Yt===0&&Tt===Ee+1:Tt===Ee&&Yt>=ft&&Yt<=_t;case"next3":const Xt=Qe+2;return Xt>11?Tt===Ee&&Yt>=Qe||Tt===Ee+1&&Yt<=Xt-12:Tt===Ee&&Yt>=Qe&&Yt<=Xt;default:return!0}})].sort((It,lt)=>{switch(V){case"date":const Tt=new Date(It.date).getTime()-new Date(lt.date).getTime();return Tt!==0?Tt:It.time.localeCompare(lt.time);case"priority":const Yt={urgent:0,high:1,medium:2,low:3},ft=Yt[It.priority]??4,_t=Yt[lt.priority]??4;return ft!==_t?ft-_t:new Date(It.date).getTime()-new Date(lt.date).getTime();case"status":const Xt={a_fazer:0,em_andamento:1,feito:2,cancelado:3},pr=Xt[It.status]??4,Ts=Xt[lt.status]??4;return pr!==Ts?pr-Ts:new Date(It.date).getTime()-new Date(lt.date).getTime();case"type":const Ra=(It.type||"").localeCompare(lt.type||"");return Ra!==0?Ra:new Date(It.date).getTime()-new Date(lt.date).getTime();default:return 0}})},ye=()=>{const de=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],Ee=new Date,Qe=Ee.getMonth(),Ze=Ee.getFullYear();switch(X){case"month":return`${de[Qe]} ${Ze}`;case"quarter":const Ye=Qe===0?11:Qe-1,It=Qe===11?0:Qe+1;return`${de[Ye]} - ${de[Qe]} - ${de[It]}`;case"next3":const lt=(Qe+1)%12,Tt=(Qe+2)%12;return`${de[Qe]} - ${de[lt]} - ${de[Tt]}`;default:return de[Qe]}},$e=()=>{const de=$(a);return e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[B.map((Ee,Qe)=>e.jsx("div",{className:"p-2 text-center font-semibold text-gray-600 bg-gray-50 text-xs",children:Ee},`weekday-${Qe}`)),de.map((Ee,Qe)=>{const Ze=T(Ee.date),Ye=Ee.date.toDateString()===new Date().toDateString();return e.jsxs("div",{onClick:()=>Be(Ee.date),className:`min-h-[70px] p-1 border border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors ${Ee.isCurrentMonth?"bg-white":"bg-gray-100 text-gray-400"} ${Ye?"bg-blue-50 border-blue-300":""}`,children:[e.jsx("div",{className:`text-xs font-medium mb-1 ${Ye?"text-blue-600":Ee.isCurrentMonth?"text-gray-900":"text-gray-400"}`,children:Ee.date.getDate()}),e.jsxs("div",{className:"space-y-1",children:[Ze.slice(0,2).map(It=>e.jsxs("div",{onClick:lt=>{lt.stopPropagation(),u(It)},className:`text-xs p-1 rounded text-white truncate cursor-pointer hover:opacity-80 transition-opacity ${Ce(It.type)}`,children:[It.time," ",It.title]},It.id)),Ze.length>2&&e.jsxs("div",{className:"text-xs text-gray-500",children:["+",Ze.length-2]})]})]},Qe)})]})},it=()=>{const de=new Date(a);de.setDate(a.getDate()-a.getDay());const Ee=[];for(let Qe=0;Qe<7;Qe++){const Ze=new Date(de);Ze.setDate(de.getDate()+Qe),Ee.push(Ze)}return e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"grid grid-cols-7 gap-1",children:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"].map((Qe,Ze)=>e.jsx("div",{className:"p-2 text-center font-semibold text-gray-600 bg-gray-50 text-xs",children:Qe},Qe))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:Ee.map((Qe,Ze)=>{const Ye=T(Qe),It=Qe.toDateString()===new Date().toDateString();return e.jsxs("div",{onClick:()=>Be(Qe),className:`min-h-[100px] p-2 border border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors ${It?"bg-blue-50 border-blue-300":"bg-white"}`,children:[e.jsx("div",{className:`text-sm font-medium mb-2 ${It?"text-blue-600":"text-gray-900"}`,children:Qe.getDate()}),e.jsx("div",{className:"space-y-1",children:Ye.map(lt=>e.jsxs("div",{className:`text-xs p-1 rounded text-white truncate ${Ce(lt.type)}`,children:[lt.time," ",lt.title]},lt.id))})]},Ze)})})]})},Ie=()=>{const de=T(a),Ee=Array.from({length:24},(Qe,Ze)=>Ze);return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-center",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:a.toLocaleDateString("pt-BR",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),e.jsxs("p",{className:"text-sm text-gray-600",children:[de.length," eventos agendados"]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto space-y-1",children:Ee.map(Qe=>{const Ze=de.filter(Ye=>parseInt(Ye.time.split(":")[0])===Qe);return e.jsxs("div",{className:"flex border-b border-gray-100 pb-2",children:[e.jsxs("div",{className:"w-16 text-xs text-gray-500 pt-1",children:[Qe.toString().padStart(2,"0"),":00"]}),e.jsx("div",{className:"flex-1 min-h-[40px]",children:Ze.length>0?e.jsx("div",{className:"space-y-1",children:Ze.map(Ye=>e.jsxs("div",{className:`p-2 rounded text-white text-xs ${Ce(Ye.type)}`,onClick:()=>u(Ye),children:[e.jsx("div",{className:"font-medium",children:Ye.title}),e.jsx("div",{className:"opacity-80",children:Ye.time})]},Ye.id))}):e.jsx("div",{className:"h-full hover:bg-gray-50 rounded cursor-pointer flex items-center justify-center text-gray-400 text-xs",onClick:()=>{const Ye=new Date(a);Ye.setHours(Qe,0,0,0),Be(Ye)},children:"Clique para adicionar evento"})})]},Qe)})})]})},he=()=>{const de=[...y].sort((Ee,Qe)=>{const Ze=Ee.date.localeCompare(Qe.date);return Ze!==0?Ze:Ee.time.localeCompare(Qe.time)});return e.jsx("div",{className:"divide-y divide-gray-200",children:de.length>0?de.map(Ee=>e.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>u(Ee),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[e.jsx("div",{className:`w-1 h-16 rounded-full ${Ce(Ee.type)}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:Ee.title}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Me(Ee.priority)}`,children:qe(Ee.priority)}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${re(Ee.status)}`,children:ie(Ee.status)})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ot,{className:"h-3 w-3 mr-1"}),new Date(Ee.date).toLocaleDateString("pt-BR")]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(vt,{className:"h-3 w-3 mr-1"}),Ee.time]}),Ee.customer&&e.jsxs("div",{className:"flex items-center font-medium text-blue-600",children:[e.jsx(Jt,{className:"h-3 w-3 mr-1"}),Ee.customer.nome_fantasia||Ee.customer.nome_razao,Ee.customer.telefone&&`  ${Ee.customer.telefone}`]}),Ee.employee&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Nt,{className:"h-3 w-3 mr-1"}),Ee.employee.name]}),Ee.service_order&&e.jsxs("div",{className:"flex items-center text-purple-600 font-medium",children:[e.jsx(ut,{className:"h-3 w-3 mr-1"}),"OS #",Ee.service_order.order_number]}),Ee.location&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(da,{className:"h-3 w-3 mr-1"}),Ee.location]})]}),Ee.description&&e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:Ee.description})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs text-white ${Ce(Ee.type)}`,children:K(Ee.type)})})]})},Ee.id)):e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(Lh,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Nenhum evento cadastrado"})]})})},Oe=(de,Ee)=>{de.dataTransfer.effectAllowed="move",de.dataTransfer.setData("text/html",JSON.stringify(Ee))},He=de=>{de.preventDefault(),de.dataTransfer.dropEffect="move"},dt=async(de,Ee)=>{de.preventDefault();try{const Qe=JSON.parse(de.dataTransfer.getData("text/html"));if(Qe.status===Ee)return;const Ze={...Qe,status:Ee},Ye=kx(Ze);await Gh(Qe.id,Ye),await v()}catch(Qe){console.error("Error updating event status:",Qe)}},Bt=()=>{const de=[{status:"a_fazer",title:"A Fazer",color:"border-yellow-400",bgColor:"bg-yellow-50"},{status:"em_andamento",title:"Em Andamento",color:"border-blue-400",bgColor:"bg-blue-50"},{status:"feito",title:"Concludo",color:"border-green-400",bgColor:"bg-green-50"},{status:"cancelado",title:"Cancelado",color:"border-gray-400",bgColor:"bg-gray-50"}];return e.jsx("div",{className:"grid grid-cols-4 gap-4 p-4",children:de.map(Ee=>{const Qe=y.filter(Ze=>Ze.status===Ee.status);return e.jsxs("div",{className:`border-t-4 ${Ee.color} ${Ee.bgColor} rounded-lg min-h-[500px]`,onDragOver:He,onDrop:Ze=>dt(Ze,Ee.status),children:[e.jsx("div",{className:"p-3 border-b border-gray-200 bg-white",children:e.jsxs("h3",{className:"font-medium text-gray-900 flex items-center justify-between",children:[Ee.title,e.jsx("span",{className:"text-xs bg-gray-200 text-gray-700 px-2 py-1 rounded-full",children:Qe.length})]})}),e.jsxs("div",{className:"p-2 space-y-2 max-h-[450px] overflow-y-auto",children:[Qe.map(Ze=>e.jsxs("div",{draggable:!0,onDragStart:Ye=>Oe(Ye,Ze),className:"bg-white p-3 rounded-lg shadow-sm hover:shadow-lg transition-all cursor-move border border-gray-200 hover:border-blue-300 active:opacity-50",onDoubleClick:()=>u(Ze),children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-sm text-gray-900 flex-1",children:Ze.title}),e.jsx("span",{className:`px-1.5 py-0.5 rounded text-xs font-medium ml-2 ${Me(Ze.priority)}`,children:e.jsx(lu,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ot,{className:"h-3 w-3 mr-1"}),new Date(Ze.date).toLocaleDateString("pt-BR",{day:"2-digit",month:"short"}),e.jsx(vt,{className:"h-3 w-3 ml-2 mr-1"}),Ze.time]}),Ze.customer&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center font-medium text-blue-600",children:[e.jsx(Jt,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"truncate",children:Ze.customer.nome_fantasia||Ze.customer.nome_razao})]}),Ze.customer.telefone&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(la,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"truncate",children:Ze.customer.telefone})]}),Ze.customer.email&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Cs,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"truncate",children:Ze.customer.email})]})]}),Ze.employee&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Nt,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"truncate",children:Ze.employee.name})]}),Ze.service_order&&e.jsxs("div",{className:"flex items-center text-purple-600 font-medium",children:[e.jsx(ut,{className:"h-3 w-3 mr-1"}),e.jsxs("span",{children:["OS #",Ze.service_order.order_number]})]}),Ze.location&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(da,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"truncate",children:Ze.location})]})]}),e.jsx("div",{className:`mt-2 w-full h-1 rounded-full ${Ce(Ze.type)}`}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 italic",children:"Arraste para mover ou clique 2x para editar"})]},Ze.id)),Qe.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-400 text-xs border-2 border-dashed border-gray-300 rounded-lg",children:e.jsx("p",{children:"Arraste tarefas aqui"})})]})]},Ee.status)})})},et=()=>{const Ee=[...y].sort((Qe,Ze)=>Qe.date.localeCompare(Ze.date)).reduce((Qe,Ze)=>{const Ye=Ze.date;return Qe[Ye]||(Qe[Ye]=[]),Qe[Ye].push(Ze),Qe},{});return e.jsxs("div",{className:"p-4 space-y-4 max-h-96 overflow-y-auto",children:[Object.entries(Ee).map(([Qe,Ze])=>e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-24 flex-shrink-0",children:e.jsxs("div",{className:"sticky top-0 pt-1",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900",children:new Date(Qe).toLocaleDateString("pt-BR",{day:"2-digit",month:"short"})}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(Qe).toLocaleDateString("pt-BR",{weekday:"short"})})]})}),e.jsx("div",{className:"flex-1 border-l-2 border-gray-200 pl-4 pb-4",children:e.jsx("div",{className:"space-y-2",children:Ze.map(Ye=>e.jsxs("div",{className:"relative bg-white p-3 rounded-lg border-l-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer",style:{borderLeftColor:Ce(Ye.type).replace("bg-","").replace("500","")},onClick:()=>u(Ye),children:[e.jsx("div",{className:"absolute -left-[29px] top-4 w-3 h-3 rounded-full bg-white border-2",style:{borderColor:Ce(Ye.type).replace("bg-","").replace("500","")}}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-sm text-gray-900",children:Ye.title}),e.jsxs("div",{className:"flex items-center space-x-3 mt-1 text-xs text-gray-600 flex-wrap",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(vt,{className:"h-3 w-3 mr-1"}),Ye.time]}),Ye.customer&&e.jsxs("div",{className:"flex items-center font-medium text-blue-600",children:[e.jsx(Jt,{className:"h-3 w-3 mr-1"}),Ye.customer.nome_fantasia||Ye.customer.nome_razao]}),Ye.employee&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Nt,{className:"h-3 w-3 mr-1"}),Ye.employee.name]}),Ye.service_order&&e.jsxs("div",{className:"flex items-center text-purple-600 font-medium",children:[e.jsx(ut,{className:"h-3 w-3 mr-1"}),"OS #",Ye.service_order.order_number]})]}),Ye.customer&&(Ye.customer.telefone||Ye.customer.email)&&e.jsxs("div",{className:"flex items-center space-x-3 mt-1 text-xs text-gray-500",children:[Ye.customer.telefone&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(la,{className:"h-3 w-3 mr-1"}),Ye.customer.telefone]}),Ye.customer.email&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Cs,{className:"h-3 w-3 mr-1"}),Ye.customer.email]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Me(Ye.priority)}`,children:qe(Ye.priority)}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${re(Ye.status)}`,children:ie(Ye.status)})]})]})]},Ye.id))})})]},Qe)),Object.keys(Ee).length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(xb,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Nenhum evento na linha do tempo"})]})]})},ta=()=>{const de=[...y].sort((lt,Tt)=>lt.date.localeCompare(Tt.date)),Ee=de.map(lt=>lt.date),Qe=Ee.length>0?new Date(Math.min(...Ee.map(lt=>new Date(lt).getTime()))):new Date,Ze=Ee.length>0?new Date(Math.max(...Ee.map(lt=>new Date(lt).getTime()))):new Date,Ye=Math.ceil((Ze.getTime()-Qe.getTime())/(1e3*60*60*24))+1,It=Array.from({length:Math.max(Ye,7)},(lt,Tt)=>{const Yt=new Date(Qe);return Yt.setDate(Qe.getDate()+Tt),Yt});return e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("div",{className:"flex mb-2 min-w-max",children:[e.jsx("div",{className:"w-48 flex-shrink-0"}),e.jsx("div",{className:"flex flex-1",children:It.map((lt,Tt)=>e.jsxs("div",{className:"flex-1 min-w-[60px] text-center border-l border-gray-200 px-1",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900",children:lt.getDate()}),e.jsx("div",{className:"text-xs text-gray-500",children:lt.toLocaleDateString("pt-BR",{weekday:"short"})})]},Tt))})]}),e.jsx("div",{className:"space-y-2",children:de.map(lt=>{const Tt=new Date(lt.date),Yt=Math.floor((Tt.getTime()-Qe.getTime())/(1e3*60*60*24));return e.jsxs("div",{className:"flex items-center hover:bg-gray-50 rounded transition-colors",children:[e.jsxs("div",{className:"w-48 flex-shrink-0 pr-2",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:lt.title}),e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-600",children:[e.jsx(vt,{className:"h-3 w-3"}),e.jsx("span",{children:lt.time})]})]}),e.jsxs("div",{className:"flex flex-1 relative h-12",children:[It.map((ft,_t)=>e.jsx("div",{className:"flex-1 min-w-[60px] border-l border-gray-200"},_t)),e.jsx("div",{className:`absolute h-8 top-2 rounded cursor-pointer ${Ce(lt.type)} hover:opacity-80 transition-opacity`,style:{left:`${Yt/It.length*100}%`,width:`${1/It.length*100}%`},onClick:()=>u(lt),children:e.jsx("div",{className:"px-2 py-1 text-white text-xs truncate",children:lt.title})})]})]},lt.id)})}),de.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(mb,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Nenhuma tarefa para visualizar"})]})]})})},Pt=()=>{const de=new Date(a);de.setDate(a.getDate()-a.getDay());const Ee=[];for(let Qe=0;Qe<2;Qe++){const Ze=new Date(de);Ze.setDate(de.getDate()+Qe*7);const Ye=[];for(let It=0;It<7;It++){const lt=new Date(Ze);lt.setDate(Ze.getDate()+It),Ye.push(lt)}Ee.push(Ye)}return e.jsx("div",{className:"space-y-4",children:Ee.map((Qe,Ze)=>e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs font-medium text-gray-700 mb-2",children:["Semana ",Ze+1," - ",Qe[0].toLocaleDateString("pt-BR",{day:"numeric",month:"short"})," a ",Qe[6].toLocaleDateString("pt-BR",{day:"numeric",month:"short"})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:["D","S","T","Q","Q","S","S"].map((Ye,It)=>e.jsx("div",{className:"p-1 text-center font-semibold text-gray-600 bg-gray-50 text-xs",children:Ye},`day-${Ze}-${It}`))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:Qe.map((Ye,It)=>{const lt=T(Ye),Tt=Ye.toDateString()===new Date().toDateString();return e.jsxs("div",{onClick:()=>Be(Ye),className:`min-h-[60px] p-1 border border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors ${Tt?"bg-blue-50 border-blue-300":"bg-white"}`,children:[e.jsx("div",{className:`text-xs font-medium mb-1 ${Tt?"text-blue-600":"text-gray-900"}`,children:Ye.getDate()}),e.jsxs("div",{className:"space-y-1",children:[lt.slice(0,1).map(Yt=>e.jsx("div",{className:`text-xs p-0.5 rounded text-white truncate ${Ce(Yt.type)}`,children:Yt.time},Yt.id)),lt.length>1&&e.jsxs("div",{className:"text-xs text-gray-500",children:["+",lt.length-1]})]})]},It)})})]},Ze))})};return e.jsxs("div",{className:"p-3 space-y-4",children:[e.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900 mb-1",children:"Agenda"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Gerencie seus compromissos"})]}),e.jsx("button",{onClick:()=>{if(!t&&y.length>=3){s&&s("Eventos Ilimitados");return}d(!0)},className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white p-2 rounded-lg shadow-md hover:shadow-lg transition-all duration-200",children:e.jsx(bt,{className:"h-5 w-5"})})]})}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1 gap-1",children:[e.jsxs("button",{onClick:()=>i("calendar"),className:`px-3 py-2 rounded-md transition-all text-xs font-medium flex items-center gap-1 ${n==="calendar"?"bg-blue-500 text-white shadow-md":"text-gray-600 hover:text-gray-900 hover:bg-gray-200"}`,children:[e.jsx(Ot,{className:"h-3.5 w-3.5"}),"Calendrio"]}),e.jsxs("button",{onClick:()=>i("list"),className:`px-3 py-2 rounded-md transition-all text-xs font-medium flex items-center gap-1 ${n==="list"?"bg-blue-500 text-white shadow-md":"text-gray-600 hover:text-gray-900 hover:bg-gray-200"}`,children:[e.jsx(Lh,{className:"h-3.5 w-3.5"}),"Lista"]}),e.jsxs("button",{onClick:()=>i("board"),className:`px-3 py-2 rounded-md transition-all text-xs font-medium flex items-center gap-1 ${n==="board"?"bg-blue-500 text-white shadow-md":"text-gray-600 hover:text-gray-900 hover:bg-gray-200"}`,children:[e.jsx(w6,{className:"h-3.5 w-3.5"}),"Quadro"]}),e.jsxs("button",{onClick:()=>i("timeline"),className:`px-3 py-2 rounded-md transition-all text-xs font-medium flex items-center gap-1 ${n==="timeline"?"bg-blue-500 text-white shadow-md":"text-gray-600 hover:text-gray-900 hover:bg-gray-200"}`,children:[e.jsx(xb,{className:"h-3.5 w-3.5"}),"Linha"]}),e.jsxs("button",{onClick:()=>i("gantt"),className:`px-3 py-2 rounded-md transition-all text-xs font-medium flex items-center gap-1 ${n==="gantt"?"bg-blue-500 text-white shadow-md":"text-gray-600 hover:text-gray-900 hover:bg-gray-200"}`,children:[e.jsx(mb,{className:"h-3.5 w-3.5"}),"Gantt"]})]})}),n==="calendar"&&e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"flex bg-gray-100 rounded-lg p-1",children:["daily","weekly","biweekly","monthly"].map(de=>e.jsx("button",{onClick:()=>l(de),className:`px-3 py-1.5 rounded-md transition-colors text-xs font-medium ${o===de?"bg-blue-500 text-white":"text-gray-600 hover:text-gray-900"}`,children:de==="daily"?"Dia":de==="weekly"?"Sem":de==="biweekly"?"Quinz":"Ms"},de))})}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:me,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(od,{className:"h-4 w-4"})}),e.jsxs("h2",{className:"text-base font-semibold text-gray-900",children:[I[a.getMonth()]," ",a.getFullYear()]}),e.jsx("button",{onClick:xe,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(vd,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[n==="calendar"&&e.jsxs(e.Fragment,{children:[o==="monthly"&&$e(),o==="weekly"&&it(),o==="biweekly"&&Pt(),o==="daily"&&Ie()]}),n==="list"&&he(),n==="board"&&Bt(),n==="timeline"&&et(),n==="gantt"&&ta()]}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-100 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700 flex items-center",children:[e.jsx(Ot,{className:"h-4 w-4 mr-2"}),n==="calendar"&&"Visualizao em Calendrio com mltiplos perodos",n==="list"&&"Visualizao em Lista organizada por data",n==="board"&&"Visualizao em Quadro Kanban por status",n==="timeline"&&"Visualizao em Linha do Tempo cronolgica",n==="gantt"&&"Visualizao em Grfico de Gantt"]})}),n==="calendar"&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center",children:[e.jsx(Lh,{className:"h-4 w-4 mr-2 text-blue-500"}),"Lista de Compromissos",e.jsxs("span",{className:"ml-2 text-xs font-normal text-gray-500",children:["(",ve().length,")"]})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-3 mb-3",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:" Perodo de Exibio"}),e.jsxs("select",{value:X,onChange:de=>q(de.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",children:[e.jsx("option",{value:"month",children:" Ms Atual"}),e.jsx("option",{value:"quarter",children:" Trimestre Central (anterior + atual + prximo)"}),e.jsx("option",{value:"next3",children:" Prximos 3 Meses (atual + 2 prximos)"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-600",children:ye()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:" Ordenar Por"}),e.jsxs("select",{value:V,onChange:de=>oe(de.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",children:[e.jsx("option",{value:"date",children:" Data"}),e.jsx("option",{value:"priority",children:" Prioridade"}),e.jsx("option",{value:"status",children:" Status"}),e.jsx("option",{value:"type",children:" Tipo"})]})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[ve().map(de=>e.jsx("div",{onClick:()=>u(de),className:"p-3 bg-white border border-gray-200 rounded-lg hover:shadow-md hover:border-blue-300 transition-all cursor-pointer",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${Ce(de.type)}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-gray-900 truncate",children:de.title}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ot,{className:"h-3 w-3"}),new Date(de.date).toLocaleDateString("pt-BR")]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(vt,{className:"h-3 w-3"}),de.time]}),de.assignedTo&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Nt,{className:"h-3 w-3"}),de.assignedTo]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${re(de.status)}`,children:ie(de.status)}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Me(de.priority)}`,children:qe(de.priority)})]})]})},de.id)),ve().length===0&&e.jsxs("div",{className:"text-center py-8 bg-gradient-to-br from-gray-50 to-blue-50 rounded-lg border-2 border-dashed border-gray-300",children:[e.jsx(Ot,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Nenhum compromisso encontrado"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Altere os filtros ou perodo para ver mais compromissos"})]})]})]})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(vt,{className:"h-5 w-5 mr-2 text-blue-500"}),"Tarefas Pendentes"]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-700 flex items-center",children:[e.jsx(Ot,{className:"h-4 w-4 mr-1 text-blue-500"}),"Hoje (",ne().length,")"]}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date().toLocaleDateString("pt-BR",{weekday:"long",day:"numeric",month:"long"})})]}),ne().length>0?e.jsx("div",{className:"space-y-2",children:ne().map(de=>e.jsxs("div",{className:"p-3 bg-white border border-gray-200 rounded-lg hover:shadow-sm transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${Ce(de.type)}`}),e.jsx("h4",{className:"font-medium text-gray-900",children:de.title})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Me(de.priority)}`,children:qe(de.priority)}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${re(de.status)}`,children:ie(de.status)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mb-3",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(vt,{className:"h-3 w-3 mr-1 text-gray-400"}),de.time]}),de.assignedTo&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(Nt,{className:"h-3 w-3 mr-1 text-gray-400"}),de.assignedTo]}),de.location&&e.jsxs("div",{className:"flex items-center text-gray-600 col-span-2 truncate",children:[e.jsx(da,{className:"h-3 w-3 mr-1 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:de.location})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[de.status!=="feito"&&e.jsxs("button",{onClick:()=>Xe(de.id),className:"px-2 py-1 bg-green-100 text-green-700 rounded hover:bg-green-200 transition-colors text-xs flex items-center",children:[e.jsx(Aa,{className:"h-3 w-3 mr-1"}),"Concluir"]}),e.jsxs("button",{onClick:()=>u(de),className:"px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors text-xs flex items-center",children:[e.jsx(Es,{className:"h-3 w-3 mr-1"}),"Editar"]})]})]},de.id))}):e.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx(Aa,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"Nenhuma tarefa para hoje"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-700 flex items-center",children:[e.jsx(Ot,{className:"h-4 w-4 mr-1 text-purple-500"}),"Amanh (",ue().length,")"]}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(H()).toLocaleDateString("pt-BR",{weekday:"long",day:"numeric",month:"long"})})]}),ue().length>0?e.jsx("div",{className:"space-y-2",children:ue().map(de=>e.jsxs("div",{className:"p-3 bg-white border border-gray-200 rounded-lg hover:shadow-sm transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${Ce(de.type)}`}),e.jsx("h4",{className:"font-medium text-gray-900",children:de.title})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Me(de.priority)}`,children:qe(de.priority)})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mb-3",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(vt,{className:"h-3 w-3 mr-1 text-gray-400"}),de.time]}),de.assignedTo&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(Nt,{className:"h-3 w-3 mr-1 text-gray-400"}),de.assignedTo]}),de.location&&e.jsxs("div",{className:"flex items-center text-gray-600 col-span-2 truncate",children:[e.jsx(da,{className:"h-3 w-3 mr-1 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:de.location})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>u(de),className:"px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors text-xs flex items-center",children:[e.jsx(Es,{className:"h-3 w-3 mr-1"}),"Editar"]}),e.jsxs("button",{onClick:()=>Pe(de.id),className:"px-2 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors text-xs flex items-center",children:[e.jsx(Vt,{className:"h-3 w-3 mr-1"}),"Excluir"]})]})]},de.id))}):e.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx(Aa,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"Nenhuma tarefa para amanh"})]})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("button",{className:"text-blue-600 hover:text-blue-800 text-sm flex items-center mx-auto",children:[e.jsx("span",{children:"Ver todas as tarefas"}),e.jsx(za,{className:"h-4 w-4 ml-1"})]})})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between bg-gradient-to-r from-blue-600 to-blue-700 text-white",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Novo Compromisso"}),e.jsx("p",{className:"text-blue-100 text-sm mt-1",children:"Adicionar evento  agenda"})]}),e.jsx("button",{onClick:()=>d(!1),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(ht,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Ttulo do Compromisso ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:N.title,onChange:de=>D({...N,title:de.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Reunio com cliente"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Data Incio ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:N.date,onChange:de=>D({...N,date:de.target.value,endDate:de.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Hora Incio ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"time",value:N.time,onChange:de=>D({...N,time:de.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Trmino"}),e.jsx("input",{type:"date",value:N.endDate,onChange:de=>D({...N,endDate:de.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hora Trmino"}),e.jsx("input",{type:"time",value:N.endTime,onChange:de=>D({...N,endTime:de.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Compromisso"}),e.jsxs("select",{value:N.type,onChange:de=>D({...N,type:de.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"pessoal",children:"Pessoal"}),e.jsx("option",{value:"networking",children:"Networking"}),e.jsx("option",{value:"financeiro",children:"Financeiro"}),e.jsx("option",{value:"operacional",children:"Operacional"}),e.jsx("option",{value:"cobrar",children:"Cobrar"}),e.jsx("option",{value:"pagar",children:"Pagar"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prioridade"}),e.jsxs("select",{value:N.priority,onChange:de=>D({...N,priority:de.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"low",children:"Baixa"}),e.jsx("option",{value:"medium",children:"Mdia"}),e.jsx("option",{value:"high",children:"Alta"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[e.jsx(Jt,{className:"h-4 w-4 mr-1 text-blue-500"}),"Cliente"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:S,onChange:de=>E(de.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Buscar cliente..."}),e.jsx(Qt,{className:"absolute right-3 top-2.5 h-4 w-4 text-gray-400"}),R.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:R.map(de=>e.jsxs("div",{onClick:()=>{D({...N,customerId:de.id}),E(de.nome_fantasia||de.nome_razao),_([])},className:"p-2 hover:bg-blue-50 cursor-pointer border-b border-gray-100",children:[e.jsx("div",{className:"font-medium text-sm",children:de.nome_fantasia||de.nome_razao}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-2",children:[de.telefone&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(la,{className:"h-3 w-3 mr-1"}),de.telefone]}),de.email&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(Cs,{className:"h-3 w-3 mr-1"}),de.email]})]})]},de.id))})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[e.jsx(Nt,{className:"h-4 w-4 mr-1 text-green-500"}),"Funcionrio Responsvel"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:C,onChange:de=>L(de.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Buscar funcionrio..."}),e.jsx(Qt,{className:"absolute right-3 top-2.5 h-4 w-4 text-gray-400"}),f.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:f.map(de=>e.jsxs("div",{onClick:()=>{D({...N,assignedTo:de.id}),L(de.name),F([])},className:"p-2 hover:bg-blue-50 cursor-pointer border-b border-gray-100",children:[e.jsx("div",{className:"font-medium text-sm",children:de.name}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-2",children:[de.email&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(Cs,{className:"h-3 w-3 mr-1"}),de.email]}),de.phone&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(la,{className:"h-3 w-3 mr-1"}),de.phone]})]})]},de.id))})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[e.jsx(ut,{className:"h-4 w-4 mr-1 text-purple-500"}),"Ordem de Servio"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:M,onChange:de=>P(de.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Buscar OS..."}),e.jsx(Qt,{className:"absolute right-3 top-2.5 h-4 w-4 text-gray-400"}),Z.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:Z.map(de=>{var Ee,Qe;return e.jsxs("div",{onClick:()=>{D({...N,serviceOrderId:de.id}),P(`OS #${de.order_number}`),O([])},className:"p-2 hover:bg-blue-50 cursor-pointer border-b border-gray-100",children:[e.jsxs("div",{className:"font-medium text-sm",children:["OS #",de.order_number]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[((Ee=de.customers)==null?void 0:Ee.nome_fantasia)||((Qe=de.customers)==null?void 0:Qe.nome_razao)," - Status: ",de.status]})]},de.id)})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Local"}),e.jsx("input",{type:"text",value:N.location,onChange:de=>D({...N,location:de.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Local do evento"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{value:N.description,onChange:de=>D({...N,description:de.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Detalhes do compromisso..."})]})]})}),e.jsxs("div",{className:"p-6 border-t bg-gray-50 flex gap-3",children:[e.jsx("button",{onClick:()=>d(!1),className:"flex-1 px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors font-medium",children:"Cancelar"}),e.jsxs("button",{onClick:ee,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center justify-center gap-2",children:[e.jsx(Gt,{className:"h-5 w-5"}),"Salvar Compromisso"]})]})]})}),A&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between bg-gradient-to-r from-blue-600 to-blue-700 text-white",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Editar Compromisso"}),e.jsx("p",{className:"text-blue-100 text-sm mt-1",children:"Atualizar informaes do evento"})]}),e.jsx("button",{onClick:()=>u(null),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(ht,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ttulo"}),e.jsx("input",{type:"text",value:A.title,onChange:de=>u({...A,title:de.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nome do evento"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Incio"}),e.jsx("input",{type:"date",value:A.date,onChange:de=>u({...A,date:de.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Horrio de Incio"}),e.jsx("input",{type:"time",value:A.time,onChange:de=>u({...A,time:de.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Trmino"}),e.jsx("input",{type:"date",value:A.endDate||A.date,onChange:de=>u({...A,endDate:de.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Horrio de Trmino"}),e.jsx("input",{type:"time",value:A.endTime||A.time,onChange:de=>u({...A,endTime:de.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),e.jsxs("select",{value:A.type,onChange:de=>u({...A,type:de.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"pessoal",children:"Pessoal"}),e.jsx("option",{value:"networking",children:"Networking"}),e.jsx("option",{value:"financeiro",children:"Financeiro"}),e.jsx("option",{value:"operacional",children:"Operacional"}),e.jsx("option",{value:"cobrar",children:"Cobrar"}),e.jsx("option",{value:"pagar",children:"Pagar"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prioridade"}),e.jsxs("select",{value:A.priority,onChange:de=>u({...A,priority:de.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"low",children:"Baixa"}),e.jsx("option",{value:"medium",children:"Mdia"}),e.jsx("option",{value:"high",children:"Alta"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:A.status,onChange:de=>u({...A,status:de.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"a_fazer",children:"A Fazer"}),e.jsx("option",{value:"em_andamento",children:"Em Andamento"}),e.jsx("option",{value:"feito",children:"Concludo"}),e.jsx("option",{value:"cancelado",children:"Cancelado"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[e.jsx(Jt,{className:"h-4 w-4 mr-1 text-blue-500"}),"Cliente ",A.customer&&e.jsxs("span",{className:"ml-2 text-xs text-blue-600",children:["(",A.customer.nome_fantasia||A.customer.nome_razao,")"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:S,onChange:de=>E(de.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Buscar novo cliente..."}),e.jsx(Qt,{className:"absolute right-3 top-2.5 h-4 w-4 text-gray-400"}),R.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:R.map(de=>e.jsxs("div",{onClick:()=>{u({...A,customerId:de.id,customer:de}),E(de.nome_fantasia||de.nome_razao),_([])},className:"p-2 hover:bg-blue-50 cursor-pointer border-b border-gray-100",children:[e.jsx("div",{className:"font-medium text-sm",children:de.nome_fantasia||de.nome_razao}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-2",children:[de.telefone&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(la,{className:"h-3 w-3 mr-1"}),de.telefone]}),de.email&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(Cs,{className:"h-3 w-3 mr-1"}),de.email]})]})]},de.id))})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[e.jsx(Nt,{className:"h-4 w-4 mr-1 text-green-500"}),"Funcionrio ",A.employee&&e.jsxs("span",{className:"ml-2 text-xs text-green-600",children:["(",A.employee.name,")"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:C,onChange:de=>L(de.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Buscar novo funcionrio..."}),e.jsx(Qt,{className:"absolute right-3 top-2.5 h-4 w-4 text-gray-400"}),f.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:f.map(de=>e.jsxs("div",{onClick:()=>{u({...A,assignedTo:de.id,employee:de}),L(de.name),F([])},className:"p-2 hover:bg-blue-50 cursor-pointer border-b border-gray-100",children:[e.jsx("div",{className:"font-medium text-sm",children:de.name}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-2",children:[de.email&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(Cs,{className:"h-3 w-3 mr-1"}),de.email]}),de.phone&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(la,{className:"h-3 w-3 mr-1"}),de.phone]})]})]},de.id))})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[e.jsx(ut,{className:"h-4 w-4 mr-1 text-purple-500"}),"Ordem de Servio ",A.service_order&&e.jsxs("span",{className:"ml-2 text-xs text-purple-600",children:["(OS #",A.service_order.order_number,")"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:M,onChange:de=>P(de.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Buscar nova OS..."}),e.jsx(Qt,{className:"absolute right-3 top-2.5 h-4 w-4 text-gray-400"}),Z.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:Z.map(de=>{var Ee,Qe;return e.jsxs("div",{onClick:()=>{u({...A,serviceOrderId:de.id,service_order:de}),P(`OS #${de.order_number}`),O([])},className:"p-2 hover:bg-blue-50 cursor-pointer border-b border-gray-100",children:[e.jsxs("div",{className:"font-medium text-sm",children:["OS #",de.order_number]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[((Ee=de.customers)==null?void 0:Ee.nome_fantasia)||((Qe=de.customers)==null?void 0:Qe.nome_razao)," - Status: ",de.status]})]},de.id)})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Local"}),e.jsx("input",{type:"text",value:A.location||"",onChange:de=>u({...A,location:de.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Local do evento"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{value:A.description||"",onChange:de=>u({...A,description:de.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Detalhes do evento"})]})]})}),e.jsxs("div",{className:"p-6 border-t bg-gray-50 flex gap-3",children:[e.jsxs("button",{onClick:()=>Pe(A.id),className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium flex items-center justify-center gap-2",children:[e.jsx(Vt,{className:"h-5 w-5"}),"Excluir"]}),e.jsx("button",{onClick:()=>u(null),className:"flex-1 px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors font-medium",children:"Cancelar"}),e.jsxs("button",{onClick:je,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center justify-center gap-2",children:[e.jsx(Gt,{className:"h-5 w-5"}),"Atualizar"]})]})]})})]})},dP=({onPremiumFeature:s,onEnterpriseFeature:t})=>{const{isPremium:a,isEnterprise:r}=rs(),[n,i]=j.useState(!1),[o,l]=j.useState(!1),[c,d]=j.useState(null),[A,u]=j.useState(null),[x,m]=j.useState([{id:1,name:"App Mobile GiarTech",status:"Em Progresso",team:4,deadline:"2024-01-15",progress:75,color:"from-blue-500 to-cyan-500",description:"Desenvolvimento do aplicativo mobile principal da empresa",tasks:[{id:1,title:"Design de interface",completed:!0,dueDate:"2023-12-10"},{id:2,title:"Desenvolvimento frontend",completed:!0,dueDate:"2023-12-20"},{id:3,title:"Integrao com API",completed:!1,dueDate:"2024-01-05"},{id:4,title:"Testes e QA",completed:!1,dueDate:"2024-01-10"},{id:5,title:"Lanamento",completed:!1,dueDate:"2024-01-15"}]},{id:2,name:"Website Corporativo",status:"Concludo",team:3,deadline:"2024-01-10",progress:100,color:"from-green-500 to-emerald-500",description:"Novo site institucional com design moderno",tasks:[{id:1,title:"Wireframes e prottipos",completed:!0,dueDate:"2023-11-15"},{id:2,title:"Design de pginas",completed:!0,dueDate:"2023-11-30"},{id:3,title:"Desenvolvimento frontend",completed:!0,dueDate:"2023-12-15"},{id:4,title:"Desenvolvimento backend",completed:!0,dueDate:"2023-12-30"},{id:5,title:"Testes e lanamento",completed:!0,dueDate:"2024-01-10"}]},{id:3,name:"Sistema de CRM",status:"Planejamento",team:5,deadline:"2024-01-30",progress:25,color:"from-purple-500 to-pink-500",description:"Sistema de gesto de relacionamento com clientes",tasks:[{id:1,title:"Levantamento de requisitos",completed:!0,dueDate:"2023-12-15"},{id:2,title:"Modelagem de dados",completed:!0,dueDate:"2023-12-30"},{id:3,title:"Prototipagem de interface",completed:!1,dueDate:"2024-01-10"},{id:4,title:"Desenvolvimento",completed:!1,dueDate:"2024-01-25"},{id:5,title:"Testes e implantao",completed:!1,dueDate:"2024-01-30"}]}]),[y,g]=j.useState({name:"",description:"",deadline:"",team:1,status:"Planejamento"}),[b,p]=j.useState({title:"",dueDate:""}),v=["from-blue-500 to-cyan-500","from-green-500 to-emerald-500","from-purple-500 to-pink-500","from-orange-500 to-red-500","from-indigo-500 to-purple-500","from-yellow-500 to-orange-500"],N=()=>{if(!a&&x.length>=3){s("Projetos Ilimitados");return}if(y.name.trim()){const _={id:Date.now(),name:y.name,status:y.status,team:y.team,deadline:y.deadline,progress:0,color:v[Math.floor(Math.random()*v.length)],description:y.description,tasks:[]};m([...x,_]),g({name:"",description:"",deadline:"",team:1,status:"Planejamento"}),i(!1)}},D=()=>{if(!a&&A&&A.tasks&&A.tasks.length>=5){s("Tarefas Ilimitadas");return}if(A&&b.title&&b.dueDate){const _={id:Date.now(),title:b.title,completed:!1,dueDate:b.dueDate},C={...A,tasks:[...A.tasks||[],_]};m(x.map(L=>L.id===A.id?C:L)),u(C),p({title:"",dueDate:""}),l(!1)}},S=(_,C)=>{const L=x.find(f=>f.id===_);if(L&&L.tasks){const f=L.tasks.map(O=>O.id===C?{...O,completed:!O.completed}:O),F=f.filter(O=>O.completed).length,M=f.length,P=M>0?Math.round(F/M*100):0,Z={...L,tasks:f,progress:P};m(x.map(O=>O.id===_?Z:O)),A&&A.id===_&&u(Z)}},E=_=>{window.confirm("Tem certeza que deseja excluir este projeto?")&&(m(x.filter(C=>C.id!==_)),A&&A.id===_&&u(null))},R=()=>{r||t&&t("Anlise Avanada de Projetos")};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:["Meus Projetos (",x.length,")"]}),e.jsx("p",{className:"text-gray-600",children:"Gerencie todos os seus projetos em um s lugar"})]}),e.jsx("button",{onClick:()=>{if(!a&&x.length>=3){s("Projetos Ilimitados");return}i(!0)},className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white p-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200",children:e.jsx(bt,{className:"h-6 w-6"})})]}),!a&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-100 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700 flex items-center",children:[e.jsx(NA,{className:"h-4 w-4 mr-2"}),"Plano Bsico: Limitado a 3 projetos e 5 tarefas por projeto. Faa upgrade para projetos ilimitados."]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl p-4 shadow-md border border-gray-100 col-span-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Status dos Projetos"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Total"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:x.length})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Concludos"}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:x.filter(_=>_.progress===100).length})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Em Progresso"}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:x.filter(_=>_.progress>0&&_.progress<100).length})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Planejados"}),e.jsx("p",{className:"text-lg font-bold text-purple-600",children:x.filter(_=>_.progress===0).length})]})]})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Progresso Mdio"}),e.jsxs("div",{className:"flex flex-col justify-between h-full",children:[e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[Math.round(x.reduce((_,C)=>_+C.progress,0)/(x.length||1)),"%"]})}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${Math.round(x.reduce((_,C)=>_+C.progress,0)/(x.length||1))}%`}})})]})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Prximos Prazos"}),e.jsx("div",{className:"flex flex-col justify-between h-full",children:e.jsxs("div",{className:"space-y-2",children:[x.filter(_=>_.progress<100).sort((_,C)=>new Date(_.deadline).getTime()-new Date(C.deadline).getTime()).slice(0,2).map(_=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs truncate max-w-[120px]",children:_.name}),e.jsx("span",{className:"text-xs font-medium",children:new Date(_.deadline).toLocaleDateString("pt-BR")})]},_.id)),!r&&e.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs text-gray-500 cursor-pointer hover:text-blue-600",onClick:R,children:[e.jsx("span",{children:"Anlise avanada"}),e.jsx(Va,{className:"h-3 w-3"})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"md:col-span-2 space-y-4",children:e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Todos os Projetos"}),e.jsx("div",{className:"space-y-4",children:x.map((_,C)=>e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:C*.1},className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100 hover:shadow-md transition-all duration-200 cursor-pointer",onClick:()=>u(_),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 bg-gradient-to-r ${_.color} rounded-lg flex items-center justify-center`,children:e.jsx(NA,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:_.name}),e.jsx("p",{className:"text-xs text-gray-500",children:_.status})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:"text-xs text-gray-500",children:new Date(_.deadline).toLocaleDateString("pt-BR")})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[e.jsx("span",{children:"Progresso"}),e.jsxs("span",{children:[_.progress,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${_.progress===100?"bg-green-500":_.progress>50?"bg-blue-500":"bg-yellow-500"}`,style:{width:`${_.progress}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Nt,{className:"h-3 w-3"}),e.jsxs("span",{children:[_.team," membros"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(l0,{className:"h-3 w-3"}),e.jsxs("span",{children:[_.tasks?_.tasks.filter(L=>L.completed).length:0,"/",_.tasks?_.tasks.length:0," tarefas"]})]})]})]},_.id))})]})}),e.jsx("div",{className:"md:col-span-1",children:A?e.jsxs(W.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white rounded-xl p-4 shadow-md border border-gray-100 h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 bg-gradient-to-r ${A.color} rounded-lg flex items-center justify-center`,children:e.jsx(NA,{className:"h-5 w-5 text-white"})}),e.jsx("h3",{className:"font-semibold text-gray-900",children:A.name})]}),e.jsx("button",{onClick:()=>E(A.id),className:"text-red-500 hover:text-red-700 p-1",children:e.jsx(Vt,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Descrio"}),e.jsx("p",{className:"text-sm text-gray-700",children:A.description||"Sem descrio"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:A.status})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Prazo"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(A.deadline).toLocaleDateString("pt-BR")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Equipe"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[A.team," membros"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Progresso"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[A.progress,"%"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Tarefas"}),e.jsxs("button",{onClick:()=>{if(!a&&A.tasks&&A.tasks.length>=5){s("Tarefas Ilimitadas");return}l(!0)},className:"text-blue-600 hover:text-blue-800 text-xs flex items-center",children:[e.jsx(bt,{className:"h-3 w-3 mr-1"}),"Adicionar"]})]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:A.tasks&&A.tasks.length>0?A.tasks.map(_=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>S(A.id,_.id),className:`w-4 h-4 rounded border flex items-center justify-center ${_.completed?"bg-green-500 border-green-500 text-white":"border-gray-300"}`,children:_.completed&&e.jsx(l0,{className:"h-3 w-3"})}),e.jsx("span",{className:`text-sm ${_.completed?"line-through text-gray-500":"text-gray-700"}`,children:_.title})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:"text-xs text-gray-500",children:new Date(_.dueDate).toLocaleDateString("pt-BR")})})]},_.id)):e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Nenhuma tarefa adicionada"})})]}),!r&&e.jsxs("div",{className:"mt-4 p-3 bg-purple-50 border border-purple-100 rounded-lg cursor-pointer",onClick:R,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ls,{className:"h-4 w-4 text-purple-600 mr-2"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Anlise avanada de projetos"})]}),e.jsx(Va,{className:"h-4 w-4 text-purple-600"})]}),e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Disponvel no plano Enterprise"})]})]})]}):e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-md border border-gray-100 h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(NA,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 mb-2",children:"Selecione um projeto para ver os detalhes"}),e.jsxs("button",{onClick:()=>{if(!a&&x.length>=3){s("Projetos Ilimitados");return}i(!0)},className:"mt-4 px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm",children:[e.jsx(bt,{className:"h-4 w-4 mr-2 inline"}),"Novo Projeto"]})]})})})]}),e.jsx(rt,{children:n&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>i(!1),className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs(W.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"relative bg-white rounded-2xl p-6 w-full max-w-md shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Novo Projeto"}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ht,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Projeto"}),e.jsx("input",{type:"text",value:y.name,onChange:_=>g({...y,name:_.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Digite o nome do projeto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrio"}),e.jsx("textarea",{value:y.description,onChange:_=>g({...y,description:_.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Descreva o projeto"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prazo"}),e.jsx("input",{type:"date",value:y.deadline,onChange:_=>g({...y,deadline:_.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Equipe"}),e.jsx("input",{type:"number",min:"1",value:y.team,onChange:_=>g({...y,team:parseInt(_.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:y.status,onChange:_=>g({...y,status:_.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"Planejamento",children:"Planejamento"}),e.jsx("option",{value:"Em Progresso",children:"Em Progresso"}),e.jsx("option",{value:"Em Reviso",children:"Em Reviso"}),e.jsx("option",{value:"Concludo",children:"Concludo"})]})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>i(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),e.jsxs("button",{onClick:N,className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:shadow-lg transition-all duration-200 flex items-center justify-center",children:[e.jsx(Gt,{className:"h-4 w-4 mr-2"}),"Criar"]})]})]})]})}),e.jsx(rt,{children:o&&A&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>l(!1),className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs(W.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"relative bg-white rounded-2xl p-6 w-full max-w-md shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Nova Tarefa"}),e.jsx("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ht,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Projeto"}),e.jsx("input",{type:"text",value:A.name,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ttulo da Tarefa"}),e.jsx("input",{type:"text",value:b.title,onChange:_=>p({...b,title:_.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Digite o ttulo da tarefa"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Vencimento"}),e.jsx("input",{type:"date",value:b.dueDate,onChange:_=>p({...b,dueDate:_.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>l(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),e.jsxs("button",{onClick:D,className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:shadow-lg transition-all duration-200 flex items-center justify-center",children:[e.jsx(Gt,{className:"h-4 w-4 mr-2"}),"Adicionar"]})]})]})]})})]})},dv=()=>{const{user:s,isPremium:t}=rs();return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:(s==null?void 0:s.avatar)||"https://images.pexels.com/photos/2379004/pexels-photo-2379004.jpeg?auto=compress&cs=tinysrgb&w=150",alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-4 border-white shadow-lg"}),t&&e.jsx("div",{className:"absolute -top-2 -right-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-white p-2 rounded-full",children:e.jsx(wd,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s==null?void 0:s.name}),e.jsx("p",{className:"text-gray-600",children:s==null?void 0:s.email}),e.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium mt-2 ${t?"bg-gradient-to-r from-yellow-400 to-orange-500 text-white":"bg-gray-100 text-gray-600"}`,children:t?" Premium":"Bsico"})]}),e.jsx("button",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white p-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200",children:e.jsx(rr,{className:"h-5 w-5"})})]})}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Informaes Pessoais"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Jt,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Nome Completo"}),e.jsx("p",{className:"font-medium text-gray-900",children:s==null?void 0:s.name})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(Cs,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-900",children:s==null?void 0:s.email})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(la,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Telefone"}),e.jsx("p",{className:"font-medium text-gray-900",children:"(11) 99999-9999"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(da,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Localizao"}),e.jsx("p",{className:"font-medium text-gray-900",children:"So Paulo, SP"})]})]})]})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Estatsticas da Conta"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Projetos",value:"12",color:"from-blue-500 to-cyan-500"},{label:"Tarefas",value:"48",color:"from-green-500 to-emerald-500"},{label:"Horas",value:"156",color:"from-purple-500 to-pink-500"},{label:"Equipe",value:"8",color:"from-orange-500 to-red-500"}].map((a,r)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`w-16 h-16 bg-gradient-to-r ${a.color} rounded-xl flex items-center justify-center mx-auto mb-2`,children:e.jsx("span",{className:"text-2xl font-bold text-white",children:a.value})}),e.jsx("p",{className:"text-sm text-gray-600",children:a.label})]},a.label))})]})]})};function su({title:s,value:t,subtitle:a,icon:r,color:n,trend:i,onClick:o,details:l,externalLink:c}){const[d,A]=j.useState(!1);return e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02,translateY:-4},className:`
        bg-white rounded-2xl p-6 shadow-lg border border-gray-100
        transition-all duration-300 cursor-pointer
        ${o?"hover:shadow-2xl":"hover:shadow-xl"}
      `,onClick:o,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`w-14 h-14 bg-gradient-to-br ${n} rounded-xl flex items-center justify-center shadow-lg`,children:e.jsx(r,{className:"h-7 w-7 text-white"})}),i&&e.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg ${i.value>=0?"bg-green-100":"bg-red-100"}`,children:[i.value>=0?e.jsx(zt,{className:"h-4 w-4 text-green-600"}):e.jsx(nr,{className:"h-4 w-4 text-red-600"}),e.jsxs("span",{className:`text-xs font-semibold ${i.value>=0?"text-green-700":"text-red-700"}`,children:[Math.abs(i.value),"%"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[s,l&&e.jsx("button",{onClick:u=>{u.stopPropagation(),A(!d)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(pl,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t}),a&&e.jsx("p",{className:"text-xs text-gray-500",children:a}),i&&e.jsx("p",{className:"text-xs text-gray-500",children:i.label})]}),d&&l&&e.jsx(W.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 pt-4 border-t border-gray-200 space-y-2",children:l.map((u,x)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:u.label}),e.jsx("span",{className:"font-semibold text-gray-900",children:u.value})]},x))}),c&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("button",{onClick:u=>{u.stopPropagation(),window.open(c,"_blank")},className:"text-sm text-blue-600 hover:text-blue-700 font-medium flex items-center gap-1",children:["Ver detalhes completos",e.jsx(ju,{className:"h-3 w-3"})]})})]})}Wu.register(Ju,Yu,ip,op,rp,np,EN,Xu,Zu,em,lp);const Av=()=>{const s=ys(),[t,a]=j.useState(null),[r,n]=j.useState([]),[i,o]=j.useState([]),[l,c]=j.useState(!0),[d,A]=j.useState("month");j.useEffect(()=>{u();const N=setInterval(u,5*60*1e3);return()=>clearInterval(N)},[d]);const u=async()=>{try{c(!0);const{data:N,error:D}=await se.from("v_cfo_kpis").select("*").maybeSingle();if(D)throw D;const{data:S,error:E}=await se.from("financial_alerts").select("*").eq("is_active",!0).order("severity",{ascending:!0}).order("created_at",{ascending:!1}).limit(10);if(E)throw E;const{data:R,error:_}=await se.from("v_customer_intelligence").select("*").order("total_revenue",{ascending:!1}).limit(10);if(_)throw _;console.log("KPIs carregados:",N),a(N),n(S||[]),o(R||[])}catch(N){console.error("Erro ao carregar dados CFO:",N),alert(`Erro ao carregar Dashboard CFO: ${N.message}`)}finally{c(!1)}},x=N=>N?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0,maximumFractionDigits:0}).format(N):"R$ 0",m=N=>N==null||isNaN(N)?"0.0%":`${N>=0?"+":""}${N.toFixed(1)}%`,y=N=>{switch(N){case"critical":return"bg-red-100 text-red-800 border-red-300";case"warning":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"info":return"bg-blue-100 text-blue-800 border-blue-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},g=N=>{switch(N){case"critical":return e.jsx(eo,{className:"h-5 w-5 text-red-600"});case"warning":return e.jsx(cs,{className:"h-5 w-5 text-yellow-600"});case"info":return e.jsx(En,{className:"h-5 w-5 text-blue-600"});default:return e.jsx(En,{className:"h-5 w-5"})}},b=N=>{switch(N){case"A":return"bg-green-100 text-green-800 border-green-300";case"B":return"bg-blue-100 text-blue-800 border-blue-300";case"C":return"bg-orange-100 text-orange-800 border-orange-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},p=N=>N>=70?{label:"Alto Risco",color:"text-red-600"}:N>=40?{label:"Risco Mdio",color:"text-yellow-600"}:{label:"Baixo Risco",color:"text-green-600"};if(l)return e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx(bs,{className:"h-12 w-12 animate-spin text-blue-600"})});x((t==null?void 0:t.total_revenue)||0),`${x((t==null?void 0:t.net_profit)||0)}`,x((t==null?void 0:t.ebitda)||0),`${m((t==null?void 0:t.ebitda_margin)||0)}`,m((t==null?void 0:t.roi_percentage)||0),`${x((t==null?void 0:t.break_even_point)||0)}`,x((t==null?void 0:t.net_working_capital)||0),`${m((t==null?void 0:t.operational_efficiency)||0)}`;const v=[{label:"Margem Bruta",value:(t==null?void 0:t.gross_margin)||0,target:60,color:"rgb(34, 197, 94)"},{label:"Margem Operacional",value:(t==null?void 0:t.operating_margin)||0,target:40,color:"rgb(59, 130, 246)"},{label:"Margem Lquida",value:(t==null?void 0:t.profit_margin)||0,target:30,color:"rgb(168, 85, 247)"},{label:"Margem EBITDA",value:(t==null?void 0:t.ebitda_margin)||0,target:35,color:"rgb(251, 146, 60)"}];return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:e.jsxs("div",{className:"max-w-[1800px] mx-auto px-6 py-8 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Dashboard CFO"}),e.jsx("p",{className:"text-gray-600",children:"Inteligncia Financeira Executiva"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:d,onChange:N=>A(N.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg bg-white shadow-sm focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"month",children:"ltimo Ms"}),e.jsx("option",{value:"quarter",children:"ltimo Trimestre"}),e.jsx("option",{value:"year",children:"ltimo Ano"})]}),e.jsxs("button",{onClick:u,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(bs,{className:"h-4 w-4"}),"Atualizar"]}),e.jsxs("button",{className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2",children:[e.jsx(wa,{className:"h-4 w-4"}),"Exportar"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(su,{title:"Receita Total",value:x((t==null?void 0:t.total_revenue)||0),subtitle:`Lucro: ${x((t==null?void 0:t.net_profit)||0)}`,icon:Ut,color:"from-green-500 to-emerald-600",trend:{value:(t==null?void 0:t.profit_margin)||0,label:"Margem de lucro"},onClick:()=>s("/financeiro"),details:[{label:"Despesas",value:x((t==null?void 0:t.total_expenses)||0)},{label:"Lucro Lquido",value:x((t==null?void 0:t.net_profit)||0)},{label:"Margem",value:m((t==null?void 0:t.profit_margin)||0)}]}),e.jsx(su,{title:"EBITDA",value:x((t==null?void 0:t.ebitda)||0),subtitle:`Margem: ${m((t==null?void 0:t.ebitda_margin)||0)}`,icon:zt,color:"from-blue-500 to-cyan-600",trend:{value:(t==null?void 0:t.ebitda_margin)||0,label:"Margem EBITDA"},onClick:()=>s("/financeiro"),details:[{label:"Margem Bruta",value:m((t==null?void 0:t.gross_margin)||0)},{label:"Margem Operacional",value:m((t==null?void 0:t.operating_margin)||0)},{label:"Margem EBITDA",value:m((t==null?void 0:t.ebitda_margin)||0)}]}),e.jsx(su,{title:"ROI",value:m((t==null?void 0:t.roi_percentage)||0),subtitle:`Break-even: ${x((t==null?void 0:t.break_even_point)||0)}`,icon:Pa,color:"from-purple-500 to-pink-600",trend:{value:(t==null?void 0:t.roi_percentage)||0,label:"Retorno sobre investimento"},onClick:()=>s("/financeiro"),details:[{label:"Break-even",value:x((t==null?void 0:t.break_even_point)||0)},{label:"Payback",value:`${(t==null?void 0:t.payback_period_days)||0} dias`},{label:"ROI",value:m((t==null?void 0:t.roi_percentage)||0)}]}),e.jsx(su,{title:"Capital de Giro",value:x((t==null?void 0:t.net_working_capital)||0),subtitle:`Eficincia: ${m((t==null?void 0:t.operational_efficiency)||0)}`,icon:gi,color:"from-orange-500 to-red-600",trend:{value:(t==null?void 0:t.operational_efficiency)||0,label:"Eficincia operacional"},onClick:()=>s("/financeiro"),details:[{label:"A Receber",value:x((t==null?void 0:t.accounts_receivable)||0)},{label:"A Pagar",value:x((t==null?void 0:t.accounts_payable)||0)},{label:"Capital Lquido",value:x((t==null?void 0:t.net_working_capital)||0)}]})]}),r.length>0&&e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-pink-600 rounded-xl flex items-center justify-center",children:e.jsx(En,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Alertas Financeiros"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[r.length," alertas ativos"]})]})]}),e.jsx("button",{className:"px-4 py-2 text-sm font-medium text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:"Ver Todos"})]}),e.jsx("div",{className:"space-y-3",children:r.map(N=>e.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-xl border ${y(N.severity)}`,children:[g(N.severity),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h4",{className:"font-semibold",children:N.title}),e.jsx("span",{className:"text-xs opacity-70",children:new Date(N.created_at).toLocaleDateString("pt-BR")})]}),e.jsx("p",{className:"text-sm opacity-90",children:N.description}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 text-xs",children:[e.jsxs("span",{children:["Atual: ",x(N.current_value)]}),e.jsxs("span",{children:["Limite: ",x(N.threshold_value)]})]})]})]},N.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Anlise de Margens"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Indicadores de rentabilidade"})]}),e.jsx(Ls,{className:"h-6 w-6 text-gray-400"})]}),e.jsx("div",{className:"space-y-4",children:v.map(N=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:N.label}),e.jsx("span",{className:"text-sm font-bold",style:{color:N.color},children:m(N.value)})]}),e.jsxs("div",{className:"relative h-3 bg-gray-100 rounded-full overflow-hidden",children:[e.jsx("div",{className:"absolute h-full transition-all duration-500 rounded-full",style:{width:`${Math.min(N.value/N.target*100,100)}%`,backgroundColor:N.color}}),e.jsx("div",{className:"absolute h-full border-r-2 border-gray-400",style:{left:`${N.target/100*100}%`}})]}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["Meta: ",N.target,"%"]}),e.jsx("span",{className:`text-xs font-medium ${N.value>=N.target?"text-green-600":"text-orange-600"}`,children:N.value>=N.target?"Acima da meta":"Abaixo da meta"})]})]},N.label))})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Sade Financeira"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Indicadores comparativos"})]}),e.jsx(os,{className:"h-6 w-6 text-gray-400"})]}),e.jsx("div",{className:"h-80",children:e.jsx(FN,{data:{labels:v.map(N=>N.label),datasets:[{label:"Atual",data:v.map(N=>N.value),backgroundColor:"rgba(59, 130, 246, 0.2)",borderColor:"rgb(59, 130, 246)",borderWidth:2,pointBackgroundColor:"rgb(59, 130, 246)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgb(59, 130, 246)"},{label:"Meta",data:v.map(N=>N.target),backgroundColor:"rgba(34, 197, 94, 0.2)",borderColor:"rgb(34, 197, 94)",borderWidth:2,pointBackgroundColor:"rgb(34, 197, 94)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgb(34, 197, 94)"}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{r:{beginAtZero:!0,max:70,ticks:{stepSize:10}}}}})})]})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl flex items-center justify-center",children:e.jsx(Nt,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Inteligncia de Clientes"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Top 10 clientes por receita"})]})]}),e.jsx("button",{className:"px-4 py-2 text-sm font-medium text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",children:"Ver Anlise Completa"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Cliente"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Tipo"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Classificao"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Receita"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Pedidos"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Ticket Mdio"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Score"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Risco"})]})}),e.jsx("tbody",{children:i.map((N,D)=>{const S=p(N.risk_score);return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center text-white font-bold text-sm",children:D+1}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:N.customer_name})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:N.customer_type})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold border ${b(N.abc_classification)}`,children:N.abc_classification})}),e.jsx("td",{className:"py-3 px-4 text-right",children:e.jsx("span",{className:"text-sm font-bold text-green-600",children:x(N.total_revenue)})}),e.jsx("td",{className:"py-3 px-4 text-right",children:e.jsx("span",{className:"text-sm text-gray-900",children:N.total_orders})}),e.jsx("td",{className:"py-3 px-4 text-right",children:e.jsx("span",{className:"text-sm text-gray-900",children:x(N.avg_order_value)})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-blue-600",style:{width:`${N.credit_score/1e3*100}%`}})}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:N.credit_score})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`text-xs font-medium ${S.color}`,children:S.label})})]},N.customer_id)})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-green-600 to-emerald-700 rounded-2xl p-6 shadow-lg text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(wt,{className:"h-8 w-8 text-green-200"}),e.jsx("span",{className:"text-sm font-medium text-green-100",children:"Estoque"})]}),e.jsx("h3",{className:"text-3xl font-bold mb-2",children:x((t==null?void 0:t.total_inventory_value)||0)}),e.jsx("p",{className:"text-green-100 text-sm mb-4",children:"Valor Total"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-green-100 mb-1",children:"Lucro Potencial"}),e.jsx("p",{className:"text-lg font-bold",children:x((t==null?void 0:t.potential_profit)||0)})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-green-100 mb-1",children:"Giro"}),e.jsxs("p",{className:"text-lg font-bold",children:[((t==null?void 0:t.inventory_turnover)||0).toFixed(1),"x"]})]})]})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-blue-600 to-cyan-700 rounded-2xl p-6 shadow-lg text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(Nt,{className:"h-8 w-8 text-blue-200"}),e.jsx("span",{className:"text-sm font-medium text-blue-100",children:"Clientes"})]}),e.jsx("h3",{className:"text-3xl font-bold mb-2",children:(t==null?void 0:t.total_customers)||0}),e.jsx("p",{className:"text-blue-100 text-sm mb-4",children:"Total de Clientes"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-blue-100 mb-1",children:"Pessoa Jurdica"}),e.jsx("p",{className:"text-lg font-bold",children:(t==null?void 0:t.total_customers_pj)||0})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-blue-100 mb-1",children:"Pessoa Fsica"}),e.jsx("p",{className:"text-lg font-bold",children:(t==null?void 0:t.total_customers_pf)||0})]})]})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-purple-600 to-pink-700 rounded-2xl p-6 shadow-lg text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(ut,{className:"h-8 w-8 text-purple-200"}),e.jsx("span",{className:"text-sm font-medium text-purple-100",children:"Ordens de Servio"})]}),e.jsx("h3",{className:"text-3xl font-bold mb-2",children:(t==null?void 0:t.total_completed_orders)||0}),e.jsx("p",{className:"text-purple-100 text-sm mb-4",children:"Concludas"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-purple-100 mb-1",children:"Ticket Mdio"}),e.jsx("p",{className:"text-lg font-bold",children:x((t==null?void 0:t.avg_order_value)||0)})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-purple-100 mb-1",children:"Em Progresso"}),e.jsx("p",{className:"text-lg font-bold",children:(t==null?void 0:t.orders_in_progress)||0})]})]})]})]})]})})},AP=()=>{const[s,t]=j.useState([]),[a,r]=j.useState(!0),[n,i]=j.useState(""),[o,l]=j.useState(null);j.useEffect(()=>{c()},[]);const c=async()=>{try{r(!0);const{data:y,error:g}=await se.from("service_orders").select(`
          *,
          customer:customers(nome_razao, telefone)
        `).order("opened_at",{ascending:!1});if(g)throw g;t(y||[])}catch(y){console.error("Error loading service orders:",y),t([])}finally{r(!1)}},d=[{id:"cotacao",title:"Cotaes",icon:ea,color:"bg-purple-500",borderColor:"border-purple-400",bgColor:"bg-purple-50"},{id:"aberta",title:"Abertas",icon:es,color:"bg-yellow-500",borderColor:"border-yellow-400",bgColor:"bg-yellow-50"},{id:"em_andamento",title:"Em Andamento",icon:ld,color:"bg-blue-500",borderColor:"border-blue-400",bgColor:"bg-blue-50"},{id:"concluida",title:"Concludas",icon:Aa,color:"bg-green-500",borderColor:"border-green-400",bgColor:"bg-green-50"},{id:"cancelada",title:"Canceladas",icon:Ai,color:"bg-gray-500",borderColor:"border-gray-400",bgColor:"bg-gray-50"}],A=y=>s.filter(g=>{var D,S,E;const b=g.status||"aberta",p=b===y,v=!n||((D=g.description)==null?void 0:D.toLowerCase().includes(n.toLowerCase()))||((E=(S=g.customer)==null?void 0:S.nome_razao)==null?void 0:E.toLowerCase().includes(n.toLowerCase()));return p&&v&&(!o||b===o)}),u=y=>y?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(y):"R$ 0,00",x=y=>y?new Date(y).toLocaleDateString("pt-BR",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}):"No agendado",m=y=>{const g=new Date(y);return Math.floor((new Date().getTime()-g.getTime())/(1e3*60*60*24))};return a?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando ordens de servio..."})]})}):e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(ea,{className:"h-6 w-6 text-blue-500"}),"Ordens de Servio"]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[s.length," ordens de servio cadastradas"]})]}),e.jsxs("button",{className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors flex items-center gap-2",children:[e.jsx(bt,{className:"h-4 w-4"}),"Nova OS"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por cliente ou descrio...",value:n,onChange:y=>i(y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("button",{className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2",children:[e.jsx(io,{className:"h-4 w-4"}),"Filtros"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:d.map(y=>{const g=A(y.id),b=y.icon;return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:`${y.bgColor} border-t-4 ${y.borderColor} rounded-t-xl p-3`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:`h-5 w-5 ${y.color.replace("bg-","text-")}`}),e.jsx("h3",{className:"font-semibold text-gray-900",children:y.title})]}),e.jsx("span",{className:"bg-white text-gray-700 px-2 py-1 rounded-full text-xs font-medium",children:g.length})]})}),e.jsx("div",{className:"flex-1 bg-gray-50 rounded-b-xl p-2 space-y-2 min-h-[400px]",children:g.length===0?e.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"Nenhuma ordem"}):g.map(p=>{var v,N;return e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg p-3 shadow-sm border border-gray-200 hover:shadow-md transition-shadow cursor-pointer",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:((v=p.customer)==null?void 0:v.nome_razao)||"Cliente no informado"}),p.description&&e.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:p.description})]})}),e.jsxs("div",{className:"space-y-1.5",children:[p.scheduled_at&&e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-600",children:[e.jsx(Ot,{className:"h-3 w-3"}),e.jsx("span",{children:x(p.scheduled_at)})]}),((N=p.customer)==null?void 0:N.telefone)&&e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-600",children:[e.jsx(Jt,{className:"h-3 w-3"}),e.jsx("span",{children:p.customer.telefone})]}),p.total_value!==void 0&&p.total_value>0&&e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-600",children:[e.jsx(Ut,{className:"h-3 w-3"}),e.jsx("span",{className:"font-medium",children:u(p.total_value)})]})]}),e.jsxs("div",{className:"mt-3 pt-2 border-t border-gray-100 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[e.jsx(vt,{className:"h-3 w-3"}),e.jsxs("span",{children:[m(p.opened_at)," dias aberta"]})]}),e.jsx("div",{className:`w-2 h-2 rounded-full ${y.color}`})]})]},p.id)})})]},y.id)})}),e.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:d.map(y=>{const g=A(y.id),b=g.reduce((p,v)=>p+(v.total_value||0),0);return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${y.color.replace("bg-","text-")}`,children:g.length}),e.jsx("div",{className:"text-sm text-gray-600",children:y.title}),b>0&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:u(b)})]},y.id)})})})]})},uP=()=>{const s=ys(),[t,a]=j.useState(!0),r=()=>{s("/login")};return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center px-6 relative overflow-hidden",children:[t&&e.jsx(W.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.5},onClick:r,className:"absolute top-6 right-6 p-2 bg-white/20 backdrop-blur-sm rounded-full hover:bg-white/30 transition-colors z-20",children:e.jsx(ht,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-blue-400/20 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-20 right-10 w-96 h-96 bg-purple-400/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-indigo-400/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"0.5s"}})]}),e.jsxs("div",{className:"relative z-10 text-center max-w-4xl mx-auto",children:[e.jsx(W.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,type:"spring",stiffness:100},className:"mb-12",children:e.jsxs("div",{className:"relative inline-block",children:[e.jsx(W.div,{animate:{rotate:[0,5,-5,0],scale:[1,1.05,1]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},className:"w-32 h-32 bg-gradient-to-br from-blue-500 via-purple-500 to-indigo-600 rounded-3xl flex items-center justify-center shadow-2xl",children:e.jsx("span",{className:"text-4xl font-bold text-white",children:"GT"})}),e.jsx(W.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.5,duration:.5},className:"absolute -top-2 -right-2 w-8 h-8 bg-gradient-to-r from-pink-400 to-orange-400 rounded-full flex items-center justify-center",children:e.jsx(hr,{className:"h-4 w-4 text-white"})})]})}),e.jsx(W.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.3,duration:.8},className:"text-5xl md:text-6xl font-bold mb-6",children:e.jsx("span",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent",children:"GiarTech"})}),e.jsxs(W.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.8},className:"text-xl md:text-2xl text-gray-600 mb-12 leading-relaxed",children:["Plataforma empresarial completa para",e.jsx("br",{}),e.jsx("span",{className:"font-semibold text-gray-800",children:"gesto inteligente de projetos"})]}),e.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7,duration:.8},className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-12",children:[{icon:Fs,label:"Rpido",color:"from-yellow-400 to-orange-500"},{icon:os,label:"Seguro",color:"from-green-400 to-emerald-500"},{icon:Nt,label:"Colaborativo",color:"from-blue-400 to-cyan-500"},{icon:hr,label:"Inteligente",color:"from-purple-400 to-pink-500"}].map((n,i)=>e.jsxs(W.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.8+i*.1,duration:.5},className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-white/50",children:[e.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${n.color} rounded-xl flex items-center justify-center mx-auto mb-2`,children:e.jsx(n.icon,{className:"h-6 w-6 text-white"})}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:n.label})]},n.label))}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1,duration:.8},className:"flex flex-col items-center space-y-4",children:[e.jsxs(dn,{to:"/login",className:"group inline-flex items-center px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-2xl shadow-xl hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300",children:[e.jsx("span",{className:"mr-3",children:"GIARTECH Gesto Integrada"}),e.jsx(W.div,{animate:{x:[0,5,0]},transition:{duration:1.5,repeat:1/0},children:e.jsx(za,{className:"h-5 w-5"})})]}),e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 transition-colors text-sm",children:"Acessar Plataforma"})]}),e.jsx(W.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2,duration:.8},className:"text-sm text-gray-500 mt-8",children:"Verso 2.0  Premium Edition"})]})]})},uv=()=>{const{user:s,isPremium:t}=rs(),a=[{title:"Nova Ordem de Servio",description:"Criar uma nova OS rapidamente",icon:ea,color:"from-blue-500 to-cyan-500",path:"/service-orders/create"},{title:"Gesto de Clientes",description:"Adicionar ou editar clientes",icon:Nt,color:"from-green-500 to-emerald-500",path:"/client-management"},{title:"Controle de Estoque",description:"Verificar materiais disponveis",icon:wt,color:"from-purple-500 to-pink-500",path:"/inventory"},{title:"Relatrios Financeiros",description:"Acompanhar receitas e despesas",icon:Ut,color:"from-orange-500 to-red-500",path:"/financial"},{title:"Agenda de Trabalho",description:"Organizar compromissos",icon:Ot,color:"from-indigo-500 to-purple-500",path:"/calendar"},{title:"Chat da Equipe",description:"Comunicar com a equipe",icon:o0,color:"from-teal-500 to-cyan-500",path:"/chat"}],r=[{action:"OS criada",item:"OS-2024-001 - Joo Silva",time:"2 horas atrs",icon:ea,color:"text-blue-500"},{action:"Cliente adicionado",item:"Empresa ABC Ltda",time:"4 horas atrs",icon:Nt,color:"text-green-500"},{action:"Estoque atualizado",item:"Ar Condicionado Split 12.000 BTUs",time:"1 dia atrs",icon:wt,color:"text-purple-500"},{action:"Pagamento recebido",item:"R$ 850,00 - OS-2024-003",time:"2 dias atrs",icon:Ut,color:"text-green-500"}],n=[{title:"Ordens Ativas",value:"8",icon:ea,color:"from-blue-500 to-cyan-500"},{title:"Clientes Cadastrados",value:"24",icon:Nt,color:"from-green-500 to-emerald-500"},{title:"Itens em Estoque",value:"156",icon:wt,color:"from-purple-500 to-pink-500"},{title:"Faturamento Mensal",value:"R$ 15.850",icon:Ut,color:"from-orange-500 to-red-500"}];return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-8 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Bem-vindo, ",s==null?void 0:s.name,"! "]}),e.jsx("p",{className:"text-blue-100 text-lg",children:"Gerencie seu negcio de forma inteligente e eficiente"})]}),e.jsx("div",{className:"hidden md:block",children:e.jsx("div",{className:"w-24 h-24 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(Fs,{className:"h-12 w-12 text-white"})})})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white/10 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(is,{className:"h-5 w-5 text-green-300"}),e.jsx("span",{className:"text-sm",children:"Sistema Online"})]})}),e.jsx("div",{className:"bg-white/10 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(os,{className:"h-5 w-5 text-blue-300"}),e.jsx("span",{className:"text-sm",children:"Dados Seguros"})]})}),e.jsx("div",{className:"bg-white/10 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(cm,{className:"h-5 w-5 text-purple-300"}),e.jsx("span",{className:"text-sm",children:"Acesso Remoto"})]})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map((i,o)=>e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o*.1},className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${i.color} rounded-xl flex items-center justify-center`,children:e.jsx(i.icon,{className:"h-6 w-6 text-white"})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:i.value}),e.jsx("p",{className:"text-gray-600",children:i.title})]},i.title))}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Aes Rpidas"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map((i,o)=>e.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4+o*.1},children:e.jsxs(dn,{to:i.path,className:"block p-6 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl hover:shadow-lg transition-all duration-200 group",children:[e.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${i.color} rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform`,children:e.jsx(i.icon,{className:"h-6 w-6 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:i.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:i.description}),e.jsxs("div",{className:"flex items-center text-blue-600 group-hover:text-blue-700",children:[e.jsx("span",{className:"text-sm font-medium",children:"Acessar"}),e.jsx(za,{className:"h-4 w-4 ml-2 group-hover:translate-x-1 transition-transform"})]})]})},i.title))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Atividade Recente"}),e.jsx("div",{className:"space-y-4",children:r.map((i,o)=>e.jsxs("div",{className:"flex items-center space-x-4 p-4 hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center",children:e.jsx(i.icon,{className:`h-5 w-5 ${i.color}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:i.action}),e.jsx("p",{className:"text-sm text-gray-600",children:i.item})]}),e.jsx("span",{className:"text-xs text-gray-500",children:i.time})]},o))})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Status do Sistema"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(is,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:"Todos os Servios"})]}),e.jsx("span",{className:"text-green-600 font-medium",children:"Operacional"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(vt,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:"ltima Sincronizao"})]}),e.jsx("span",{className:"text-blue-600 font-medium",children:"Agora"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(qs,{className:"h-5 w-5 text-purple-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:"Plano Atual"})]}),e.jsx("span",{className:"text-purple-600 font-medium",children:t?"Premium":"Bsico"})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs(dn,{to:"/departmental-dashboard",className:"w-full bg-gradient-to-r from-blue-500 to-purple-500 text-white py-3 px-4 rounded-lg hover:shadow-lg transition-all flex items-center justify-center",children:[e.jsx(Ls,{className:"h-5 w-5 mr-2"}),e.jsx("span",{children:"Ver Dashboard Completo"}),e.jsx(za,{className:"h-4 w-4 ml-2"})]})})]})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-2xl p-8 border border-indigo-100",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Dicas Rpidas"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(Fs,{className:"h-6 w-6 text-white"})}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Automatizao"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Use o sistema integrado para automatizar processos e economizar tempo"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(zt,{className:"h-6 w-6 text-white"})}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Produtividade"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Acompanhe mtricas de desempenho no Dashboard Departamental"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(os,{className:"h-6 w-6 text-white"})}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Segurana"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Seus dados esto protegidos com criptografia de ponta a ponta"})]})]})]})]})},mP=()=>{const s=[{icon:Pa,title:"Foco no Cliente",description:"Colocamos as necessidades dos nossos clientes no centro de tudo que fazemos."},{icon:Wp,title:"Excelncia",description:"Buscamos sempre a mais alta qualidade em cada projeto que desenvolvemos."},{icon:Nt,title:"Colaborao",description:"Trabalhamos em parceria com nossos clientes para alcanar os melhores resultados."},{icon:m6,title:"Paixo",description:"Amamos o que fazemos e isso se reflete na qualidade das nossas solues."}];return e.jsxs("div",{className:"pt-16",children:[e.jsx("section",{className:"py-20 gradient-bg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:e.jsxs(W.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:["Sobre a ",e.jsx("span",{className:"text-accent-300",children:"GiarTech"})]}),e.jsx("p",{className:"text-xl text-gray-200 max-w-3xl mx-auto",children:"Somos uma empresa de tecnologia apaixonada por criar solues inovadoras que transformam negcios e conectam pessoas"})]})})}),e.jsx("section",{className:"py-20 bg-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[e.jsxs(W.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{duration:.6},viewport:{once:!0},children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-6",children:"Nossa Histria"}),e.jsx("p",{className:"text-lg text-gray-600 mb-6",children:"Fundada em 2020, a GiarTech nasceu da viso de democratizar o acesso  tecnologia de qualidade. Comeamos como uma pequena startup com grandes sonhos e hoje somos uma referncia em desenvolvimento de solues digitais."}),e.jsx("p",{className:"text-lg text-gray-600 mb-6",children:"Nossa jornada  marcada pela constante busca por inovao e pela dedicao em entregar resultados excepcionais para nossos clientes. Cada projeto  uma oportunidade de superar expectativas e criar valor real."}),e.jsx("p",{className:"text-lg text-gray-600",children:"Hoje, orgulhamo-nos de ter uma equipe talentosa e diversificada, unida pela paixo por tecnologia e pelo compromisso com a excelncia."})]}),e.jsxs(W.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},transition:{duration:.6},viewport:{once:!0},className:"relative",children:[e.jsx("img",{src:"https://images.pexels.com/photos/3184465/pexels-photo-3184465.jpeg?auto=compress&cs=tinysrgb&w=800",alt:"Equipe trabalhando",className:"rounded-lg shadow-xl"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-primary-600/20 to-accent-600/20 rounded-lg"})]})]})})}),e.jsx("section",{className:"py-20 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs(W.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Nossos Valores"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Os princpios que guiam nossa empresa e definem nossa cultura organizacional"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:s.map((t,a)=>e.jsxs(W.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:a*.1},viewport:{once:!0},className:"card p-8 text-center group hover:-translate-y-2",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary-100 rounded-full mb-6 group-hover:bg-primary-600 transition-colors duration-300",children:e.jsx(t.icon,{className:"h-8 w-8 text-primary-600 group-hover:text-white transition-colors duration-300"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:t.title}),e.jsx("p",{className:"text-gray-600",children:t.description})]},t.title))})]})}),e.jsx("section",{className:"py-20 gradient-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs(W.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Nossos Nmeros"}),e.jsx("p",{className:"text-xl text-gray-200",children:"Resultados que comprovam nossa dedicao e competncia"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[{number:"100+",label:"Projetos Entregues"},{number:"50+",label:"Clientes Satisfeitos"},{number:"4+",label:"Anos de Experincia"},{number:"24/7",label:"Suporte Disponvel"}].map((t,a)=>e.jsxs(W.div,{initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},transition:{duration:.6,delay:a*.1},viewport:{once:!0},className:"text-center",children:[e.jsx("div",{className:"text-4xl md:text-5xl font-bold text-accent-300 mb-2",children:t.number}),e.jsx("div",{className:"text-lg text-gray-200",children:t.label})]},t.label))})]})})]})},hP=()=>{const s=[{icon:U3,title:"Desenvolvimento Web",description:"Criamos sites e aplicaes web modernas, responsivas e otimizadas.",features:["React/Next.js","Vue.js/Nuxt.js","Node.js/Express","TypeScript"],color:"from-blue-500 to-cyan-500"},{icon:Nd,title:"Desenvolvimento Mobile",description:"Apps nativos e hbridos para iOS e Android com performance superior.",features:["React Native","Flutter","Swift/Kotlin","Ionic"],color:"from-purple-500 to-pink-500"},{icon:cm,title:"Solues Cloud",description:"Infraestrutura escalvel e segura na nuvem para seu negcio.",features:["AWS/Azure","Docker/Kubernetes","CI/CD","Microservios"],color:"from-green-500 to-teal-500"},{icon:jd,title:"Banco de Dados",description:"Design e otimizao de bancos de dados para mxima performance.",features:["PostgreSQL","MongoDB","Redis","Elasticsearch"],color:"from-orange-500 to-red-500"},{icon:os,title:"Segurana Digital",description:"Implementao de medidas de segurana robustas e auditoria.",features:["Pentesting","LGPD/GDPR","SSL/TLS","Firewall"],color:"from-indigo-500 to-purple-500"},{icon:Fs,title:"Otimizao",description:"Melhoria de performance e otimizao de aplicaes existentes.",features:["Performance","SEO","Core Web Vitals","Monitoring"],color:"from-yellow-500 to-orange-500"}];return e.jsxs("div",{className:"pt-16",children:[e.jsx("section",{className:"py-20 gradient-bg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:e.jsxs(W.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:["Nossos ",e.jsx("span",{className:"text-accent-300",children:"Servios"})]}),e.jsx("p",{className:"text-xl text-gray-200 max-w-3xl mx-auto",children:"Oferecemos solues tecnolgicas completas para transformar sua viso em realidade digital"})]})})}),e.jsx("section",{className:"py-20 bg-gray-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map((t,a)=>e.jsxs(W.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:a*.1},viewport:{once:!0},className:"card p-8 group hover:-translate-y-2 relative overflow-hidden",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${t.color} opacity-0 group-hover:opacity-5 transition-opacity duration-300`}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:`inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br ${t.color} rounded-full mb-6`,children:e.jsx(t.icon,{className:"h-8 w-8 text-white"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:t.title}),e.jsx("p",{className:"text-gray-600 mb-6",children:t.description}),e.jsx("div",{className:"space-y-2 mb-6",children:t.features.map(r=>e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-primary-500 rounded-full mr-2"}),r]},r))}),e.jsxs("button",{className:"flex items-center text-primary-600 font-medium group-hover:text-primary-700 transition-colors duration-200",children:["Saiba mais",e.jsx(za,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform duration-200"})]})]})]},t.title))})})}),e.jsx("section",{className:"py-20 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs(W.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Nosso Processo"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Uma metodologia comprovada para entregar resultados excepcionais"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[{step:"01",title:"Descoberta",description:"Entendemos suas necessidades e objetivos de negcio."},{step:"02",title:"Planejamento",description:"Criamos uma estratgia detalhada e cronograma do projeto."},{step:"03",title:"Desenvolvimento",description:"Implementamos a soluo com as melhores prticas."},{step:"04",title:"Entrega",description:"Testamos, otimizamos e entregamos o projeto finalizado."}].map((t,a)=>e.jsxs(W.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:a*.1},viewport:{once:!0},className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary-100 text-primary-600 rounded-full text-xl font-bold mb-4",children:t.step}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:t.title}),e.jsx("p",{className:"text-gray-600",children:t.description})]},t.step))})]})}),e.jsx("section",{className:"py-20 gradient-bg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:e.jsxs(W.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-6",children:"Pronto para comear seu projeto?"}),e.jsx("p",{className:"text-xl text-gray-200 mb-8 max-w-2xl mx-auto",children:"Entre em contato conosco e vamos discutir como podemos ajudar a transformar sua ideia em realidade"}),e.jsxs("button",{className:"btn-primary inline-flex items-center",children:["Solicitar Oramento",e.jsx(za,{className:"ml-2 h-5 w-5"})]})]})})})]})},xP=()=>{const[s,t]=j.useState({name:"",email:"",subject:"",message:""}),a=n=>{n.preventDefault(),console.log("Form submitted:",s),alert("Mensagem enviada com sucesso! Entraremos em contato em breve."),t({name:"",email:"",subject:"",message:""})},r=n=>{t({...s,[n.target.name]:n.target.value})};return e.jsxs("div",{className:"pt-16",children:[e.jsx("section",{className:"py-20 gradient-bg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:e.jsxs(W.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:["Entre em ",e.jsx("span",{className:"text-accent-300",children:"Contato"})]}),e.jsx("p",{className:"text-xl text-gray-200 max-w-3xl mx-auto",children:"Estamos prontos para transformar sua ideia em realidade. Vamos conversar sobre seu prximo projeto!"})]})})}),e.jsx("section",{className:"py-20 bg-gray-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[e.jsxs(W.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{duration:.6},viewport:{once:!0},children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Vamos conversar"}),e.jsx("p",{className:"text-lg text-gray-600 mb-8",children:"Nossa equipe est sempre disponvel para discutir seu projeto e encontrar a melhor soluo para suas necessidades."}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx(Cs,{className:"h-6 w-6 text-primary-600"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Email"}),e.jsx("p",{className:"text-gray-600",children:"contato@giartech.com"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Respondemos em at 24 horas"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx(la,{className:"h-6 w-6 text-primary-600"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Telefone"}),e.jsx("p",{className:"text-gray-600",children:"(11) 99999-9999"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Seg - Sex, 9h s 18h"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx(da,{className:"h-6 w-6 text-primary-600"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Localizao"}),e.jsx("p",{className:"text-gray-600",children:"So Paulo, SP"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Atendimento remoto e presencial"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx(vt,{className:"h-6 w-6 text-primary-600"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Horrio"}),e.jsx("p",{className:"text-gray-600",children:"Segunda a Sexta: 9h - 18h"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Suporte 24/7 para clientes"})]})]})]})]}),e.jsxs(W.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},transition:{duration:.6},viewport:{once:!0},className:"card p-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(gl,{className:"h-6 w-6 text-primary-600 mr-2"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Envie uma mensagem"})]}),e.jsxs("form",{onSubmit:a,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome completo"}),e.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:r,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",placeholder:"Seu nome completo"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:r,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",placeholder:"seu@email.com"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700 mb-2",children:"Assunto"}),e.jsxs("select",{id:"subject",name:"subject",value:s.subject,onChange:r,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[e.jsx("option",{value:"",children:"Selecione um assunto"}),e.jsx("option",{value:"desenvolvimento-web",children:"Desenvolvimento Web"}),e.jsx("option",{value:"desenvolvimento-mobile",children:"Desenvolvimento Mobile"}),e.jsx("option",{value:"consultoria",children:"Consultoria em TI"}),e.jsx("option",{value:"suporte",children:"Suporte Tcnico"}),e.jsx("option",{value:"outros",children:"Outros"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-2",children:"Mensagem"}),e.jsx("textarea",{id:"message",name:"message",value:s.message,onChange:r,required:!0,rows:5,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200 resize-none",placeholder:"Conte-nos sobre seu projeto ou dvida..."})]}),e.jsxs("button",{type:"submit",className:"w-full btn-primary flex items-center justify-center",children:["Enviar Mensagem",e.jsx(Ma,{className:"ml-2 h-5 w-5"})]})]})]})]})})}),e.jsx("section",{className:"py-20 bg-white",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs(W.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Perguntas Frequentes"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Respostas para as dvidas mais comuns sobre nossos servios"})]}),e.jsx("div",{className:"space-y-6",children:[{question:"Quanto tempo leva para desenvolver um projeto?",answer:"O tempo varia conforme a complexidade do projeto. Projetos simples podem levar de 2-4 semanas, enquanto aplicaes mais complexas podem levar de 2-6 meses. Sempre fornecemos um cronograma detalhado aps a anlise inicial."},{question:"Vocs oferecem suporte aps a entrega?",answer:"Sim! Oferecemos suporte tcnico e manuteno contnua para todos os nossos projetos. Temos diferentes planos de suporte para atender s necessidades especficas de cada cliente."},{question:"Como funciona o processo de oramento?",answer:"Aps o primeiro contato, agendamos uma reunio para entender suas necessidades. Com base nisso, elaboramos uma proposta detalhada com escopo, cronograma e valores. O oramento  sempre gratuito e sem compromisso."},{question:"Trabalham com quais tecnologias?",answer:"Trabalhamos com as principais tecnologias do mercado: React, Vue.js, Node.js, Python, React Native, Flutter, AWS, Azure, e muitas outras. Sempre escolhemos a melhor tecnologia para cada projeto especfico."}].map((n,i)=>e.jsxs(W.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:i*.1},viewport:{once:!0},className:"card p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:n.question}),e.jsx("p",{className:"text-gray-600",children:n.answer})]},i))})]})})]})},pP=({isOpen:s,feature:t,onClose:a})=>{const r=[{icon:Ls,title:"Analytics Avanados",description:"Relatrios detalhados e insights em tempo real"},{icon:Nt,title:"Colaborao Ilimitada",description:"Adicione quantos membros quiser ao seu time"},{icon:os,title:"Segurana Enterprise",description:"Criptografia avanada e backup automtico"},{icon:Fs,title:"Automaes",description:"Fluxos de trabalho automatizados e integraes"}],n=[{name:"Bsico",price:"Grtis",features:["At 5 ordens de servio","Gesto bsica de estoque","Catlogo de servios limitado","Suporte por email","Acesso a 1 usurio","Backup manual","Relatrios bsicos"],current:!0},{name:"Premium",price:"R$ 99,00/ms",features:["Ordens de servio ilimitadas","Gesto completa de estoque","Catlogo de servios completo","Suporte prioritrio","At 5 usurios","Backup automtico","Analytics avanados","Personalizao visual","Modo offline no app","Integraes bsicas"],popular:!0},{name:"Enterprise",price:"R$ 200,00/ms",features:["Tudo do Premium","Usurios ilimitados","API de integrao","Suporte dedicado 24/7","SLA garantido","Dashboards personalizados","Gesto financeira avanada","Controle de acesso granular","Monitoramento em tempo real","Relatrios customizados","Treinamento da equipe","Ambiente de homologao"]}];return e.jsx(rt,{children:s&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:a,className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs(W.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"relative bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"relative bg-gradient-to-r from-blue-600 to-purple-600 p-8 text-white rounded-t-3xl",children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 p-2 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(ht,{className:"h-6 w-6"})}),e.jsxs("div",{className:"text-center",children:[e.jsx(W.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"inline-flex items-center justify-center w-16 h-16 bg-white/20 rounded-full mb-4",children:e.jsx(wd,{className:"h-8 w-8 text-yellow-300"})}),e.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Recurso Premium"}),e.jsx("p",{className:"text-blue-100",children:t?`"${t}" est disponvel apenas no plano Premium`:"Desbloqueie todo o potencial da plataforma"})]})]}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"O que voc ganha com o Premium"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map((i,o)=>e.jsxs(W.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*o},className:"flex items-start space-x-4 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg flex items-center justify-center",children:e.jsx(i.icon,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:i.title}),e.jsx("p",{className:"text-gray-600 text-sm",children:i.description})]})]},i.title))})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Escolha seu plano"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:n.map((i,o)=>e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*o},className:`relative p-6 rounded-2xl border-2 transition-all duration-200 ${i.popular?"border-blue-500 bg-gradient-to-b from-blue-50 to-purple-50 shadow-lg scale-105":i.current?"border-gray-300 bg-gray-50":"border-gray-200 bg-white hover:border-blue-300"}`,children:[i.popular&&e.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-1 rounded-full text-sm font-medium flex items-center",children:[e.jsx(qs,{className:"h-4 w-4 mr-1"}),"Mais Popular"]})}),i.current&&e.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:e.jsx("div",{className:"bg-gray-500 text-white px-4 py-1 rounded-full text-sm font-medium",children:"Plano Atual"})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-2",children:i.name}),e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:i.price})]}),e.jsx("ul",{className:"space-y-3 mb-6",children:i.features.map((l,c)=>e.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(As,{className:"h-4 w-4 text-green-500 mr-2 flex-shrink-0"}),l]},c))}),e.jsx("button",{className:`w-full py-3 px-4 rounded-xl font-semibold transition-all duration-200 ${i.current?"bg-gray-300 text-gray-500 cursor-not-allowed":i.popular?"bg-gradient-to-r from-blue-500 to-purple-500 text-white hover:shadow-lg transform hover:-translate-y-0.5":"bg-gray-900 text-white hover:bg-gray-800"}`,disabled:i.current,children:i.current?"Plano Atual":"Fazer Upgrade"})]},i.name))})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(W.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-4 rounded-2xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200",children:"Comear Teste Grtis de 14 dias"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Sem compromisso  Cancele a qualquer momento"})]})]})]})]})})},gP=({feature:s})=>{const[t,a]=j.useState(!0);return t?e.jsx(rt,{children:e.jsx(W.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:20,opacity:0},className:"fixed bottom-20 left-0 right-0 z-30 px-4",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"relative p-4 md:p-6",children:[e.jsx("button",{onClick:()=>a(!1),className:"absolute top-2 right-2 p-1 text-white/70 hover:text-white hover:bg-white/10 rounded-full transition-colors",children:e.jsx(ht,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center",children:[e.jsx("div",{className:"mb-4 md:mb-0 md:mr-6 flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(wd,{className:"h-6 w-6 text-yellow-300"})})}),e.jsxs("div",{className:"text-center md:text-left flex-1 md:mr-6",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:s?`Desbloqueie "${s}" com o plano Premium!`:"Atualize para o plano Premium!"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Acesse recursos avanados, usurios ilimitados e suporte prioritrio por apenas R$49,90/ms."})]}),e.jsx("div",{className:"mt-4 md:mt-0",children:e.jsxs(dn,{to:"/pricing",className:"inline-flex items-center px-4 py-2 bg-white text-blue-600 font-medium rounded-lg hover:bg-blue-50 transition-colors",children:[e.jsx(qs,{className:"h-4 w-4 mr-2 text-yellow-500"}),e.jsx("span",{children:"Ver Planos"}),e.jsx(za,{className:"h-4 w-4 ml-2"})]})})]})]}),e.jsx("div",{className:"h-1 bg-white/20",children:e.jsx(W.div,{className:"h-full bg-gradient-to-r from-yellow-400 to-yellow-300",initial:{width:0},animate:{width:"100%"},transition:{duration:10,ease:"linear"},onAnimationComplete:()=>a(!1)})})]})})})}):null},fP=({isOpen:s,feature:t,onClose:a})=>{const r=[{icon:Ls,title:"Analytics Avanados",description:"Relatrios detalhados, dashboards personalizados e anlise preditiva"},{icon:Nt,title:"Usurios Ilimitados",description:"Adicione toda sua equipe sem limites ou custos adicionais"},{icon:os,title:"Segurana Enterprise",description:"Criptografia avanada, autenticao em dois fatores e logs de auditoria"},{icon:Fs,title:"Integraes Avanadas",description:"API personalizada e conexo com sistemas ERP, CRM e contbeis"}];return e.jsx(rt,{children:s&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:a,className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs(W.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"relative bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"relative bg-gradient-to-r from-purple-600 to-indigo-600 p-6 text-white rounded-t-2xl",children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 p-2 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(ht,{className:"h-5 w-5"})}),e.jsxs("div",{className:"text-center",children:[e.jsx(W.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"inline-flex items-center justify-center w-16 h-16 bg-white/20 rounded-full mb-4",children:e.jsx(Va,{className:"h-8 w-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Recurso Enterprise"}),e.jsx("p",{className:"text-purple-100",children:t?`"${t}" est disponvel apenas no plano Enterprise`:"Desbloqueie recursos avanados com o plano Enterprise"})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4 text-center",children:"O que voc ganha com o Enterprise"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map((n,i)=>e.jsxs(W.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*i},className:"flex items-start space-x-4 p-4 bg-gradient-to-r from-purple-50 to-indigo-50 rounded-xl",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-gradient-to-r from-purple-500 to-indigo-500 rounded-lg flex items-center justify-center",children:e.jsx(n.icon,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:n.title}),e.jsx("p",{className:"text-gray-600 text-sm",children:n.description})]})]},n.title))})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Benefcios Exclusivos"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-center text-gray-700",children:[e.jsx(qs,{className:"h-4 w-4 text-yellow-500 mr-2 flex-shrink-0"}),"Gerente de conta dedicado"]}),e.jsxs("li",{className:"flex items-center text-gray-700",children:[e.jsx(qs,{className:"h-4 w-4 text-yellow-500 mr-2 flex-shrink-0"}),"Suporte 24/7 por telefone, email e chat"]}),e.jsxs("li",{className:"flex items-center text-gray-700",children:[e.jsx(qs,{className:"h-4 w-4 text-yellow-500 mr-2 flex-shrink-0"}),"SLA garantido com 99.9% de uptime"]}),e.jsxs("li",{className:"flex items-center text-gray-700",children:[e.jsx(qs,{className:"h-4 w-4 text-yellow-500 mr-2 flex-shrink-0"}),"Treinamento personalizado para sua equipe"]})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs(dn,{to:"/pricing",className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-semibold rounded-xl hover:shadow-lg transition-all duration-200",children:[e.jsx(wd,{className:"h-5 w-5 mr-2 text-yellow-300"}),"Ver Plano Enterprise"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Entre em contato para uma demonstrao personalizada"})]})]})]})]})})},bP=()=>{const s=ys();return j.useEffect(()=>{s("/",{replace:!0})},[s]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-700",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto"}),e.jsx("p",{className:"mt-4 text-lg",children:"Carregando sistema..."})]})})},yP=()=>{var _,C,L;const{isAdmin:s}=rs(),[t,a]=j.useState([{id:"1",code:"0000",role:"admin",createdAt:"2024-01-15T10:00:00",expiresAt:"2099-12-31T23:59:59",createdBy:"Admin Demo",isUsed:!0,usedBy:"Admin Demo",usedAt:"2024-01-15T10:05:00",isUniversal:!0},{id:"2",code:"234567",role:"technician",createdAt:"2024-01-16T11:30:00",expiresAt:"2024-12-31T23:59:59",createdBy:"Admin Demo",isUsed:!0,usedBy:"Carlos Tcnico",usedAt:"2024-01-16T14:20:00"},{id:"3",code:"345678",role:"technician",createdAt:"2024-01-17T09:15:00",expiresAt:"2024-12-31T23:59:59",createdBy:"Admin Demo",isUsed:!0,usedBy:"Ana Tcnica",usedAt:"2024-01-17T10:45:00"},{id:"4",code:"456789",role:"external",createdAt:"2024-01-18T14:30:00",expiresAt:"2024-12-31T23:59:59",createdBy:"Admin Demo",isUsed:!0,usedBy:"Joo Externo",usedAt:"2024-01-19T08:10:00"},{id:"5",code:"567890",role:"technician",createdAt:"2024-01-20T16:45:00",expiresAt:"2024-12-31T23:59:59",createdBy:"Admin Demo",isUsed:!1}]),[r,n]=j.useState(!1),[i,o]=j.useState(!1),[l,c]=j.useState(null),[d,A]=j.useState({role:"technician",expiresAt:new Date(new Date().setMonth(new Date().getMonth()+1)).toISOString().split("T")[0]}),[u,x]=j.useState(null),[m,y]=j.useState("all"),g=t.filter(f=>m==="all"?!0:m==="used"?f.isUsed:m==="unused"?!f.isUsed:m==="admin"||m==="technician"||m==="external"?f.role===m:!0),b=()=>Math.floor(1e5+Math.random()*9e5).toString(),p=()=>{const f={id:Date.now().toString(),code:b(),role:d.role,createdAt:new Date().toISOString(),expiresAt:new Date(d.expiresAt+"T23:59:59").toISOString(),createdBy:"Admin Demo",isUsed:!1};a([...t,f]),n(!1),x(f.id),setTimeout(()=>{u===f.id&&x(null)},3e3)},v=()=>{l&&(a(t.map(f=>f.id===l.id?l:f)),o(!1),c(null))},N=(f,F)=>{navigator.clipboard.writeText(f).then(()=>{x(F),setTimeout(()=>{u===F&&x(null)},3e3)})},D=f=>{const F=t.find(M=>M.id===f);if(F!=null&&F.isUniversal){alert("O cdigo universal no pode ser excludo.");return}confirm("Tem certeza que deseja excluir este cdigo de acesso?")&&a(t.filter(M=>M.id!==f))},S=f=>{const F=t.find(M=>M.id===f);if(F!=null&&F.isUniversal){c(F),o(!0);return}a(t.map(M=>M.id===f?{...M,code:b(),isUsed:!1,usedBy:void 0,usedAt:void 0}:M))},E=f=>new Date(f).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),R=f=>new Date(f)<new Date;return s?e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Cdigos de Acesso"}),e.jsxs("button",{onClick:()=>n(!0),className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-2 rounded-lg flex items-center space-x-2 hover:shadow-lg transition-all",children:[e.jsx(bt,{className:"h-4 w-4"}),e.jsx("span",{children:"Novo Cdigo"})]})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 shadow-md border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-xl flex items-center justify-center",children:e.jsx(ui,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Cdigo Universal"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Cdigo de acesso principal para administradores"})]})]}),e.jsxs("button",{onClick:()=>{const f=t.find(F=>F.isUniversal);f&&(c(f),o(!0))},className:"px-3 py-1.5 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors flex items-center space-x-1 text-sm",children:[e.jsx(rr,{className:"h-3 w-3"}),e.jsx("span",{children:"Alterar"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(os,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-mono font-bold text-lg text-gray-900 mr-2",children:((_=t.find(f=>f.isUniversal))==null?void 0:_.code)||"0000"}),e.jsx("button",{onClick:()=>{const f=t.find(F=>F.isUniversal);f&&N(f.code,f.id)},className:`p-1 rounded-md transition-colors ${u===((C=t.find(f=>f.isUniversal))==null?void 0:C.id)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,title:"Copiar cdigo",children:u===((L=t.find(f=>f.isUniversal))==null?void 0:L.id)?e.jsx(As,{className:"h-4 w-4"}):e.jsx(Gr,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Acesso administrativo com permisses completas"})]})]}),e.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-medium",children:"Universal"})]})]}),e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-md border border-gray-100",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>y("all"),className:`px-4 py-2 rounded-lg transition-colors ${m==="all"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Todos"}),e.jsx("button",{onClick:()=>y("unused"),className:`px-4 py-2 rounded-lg transition-colors ${m==="unused"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"No Utilizados"}),e.jsx("button",{onClick:()=>y("used"),className:`px-4 py-2 rounded-lg transition-colors ${m==="used"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Utilizados"}),e.jsx("button",{onClick:()=>y("admin"),className:`px-4 py-2 rounded-lg transition-colors ${m==="admin"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Administradores"}),e.jsx("button",{onClick:()=>y("technician"),className:`px-4 py-2 rounded-lg transition-colors ${m==="technician"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Tcnicos"}),e.jsx("button",{onClick:()=>y("external"),className:`px-4 py-2 rounded-lg transition-colors ${m==="external"?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Externos"})]})}),e.jsx("div",{className:"space-y-4",children:g.filter(f=>!f.isUniversal).length>0?g.filter(f=>!f.isUniversal).map((f,F)=>e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:F*.05},className:`bg-white rounded-xl p-6 shadow-md border ${f.isUsed?R(f.expiresAt)?"border-red-200":"border-yellow-200":R(f.expiresAt)?"border-red-200":"border-green-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${f.role==="admin"?"bg-purple-100":f.role==="technician"?"bg-blue-100":"bg-orange-100"}`,children:e.jsx(ui,{className:`h-6 w-6 ${f.role==="admin"?"text-purple-600":f.role==="technician"?"text-blue-600":"text-orange-600"}`})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mr-2",children:f.code}),e.jsx("button",{onClick:()=>N(f.code,f.id),className:`p-1 rounded-md transition-colors ${u===f.id?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,title:"Copiar cdigo",children:u===f.id?e.jsx(As,{className:"h-4 w-4"}):e.jsx(Gr,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-gray-600",children:f.role==="admin"?"Administrador":f.role==="technician"?"Tcnico":"Funcionrio Externo"})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:f.isUsed?e.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium",children:"Utilizado"}):R(f.expiresAt)?e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-xs font-medium",children:"Expirado"}):e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:"Disponvel"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-1",children:[e.jsx(Ot,{className:"h-4 w-4 mr-1 text-gray-400"}),e.jsx("span",{children:"Criado em:"})]}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:E(f.createdAt)})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-1",children:[e.jsx(Ot,{className:"h-4 w-4 mr-1 text-gray-400"}),e.jsx("span",{children:"Expira em:"})]}),e.jsx("p",{className:`text-sm font-medium ${R(f.expiresAt)?"text-red-600":"text-gray-900"}`,children:E(f.expiresAt)})]}),f.isUsed&&f.usedBy&&f.usedAt&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-1",children:[e.jsx(Jt,{className:"h-4 w-4 mr-1 text-gray-400"}),e.jsx("span",{children:"Utilizado por:"})]}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:f.usedBy})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-1",children:[e.jsx(vt,{className:"h-4 w-4 mr-1 text-gray-400"}),e.jsx("span",{children:"Utilizado em:"})]}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:E(f.usedAt)})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[!f.isUsed&&e.jsxs("button",{onClick:()=>S(f.id),className:"px-3 py-1.5 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors flex items-center space-x-1 text-sm",children:[e.jsx(bs,{className:"h-3 w-3"}),e.jsx("span",{children:"Regenerar"})]}),e.jsxs("button",{onClick:()=>D(f.id),className:"px-3 py-1.5 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors flex items-center space-x-1 text-sm",children:[e.jsx(Vt,{className:"h-3 w-3"}),e.jsx("span",{children:"Excluir"})]})]})]},f.id)):e.jsxs("div",{className:"bg-white rounded-xl p-10 shadow-md border border-gray-100 text-center",children:[e.jsx(ui,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhum cdigo encontrado"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"No encontramos cdigos de acesso com os filtros selecionados."}),e.jsx("button",{onClick:()=>y("all"),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Limpar filtros"})]})}),e.jsx(rt,{children:r&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>n(!1),className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"relative bg-white rounded-xl p-6 w-full max-w-md shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Novo Cdigo de Acesso"}),e.jsx("button",{onClick:()=>n(!1),children:e.jsx(ht,{className:"h-6 w-6 text-gray-400"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Acesso"}),e.jsxs("select",{value:d.role,onChange:f=>A({...d,role:f.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"admin",children:"Administrador"}),e.jsx("option",{value:"technician",children:"Tcnico"}),e.jsx("option",{value:"external",children:"Funcionrio Externo"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Expirao"}),e.jsx("input",{type:"date",value:d.expiresAt,onChange:f=>A({...d,expiresAt:f.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center text-blue-700 mb-2",children:[e.jsx(os,{className:"h-5 w-5 mr-2"}),e.jsx("h3",{className:"font-medium",children:"Informaes de Segurana"})]}),e.jsx("p",{className:"text-sm text-blue-600",children:"O cdigo ser gerado automaticamente e poder ser copiado aps a criao. Compartilhe-o de forma segura com o usurio."})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>n(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{onClick:p,className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:shadow-lg",children:"Gerar Cdigo"})]})]})]})}),e.jsx(rt,{children:i&&l&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>{o(!1),c(null)},className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"relative bg-white rounded-xl p-6 w-full max-w-md shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Alterar Cdigo Universal"}),e.jsx("button",{onClick:()=>{o(!1),c(null)},children:e.jsx(ht,{className:"h-6 w-6 text-gray-400"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Novo Cdigo Universal"}),e.jsx("input",{type:"text",value:l.code,onChange:f=>c({...l,code:f.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Digite o novo cdigo",maxLength:6,required:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"O cdigo universal deve ter no mximo 6 dgitos"})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center text-yellow-700 mb-2",children:[e.jsx(os,{className:"h-5 w-5 mr-2"}),e.jsx("h3",{className:"font-medium",children:"Ateno"})]}),e.jsx("p",{className:"text-sm text-yellow-600",children:"Alterar o cdigo universal afetar o acesso de todos os administradores. Certifique-se de comunicar o novo cdigo a todos os usurios relevantes."})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>{o(!1),c(null)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsxs("button",{onClick:v,className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:shadow-lg",children:[e.jsx(Gt,{className:"h-4 w-4 mr-2 inline"}),"Salvar Alteraes"]})]})]})]})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6",children:[e.jsx(os,{className:"h-16 w-16 text-red-500 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Acesso Restrito"}),e.jsx("p",{className:"text-gray-600 text-center",children:"Esta rea  restrita a administradores do sistema."})]})},vP=()=>{const[s,t]=j.useState("monthly"),[a,r]=j.useState(!1),n=[{name:"Bsico",description:"Para pequenos negcios e profissionais autnomos",price:{monthly:0,annual:0},features:["At 50 ordens de servio por ms","At 3 usurios","Gesto bsica de estoque","Catlogo de servios","Relatrios bsicos","Suporte por email"],limitations:["Sem integrao financeira","Sem contratos de manuteno","Sem personalizao visual","Sem acesso offline"],cta:"Comear Grtis",color:"gray"},{name:"Premium",description:"Para empresas em crescimento que precisam de mais recursos",price:{monthly:49.9,annual:44.9},features:["Ordens de servio ilimitadas","At 10 usurios","Gesto avanada de estoque","Catlogo de servios completo","Contratos de manuteno","Integrao financeira","Relatrios avanados","Personalizao visual","Acesso offline","Suporte prioritrio"],limitations:["Sem API personalizada","Sem SLA garantido"],cta:"Assinar Premium",color:"blue",popular:!0},{name:"Enterprise",description:"Para grandes empresas com necessidades complexas",price:{monthly:99.9,annual:89.9},features:["Tudo do plano Premium","Usurios ilimitados","API personalizada","Integraes avanadas","Anlise de dados avanada","Monitoramento em tempo real","Suporte 24/7","Gerente de conta dedicado","SLA garantido","Treinamento personalizado"],cta:"Fale com Vendas",color:"purple"}],i=[{category:"Ordens de Servio",features:[{name:"Criao de OS",basic:!0,premium:!0,enterprise:!0},{name:"Atribuio de tcnicos",basic:!0,premium:!0,enterprise:!0},{name:"Anexo de fotos",basic:!0,premium:!0,enterprise:!0},{name:"Histrico de status",basic:!0,premium:!0,enterprise:!0},{name:"OS ilimitadas",basic:!1,premium:!0,enterprise:!0},{name:"Modelos personalizados",basic:!1,premium:!0,enterprise:!0},{name:"Assinatura digital",basic:!1,premium:!0,enterprise:!0},{name:"Automao de fluxo",basic:!1,premium:!1,enterprise:!0}]},{category:"Clientes",features:[{name:"Cadastro bsico",basic:!0,premium:!0,enterprise:!0},{name:"Histrico de servios",basic:!0,premium:!0,enterprise:!0},{name:"Cadastro PF/PJ",basic:!1,premium:!0,enterprise:!0},{name:"Contratos de manuteno",basic:!1,premium:!0,enterprise:!0},{name:"SLA personalizado",basic:!1,premium:!1,enterprise:!0},{name:"Portal do cliente",basic:!1,premium:!1,enterprise:!0}]},{category:"Estoque",features:[{name:"Controle bsico",basic:!0,premium:!0,enterprise:!0},{name:"Baixa automtica",basic:!1,premium:!0,enterprise:!0},{name:"Alertas de estoque mnimo",basic:!1,premium:!0,enterprise:!0},{name:"Mltiplos depsitos",basic:!1,premium:!1,enterprise:!0},{name:"Gesto de fornecedores",basic:!1,premium:!0,enterprise:!0}]},{category:"Financeiro",features:[{name:"Faturamento bsico",basic:!0,premium:!0,enterprise:!0},{name:"Integrao com OS",basic:!1,premium:!0,enterprise:!0},{name:"Relatrios financeiros",basic:!1,premium:!0,enterprise:!0},{name:"Integrao bancria",basic:!1,premium:!1,enterprise:!0},{name:"Fluxo de caixa avanado",basic:!1,premium:!1,enterprise:!0}]},{category:"Relatrios",features:[{name:"Relatrios bsicos",basic:!0,premium:!0,enterprise:!0},{name:"Exportao PDF/Excel",basic:!1,premium:!0,enterprise:!0},{name:"Dashboards personalizados",basic:!1,premium:!0,enterprise:!0},{name:"Business Intelligence",basic:!1,premium:!1,enterprise:!0},{name:"Anlise preditiva",basic:!1,premium:!1,enterprise:!0}]},{category:"Suporte",features:[{name:"Suporte por email",basic:!0,premium:!0,enterprise:!0},{name:"Suporte prioritrio",basic:!1,premium:!0,enterprise:!0},{name:"Suporte 24/7",basic:!1,premium:!1,enterprise:!0},{name:"Gerente de conta",basic:!1,premium:!1,enterprise:!0},{name:"SLA garantido",basic:!1,premium:!1,enterprise:!0},{name:"Treinamento personalizado",basic:!1,premium:!1,enterprise:!0}]}];return e.jsx("div",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-gray-50 to-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx(W.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-4xl font-bold text-gray-900 mb-4",children:"Planos e Preos"}),e.jsx(W.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.6},className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Escolha o plano ideal para o seu negcio e comece a otimizar sua gesto de servios hoje mesmo"}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.6},className:"mt-8 inline-flex items-center bg-gray-100 p-1 rounded-full",children:[e.jsx("button",{onClick:()=>t("monthly"),className:`px-6 py-2 rounded-full text-sm font-medium transition-colors ${s==="monthly"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Mensal"}),e.jsxs("button",{onClick:()=>t("annual"),className:`px-6 py-2 rounded-full text-sm font-medium transition-colors ${s==="annual"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Anual ",e.jsx("span",{className:"text-green-600 font-bold",children:"-10%"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-16",children:n.map((o,l)=>e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4+l*.1,duration:.6},className:`relative rounded-2xl shadow-lg overflow-hidden transition-all duration-300 ${o.popular?"border-2 border-blue-500 transform md:-translate-y-4 hover:shadow-2xl":"border border-gray-200 hover:shadow-xl"}`,children:[o.popular&&e.jsx("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-r from-blue-500 to-purple-500 text-white py-2 text-center text-sm font-bold",children:"MAIS POPULAR"}),e.jsxs("div",{className:`p-8 ${o.popular?"pt-14":"pt-8"}`,children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:o.name}),e.jsx("p",{className:"text-gray-600 mb-6 h-12",children:o.description}),e.jsxs("div",{className:"mb-6",children:[e.jsx("span",{className:"text-4xl font-bold text-gray-900",children:o.price[s]===0?"Grtis":`R$${o.price[s].toFixed(2)}`}),o.price[s]>0&&e.jsxs("span",{className:"text-gray-600 ml-2",children:["/ms",s==="annual"&&", cobrado anualmente"]})]}),e.jsxs("ul",{className:"space-y-3 mb-8",children:[o.features.map((c,d)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx(As,{className:"h-5 w-5 text-green-500 mr-2 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-gray-600",children:c})]},d)),o.limitations&&o.limitations.map((c,d)=>e.jsxs("li",{className:"flex items-start text-gray-400",children:[e.jsx(ht,{className:"h-5 w-5 text-gray-300 mr-2 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:c})]},`limit-${d}`))]}),e.jsx("button",{className:`w-full py-3 px-4 rounded-xl font-semibold transition-all duration-200 ${o.name==="Bsico"?"bg-gray-900 text-white hover:bg-gray-800":o.name==="Premium"?"bg-gradient-to-r from-blue-500 to-purple-500 text-white hover:shadow-lg transform hover:-translate-y-0.5":"bg-gradient-to-r from-purple-500 to-indigo-500 text-white hover:shadow-lg transform hover:-translate-y-0.5"}`,children:o.cta})]})]},o.name))}),e.jsx("div",{className:"text-center mb-8",children:e.jsxs("button",{onClick:()=>r(!a),className:"inline-flex items-center space-x-2 text-blue-600 font-medium hover:text-blue-800 transition-colors",children:[e.jsx("span",{children:a?"Ocultar comparao detalhada":"Ver comparao detalhada de recursos"}),e.jsx(W.div,{animate:{rotate:a?90:0},transition:{duration:.3},children:e.jsx(za,{className:"h-5 w-5"})})]})}),a&&e.jsx(W.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden mb-16",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50 w-1/3",children:"Recursos"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50",children:"Bsico"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-blue-600 uppercase tracking-wider bg-blue-50",children:"Premium"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-purple-600 uppercase tracking-wider bg-purple-50",children:"Enterprise"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(o=>e.jsxs(ed.Fragment,{children:[e.jsx("tr",{className:"bg-gray-50",children:e.jsx("td",{colSpan:4,className:"px-6 py-4 text-sm font-medium text-gray-900",children:o.category})}),o.features.map((l,c)=>e.jsxs("tr",{className:c%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:l.name}),e.jsx("td",{className:"px-6 py-4 text-center",children:l.basic?e.jsx(As,{className:"h-5 w-5 text-green-500 mx-auto"}):e.jsx(ht,{className:"h-5 w-5 text-gray-300 mx-auto"})}),e.jsx("td",{className:"px-6 py-4 text-center bg-blue-50",children:l.premium?e.jsx(As,{className:"h-5 w-5 text-green-500 mx-auto"}):e.jsx(ht,{className:"h-5 w-5 text-gray-300 mx-auto"})}),e.jsx("td",{className:"px-6 py-4 text-center bg-purple-50",children:l.enterprise?e.jsx(As,{className:"h-5 w-5 text-green-500 mx-auto"}):e.jsx(ht,{className:"h-5 w-5 text-gray-300 mx-auto"})})]},`${o.category}-${c}`))]},o.category))})]})})}),e.jsxs("div",{className:"mb-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 text-center mb-12",children:"Recursos Principais"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[{icon:ut,title:"Gesto de Ordens de Servio",description:"Crie, acompanhe e gerencie todas as suas ordens de servio em um s lugar.",color:"blue"},{icon:wt,title:"Controle de Estoque",description:"Gerencie seu inventrio com baixa automtica de materiais utilizados nas OS.",color:"green"},{icon:Nt,title:"Gesto de Clientes",description:"Cadastro completo de clientes PF e PJ com histrico de servios.",color:"purple"},{icon:Ot,title:"Agendamento Inteligente",description:"Organize a agenda dos tcnicos e otimize rotas de atendimento.",color:"orange"},{icon:Ut,title:"Integrao Financeira",description:"Faturamento automtico vinculado s ordens de servio concludas.",color:"emerald"},{icon:Ls,title:"Relatrios Avanados",description:"Anlise detalhada de desempenho, produtividade e resultados financeiros.",color:"indigo"},{icon:Nd,title:"Acesso Mobile",description:"Acesse o sistema de qualquer lugar, mesmo sem conexo com internet.",color:"pink"},{icon:Il,title:"Personalizao Visual",description:"Adapte a interface s cores e identidade visual da sua empresa.",color:"amber"},{icon:hj,title:"Backup Automtico",description:"Seus dados sempre seguros com backup automtico na nuvem.",color:"sky"}].map((o,l)=>e.jsxs(W.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:l*.1,duration:.6},viewport:{once:!0},className:"bg-white rounded-xl p-6 shadow-md border border-gray-100 hover:shadow-lg transition-all duration-300",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg bg-${o.color}-100 flex items-center justify-center mb-4`,children:e.jsx(o.icon,{className:`h-6 w-6 text-${o.color}-600`})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:o.title}),e.jsx("p",{className:"text-gray-600",children:o.description})]},o.title))})]}),e.jsxs("div",{className:"mb-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 text-center mb-12",children:"Perguntas Frequentes"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-5xl mx-auto",children:[{question:"Posso mudar de plano a qualquer momento?",answer:"Sim, voc pode fazer upgrade ou downgrade do seu plano a qualquer momento. As mudanas entram em vigor imediatamente e o valor  ajustado proporcionalmente."},{question:"Existe perodo de teste?",answer:"Sim, oferecemos 14 dias de teste gratuito para os planos Premium e Enterprise, com acesso a todos os recursos."},{question:"Como funciona o suporte tcnico?",answer:"O plano Bsico inclui suporte por email com tempo de resposta de at 48h. O plano Premium oferece suporte prioritrio com resposta em at 24h. O plano Enterprise inclui suporte 24/7 por email, chat e telefone."},{question:"Preciso instalar algum software?",answer:"No, o GiarTech  uma soluo 100% web, acessvel de qualquer navegador. Tambm oferecemos aplicativos mobile para iOS e Android nos planos Premium e Enterprise."},{question:"Meus dados esto seguros?",answer:"Sim, utilizamos criptografia de ponta a ponta e seguimos as melhores prticas de segurana. Realizamos backups dirios e estamos em conformidade com a LGPD."},{question:"Posso cancelar a qualquer momento?",answer:"Sim, voc pode cancelar sua assinatura a qualquer momento sem taxas adicionais. No caso de planos anuais, oferecemos reembolso proporcional ao perodo no utilizado."}].map((o,l)=>e.jsxs(W.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:l*.1,duration:.6},viewport:{once:!0},className:"bg-white rounded-xl p-6 shadow-md border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:o.question}),e.jsx("p",{className:"text-gray-600",children:o.answer})]},l))})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-12 text-center text-white",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Pronto para transformar sua gesto de servios?"}),e.jsx("p",{className:"text-xl text-blue-100 mb-8 max-w-3xl mx-auto",children:"Comece agora mesmo com o plano gratuito ou experimente todos os recursos premium por 14 dias sem compromisso."}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4",children:[e.jsx("button",{className:"px-8 py-4 bg-white text-blue-600 font-semibold rounded-xl hover:shadow-lg transition-all duration-200",children:"Comear Gratuitamente"}),e.jsx("button",{className:"px-8 py-4 bg-blue-500 bg-opacity-30 text-white font-semibold rounded-xl hover:bg-opacity-40 hover:shadow-lg transition-all duration-200",children:"Agendar Demonstrao"})]})]}),e.jsxs("div",{className:"mt-16 text-center",children:[e.jsx("p",{className:"text-gray-600 mb-2",children:"Precisa de ajuda para escolher o plano ideal?"}),e.jsxs("p",{className:"text-gray-900 font-medium",children:["Entre em contato: ",e.jsx("a",{href:"tel:1155552560",className:"text-blue-600 hover:text-blue-800",children:"11 5555-2560"})," | ",e.jsx("a",{href:"mailto:contato@giartech.com.br",className:"text-blue-600 hover:text-blue-800",children:"contato@giartech.com.br"})]}),e.jsx("p",{className:"text-gray-500 text-sm mt-4",children:"GiarTech Solues Engenharia da Climatizao | CNPJ: 37.509.897/0001-93"})]})]})})},wP=({isOpen:s,onClose:t,requiredRole:a})=>{const n=(()=>{switch(a){case"admin":return{title:"Acesso Restrito",description:"Esta funcionalidade est disponvel apenas para administradores do sistema.",icon:os,color:"red",buttonText:"Entendi"};case"premium":return{title:"Recurso Premium",description:"Esta funcionalidade est disponvel apenas para assinantes do plano Premium.",icon:ui,color:"blue",buttonText:"Ver Planos"};case"enterprise":return{title:"Recurso Enterprise",description:"Esta funcionalidade est disponvel apenas para assinantes do plano Enterprise.",icon:Va,color:"purple",buttonText:"Ver Planos"};default:return{title:"Acesso Restrito",description:"Voc no tem permisso para acessar esta funcionalidade.",icon:cs,color:"yellow",buttonText:"Entendi"}}})();return e.jsx(rt,{children:s&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs(W.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"relative bg-white rounded-xl shadow-2xl max-w-md w-full",children:[e.jsxs("div",{className:`relative bg-${n.color}-600 p-6 text-white rounded-t-xl`,children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(ht,{className:"h-5 w-5"})}),e.jsxs("div",{className:"text-center",children:[e.jsx(W.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"inline-flex items-center justify-center w-16 h-16 bg-white/20 rounded-full mb-4",children:e.jsx(n.icon,{className:"h-8 w-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:n.title}),e.jsx("p",{className:"text-white/80",children:n.description})]})]}),e.jsx("div",{className:"p-6",children:a==="admin"?e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-6",children:"Entre em contato com o administrador do sistema para solicitar acesso a esta funcionalidade."}),e.jsx("button",{onClick:t,className:"px-6 py-3 bg-gray-900 text-white font-semibold rounded-lg hover:bg-gray-800 transition-colors",children:n.buttonText})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-6",children:"Faa upgrade do seu plano para desbloquear esta e outras funcionalidades avanadas."}),e.jsx(dn,{to:"/pricing",className:`inline-block px-6 py-3 bg-${n.color}-600 text-white font-semibold rounded-lg hover:bg-${n.color}-700 transition-colors`,children:n.buttonText})]})})]})]})})},mv=({data:s,title:t,subtitle:a,onSegmentClick:r})=>{const[n,i]=j.useState(null),o=(A,u)=>{i(u)},l=()=>{i(null)},c=(A,u)=>{r&&r(u)},d=({active:A,payload:u})=>A&&u&&u.length?e.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[e.jsx("p",{className:"font-medium text-gray-900",children:u[0].name}),e.jsxs("p",{className:"text-sm",style:{color:u[0].payload.color},children:[u[0].value,"%"]})]}):null;return e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 h-full",children:[e.jsxs("div",{className:"flex flex-col items-center mb-4",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-900 text-center",children:t}),a&&e.jsx("p",{className:"text-xs text-gray-600 text-center",children:a})]}),e.jsx("div",{className:"h-48 flex items-center justify-center",children:e.jsx(tm,{width:"100%",height:"100%",children:e.jsxs(UN,{children:[e.jsx(DN,{data:s,cx:"50%",cy:"50%",innerRadius:40,outerRadius:60,paddingAngle:2,dataKey:"value",animationDuration:300,animationBegin:0,onMouseEnter:o,onMouseLeave:l,onClick:c,children:s.map((A,u)=>e.jsx(kv,{fill:A.color,stroke:A.color,style:{filter:n===u?"drop-shadow(0px 4px 6px rgba(0, 0, 0, 0.2))":"drop-shadow(0px 2px 3px rgba(0, 0, 0, 0.1))",opacity:n===null||n===u?1:.7,cursor:"pointer",transition:"all 0.3s ease"}},`cell-${u}`))}),e.jsx(sm,{content:e.jsx(d,{})})]})})}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:s.map((A,u)=>e.jsxs(W.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex items-center space-x-2 p-1 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>c(A,u),onMouseEnter:()=>o(A,u),onMouseLeave:l,children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:A.color}}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"text-xs font-medium text-gray-900 truncate",children:A.name})}),e.jsxs("p",{className:"text-xs font-bold text-gray-900",children:[A.value,"%"]})]},A.name))})]})},jP=({data:s,title:t,subtitle:a,prefix:r="",suffix:n="",onBarClick:i})=>{const o=({active:c,payload:d,label:A})=>c&&d&&d.length?e.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[e.jsx("p",{className:"font-medium text-gray-900",children:A}),e.jsxs("p",{className:"text-sm",style:{color:d[0].payload.color},children:[r,d[0].value,n]})]}):null,l=(c,d)=>{i&&i(d)};return e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 h-full",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("div",{className:"text-center w-full",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-900",children:t}),a&&e.jsx("p",{className:"text-xs text-gray-600",children:a})]})}),e.jsx("div",{className:"h-64",children:e.jsx(tm,{width:"100%",height:"100%",children:e.jsxs(cp,{data:s,margin:{top:20,right:20,left:10,bottom:30},children:[e.jsx(dp,{strokeDasharray:"3 3",opacity:.1}),e.jsx(Ap,{dataKey:"name",angle:-45,textAnchor:"end",tick:{fontSize:10},height:50}),e.jsx(up,{tick:{fontSize:10},width:30}),e.jsx(sm,{content:e.jsx(o,{})}),e.jsx(ml,{dataKey:"value",animationDuration:300,animationBegin:0,label:{position:"top",fill:"#6b7280",fontSize:10,formatter:c=>`${r}${c}${n}`},onClick:l,children:s.map((c,d)=>e.jsx(kv,{fill:c.color,style:{filter:"drop-shadow(0px 2px 3px rgba(0, 0, 0, 0.1))",cursor:"pointer"}},`cell-${d}`))})]})})})]})},NP=({data:s,title:t,subtitle:a,metricType:r,onMetricChange:n,onBarClick:i})=>{const o=({active:d,payload:A,label:u})=>d&&A&&A.length?e.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[e.jsx("p",{className:"font-medium text-gray-900",children:u}),A.map((x,m)=>e.jsxs("p",{className:"text-sm",style:{color:x.color},children:[x.name,": ",x.value,"%"]},m))]}):null,l=(d,A)=>{i&&i(A)},c=[{value:"productivity",label:"Produtividade"},{value:"efficiency",label:"Eficincia"},{value:"quality",label:"Qualidade"},{value:"satisfaction",label:"Satisfao"}];return e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 h-full",children:[e.jsxs("div",{className:"flex flex-col items-center mb-4",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-900 text-center",children:t}),a&&e.jsx("p",{className:"text-xs text-gray-600 text-center",children:a}),e.jsx("select",{value:r,onChange:d=>n(d.target.value),className:"mt-2 px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:c.map(d=>e.jsx("option",{value:d.value,children:d.label},d.value))})]}),e.jsx("div",{className:"h-64",children:e.jsx(tm,{width:"100%",height:"100%",children:e.jsxs(cp,{data:s,margin:{top:20,right:20,left:10,bottom:30},children:[e.jsx(dp,{strokeDasharray:"3 3",opacity:.1}),e.jsx(Ap,{dataKey:"name",angle:-45,textAnchor:"end",tick:{fontSize:10},height:50}),e.jsx(up,{domain:[0,100],tick:{fontSize:10},width:30}),e.jsx(sm,{content:e.jsx(o,{})}),e.jsx(Ev,{wrapperStyle:{fontSize:"10px"}}),e.jsx(ml,{name:"Atual",dataKey:"current",fill:"#3b82f6",animationDuration:300,animationBegin:0,radius:[4,4,0,0],onClick:l}),e.jsx(ml,{name:"Anterior",dataKey:"previous",fill:"#93c5fd",animationDuration:300,animationBegin:150,radius:[4,4,0,0],onClick:l})]})})})]})},_P=({id:s,name:t,color:a,metrics:r,performance:n,isSelected:i,onClick:o})=>e.jsx(W.div,{whileHover:{scale:1.01},whileTap:{scale:.99},className:`p-4 rounded-lg border transition-all duration-300 cursor-pointer ${i?"border-blue-300 bg-blue-50":"border-gray-200 hover:border-blue-200 hover:bg-gray-50"}`,onClick:o,children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-2",children:e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:a},children:e.jsx("span",{className:"text-xs font-bold text-white",children:t.charAt(0)})})}),e.jsx("h3",{className:"font-medium text-gray-900 text-base mb-1",children:t}),e.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[n.change>0?e.jsx(Hc,{className:"h-3 w-3 text-green-500"}):n.change<0?e.jsx(Gp,{className:"h-3 w-3 text-red-500"}):null,e.jsxs("span",{className:`text-sm font-medium ${n.change>0?"text-green-600":n.change<0?"text-red-600":"text-gray-600"}`,children:[n.change>0?"+":"",n.change,"%"]})]}),e.jsx("div",{className:"w-full mb-2",children:e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full",style:{width:`${n.current}%`,backgroundColor:a}})})}),e.jsxs("div",{className:"flex justify-between w-full text-xs text-gray-500",children:[e.jsxs("span",{children:["Prod: ",r.productivity,"%"]}),e.jsxs("span",{children:["Qual: ",r.quality,"%"]})]})]})}),CP=({alerts:s,departments:t,onResolve:a,onEscalate:r,onIgnore:n})=>{const[i,o]=j.useState("severity"),[l,c]=j.useState("all"),[d,A]=j.useState([]),[u,x]=j.useState(null),[m,y]=j.useState(""),[g,b]=j.useState(null),[p,v]=j.useState(""),[N,D]=j.useState("medium"),S=[{id:"1",name:"Joo Silva",department:"operations",role:"Supervisor"},{id:"2",name:"Maria Santos",department:"operations",role:"Tcnico"},{id:"3",name:"Carlos Oliveira",department:"technical",role:"Tcnico Snior"},{id:"4",name:"Ana Pereira",department:"technical",role:"Tcnico"},{id:"5",name:"Pedro Costa",department:"commercial",role:"Gerente"},{id:"6",name:"Lcia Ferreira",department:"financial",role:"Analista"},{id:"7",name:"Roberto Almeida",department:"administrative",role:"Coordenador"}],E=P=>{switch(P){case"low":return"#f59e0b";case"medium":return"#f97316";case"high":return"#ef4444";default:return"#6b7280"}},R=P=>{switch(P){case"low":return e.jsx(vt,{className:"h-4 w-4"});case"medium":return e.jsx(cs,{className:"h-4 w-4"});case"high":return e.jsx(ht,{className:"h-4 w-4"});default:return null}},_=P=>new Date(P).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),C=P=>{A(Z=>Z.includes(P)?Z.filter(O=>O!==P):[...Z,P])},L=P=>{x(P)},f=()=>{!u||!g||!p||(console.log("Creating task for employee:",g),console.log("Due date:",p),console.log("Priority:",N),r(u),x(null),b(null),v(""),D("medium"))},F=S.filter(P=>P.name.toLowerCase().includes(m.toLowerCase())||P.department.toLowerCase().includes(m.toLowerCase())||P.role.toLowerCase().includes(m.toLowerCase())),M=[...s].filter(P=>l==="all"||P.departmentId===l).sort((P,Z)=>{if(i==="date")return new Date(Z.timestamp).getTime()-new Date(P.timestamp).getTime();{const O={high:0,medium:1,low:2};return O[P.severity]-O[Z.severity]}});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 mb-4 pb-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Ordenar por:"}),e.jsxs("select",{value:i,onChange:P=>o(P.target.value),className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"severity",children:"Severidade"}),e.jsx("option",{value:"date",children:"Data"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Departamento:"}),e.jsxs("select",{value:l,onChange:P=>c(P.target.value),className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"all",children:"Todos"}),t.map(P=>e.jsx("option",{value:P.id,children:P.name},P.id))]})]})]}),e.jsx("div",{className:"space-y-3",children:M.length>0?M.map(P=>{const Z=t.find(X=>X.id===P.departmentId),O=d.includes(P.id);return e.jsxs(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>C(P.id),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",style:{backgroundColor:`${E(P.severity)}20`},children:R(P.severity)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-medium text-gray-900 text-base",children:P.title}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:_(P.timestamp)}),e.jsx(W.div,{animate:{rotate:O?180:0},transition:{duration:.3},children:e.jsx(Ir,{className:"h-4 w-4 text-gray-400"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("div",{className:"px-2 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:`${E(P.severity)}20`,color:E(P.severity)},children:P.severity==="low"?"Baixa":P.severity==="medium"?"Mdia":"Alta"}),Z&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:Z.color}}),e.jsx("span",{className:"text-xs text-gray-500",children:Z.name})]}),P.status==="new"&&e.jsx("div",{className:"px-2 py-0.5 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:"Novo"})]})]})]})}),e.jsx(rt,{children:O&&e.jsx(W.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"border-t border-gray-200 overflow-hidden",children:e.jsxs("div",{className:"p-4 bg-gray-50",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-4",children:P.description}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[e.jsxs("button",{onClick:()=>a(P.id),className:"px-3 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors text-sm flex items-center space-x-1",children:[e.jsx(As,{className:"h-4 w-4"}),e.jsx("span",{children:"Resolver"})]}),e.jsxs("button",{onClick:()=>L(P.id),className:"px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm flex items-center space-x-1",children:[e.jsx(ii,{className:"h-4 w-4"}),e.jsx("span",{children:"Escalar"})]}),e.jsxs("button",{onClick:()=>n(P.id),className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm flex items-center space-x-1",children:[e.jsx(Vt,{className:"h-4 w-4"}),e.jsx("span",{children:"Ignorar"})]})]})]})})})]},P.id)}):e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx(As,{className:"h-12 w-12 text-green-500 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"No h alertas para exibir com os filtros atuais"})]})}),e.jsx(rt,{children:u&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>x(null),className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs(W.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"relative bg-white rounded-xl p-6 w-full max-w-md shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Escalar Alerta"}),e.jsx("button",{onClick:()=>x(null),children:e.jsx(ht,{className:"h-6 w-6 text-gray-400"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Responsvel"}),e.jsxs("div",{className:"relative",children:[e.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",value:m,onChange:P=>y(P.target.value),placeholder:"Buscar por nome ou setor...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-200 rounded-lg",children:F.length>0?e.jsx("div",{className:"divide-y divide-gray-200",children:F.map(P=>{var Z;return e.jsx("div",{onClick:()=>b(P.id),className:`p-3 cursor-pointer transition-colors ${g===P.id?"bg-blue-50":"hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[P.avatar?e.jsx("img",{src:P.avatar,alt:P.name,className:"w-8 h-8 rounded-full object-cover"}):e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx(Jt,{className:"h-4 w-4 text-gray-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:P.name}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[e.jsx("span",{children:P.role}),e.jsx("span",{children:""}),e.jsx("span",{children:((Z=t.find(O=>O.id===P.department))==null?void 0:Z.name)||P.department})]})]})]})},P.id)})}):e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Nenhum funcionrio encontrado"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prazo"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ot,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"date",value:p,onChange:P=>v(P.target.value),min:new Date().toISOString().split("T")[0],className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prioridade"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>D("low"),className:`flex items-center justify-center space-x-1 p-2 rounded-lg border ${N==="low"?"bg-green-50 border-green-300 text-green-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(lu,{className:"h-4 w-4"}),e.jsx("span",{children:"Baixa"})]}),e.jsxs("button",{type:"button",onClick:()=>D("medium"),className:`flex items-center justify-center space-x-1 p-2 rounded-lg border ${N==="medium"?"bg-yellow-50 border-yellow-300 text-yellow-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(lu,{className:"h-4 w-4"}),e.jsx("span",{children:"Mdia"})]}),e.jsxs("button",{type:"button",onClick:()=>D("high"),className:`flex items-center justify-center space-x-1 p-2 rounded-lg border ${N==="high"?"bg-red-50 border-red-300 text-red-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(lu,{className:"h-4 w-4"}),e.jsx("span",{children:"Alta"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(vt,{className:"h-4 w-4 text-blue-500"}),e.jsx("p",{className:"text-sm font-medium text-blue-700",children:"Tarefa ser criada na agenda"})]}),e.jsx("p",{className:"text-xs text-blue-600",children:"Uma tarefa ser automaticamente criada na agenda do responsvel selecionado com o prazo e prioridade definidos."})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>x(null),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{onClick:f,disabled:!g||!p,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-blue-300 disabled:cursor-not-allowed",children:"Escalar Alerta"})]})]})]})})]})},BP=()=>{var ue,me,xe,Be;const s=j.useRef(null),[t,a]=j.useState("all"),[r,n]=j.useState("month"),[i,o]=j.useState("productivity"),[l,c]=j.useState(!1),[d,A]=j.useState(new Date),[u,x]=j.useState(!1),[m,y]=j.useState(!1),[g,b]=j.useState(!1),[p,v]=j.useState("pdf"),[N,D]=j.useState(""),[S,E]=j.useState("weekly"),[R,_]=j.useState([{id:"1",name:"Relatrio Semanal de Desempenho",frequency:"weekly",format:"pdf",recipients:["admin@example.com"],nextDate:"2024-01-25"}]),[C,L]=j.useState(!1),[f,F]=j.useState(0),M=[{id:"operations",name:"Operacional",color:"#3b82f6",metrics:{productivity:87,efficiency:82,quality:90,satisfaction:85},performance:{current:87,previous:82,change:5}},{id:"commercial",name:"Comercial",color:"#10b981",metrics:{productivity:92,efficiency:88,quality:85,satisfaction:91},performance:{current:92,previous:89,change:3}},{id:"financial",name:"Financeiro",color:"#8b5cf6",metrics:{productivity:95,efficiency:93,quality:97,satisfaction:89},performance:{current:95,previous:92,change:3}},{id:"administrative",name:"Administrativo",color:"#f59e0b",metrics:{productivity:89,efficiency:91,quality:93,satisfaction:88},performance:{current:89,previous:90,change:-1}},{id:"technical",name:"Tcnico",color:"#ef4444",metrics:{productivity:83,efficiency:85,quality:88,satisfaction:82},performance:{current:83,previous:80,change:3}}],P=[{id:"alert1",departmentId:"operations",title:"Queda na produtividade",description:"A produtividade do departamento operacional caiu 5% nas ltimas 24 horas.",timestamp:"2024-01-15T10:30:00",severity:"medium",status:"new"},{id:"alert2",departmentId:"technical",title:"Atraso em atendimentos",description:"O tempo mdio de atendimento est acima da meta estabelecida.",timestamp:"2024-01-15T09:15:00",severity:"high",status:"new"},{id:"alert3",departmentId:"commercial",title:"Meta de vendas atingida",description:"O departamento comercial atingiu 100% da meta mensal antes do prazo.",timestamp:"2024-01-14T16:45:00",severity:"low",status:"viewed"}],Z=()=>[{name:"Instalaes",value:35,color:"#3b82f6"},{name:"Manutenes",value:40,color:"#10b981"},{name:"Reparos",value:25,color:"#f59e0b"}],O=()=>[{name:"1 Visita",value:65,color:"#10b981"},{name:"2 Visita",value:25,color:"#f59e0b"},{name:"3+ Visitas",value:10,color:"#ef4444"}],X=()=>[{name:"Carlos",value:92,color:"#3b82f6"},{name:"Ana",value:88,color:"#8b5cf6"},{name:"Pedro",value:85,color:"#10b981"},{name:"Maria",value:91,color:"#f59e0b"},{name:"Joo",value:78,color:"#ef4444"}],q=()=>M.map(ee=>({name:ee.name,current:ee.metrics[i],previous:ee.metrics[i]-(Math.random()*10-5),color:ee.color})),V=()=>{c(!0),setTimeout(()=>{A(new Date),c(!1)},1e3)},oe=ee=>{console.log("Resolvendo alerta:",ee)},H=ee=>{console.log("Escalando alerta:",ee)},I=ee=>{console.log("Ignorando alerta:",ee)},B=async()=>{if(s.current){y(!0),L(!0),F(10);try{const ee=setInterval(()=>{F(Me=>Me>=90?(clearInterval(ee),90):Me+10)},300),je=await hg(s.current,{scale:1,useCORS:!0,logging:!1});F(95);const Pe=je.toDataURL("image/png"),Xe=new Ft({orientation:"portrait",unit:"mm",format:"a4"});Xe.setFillColor(59,130,246),Xe.rect(0,0,Xe.internal.pageSize.width,20,"F"),Xe.setTextColor(255,255,255),Xe.setFontSize(14),Xe.text("Dashboard Departamental - GiarTech",10,10),Xe.setFontSize(10),Xe.text(`Gerado em: ${new Date().toLocaleString("pt-BR")}`,10,16);const Ce=Xe.internal.pageSize.width,K=je.height*Ce/je.width;Xe.addImage(Pe,"PNG",0,25,Ce,K),Xe.save("dashboard-departamental.pdf"),F(100),setTimeout(()=>{y(!1),L(!1),F(0)},1e3)}catch(ee){console.error("Erro ao gerar PDF:",ee),y(!1),L(!1),alert("Erro ao gerar PDF. Tente novamente.")}}},$=()=>{L(!0),F(10);const ee=setInterval(()=>{F(je=>je>=90?(clearInterval(ee),90):je+10)},200);setTimeout(()=>{F(100),alert("Relatrio Excel gerado com sucesso!"),setTimeout(()=>{L(!1),F(0)},1e3)},1500)},T=()=>{L(!0),F(50),setTimeout(()=>{F(100),window.print(),setTimeout(()=>{L(!1),F(0)},1e3)},1e3)},ne=()=>{var Xe;if(!N){alert("Por favor, informe pelo menos um destinatrio");return}const ee=N.split(",").map(Ce=>Ce.trim()),je=new Date;S==="daily"?je.setDate(je.getDate()+1):S==="weekly"?je.setDate(je.getDate()+7):je.setMonth(je.getMonth()+1);const Pe={id:Date.now().toString(),name:`Relatrio ${S==="daily"?"Dirio":S==="weekly"?"Semanal":"Mensal"} - ${t==="all"?"Todos Departamentos":(Xe=M.find(Ce=>Ce.id===t))==null?void 0:Xe.name}`,frequency:S,format:p,recipients:ee,nextDate:je.toISOString().split("T")[0]};_([...R,Pe]),b(!1),D(""),alert("Relatrio agendado com sucesso!")};return e.jsxs("div",{ref:s,className:"space-y-6",children:[e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2 text-center md:text-left",children:"Dashboard Departamental"}),e.jsx("p",{className:"text-gray-600 text-center md:text-left",children:"Anlise de desempenho por departamento"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Perodo:"}),e.jsxs("select",{value:r,onChange:ee=>n(ee.target.value),className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"day",children:"Hoje"}),e.jsx("option",{value:"week",children:"Esta Semana"}),e.jsx("option",{value:"month",children:"Este Ms"}),e.jsx("option",{value:"quarter",children:"Este Trimestre"})]})]}),e.jsxs("button",{onClick:V,className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors flex items-center space-x-2",children:[e.jsx(bs,{className:`h-4 w-4 ${l?"animate-spin":""}`}),e.jsx("span",{children:"Atualizar"})]}),e.jsxs("button",{onClick:()=>x(!u),className:`px-4 py-2 rounded-lg transition-colors flex items-center space-x-2 ${u?"bg-yellow-500 text-white":"bg-yellow-100 text-yellow-700 hover:bg-yellow-200"}`,children:[e.jsx(cs,{className:"h-4 w-4"}),e.jsx("span",{children:"Alertas"}),e.jsx("div",{className:"w-5 h-5 bg-white text-yellow-700 rounded-full flex items-center justify-center text-xs font-bold",children:P.length})]})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 text-center mt-2",children:["ltima atualizao: ",d.toLocaleString("pt-BR")]})]}),e.jsx(rt,{children:u&&e.jsxs(W.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Alertas"}),e.jsx("button",{onClick:()=>x(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:e.jsx(ht,{className:"h-5 w-5"})})]}),e.jsx(CP,{alerts:P,departments:M,onResolve:oe,onEscalate:H,onIgnore:I})]})}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4 text-center",children:"Departamentos"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:[e.jsx(W.div,{whileHover:{scale:1.01},whileTap:{scale:.99},className:`p-4 rounded-lg border transition-all duration-300 cursor-pointer ${t==="all"?"border-blue-300 bg-blue-50":"border-gray-200 hover:border-blue-200 hover:bg-gray-50"}`,onClick:()=>a("all"),children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center mb-2",children:e.jsx(Nt,{className:"h-4 w-4 text-white"})}),e.jsx("h3",{className:"font-medium text-gray-900",children:"Todos"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Viso Geral"}),e.jsx("div",{className:"mt-2 w-full bg-gray-200 h-1.5 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 rounded-full",style:{width:"90%"}})}),e.jsxs("div",{className:"flex justify-between w-full mt-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Performance"}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:"90%"})]})]})}),M.map(ee=>e.jsx(_P,{id:ee.id,name:ee.name,color:ee.color,metrics:ee.metrics,performance:ee.performance,isSelected:t===ee.id,onClick:()=>a(ee.id)},ee.id))]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{title:"Produtividade",value:t==="all"?"89%":`${((ue=M.find(ee=>ee.id===t))==null?void 0:ue.metrics.productivity)||0}%`,change:"+3.5%",icon:Fs,color:"from-blue-500 to-blue-600"},{title:"Eficincia",value:t==="all"?"87%":`${((me=M.find(ee=>ee.id===t))==null?void 0:me.metrics.efficiency)||0}%`,change:"+2.1%",icon:zt,color:"from-green-500 to-green-600"},{title:"Qualidade",value:t==="all"?"91%":`${((xe=M.find(ee=>ee.id===t))==null?void 0:xe.metrics.quality)||0}%`,change:"+4.2%",icon:qs,color:"from-purple-500 to-purple-600"},{title:"Satisfao",value:t==="all"?"87%":`${((Be=M.find(ee=>ee.id===t))==null?void 0:Be.metrics.satisfaction)||0}%`,change:"+1.8%",icon:Aa,color:"from-amber-500 to-amber-600"}].map((ee,je)=>e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:je*.1},className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:`w-10 h-10 bg-gradient-to-r ${ee.color} rounded-lg flex items-center justify-center`,children:e.jsx(ee.icon,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Hc,{className:"h-3 w-3 text-green-500"}),e.jsx("span",{className:"text-xs font-medium text-green-600",children:ee.change})]})]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:ee.value}),e.jsx("p",{className:"text-sm text-gray-600",children:ee.title})]},ee.title))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(mv,{data:Z(),title:"Tipo de Servio",subtitle:"Distribuio por categoria"}),e.jsx(mv,{data:O(),title:"Taxa de Resoluo",subtitle:"Resoluo por nmero de visitas"}),e.jsx(jP,{data:X(),title:"Desempenho de Tcnicos",subtitle:"Produtividade individual",suffix:"%"}),e.jsx(NP,{data:q(),title:"Comparao de Departamentos",subtitle:"Atual vs. Perodo Anterior",metricType:i,onMetricChange:ee=>o(ee)})]}),t==="operations"||t==="all"?e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4 text-center",children:"Mtricas Operacionais"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Tempo Mdio de Atendimento"}),e.jsx(vt,{className:"h-5 w-5 text-blue-600"})]}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:"1h 45m"}),e.jsxs("div",{className:"flex items-center text-sm text-green-600",children:[e.jsx(Gp,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:"-12%"})]})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Meta: 2h 00m"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Atendimentos Realizados"}),e.jsx(Aa,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:"248"}),e.jsxs("div",{className:"flex items-center text-sm text-green-600",children:[e.jsx(Hc,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:"+8%"})]})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Meta: 230"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Satisfao do Cliente"}),e.jsx(qs,{className:"h-5 w-5 text-purple-600"})]}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:"4.8"}),e.jsxs("div",{className:"flex items-center text-sm text-green-600",children:[e.jsx(Hc,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:"+0.2"})]})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Meta: 4.5"})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Atendimentos por Tipo"}),e.jsx("div",{className:"space-y-3",children:[{label:"Instalaes",value:87,total:95,color:"#3b82f6"},{label:"Manutenes Preventivas",value:102,total:110,color:"#10b981"},{label:"Reparos/Corretivas",value:59,total:65,color:"#f59e0b"}].map(ee=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-700",children:ee.label}),e.jsxs("span",{className:"font-medium text-gray-900",children:[ee.value,"/",ee.total]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"h-2 rounded-full",style:{width:`${ee.value/ee.total*100}%`,backgroundColor:ee.color}})})]},ee.label))})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Produtividade por Equipe"}),e.jsx("div",{className:"space-y-3",children:[{label:"Equipe A",value:92,color:"#3b82f6"},{label:"Equipe B",value:87,color:"#10b981"},{label:"Equipe C",value:78,color:"#f59e0b"},{label:"Equipe D",value:85,color:"#8b5cf6"}].map(ee=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-700",children:ee.label}),e.jsxs("span",{className:"font-medium text-gray-900",children:[ee.value,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"h-2 rounded-full",style:{width:`${ee.value}%`,backgroundColor:ee.color}})})]},ee.label))})]})]})]}):null,e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4 text-center",children:"Relatrios"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("button",{onClick:B,disabled:m,className:"p-4 bg-red-50 rounded-lg hover:bg-red-100 transition-colors flex flex-col items-center justify-center space-y-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ut,{className:"h-8 w-8 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Baixar PDF"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Relatrio completo em PDF"})]}),e.jsxs("button",{onClick:$,className:"p-4 bg-green-50 rounded-lg hover:bg-green-100 transition-colors flex flex-col items-center justify-center space-y-2",children:[e.jsx(ut,{className:"h-8 w-8 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Exportar Excel"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Dados em formato Excel"})]}),e.jsxs("button",{onClick:T,className:"p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors flex flex-col items-center justify-center space-y-2",children:[e.jsx(Bu,{className:"h-8 w-8 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Imprimir"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Verso para impresso"})]}),e.jsxs("button",{onClick:()=>b(!0),className:"p-4 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors flex flex-col items-center justify-center space-y-2",children:[e.jsx(Ot,{className:"h-8 w-8 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Agendar"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Envio automtico por email"})]})]}),R.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Relatrios Agendados"}),e.jsx("div",{className:"bg-gray-50 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nome"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Frequncia"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Formato"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prximo Envio"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map(ee=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:ee.name}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:ee.frequency==="daily"?"Dirio":ee.frequency==="weekly"?"Semanal":"Mensal"}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:ee.format.toUpperCase()}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:new Date(ee.nextDate).toLocaleDateString("pt-BR")})]},ee.id))})]})})]})]}),e.jsx(rt,{children:C&&e.jsxs(W.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-white rounded-lg shadow-xl border border-gray-200 p-4 w-80 z-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Gerando Relatrio"}),f===100&&e.jsx("button",{onClick:()=>L(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ht,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[f<100?e.jsx(Dl,{className:"h-5 w-5 text-blue-500 animate-spin"}):e.jsx(Aa,{className:"h-5 w-5 text-green-500"}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${f}%`}})})}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[f,"%"]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:f<100?"Processando dados e gerando relatrio...":"Relatrio gerado com sucesso!"})]})}),e.jsx(rt,{children:g&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>b(!1),className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"relative bg-white rounded-xl p-6 w-full max-w-md shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Agendar Relatrio"}),e.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ht,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Frequncia"}),e.jsxs("select",{value:S,onChange:ee=>E(ee.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"daily",children:"Dirio"}),e.jsx("option",{value:"weekly",children:"Semanal"}),e.jsx("option",{value:"monthly",children:"Mensal"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Formato"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",checked:p==="pdf",onChange:()=>v("pdf"),className:"text-blue-600 focus:ring-blue-500"}),e.jsx("span",{children:"PDF"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",checked:p==="excel",onChange:()=>v("excel"),className:"text-blue-600 focus:ring-blue-500"}),e.jsx("span",{children:"Excel"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destinatrios (separados por vrgula)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Cs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",value:N,onChange:ee=>D(ee.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"email@exemplo.com, outro@exemplo.com"})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center text-blue-700 mb-2",children:[e.jsx(Ot,{className:"h-5 w-5 mr-2"}),e.jsx("h3",{className:"font-medium",children:"Informaes do Relatrio"})]}),e.jsx("p",{className:"text-sm text-blue-600",children:"O relatrio ser enviado automaticamente na frequncia selecionada para os destinatrios informados. O contedo ser baseado nos filtros atuais do dashboard."})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>b(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{onClick:ne,className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:shadow-lg",children:"Agendar Relatrio"})]})]})]})})]})},SP=()=>{const{isPremium:s,isAdmin:t}=rs(),[a,r]=j.useState([]),[n,i]=j.useState(!0),[o,l]=j.useState([]),[c,d]=j.useState(null);j.useEffect(()=>{A().catch(re=>{console.error("Erro crtico ao carregar:",re),d(re.message)})},[]);const A=async()=>{i(!0),d(null);try{const{data:re,error:ie}=await se.from("digital_library").select(`
          *,
          category:library_categories(name, icon)
        `).eq("is_public",!0).eq("virus_scan_status","clean").order("created_at",{ascending:!1});if(ie)throw console.error("Erro do Supabase:",ie),ie;if(re){l(re);const ve=re.map(ye=>{var $e,it;return{id:ye.id,title:ye.title,description:ye.description||"",category:"manual",subcategory:(($e=ye.category)==null?void 0:$e.name)||"Geral",fileUrl:ye.file_url,file_url:ye.file_url,fileSize:u(ye.file_size),file_size:ye.file_size,fileType:x(ye.file_type),file_type:ye.file_type,uploadDate:ye.created_at,created_at:ye.created_at,tags:ye.tags||[],isDownloaded:!1,isFavorite:!1,category_name:(it=ye.category)==null?void 0:it.name,virus_scan_status:ye.virus_scan_status,is_verified:ye.is_verified,view_count:ye.view_count||0,download_count:ye.download_count||0}});r(ve)}}catch(re){console.error("Erro ao carregar documentos:",re),d((re==null?void 0:re.message)||"Erro desconhecido")}finally{i(!1)}},u=re=>re?re<1024?re+" B":re<1048576?(re/1024).toFixed(1)+" KB":(re/1048576).toFixed(1)+" MB":"0 B",x=re=>re.includes("pdf")?"PDF":re.includes("word")?"DOCX":re.includes("excel")||re.includes("spreadsheet")?"XLSX":re.includes("powerpoint")||re.includes("presentation")?"PPTX":re.includes("image")?"IMG":"FILE";j.useEffect(()=>{!n&&a.length===0&&r([{id:"1",title:"Manual de Instalao - Split 12.000 BTUs",description:"Guia completo para instalao de ar condicionado split 12.000 BTUs",category:"manual",subcategory:"Instalao",fileUrl:"/documents/manual_instalacao_split.pdf",file_url:"/documents/manual_instalacao_split.pdf",fileSize:"2.5 MB",file_size:2621440,fileType:"PDF",file_type:"application/pdf",uploadDate:"2024-01-10",created_at:"2024-01-10",lastViewed:"2024-01-15",author:"Equipe Tcnica",tags:["ar condicionado","split","instalao","12000 BTUs"],isDownloaded:!0,isFavorite:!0,thumbnailUrl:"https://images.pexels.com/photos/4489734/pexels-photo-4489734.jpeg?auto=compress&cs=tinysrgb&w=150"},{id:"2",title:"Manual Tcnico - Dual Inverter",description:"Especificaes tcnicas e procedimentos de manuteno para ar condicionado Dual Inverter",category:"manual",subcategory:"Manuteno",fileUrl:"/documents/manual_tecnico_dual_inverter.pdf",file_url:"/documents/manual_tecnico_dual_inverter.pdf",fileSize:"3.1 MB",file_size:3250585,fileType:"PDF",file_type:"application/pdf",uploadDate:"2024-01-08",created_at:"2024-01-08",author:"Departamento Tcnico",tags:["ar condicionado","dual inverter","manuteno"],isDownloaded:!1,isFavorite:!1},{id:"3",title:"Poltica de Segurana da Informao",description:"Documento corporativo com diretrizes de segurana da informao",category:"corporate",subcategory:"Polticas",fileUrl:"/documents/politica_seguranca_informacao.pdf",file_url:"/documents/politica_seguranca_informacao.pdf",fileSize:"1.2 MB",file_size:1258291,fileType:"PDF",file_type:"application/pdf",uploadDate:"2023-12-15",created_at:"2023-12-15",lastViewed:"2024-01-05",author:"Departamento de TI",tags:["segurana","poltica","corporativo"],isDownloaded:!0,isFavorite:!1},{id:"4",title:"Apostila de Treinamento - Refrigerao Bsica",description:"Material didtico para treinamento de novos tcnicos",category:"educational",subcategory:"Treinamento",fileUrl:"/documents/apostila_refrigeracao_basica.pdf",file_url:"/documents/apostila_refrigeracao_basica.pdf",fileSize:"5.8 MB",file_size:6082560,fileType:"PDF",file_type:"application/pdf",uploadDate:"2023-11-20",created_at:"2023-11-20",author:"Departamento de Treinamento",tags:["refrigerao","treinamento","bsico"],isDownloaded:!1,isFavorite:!0}])},[n,a.length]);const[m,y]=j.useState(""),[g,b]=j.useState("all"),[p,v]=j.useState("all"),[N,D]=j.useState([]),[S,E]=j.useState({}),[R,_]=j.useState(!1),[C,L]=j.useState(null),[f,F]=j.useState(!1),[M,P]=j.useState("date"),[Z,O]=j.useState("desc"),[X,q]=j.useState(null),[V,oe]=j.useState(0),[H,I]=j.useState(!1),[B,$]=j.useState({title:"",description:"",category:"manual",subcategory:"",tags:"",file:null}),T=()=>g==="all"?["all",...new Set(a.map(re=>re.subcategory))]:["all",...new Set(a.filter(re=>g==="all"||re.category===g).map(re=>re.subcategory))],ne=()=>{const re=a.flatMap(ie=>ie.tags);return[...new Set(re)]},me=[...a.filter(re=>{const ie=re.title.toLowerCase().includes(m.toLowerCase())||re.description.toLowerCase().includes(m.toLowerCase())||re.tags.some(Ie=>Ie.toLowerCase().includes(m.toLowerCase())),ve=g==="all"||re.category===g,ye=p==="all"||re.subcategory===p,$e=N.length===0||N.every(Ie=>re.tags.includes(Ie)),it=(!S.start||new Date(re.uploadDate)>=new Date(S.start))&&(!S.end||new Date(re.uploadDate)<=new Date(S.end));return ie&&ve&&ye&&$e&&it})].sort((re,ie)=>{if(M==="date")return Z==="asc"?new Date(re.uploadDate).getTime()-new Date(ie.uploadDate).getTime():new Date(ie.uploadDate).getTime()-new Date(re.uploadDate).getTime();if(M==="title")return Z==="asc"?re.title.localeCompare(ie.title):ie.title.localeCompare(re.title);if(M==="size"){const ve=parseFloat(re.fileSize.split(" ")[0]),ye=parseFloat(ie.fileSize.split(" ")[0]);return Z==="asc"?ve-ye:ye-ve}return 0}),xe=re=>{var ve;const ie=(ve=re.target.files)==null?void 0:ve[0];ie&&$({...B,file:ie})},Be=()=>{if(!B.title||!B.category||!B.file){alert("Por favor, preencha todos os campos obrigatrios");return}I(!0);const re=setInterval(()=>{oe(ie=>ie>=100?(clearInterval(re),setTimeout(()=>{ee()},500),100):ie+10)},300)},ee=()=>{var ie;if(!B.file){alert("Por favor, selecione um arquivo");return}const re={id:Date.now().toString(),title:B.title,description:B.description,category:B.category,subcategory:B.subcategory||"Geral",fileUrl:URL.createObjectURL(B.file),fileSize:`${((B.file.size||0)/(1024*1024)).toFixed(1)} MB`,fileType:((ie=B.file.type.split("/")[1])==null?void 0:ie.toUpperCase())||"PDF",uploadDate:new Date().toISOString().split("T")[0],tags:B.tags.split(",").map(ve=>ve.trim()).filter(ve=>ve),isDownloaded:!1,isFavorite:!1};r([re,...a]),$({title:"",description:"",category:"manual",subcategory:"",tags:"",file:null}),I(!1),oe(0),_(!1),alert("Documento enviado com sucesso!")},je=re=>{console.log(`Downloading ${re.title}...`),r(a.map(ie=>ie.id===re.id?{...ie,isDownloaded:!0,lastViewed:new Date().toISOString().split("T")[0]}:ie)),alert(`Download de "${re.title}" iniciado!`)},Pe=re=>{r(a.map(ie=>ie.id===re?{...ie,isFavorite:!ie.isFavorite}:ie))},Xe=re=>{r(a.filter(ie=>ie.id!==re)),q(null)},Ce=re=>{N.includes(re)?D(N.filter(ie=>ie!==re)):D([...N,re])},K=re=>{switch(re){case"manual":return ut;case"corporate":return pj;case"educational":return HB;default:return ut}},Me=re=>{switch(re){case"manual":return"from-blue-500 to-cyan-500";case"corporate":return"from-purple-500 to-pink-500";case"educational":return"from-green-500 to-emerald-500";default:return"from-gray-500 to-gray-600"}},qe=re=>{switch(re){case"manual":return"Manual Tcnico";case"corporate":return"Documento Corporativo";case"educational":return"Material Didtico";default:return re}};return n&&a.length===0&&!c?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Carregando Biblioteca Digital..."})]})}):e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl p-4 md:p-6 shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-2",children:"Biblioteca Digital"}),e.jsx("p",{className:"text-sm md:text-base text-gray-600",children:"Acesse manuais, documentos corporativos e materiais didticos"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsxs("button",{onClick:()=>_(!0),className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-3 py-2 rounded-lg flex items-center space-x-2 hover:shadow-lg transition-all text-sm",children:[e.jsx(qc,{className:"h-4 w-4"}),e.jsx("span",{children:"Enviar Documento"})]})})]})}),c&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(cs,{className:"text-red-600 flex-shrink-0 mt-0.5",size:20}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-red-900 mb-1",children:"Erro ao Carregar Biblioteca"}),e.jsx("p",{className:"text-red-700 text-sm",children:c}),e.jsx("button",{onClick:()=>A(),className:"mt-2 text-sm text-red-600 hover:text-red-800 font-medium",children:"Tentar novamente"})]})]}),e.jsx("div",{className:"bg-white rounded-xl p-4 md:p-6 shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{type:"text",placeholder:"Buscar documentos por ttulo, descrio ou tags...",value:m,onChange:re=>y(re.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria"}),e.jsxs("select",{value:g,onChange:re=>{b(re.target.value),v("all")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todas as Categorias"}),e.jsx("option",{value:"manual",children:"Manuais Tcnicos"}),e.jsx("option",{value:"corporate",children:"Documentos Corporativos"}),e.jsx("option",{value:"educational",children:"Material Didtico"})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subcategoria"}),e.jsx("select",{value:p,onChange:re=>v(re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:T().map(re=>e.jsx("option",{value:re,children:re==="all"?"Todas as Subcategorias":re},re))})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ordenar por"}),e.jsxs("div",{className:"flex",children:[e.jsxs("select",{value:M,onChange:re=>P(re.target.value),className:"flex-1 px-3 py-2 border-y border-l border-gray-300 rounded-l-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"date",children:"Data"}),e.jsx("option",{value:"title",children:"Ttulo"}),e.jsx("option",{value:"size",children:"Tamanho"})]}),e.jsx("button",{onClick:()=>O(Z==="asc"?"desc":"asc"),className:"px-3 py-2 border border-gray-300 rounded-r-lg bg-gray-50 hover:bg-gray-100",children:Z==="asc"?e.jsx(Fn,{className:"h-5 w-5"}):e.jsx(Ir,{className:"h-5 w-5"})})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>F(!f),className:"flex items-center space-x-1 text-blue-600 hover:text-blue-800 text-sm",children:[e.jsx(lm,{className:"h-4 w-4"}),e.jsx("span",{children:"Filtros avanados"}),f?e.jsx(Fn,{className:"h-4 w-4"}):e.jsx(Ir,{className:"h-4 w-4"})]})}),e.jsx(rt,{children:f&&e.jsxs(W.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden",children:[e.jsxs("div",{className:"pt-4 border-t border-gray-200 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Perodo de Upload"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"De"}),e.jsx("input",{type:"date",value:S.start||"",onChange:re=>E({...S,start:re.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"At"}),e.jsx("input",{type:"date",value:S.end||"",onChange:re=>E({...S,end:re.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags"}),e.jsxs("div",{className:"flex flex-wrap gap-2 p-2 border border-gray-300 rounded-lg min-h-[42px]",children:[ne().map(re=>e.jsx("button",{onClick:()=>Ce(re),className:`px-2 py-1 rounded-full text-xs font-medium ${N.includes(re)?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:re},re)),ne().length===0&&e.jsx("span",{className:"text-sm text-gray-500",children:"Nenhuma tag disponvel"})]})]})]}),e.jsx("div",{className:"flex justify-end mt-4 space-x-2",children:e.jsx("button",{onClick:()=>{y(""),b("all"),v("all"),D([]),E({}),P("date"),O("desc")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Limpar Filtros"})})]})})]})}),e.jsxs("div",{className:"bg-white rounded-xl p-4 md:p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Documentos (",me.length,")"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[me.length," de ",a.length," documentos"]})]}),me.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:me.map(re=>e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-all overflow-hidden",children:[e.jsxs("div",{className:"relative h-32 bg-gray-100 overflow-hidden",children:[re.thumbnailUrl?e.jsx("img",{src:re.thumbnailUrl,alt:re.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:`w-full h-full bg-gradient-to-r ${Me(re.category)} flex items-center justify-center`,children:ed.createElement(K(re.category),{className:"h-16 w-16 text-white/50"})}),e.jsx("div",{className:"absolute top-2 left-2 px-2 py-1 bg-black/50 backdrop-blur-sm text-white rounded text-xs",children:qe(re.category)}),e.jsx("button",{onClick:()=>Pe(re.id),className:`absolute top-2 right-2 p-1 rounded-full ${re.isFavorite?"bg-yellow-500 text-white":"bg-white/70 text-gray-600 hover:bg-white"}`,"aria-label":re.isFavorite?"Remover dos favoritos":"Adicionar aos favoritos",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:re.isFavorite?"currentColor":"none",stroke:"currentColor",className:"w-4 h-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1 line-clamp-2",children:re.title}),e.jsx("p",{className:"text-xs text-gray-600 mb-3 line-clamp-2",children:re.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mb-3",children:[e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(Ot,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:new Date(re.uploadDate).toLocaleDateString("pt-BR")})]}),e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(ut,{className:"h-3 w-3 mr-1"}),e.jsxs("span",{children:[re.fileSize,"  ",re.fileType]})]}),re.lastViewed&&e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(vt,{className:"h-3 w-3 mr-1"}),e.jsxs("span",{children:["Visto: ",new Date(re.lastViewed).toLocaleDateString("pt-BR")]})]}),re.isDownloaded&&e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx(Nu,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:"Baixado"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-4",children:[re.tags.slice(0,3).map((ie,ve)=>e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 rounded-full text-xs",children:ie},ve)),re.tags.length>3&&e.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 rounded-full text-xs",children:["+",re.tags.length-3]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>L(re),className:"flex-1 px-3 py-1.5 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-xs flex items-center justify-center",children:[e.jsx($s,{className:"h-3 w-3 mr-1"}),"Visualizar"]}),e.jsxs("button",{onClick:()=>je(re),className:"flex-1 px-3 py-1.5 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors text-xs flex items-center justify-center",children:[e.jsx(wa,{className:"h-3 w-3 mr-1"}),re.isDownloaded?"Baixado":"Baixar"]}),t&&e.jsx("button",{onClick:()=>q(re.id),className:"px-3 py-1.5 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors text-xs flex items-center justify-center",children:e.jsx(Vt,{className:"h-3 w-3"})})]})]})]},re.id))}):e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:[e.jsx(ut,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhum documento encontrado"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"No encontramos documentos com os filtros selecionados."}),e.jsx("button",{onClick:()=>{y(""),b("all"),v("all"),D([]),E({})},className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors",children:"Limpar Filtros"})]})]}),e.jsx(rt,{children:R&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>!H&&_(!1),className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"relative bg-white rounded-xl p-6 w-full max-w-md shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Enviar Novo Documento"}),!H&&e.jsx("button",{onClick:()=>_(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ht,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Arquivo PDF"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:B.file?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ut,{className:"h-8 w-8 text-blue-500 mr-3"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-gray-900 text-sm",children:B.file.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(B.file.size/(1024*1024)).toFixed(2)," MB"]})]})]}),e.jsx("button",{onClick:()=>$({...B,file:null}),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ht,{className:"h-5 w-5"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(qc,{className:"h-10 w-10 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Arraste e solte um arquivo PDF ou"}),e.jsxs("label",{className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors cursor-pointer inline-block",children:["Selecionar Arquivo",e.jsx("input",{type:"file",accept:".pdf",onChange:xe,className:"hidden"})]})]})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Ttulo ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:B.title,onChange:re=>$({...B,title:re.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ttulo do documento",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{value:B.description,onChange:re=>$({...B,description:re.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Breve descrio do documento"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Categoria ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:B.category,onChange:re=>$({...B,category:re.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"manual",children:"Manual Tcnico"}),e.jsx("option",{value:"corporate",children:"Documento Corporativo"}),e.jsx("option",{value:"educational",children:"Material Didtico"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subcategoria"}),e.jsx("input",{type:"text",value:B.subcategory,onChange:re=>$({...B,subcategory:re.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Instalao"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags (separadas por vrgula)"}),e.jsx("input",{type:"text",value:B.tags,onChange:re=>$({...B,tags:re.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: manual, ar condicionado, instalao"})]}),H&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-700",children:[e.jsx("span",{children:"Enviando..."}),e.jsxs("span",{children:[V,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${V}%`}})})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>!H&&_(!1),disabled:H,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancelar"}),e.jsx("button",{onClick:Be,disabled:H||!B.title||!B.file,className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:H?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(qc,{className:"h-4 w-4 mr-2 inline"}),"Enviar Documento"]})})]})]})]})}),e.jsx(rt,{children:C&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>L(null),className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),e.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"relative bg-white rounded-xl w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg bg-gradient-to-r ${Me(C.category)} flex items-center justify-center`,children:ed.createElement(K(C.category),{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:C.title}),e.jsxs("p",{className:"text-xs text-gray-500",children:[qe(C.category),"  ",C.subcategory]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:re=>{re.stopPropagation(),je(C)},className:"p-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors",children:e.jsx(wa,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>L(null),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(ht,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden bg-gray-100 p-4",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-8",children:[e.jsx(ut,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Visualizador de PDF"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Em um ambiente real, o PDF seria exibido aqui usando um visualizador integrado."}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsxs("button",{onClick:re=>{re.stopPropagation(),je(C)},className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors flex items-center",children:[e.jsx(wa,{className:"h-4 w-4 mr-2"}),"Baixar PDF"]}),e.jsxs("button",{onClick:re=>{re.stopPropagation(),window.open(C.fileUrl,"_blank")},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center",children:[e.jsx(ju,{className:"h-4 w-4 mr-2"}),"Abrir em Nova Aba"]})]})]})})}),e.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Detalhes"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{className:"flex items-center text-gray-600",children:[e.jsx(Ot,{className:"h-4 w-4 mr-2 text-gray-400"}),"Enviado em ",new Date(C.uploadDate).toLocaleDateString("pt-BR")]}),e.jsxs("p",{className:"flex items-center text-gray-600",children:[e.jsx(ut,{className:"h-4 w-4 mr-2 text-gray-400"}),C.fileSize,"  ",C.fileType]}),C.author&&e.jsxs("p",{className:"flex items-center text-gray-600",children:[e.jsx(Jt,{className:"h-4 w-4 mr-2 text-gray-400"}),"Autor: ",C.author]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Descrio"}),e.jsx("p",{className:"text-sm text-gray-600",children:C.description})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:C.tags.map((re,ie)=>e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 rounded-full text-xs",children:re},ie))})]})]})})]})]})}),e.jsx(rt,{children:X&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>q(null),className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"relative bg-white rounded-xl p-6 w-full max-w-sm shadow-2xl",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 text-red-600",children:[e.jsx(cs,{className:"h-8 w-8"}),e.jsx("h3",{className:"text-xl font-bold",children:"Confirmar Excluso"})]}),e.jsx("p",{className:"text-gray-700 mb-6",children:"Tem certeza que deseja excluir este documento? Esta ao no pode ser desfeita."}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>q(null),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{onClick:()=>Xe(X),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Excluir"})]})]})]})})]})},kP=()=>{const{user:s}=rs(),[t,a]=j.useState([{id:"1",name:"Equipe Tcnica",lastMessage:"Carlos: Vou atender o chamado agora",lastMessageTime:new Date(Date.now()-5*6e4),unreadCount:3,isGroup:!0,participants:["Carlos","Ana","Pedro","Maria"],status:"online",avatar:"https://images.pexels.com/photos/3184465/pexels-photo-3184465.jpeg?auto=compress&cs=tinysrgb&w=150"},{id:"2",name:"Carlos Tcnico",lastMessage:"J finalizei a instalao do cliente",lastMessageTime:new Date(Date.now()-30*6e4),unreadCount:0,isGroup:!1,participants:["Carlos"],status:"online"},{id:"3",name:"Ana Tcnica",lastMessage:"Preciso de ajuda com um cliente",lastMessageTime:new Date(Date.now()-2*36e5),unreadCount:1,isGroup:!1,participants:["Ana"],status:"busy"},{id:"4",name:"Departamento Comercial",lastMessage:"Maria: Novo contrato fechado!",lastMessageTime:new Date(Date.now()-5*36e5),unreadCount:0,isGroup:!0,participants:["Joo","Maria","Roberto"],status:"online"}]),[r,n]=j.useState(null),[i,o]=j.useState([]),[l,c]=j.useState(""),[d,A]=j.useState(!1),[u,x]=j.useState(!0),[m,y]=j.useState(!1),[g,b]=j.useState(!1),[p,v]=j.useState(""),[N,D]=j.useState("none"),[S,E]=j.useState(0),[R,_]=j.useState(null),[C,L]=j.useState("none"),[f,F]=j.useState(""),[M,P]=j.useState(!1),[Z,O]=j.useState(!1),[X,q]=j.useState(!0),[V,oe]=j.useState(!1),H=j.useRef(null),I=j.useRef(null),[B,$]=j.useState({notifications:!0,sounds:!0,darkMode:!1,readReceipts:!0,fontSize:"medium"}),[T,ne]=j.useState(window.innerWidth<768),[ue,me]=j.useState(!0);j.useEffect(()=>{const Ie=()=>{ne(window.innerWidth<768)};return window.addEventListener("resize",Ie),()=>window.removeEventListener("resize",Ie)},[]),j.useEffect(()=>{if(r){a(He=>He.map(dt=>dt.id===r.id?{...dt,unreadCount:0}:dt));const Ie=[],he=10+Math.floor(Math.random()*10),Oe=new Date;for(let He=0;He<he;He++){const dt=Math.random()>.5,Bt=dt?(s==null?void 0:s.name)||"Voc":r.isGroup?r.participants[Math.floor(Math.random()*r.participants.length)]:r.name;Ie.push({id:`msg-${He}`,content:je(dt,r.isGroup),sender:Bt,senderId:dt?"me":Bt,timestamp:new Date(Oe.getTime()-(he-He)*5*6e4),status:dt?He<he-3?"read":He<he-1?"delivered":"sent":"read",isMe:dt})}o(Ie),T&&me(!1)}},[r,s]),j.useEffect(()=>{var Ie;(Ie=H.current)==null||Ie.scrollIntoView({behavior:"smooth"})},[i]);const xe=t.filter(Ie=>Ie.name.toLowerCase().includes(p.toLowerCase())||Ie.lastMessage.toLowerCase().includes(p.toLowerCase())),Be=Ie=>{const Oe=new Date().getTime()-Ie.getTime();return Oe<864e5?Ie.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):Oe<6048e5?["Dom","Seg","Ter","Qua","Qui","Sex","Sb"][Ie.getDay()]:Ie.toLocaleDateString([],{day:"2-digit",month:"2-digit"})},ee=Ie=>{const he=Math.floor(Ie/60),Oe=Ie%60;return`${he.toString().padStart(2,"0")}:${Oe.toString().padStart(2,"0")}`},je=(Ie,he)=>{const Oe=Ie?["Ol, como posso ajudar?","J estou a caminho do cliente","Finalizei o servio agora","Preciso de mais informaes sobre este chamado","Vou precisar de mais peas para o conserto","O cliente no est no local","Servio concludo com sucesso","Estou com dificuldade para acessar o local"]:["Temos um novo chamado urgente","O cliente est aguardando","Pode me ajudar com um problema?","J verificou o estoque de peas?","Precisamos finalizar este servio hoje","O cliente alterou o horrio","Tem disponibilidade amanh?",he?"Pessoal, reunio s 15h":"Preciso da sua ajuda com um cliente"];return Oe[Math.floor(Math.random()*Oe.length)]},Pe=()=>{if(!l.trim()||!r)return;const Ie={id:`msg-${Date.now()}`,content:l,sender:(s==null?void 0:s.name)||"Voc",senderId:"me",timestamp:new Date,status:"sending",isMe:!0};o([...i,Ie]),c(""),setTimeout(()=>{o(he=>he.map(Oe=>Oe.id===Ie.id?{...Oe,status:"sent"}:Oe)),setTimeout(()=>{o(he=>he.map(Oe=>Oe.id===Ie.id?{...Oe,status:"delivered"}:Oe)),setTimeout(()=>{o(he=>he.map(Oe=>Oe.id===Ie.id?{...Oe,status:"read"}:Oe))},2e3)},1e3)},500),setTimeout(()=>{A(!0),setTimeout(()=>{A(!1);const he={id:`msg-${Date.now()}`,content:je(!1,r.isGroup),sender:r.isGroup?r.participants[Math.floor(Math.random()*r.participants.length)]:r.name,senderId:"other",timestamp:new Date,status:"read",isMe:!1};o(Oe=>[...Oe,he]),a(Oe=>Oe.map(He=>He.id===r.id?{...He,lastMessage:r.isGroup?`${he.sender}: ${he.content}`:he.content,lastMessageTime:he.timestamp}:He))},2e3+Math.random()*1e3)},1e3+Math.random()*2e3),a(he=>he.map(Oe=>Oe.id===r.id?{...Oe,lastMessage:l,lastMessageTime:new Date}:Oe))},Xe=Ie=>{if(!r)return;const he=Ie==="video"?{video:!0,audio:!0}:{audio:!0};navigator.mediaDevices.getUserMedia(he).then(Oe=>{console.log("Media access granted for call"),Oe.getTracks().forEach(dt=>dt.stop()),D(Ie),E(0);const He=setInterval(()=>{E(dt=>dt+1)},1e3);_(He)}).catch(Oe=>{console.error("Error accessing media devices:",Oe),alert("Para fazer chamadas,  necessrio permitir o acesso  cmera e microfone.")})},Ce=()=>{R&&clearInterval(R),D("none"),E(0),_(null),P(!1),O(!1),oe(!1)},K=Ie=>{const he=t[Math.floor(Math.random()*t.length)];F(he.name),L(Ie),setTimeout(()=>{L("none")},15e3)},Me=()=>{const Ie=C;L("none"),D(Ie),E(0);const he=setInterval(()=>{E(Oe=>Oe+1)},1e3);_(he)},qe=()=>{L("none")},re=()=>{var Ie;c(he=>he+" "),(Ie=I.current)==null||Ie.focus()},ie=()=>{alert("Funcionalidade de anexo seria implementada aqui")},ve=Ie=>{switch(Ie){case"sending":return e.jsx(vt,{className:"h-3 w-3 text-gray-400"});case"sent":return e.jsx(As,{className:"h-3 w-3 text-gray-400"});case"delivered":return e.jsxs("div",{className:"relative",children:[e.jsx(As,{className:"h-3 w-3 text-blue-500 absolute"}),e.jsx(As,{className:"h-3 w-3 text-blue-500 ml-0.5"})]});case"read":return e.jsxs("div",{className:"relative text-blue-500",children:[e.jsx(As,{className:"h-3 w-3 absolute"}),e.jsx(As,{className:"h-3 w-3 ml-0.5"})]});default:return null}},ye=Ie=>{switch(Ie){case"online":return"bg-green-500";case"offline":return"bg-gray-400";case"away":return"bg-yellow-500";case"busy":return"bg-red-500";default:return"bg-gray-400"}},$e=Ie=>{Ie.key==="Enter"&&!Ie.shiftKey&&(Ie.preventDefault(),Pe())},it=()=>{me(!ue)};return e.jsxs("div",{className:"h-[calc(100vh-120px)] bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden flex",children:[e.jsx(rt,{children:(!T||T&&ue)&&e.jsxs(W.div,{initial:T?{x:-300}:!1,animate:{x:0},exit:T?{x:-300}:void 0,className:"w-80 border-r border-gray-200 flex flex-col bg-white z-10",style:{position:T?"absolute":"relative",height:"100%",boxShadow:T?"0 0 15px rgba(0,0,0,0.1)":"none"},children:[e.jsxs("div",{className:"p-3 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Conversas"}),e.jsxs("div",{className:"flex items-center space-x-1.5",children:[e.jsx("button",{onClick:()=>b(!g),className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full",children:e.jsx(Qt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>y(!m),className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full",children:e.jsx(xr,{className:"h-4 w-4"})}),T&&e.jsx("button",{onClick:it,className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full md:hidden",children:e.jsx(od,{className:"h-4 w-4"})})]})]}),e.jsx(rt,{children:g&&e.jsx(W.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"p-3 border-b border-gray-200 overflow-hidden",children:e.jsxs("div",{className:"relative",children:[e.jsx(Qt,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Buscar conversas...",value:p,onChange:Ie=>v(Ie.target.value),className:"w-full pl-8 pr-3 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]})})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:xe.length>0?xe.map(Ie=>e.jsx("div",{onClick:()=>n(Ie),className:`p-2.5 border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors ${(r==null?void 0:r.id)===Ie.id?"bg-blue-50":""}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[Ie.avatar?e.jsx("img",{src:Ie.avatar,alt:Ie.name,className:"w-10 h-10 rounded-full object-cover"}):e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${Ie.isGroup?"bg-purple-100 text-purple-600":"bg-blue-100 text-blue-600"}`,children:Ie.isGroup?e.jsx(Nt,{className:"h-5 w-5"}):e.jsx("span",{className:"text-base font-semibold",children:Ie.name.charAt(0)})}),e.jsx("div",{className:`absolute bottom-0 right-0 w-2.5 h-2.5 rounded-full border-2 border-white ${ye(Ie.status)}`})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-medium text-gray-900 text-sm truncate",children:Ie.name}),e.jsx("span",{className:"text-xs text-gray-500",children:Be(Ie.lastMessageTime)})]}),e.jsx("p",{className:"text-xs text-gray-600 truncate",children:Ie.lastMessage})]}),Ie.unreadCount>0&&e.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-white font-medium",children:Ie.unreadCount})})]})},Ie.id)):e.jsxs("div",{className:"p-4 text-center text-gray-500",children:[e.jsx(o0,{className:"h-10 w-10 mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-sm",children:"Nenhuma conversa encontrada"})]})}),e.jsx(rt,{children:m&&e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"absolute inset-0 bg-white z-10 flex flex-col",children:[e.jsxs("div",{className:"p-3 border-b border-gray-200 flex items-center",children:[e.jsx("button",{onClick:()=>y(!1),className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full mr-2",children:e.jsx(od,{className:"h-4 w-4"})}),e.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Configuraes"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-700 mb-2",children:"Notificaes"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Notificaes de mensagens"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:B.notifications,onChange:()=>$({...B,notifications:!B.notifications}),className:"sr-only peer"}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Sons de notificao"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:B.sounds,onChange:()=>$({...B,sounds:!B.sounds}),className:"sr-only peer"}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-700 mb-2",children:"Privacidade"}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Confirmaes de leitura"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:B.readReceipts,onChange:()=>$({...B,readReceipts:!B.readReceipts}),className:"sr-only peer"}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"})]})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-700 mb-2",children:"Aparncia"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Modo escuro"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:B.darkMode,onChange:()=>$({...B,darkMode:!B.darkMode}),className:"sr-only peer"}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600 block mb-1",children:"Tamanho da fonte"}),e.jsxs("select",{value:B.fontSize,onChange:Ie=>$({...B,fontSize:Ie.target.value}),className:"w-full px-2.5 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"small",children:"Pequeno"}),e.jsx("option",{value:"medium",children:"Mdio"}),e.jsx("option",{value:"large",children:"Grande"})]})]})]})]})]}),e.jsx("div",{className:"p-3 border-t border-gray-200",children:e.jsx("button",{onClick:()=>y(!1),className:"w-full py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm",children:"Salvar Configuraes"})})]})})]})}),e.jsx("div",{className:"flex-1 flex flex-col",children:r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-3 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[T&&e.jsx("button",{onClick:it,className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full mr-2 md:hidden",children:e.jsx(H6,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[r.avatar?e.jsx("img",{src:r.avatar,alt:r.name,className:"w-8 h-8 rounded-full object-cover"}):e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${r.isGroup?"bg-purple-100 text-purple-600":"bg-blue-100 text-blue-600"}`,children:r.isGroup?e.jsx(Nt,{className:"h-4 w-4"}):e.jsx("span",{className:"text-base font-semibold",children:r.name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:r.name}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${ye(r.status)} mr-1`}),e.jsx("span",{children:r.status==="online"?"Online":r.status==="away"?"Ausente":r.status==="busy"?"Ocupado":"Offline"}),r.isGroup&&e.jsxs("span",{className:"ml-1",children:[r.participants.length," participantes"]})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1.5",children:[e.jsx("button",{onClick:()=>Xe("audio"),className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full",children:e.jsx(la,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Xe("video"),className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full",children:e.jsx(Mh,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full",children:e.jsx(xj,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-3 bg-gray-50",children:[i.map((Ie,he)=>{const Oe=he===0||new Date(Ie.timestamp).toDateString()!==new Date(i[he-1].timestamp).toDateString();return e.jsxs(ed.Fragment,{children:[Oe&&e.jsx("div",{className:"flex justify-center my-3",children:e.jsx("div",{className:"px-2.5 py-0.5 bg-gray-200 rounded-full text-xs text-gray-600",children:new Date(Ie.timestamp).toLocaleDateString([],{weekday:"long",day:"numeric",month:"long"})})}),e.jsx("div",{className:`flex ${Ie.isMe?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[75%] ${Ie.isMe?"bg-blue-500 text-white":"bg-white text-gray-800"} rounded-lg px-3 py-1.5 shadow-sm`,children:[r.isGroup&&!Ie.isMe&&e.jsx("p",{className:"text-xs font-medium mb-0.5",style:{color:Ie.isMe?"white":"#6366f1"},children:Ie.sender}),e.jsx("p",{className:"text-sm",children:Ie.content}),e.jsxs("div",{className:`flex items-center justify-end space-x-1 mt-0.5 text-xs ${Ie.isMe?"text-blue-100":"text-gray-500"}`,children:[e.jsx("span",{children:Ie.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),Ie.isMe&&ve(Ie.status)]})]})})]},Ie.id)}),d&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-white text-gray-800 rounded-lg px-3 py-1.5 shadow-sm",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-400 animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-400 animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-400 animate-bounce",style:{animationDelay:"300ms"}})]})})}),e.jsx("div",{ref:H})]}),e.jsx("div",{className:"p-3 border-t border-gray-200 bg-white",children:e.jsxs("div",{className:"flex items-center space-x-1.5",children:[e.jsx("button",{onClick:re,className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full",children:e.jsx(US,{className:"h-4 w-4"})}),e.jsx("button",{onClick:ie,className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full",children:e.jsx(cS,{className:"h-4 w-4"})}),e.jsx("input",{type:"text",ref:I,value:l,onChange:Ie=>c(Ie.target.value),onKeyPress:$e,placeholder:"Digite uma mensagem...",className:"flex-1 px-3 py-1.5 border border-gray-300 rounded-full focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"}),e.jsx("button",{onClick:Pe,disabled:!l.trim(),className:`p-1.5 rounded-full ${l.trim()?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:e.jsx(Ma,{className:"h-4 w-4"})})]})})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-4 bg-gray-50",children:[e.jsx(o0,{className:"h-14 w-14 text-gray-300 mb-3"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Chat Interno"}),e.jsx("p",{className:"text-gray-600 text-center max-w-md mb-5 text-sm",children:"Selecione uma conversa para comear a enviar mensagens ou iniciar uma chamada com sua equipe."}),T&&!ue&&e.jsx("button",{onClick:it,className:"px-3 py-1.5 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm",children:"Ver Conversas"})]})}),e.jsx(rt,{children:N!=="none"&&e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`fixed inset-0 z-50 flex items-center justify-center bg-black/80 ${V?"p-0":"p-4"}`,children:e.jsxs("div",{className:`relative bg-gray-900 rounded-xl overflow-hidden ${V?"w-full h-full":"max-w-md w-full"}`,children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 p-3 flex items-center justify-between z-10 bg-gradient-to-b from-black/60 to-transparent",children:e.jsxs("div",{className:"flex items-center space-x-2 text-white",children:[r!=null&&r.avatar?e.jsx("img",{src:r.avatar,alt:r.name,className:"w-8 h-8 rounded-full object-cover"}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center",children:e.jsx("span",{className:"text-base font-semibold text-white",children:r==null?void 0:r.name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-sm",children:r==null?void 0:r.name}),e.jsxs("p",{className:"text-xs opacity-80",children:[N==="audio"?"Chamada de voz":"Chamada de vdeo","  ",ee(S)]})]})]})}),e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:N==="video"?Z?e.jsx("div",{className:"w-full h-full min-h-[250px] bg-gray-800 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(fb,{className:"h-12 w-12 text-white/50 mx-auto mb-3"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Cmera desligada"})]})}):e.jsxs("div",{className:"w-full h-full min-h-[250px] bg-gray-800 relative",children:[e.jsx("img",{src:"https://images.pexels.com/photos/3184465/pexels-photo-3184465.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:"Video call",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute bottom-3 right-3 w-24 h-20 bg-gray-900 rounded-lg overflow-hidden border-2 border-white",children:e.jsx("img",{src:"https://images.pexels.com/photos/2379004/pexels-photo-2379004.jpeg?auto=compress&cs=tinysrgb&w=150",alt:"Self view",className:"w-full h-full object-cover"})})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-blue-500 flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-4xl font-semibold text-white",children:r==null?void 0:r.name.charAt(0)})}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-1",children:r==null?void 0:r.name}),e.jsx("p",{className:"text-white/70 text-sm",children:ee(S)})]})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3 flex items-center justify-center space-x-3 z-10 bg-gradient-to-t from-black/60 to-transparent",children:[e.jsx("button",{onClick:()=>P(!M),className:`p-3 rounded-full ${M?"bg-red-500 text-white":"bg-gray-700 text-white hover:bg-gray-600"}`,children:M?e.jsx(K6,{className:"h-5 w-5"}):e.jsx(G6,{className:"h-5 w-5"})}),N==="video"&&e.jsx("button",{onClick:()=>O(!Z),className:`p-3 rounded-full ${Z?"bg-red-500 text-white":"bg-gray-700 text-white hover:bg-gray-600"}`,children:Z?e.jsx(fb,{className:"h-5 w-5"}):e.jsx(Mh,{className:"h-5 w-5"})}),e.jsx("button",{onClick:Ce,className:"p-3 bg-red-500 text-white rounded-full hover:bg-red-600",children:e.jsx(hS,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>q(!X),className:`p-3 rounded-full ${X?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-800 text-gray-400"}`,children:e.jsx(dk,{className:"h-5 w-5"})})]})]})})}),e.jsx(rt,{children:C!=="none"&&e.jsxs(W.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"fixed bottom-3 right-3 z-50 bg-white rounded-lg shadow-xl border border-gray-200 p-3 w-72",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx("span",{className:"text-lg font-semibold text-blue-600",children:f.charAt(0)})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:f}),e.jsx("p",{className:"text-xs text-gray-600",children:C==="audio"?"Chamada de voz":"Chamada de vdeo"})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:qe,className:"flex-1 py-1.5 bg-red-500 text-white rounded-lg mr-2 hover:bg-red-600 transition-colors text-sm",children:"Recusar"}),e.jsx("button",{onClick:Me,className:"flex-1 py-1.5 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm",children:"Atender"})]})]})}),e.jsxs("div",{className:"fixed bottom-16 right-3 z-40 space-y-1.5",children:[e.jsx("button",{onClick:()=>K("audio"),className:"p-1.5 bg-blue-500 text-white rounded-full shadow-lg hover:bg-blue-600 transition-colors",title:"Simular chamada de voz",children:e.jsx(la,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>K("video"),className:"p-1.5 bg-purple-500 text-white rounded-full shadow-lg hover:bg-purple-600 transition-colors",title:"Simular chamada de vdeo",children:e.jsx(Mh,{className:"h-4 w-4"})})]})]})},ul=({children:s,title:t,subtitle:a,actions:r,hover:n=!1,className:i=""})=>e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:n?{y:-4}:void 0,className:`bg-white rounded-xl shadow-sm border border-gray-100 transition-shadow ${n?"hover:shadow-md":""} ${i}`,children:[(t||a||r)&&e.jsxs("div",{className:"flex items-start justify-between p-6 border-b border-gray-100",children:[e.jsxs("div",{children:[t&&e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:t}),a&&e.jsx("p",{className:"text-sm text-gray-500",children:a})]}),r&&e.jsx("div",{className:"flex items-center gap-2",children:r})]}),e.jsx("div",{className:"p-6",children:s})]});function EP(){const[s,t]=j.useState([]),[a,r]=j.useState(null),[n,i]=j.useState([]),[o,l]=j.useState(""),[c,d]=j.useState(""),[A,u]=j.useState(!0),x=j.useRef(null);j.useEffect(()=>{m()},[]),j.useEffect(()=>{a&&y(a.id)},[a]),j.useEffect(()=>{p()},[n]);const m=async()=>{u(!0);try{const{data:D,error:S}=await se.from("whatsapp_conversations").select(`
          *,
          contact:customers(
            id,
            nome_razao,
            nome_fantasia,
            celular,
            telefone
          )
        `).order("last_message_at",{ascending:!1});if(S)throw S;const E=(D||[]).map(R=>{var L,f,F,M;const _=((L=R.contact)==null?void 0:L.nome_razao)||((f=R.contact)==null?void 0:f.nome_fantasia)||"Contato sem cadastro",C=((F=R.contact)==null?void 0:F.celular)||((M=R.contact)==null?void 0:M.telefone)||"Nmero no disponvel";return{id:R.id,contact_name:_,phone:C,last_message:R.last_message_preview||"Sem mensagens",last_message_date:R.last_message_at||new Date,unread_count:R.unread_count||0,status:"open",assigned_to:void 0}});t(E)}catch(D){console.error("Erro ao carregar conversas:",D)}finally{u(!1)}},y=async D=>{try{const{data:S,error:E}=await se.from("whatsapp_messages").select("*").eq("conversation_id",D).order("created_at",{ascending:!0});if(E)throw E;i(S||[])}catch(S){console.error("Erro ao carregar mensagens:",S)}},g=async()=>{if(!(!o.trim()||!a))try{const{data:D,error:S}=await se.from("whatsapp_messages").insert({conversation_id:a.id,content:o,type:"text",direction:"outbound",status:"sent"}).select().single();if(S)throw S;i([...n,D]),l("")}catch(D){console.error("Erro ao enviar mensagem:",D)}},b=()=>{if(!a)return;const D=a.phone;window.location.href=`/service-orders/create?phone=${D}`},p=()=>{var D;(D=x.current)==null||D.scrollIntoView({behavior:"smooth"})},v=s.filter(D=>(D.contact_name||"").toLowerCase().includes(c.toLowerCase())||(D.phone||"").includes(c)),N=D=>{switch(D){case"sent":return e.jsx(As,{className:"w-3 h-3"});case"delivered":case"read":return e.jsx(i3,{className:"w-3 h-3"});case"failed":return e.jsx(vt,{className:"w-3 h-3 text-red-500"});default:return null}};return e.jsxs("div",{className:"h-[calc(100vh-8rem)] flex gap-4",children:[e.jsxs(ul,{className:"w-1/3 flex flex-col p-0 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-3",children:"WhatsApp CRM"}),e.jsxs("div",{className:"relative",children:[e.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:c,onChange:D=>d(D.target.value),placeholder:"Buscar conversa...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:A?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Carregando..."}):v.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(gl,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),e.jsx("p",{children:"Nenhuma conversa encontrada"}),e.jsx("p",{className:"text-sm mt-1",children:"Aguardando mensagens..."})]}):v.map(D=>e.jsx("button",{onClick:()=>r(D),className:`w-full p-4 border-b border-gray-200 hover:bg-gray-50 transition-colors text-left ${(a==null?void 0:a.id)===D.id?"bg-blue-50":""}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0",children:e.jsx(Jt,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:D.contact_name}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(D.last_message_date).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:D.last_message}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:D.phone}),D.unread_count>0&&e.jsx("span",{className:"bg-blue-600 text-white text-xs rounded-full px-2 py-0.5",children:D.unread_count})]})]})]})},D.id))})]}),e.jsx(ul,{className:"flex-1 flex flex-col p-0 overflow-hidden",children:a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(Jt,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:a.contact_name}),e.jsx("p",{className:"text-sm text-gray-500",children:a.phone})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:b,className:"px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 text-sm",children:[e.jsx(ut,{className:"w-4 h-4"}),"Criar OS"]}),e.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(la,{className:"w-5 h-5 text-gray-600"})}),e.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(xj,{className:"w-5 h-5 text-gray-600"})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50",children:n.length===0?e.jsxs("div",{className:"text-center text-gray-500 mt-8",children:[e.jsx(gl,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),e.jsx("p",{children:"Nenhuma mensagem ainda"})]}):e.jsxs("div",{className:"space-y-4",children:[n.map(D=>e.jsx("div",{className:`flex ${D.direction==="outbound"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[70%] rounded-lg p-3 ${D.direction==="outbound"?"bg-blue-600 text-white":"bg-white border border-gray-200 text-gray-900"}`,children:[e.jsx("p",{className:"text-sm",children:D.content}),e.jsxs("div",{className:"flex items-center justify-end gap-1 mt-1",children:[e.jsx("span",{className:"text-xs opacity-70",children:new Date(D.created_at).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}),D.direction==="outbound"&&e.jsx("span",{className:"opacity-70",children:N(D.status)})]})]})},D.id)),e.jsx("div",{ref:x})]})}),e.jsxs("div",{className:"p-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(bt,{className:"w-5 h-5 text-gray-600"})}),e.jsx("input",{type:"text",value:o,onChange:D=>l(D.target.value),onKeyPress:D=>D.key==="Enter"&&g(),placeholder:"Digite uma mensagem...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{onClick:g,disabled:!o.trim(),className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Ma,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:" Use templates rpidos ou crie uma OS diretamente da conversa"})]})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(gl,{className:"w-16 h-16 mx-auto mb-4 opacity-30"}),e.jsx("p",{className:"text-lg font-medium",children:"Selecione uma conversa"}),e.jsx("p",{className:"text-sm mt-1",children:"Escolha um contato para iniciar"})]})})})]})}function FP(){const[s,t]=j.useState(null),[a,r]=j.useState([]),[n,i]=j.useState(!0),[o,l]=j.useState(new Date);j.useEffect(()=>{c()},[]);const c=async()=>{i(!0);try{const A=new Date,u=new Date(A.getTime()-24*60*60*1e3),x=new Date(A.getTime()-7*24*60*60*1e3),m=new Date(A.getTime()-30*24*60*60*1e3),{data:y}=await se.from("thomaz_conversations").select("id",{count:"exact"}).gte("created_at",u.toISOString()),{data:g}=await se.from("thomaz_conversations").select("id",{count:"exact"}).gte("created_at",x.toISOString()),{data:b}=await se.from("thomaz_conversations").select("id",{count:"exact"}).gte("created_at",m.toISOString()),{data:p}=await se.from("thomaz_conversations").select("intent_confidence").gte("created_at",x.toISOString()),v=p!=null&&p.length?p.reduce((Z,O)=>Z+(O.intent_confidence||0),0)/p.length:0,N=(p==null?void 0:p.filter(Z=>(Z.intent_confidence||0)>.7).length)||0,D=p!=null&&p.length?N/p.length*100:0,{data:S,count:E}=await se.from("thomaz_knowledge_sources").select("id",{count:"exact"}).eq("is_active",!0),{data:R,count:_}=await se.from("thomaz_knowledge_chunks").select("id",{count:"exact"}),C=new Date(A.getTime()-60*60*1e3),{data:L,count:f}=await se.from("thomaz_conversations").select("session_id",{count:"exact"}).gte("updated_at",C.toISOString()),{data:F}=await se.from("thomaz_conversations").select("response_time").gte("created_at",x.toISOString()).not("response_time","is",null),M=F!=null&&F.length?F.reduce((Z,O)=>Z+(O.response_time||0),0)/F.length:0,P=y?y.length/24:0;t({conversations_24h:(y==null?void 0:y.length)||0,conversations_7d:(g==null?void 0:g.length)||0,conversations_30d:(b==null?void 0:b.length)||0,avg_confidence:v*100,high_confidence_rate:D,total_documents:E||0,total_chunks:_||0,active_sessions:f||0,avg_response_time:M,queries_per_hour:P}),r([{query:"Como criar uma ordem de servio?",count:45,avg_confidence:92},{query:"Qual o estoque do material X?",count:38,avg_confidence:95},{query:"Relatrio financeiro do ms",count:32,avg_confidence:88},{query:"Funcionrios disponveis hoje",count:28,avg_confidence:91},{query:"Cliente com mais OSs",count:24,avg_confidence:94}]),l(new Date)}catch(A){console.error("Erro ao carregar mtricas:",A)}finally{i(!1)}};return s?s.avg_confidence>=70?{status:"healthy",color:"green",label:"Saudvel"}:s.avg_confidence>=50?{status:"warning",color:"yellow",label:"Ateno"}:{status:"critical",color:"red",label:"Crtico"}:{status:"unknown",color:"gray",label:"Desconhecido"},n?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx(bs,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando mtricas do Thomaz..."})]})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2 flex items-center gap-3",children:[e.jsx(xl,{className:"w-8 h-8 text-blue-600"}),"Thomaz Metrics"]}),e.jsx("p",{className:"text-gray-600",children:"Performance e analytics da inteligncia artificial"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:c,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(bs,{className:"w-4 h-4"}),"Atualizar"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs(ul,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(gl,{className:"w-8 h-8 text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-500",children:"24h"})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mb-1",children:(s==null?void 0:s.conversations_24h)||0}),e.jsx("p",{className:"text-sm text-gray-600",children:"Conversas (24h)"})]}),e.jsxs(ul,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(Pa,{className:"w-8 h-8 text-green-600"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Confiana"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900 mb-1",children:[((s==null?void 0:s.avg_confidence)||0).toFixed(1),"%"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Confiana Mdia"})]}),e.jsxs(ul,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(jd,{className:"w-8 h-8 text-purple-600"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Base"})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mb-1",children:(s==null?void 0:s.total_documents)||0}),e.jsx("p",{className:"text-sm text-gray-600",children:"Documentos Ativos"})]}),e.jsxs(ul,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(Fs,{className:"w-8 h-8 text-orange-600"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Performance"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900 mb-1",children:[((s==null?void 0:s.avg_response_time)||0).toFixed(0),"ms"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Tempo Mdio"})]})]})]})}const UP=({isOpen:s,onClose:t,onSave:a,entryId:r})=>{const[n,i]=j.useState(!1),[o,l]=j.useState([]),[c,d]=j.useState([]),[A,u]=j.useState([]),[x,m]=j.useState([]),[y,g]=j.useState([]),[b,p]=j.useState({descricao:"",valor:0,tipo:"receita",status:"a_receber",data:new Date().toISOString().split("T")[0],data_vencimento:new Date().toISOString().split("T")[0],customer_id:"",supplier_id:"",categoria:"",category_id:"",subcategory_id:"",forma_pagamento:"dinheiro",bank_account_id:"",observacoes:"",recorrente:!1,frequencia_recorrencia:"mensal",data_fim_recorrencia:""});j.useEffect(()=>{v(),N(),S(),E(),r&&R()},[r]),j.useEffect(()=>{b.category_id?D(b.category_id):(u([]),p(C=>({...C,subcategory_id:""})))},[b.category_id]);const v=async()=>{try{const{data:C}=await se.from("customers").select("id, nome_razao").order("nome_razao");l(C||[])}catch(C){console.error("Error loading customers:",C)}},N=async()=>{try{const{data:C}=await se.from("financial_categories").select("*").eq("active",!0).is("parent_id",null).order("name");d(C||[])}catch(C){console.error("Error loading categories:",C)}},D=async C=>{try{const{data:L}=await se.from("financial_categories").select("*").eq("active",!0).eq("parent_id",C).order("name");u(L||[])}catch(L){console.error("Error loading subcategories:",L),u([])}},S=async()=>{try{const{data:C}=await se.from("suppliers").select("id, name, cnpj, active").eq("active",!0).order("name");m(C||[])}catch(C){console.error("Error loading suppliers:",C)}},E=async()=>{try{const{data:C}=await se.from("bank_accounts").select("id, account_name, bank_name, balance, active, is_default").eq("active",!0).order("is_default",{ascending:!1,nullsFirst:!1}).order("account_name",{ascending:!0});if(g(C||[]),C&&C.length>0&&!r){const L=C.find(f=>f.is_default);L&&p(f=>({...f,bank_account_id:L.id}))}}catch(C){console.error("Error loading bank accounts:",C)}},R=async()=>{var C,L,f;if(r)try{const{data:F}=await se.from("finance_entries").select("*").eq("id",r).single();F&&p({descricao:F.descricao||"",valor:F.valor||0,tipo:F.tipo||"receita",status:F.status||"a_receber",data:((C=F.data)==null?void 0:C.split("T")[0])||"",data_vencimento:((L=F.data_vencimento)==null?void 0:L.split("T")[0])||"",customer_id:F.customer_id||"",supplier_id:F.supplier_id||"",categoria:F.categoria||"",category_id:F.category_id||"",subcategory_id:F.subcategory_id||"",forma_pagamento:F.forma_pagamento||"dinheiro",bank_account_id:F.bank_account_id||"",observacoes:F.observacoes||"",recorrente:F.recorrente||!1,frequencia_recorrencia:F.frequencia_recorrencia||"mensal",data_fim_recorrencia:((f=F.data_fim_recorrencia)==null?void 0:f.split("T")[0])||""})}catch(F){console.error("Error loading entry:",F)}},_=async()=>{try{if(!b.descricao||b.valor<=0){alert("Preencha a descrio e o valor!");return}i(!0);const C={descricao:b.descricao,valor:Number(b.valor),tipo:b.tipo,status:b.status,data:b.data,data_vencimento:b.data_vencimento||null,customer_id:b.customer_id||null,supplier_id:b.supplier_id||null,categoria:b.categoria||null,category_id:b.category_id||null,subcategory_id:b.subcategory_id||null,forma_pagamento:b.forma_pagamento,bank_account_id:b.bank_account_id||null,observacoes:b.observacoes||null};b.recorrente?(C.intervalo_recorrencia=b.frequencia_recorrencia,C.data_fim_recorrencia=b.data_fim_recorrencia||null):(C.intervalo_recorrencia=null,C.data_fim_recorrencia=null);let L;if(r?L=await se.from("finance_entries").update(C).eq("id",r).select():L=await se.from("finance_entries").insert([C]).select(),L.error)throw console.error("Database error:",L.error),new Error(L.error.message);alert(r?"Lanamento atualizado com sucesso!":"Lanamento criado com sucesso!"),a(),t()}catch(C){console.error("Error saving:",C),alert(`Erro ao salvar lanamento: ${C.message||"Erro desconhecido"}`)}finally{i(!1)}};return j.useEffect(()=>{b.tipo==="receita"?(b.status==="pago"||b.status==="a_pagar")&&p(C=>({...C,status:C.status==="pago"?"recebido":"a_receber"})):(b.status==="recebido"||b.status==="a_receber")&&p(C=>({...C,status:C.status==="recebido"?"pago":"a_pagar"}))},[b.tipo]),s?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between bg-gradient-to-r from-blue-600 to-blue-700 text-white",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:r?"Editar Lanamento":"Novo Lanamento"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Controle de receitas e despesas"})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(ht,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("label",{className:"flex-1 cursor-pointer",children:e.jsxs("div",{className:`border-2 rounded-xl p-4 transition-all ${b.tipo==="receita"?"border-green-500 bg-green-50":"border-gray-300 hover:border-green-300"}`,children:[e.jsx("input",{type:"radio",checked:b.tipo==="receita",onChange:()=>p({...b,tipo:"receita"}),className:"sr-only"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(zt,{className:"h-6 w-6 text-green-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Receita"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Entrada de dinheiro"})]})]})]})}),e.jsx("label",{className:"flex-1 cursor-pointer",children:e.jsxs("div",{className:`border-2 rounded-xl p-4 transition-all ${b.tipo==="despesa"?"border-red-500 bg-red-50":"border-gray-300 hover:border-red-300"}`,children:[e.jsx("input",{type:"radio",checked:b.tipo==="despesa",onChange:()=>p({...b,tipo:"despesa"}),className:"sr-only"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(nr,{className:"h-6 w-6 text-red-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Despesa"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Sada de dinheiro"})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descrio *"}),e.jsxs("div",{className:"relative",children:[e.jsx(ut,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",value:b.descricao,onChange:C=>p({...b,descricao:C.target.value}),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Pagamento de servio - OS #123"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Valor *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ut,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"number",value:b.valor,onChange:C=>p({...b,valor:parseFloat(C.target.value)||0}),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0,00",step:"0.01",min:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Status"}),e.jsx("select",{value:b.status,onChange:C=>p({...b,status:C.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:b.tipo==="receita"?e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"a_receber",children:"A Receber"}),e.jsx("option",{value:"recebido",children:"Recebido"})]}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"a_pagar",children:"A Pagar"}),e.jsx("option",{value:"pago",children:"Pago"})]})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Data ",b.status==="recebido"||b.status==="pago"?"do Pagamento":"de Lanamento"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ot,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"date",value:b.data,onChange:C=>p({...b,data:C.target.value}),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Data de Vencimento"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ot,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"date",value:b.data_vencimento,onChange:C=>p({...b,data_vencimento:C.target.value}),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),b.tipo==="receita"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Cliente (Opcional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsxs("select",{value:b.customer_id,onChange:C=>p({...b,customer_id:C.target.value}),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione um cliente..."}),o.map(C=>e.jsx("option",{value:C.id,children:C.nome_razao},C.id))]})]})]}),b.tipo==="despesa"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Fornecedor (Opcional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsxs("select",{value:b.supplier_id,onChange:C=>p({...b,supplier_id:C.target.value}),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione um fornecedor..."}),x.map(C=>e.jsxs("option",{value:C.id,children:[C.name," ",C.cnpj?`- ${C.cnpj}`:""]},C.id))]})]})]}),e.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Categoria"}),e.jsxs("select",{value:b.category_id,onChange:C=>p({...b,category_id:C.target.value,subcategory_id:""}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione uma categoria..."}),c.filter(C=>C.type===b.tipo).map(C=>e.jsxs("option",{value:C.id,children:[C.icon," ",C.name]},C.id))]})]}),b.category_id&&A.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Subcategoria"}),e.jsxs("select",{value:b.subcategory_id,onChange:C=>p({...b,subcategory_id:C.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione uma subcategoria..."}),A.map(C=>e.jsxs("option",{value:C.id,children:[C.icon," ",C.name]},C.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Forma de Pagamento"}),e.jsxs("div",{className:"relative",children:[e.jsx(Es,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsxs("select",{value:b.forma_pagamento,onChange:C=>p({...b,forma_pagamento:C.target.value}),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"dinheiro",children:"Dinheiro"}),e.jsx("option",{value:"pix",children:"PIX"}),e.jsx("option",{value:"cartao_credito",children:"Carto de Crdito"}),e.jsx("option",{value:"cartao_debito",children:"Carto de Dbito"}),e.jsx("option",{value:"boleto",children:"Boleto"}),e.jsx("option",{value:"transferencia",children:"Transferncia"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1 flex items-center gap-2",children:[e.jsx(Es,{className:"h-4 w-4"}),"Conta Bancria"]}),e.jsxs("select",{value:b.bank_account_id,onChange:C=>p({...b,bank_account_id:C.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 bg-white",children:[e.jsx("option",{value:"",children:"Selecione uma conta..."}),y.map(C=>{var L;return e.jsxs("option",{value:C.id,children:[C.is_default?" ":"",C.bank_name," - ",C.account_name," (Saldo: R$ ",((L=C.balance)==null?void 0:L.toFixed(2))||"0,00",")"]},C.id)})]}),b.status==="pago"||b.status==="recebido"?e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:" O saldo ser atualizado automaticamente"}):e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[y.find(C=>C.is_default)&&e.jsx("span",{children:" = Conta Padro  "}),"Selecione a conta para controlar o saldo"]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Observaes"}),e.jsx("textarea",{value:b.observacoes,onChange:C=>p({...b,observacoes:C.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Informaes adicionais sobre este lanamento..."})]}),e.jsxs("div",{className:"md:col-span-2 border-t pt-4 mt-4",children:[e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg mb-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"recorrente",checked:b.recorrente,onChange:C=>p({...b,recorrente:C.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mt-1"}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsxs("label",{htmlFor:"recorrente",className:"block text-sm font-semibold text-blue-900 cursor-pointer",children:["Lanamento Recorrente / Provisionado ",e.jsx("span",{className:"text-blue-600",children:"(Opcional)"})]}),e.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Marque esta opo se este lanamento se repete periodicamente (ex: aluguel, salrios) ou se deseja provisionar para o futuro"})]})]})}),b.recorrente&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pl-6 border-l-2 border-blue-200",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Frequncia"}),e.jsxs("select",{value:b.frequencia_recorrencia,onChange:C=>p({...b,frequencia_recorrencia:C.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"semanal",children:"Semanal"}),e.jsx("option",{value:"quinzenal",children:"Quinzenal"}),e.jsx("option",{value:"mensal",children:"Mensal"}),e.jsx("option",{value:"bimestral",children:"Bimestral"}),e.jsx("option",{value:"trimestral",children:"Trimestral"}),e.jsx("option",{value:"semestral",children:"Semestral"}),e.jsx("option",{value:"anual",children:"Anual"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Data Fim da Recorrncia"}),e.jsx("input",{type:"date",value:b.data_fim_recorrencia,onChange:C=>p({...b,data_fim_recorrencia:C.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",min:b.data}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Deixe em branco para recorrncia indefinida"})]})]})]})]})]}),e.jsxs("div",{className:"p-6 border-t bg-gray-50 flex gap-3",children:[e.jsx("button",{onClick:t,className:"flex-1 px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors font-medium",children:"Cancelar"}),e.jsx("button",{onClick:_,disabled:n,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors font-medium flex items-center justify-center gap-2",children:n?e.jsx(e.Fragment,{children:"Salvando..."}):e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"h-5 w-5"}),"Salvar Lanamento"]})})]})]})}):null},j1=()=>{const[s,t]=j.useState([]),[a,r]=j.useState({totalReceitas:0,totalDespesas:0,saldo:0,contasReceber:0,contasPagar:0,receitasMes:0,despesasMes:0,valorEstoque:0}),[n,i]=j.useState(!0),[o,l]=j.useState("all"),[c,d]=j.useState("all"),[A,u]=j.useState(""),[x,m]=j.useState("all"),[y,g]=j.useState(""),[b,p]=j.useState(""),[v,N]=j.useState(""),[D,S]=j.useState(""),[E,R]=j.useState("data"),[_,C]=j.useState("desc"),[L,f]=j.useState(1),[F,M]=j.useState([]),P=15,[Z,O]=j.useState(!1),[X,q]=j.useState(void 0);j.useEffect(()=>{oe(),V()},[]),j.useEffect(()=>{oe()},[E,_]);const V=async()=>{try{const{data:ee,error:je}=await se.from("financial_categories").select("*").eq("active",!0).order("name");if(je)throw je;M(ee||[])}catch(ee){console.error("Error loading categories:",ee)}},oe=async(ee=!1)=>{try{i(!0);const{data:je,error:Pe}=await se.from("finance_entries").select("*").order(E,{ascending:_==="asc"});if(Pe)throw Pe;console.log("Loaded finance entries:",je==null?void 0:je.length),t(je||[]),await I(je||[])}catch(je){console.error("Error loading financial data:",je)}finally{i(!1)}},H=async(ee,je)=>{if(confirm(`Tem certeza que deseja excluir o lanamento "${je}"?

Esta ao  irreversvel e ter efeito cascata em registros relacionados.`))try{const{error:Pe}=await se.from("finance_entries").delete().eq("id",ee);if(Pe)throw Pe;alert("Lanamento excludo com sucesso!"),await oe()}catch(Pe){console.error("Error deleting entry:",Pe),alert("Erro ao excluir lanamento. Verifique se no h registros relacionados.")}},I=async ee=>{const je=ee.filter(ye=>ye.tipo==="receita"&&ye.status==="recebido").reduce((ye,$e)=>ye+Number($e.valor),0),Pe=ee.filter(ye=>ye.tipo==="despesa"&&ye.status==="pago").reduce((ye,$e)=>ye+Number($e.valor),0),Xe=ee.filter(ye=>ye.tipo==="receita"&&ye.status==="a_receber").reduce((ye,$e)=>ye+Number($e.valor),0),Ce=ee.filter(ye=>ye.tipo==="despesa"&&ye.status==="a_pagar").reduce((ye,$e)=>ye+Number($e.valor),0),K=new Date,Me=K.getMonth(),qe=K.getFullYear(),re=ee.filter(ye=>{const $e=new Date(ye.data);return ye.tipo==="receita"&&ye.status==="recebido"&&$e.getMonth()===Me&&$e.getFullYear()===qe}).reduce((ye,$e)=>ye+Number($e.valor),0),ie=ee.filter(ye=>{const $e=new Date(ye.data);return ye.tipo==="despesa"&&ye.status==="pago"&&$e.getMonth()===Me&&$e.getFullYear()===qe}).reduce((ye,$e)=>ye+Number($e.valor),0);let ve=0;try{const{data:ye,error:$e}=await se.from("inventory_items").select("quantity, unit_price").eq("active",!0);!$e&&ye&&(ve=ye.reduce((it,Ie)=>it+Number(Ie.quantity||0)*Number(Ie.unit_price||0),0))}catch(ye){console.error("Error calculating inventory value:",ye)}r({totalReceitas:je,totalDespesas:Pe,saldo:je-Pe,contasReceber:Xe,contasPagar:Ce,receitasMes:re,despesasMes:ie,valorEstoque:ve})},B=ee=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(ee),$=ee=>{if(!ee)return"-";const je=new Date(ee),Pe=String(je.getDate()).padStart(2,"0"),Xe=String(je.getMonth()+1).padStart(2,"0"),Ce=je.getFullYear();return`${Pe}/${Xe}/${Ce}`},T=ee=>{switch(ee){case"recebido":case"pago":return e.jsx(Aa,{className:"h-4 w-4 text-green-600"});case"a_receber":case"a_pagar":return e.jsx(vt,{className:"h-4 w-4 text-yellow-600"});default:return e.jsx(es,{className:"h-4 w-4 text-gray-400"})}},ne=ee=>({recebido:"Recebido",pago:"Pago",a_receber:"A Receber",a_pagar:"A Pagar"})[ee]||ee,ue=ee=>ee==="receita"?"Income":"Expense",me=s.filter(ee=>{var ie;const je=o==="all"||ee.tipo===o,Pe=c==="all"||ee.status===c,Xe=!A||((ie=ee.descricao)==null?void 0:ie.toLowerCase().includes(A.toLowerCase())),Ce=x==="all"||ee.categoria===x||ee.category===x,K=new Date(ee.data),Me=!y||K.getMonth()+1===parseInt(y),qe=!b||K.getFullYear()===parseInt(b),re=(!v||ee.data>=v)&&(!D||ee.data<=D);return je&&Pe&&Xe&&Ce&&Me&&qe&&re}),xe=Math.ceil(me.length/P),Be=me.slice((L-1)*P,L*P);return n?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando dados financeiros..."})]})}):e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Ut,{className:"h-8 w-8 text-green-600"}),"Gesto Financeira"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Receitas, despesas e DRE"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(dn,{to:"/financial-integration",className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:[e.jsx(Es,{className:"h-4 w-4"}),"Ver Dashboard Financeiro"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(zt,{className:"h-8 w-8"}),e.jsx("span",{className:"text-sm font-medium opacity-90",children:"Receitas"})]}),e.jsx("div",{className:"text-3xl font-bold",children:B(a.totalReceitas)}),e.jsxs("div",{className:"text-sm opacity-90 mt-1",children:[B(a.receitasMes)," este ms"]})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-gradient-to-br from-red-500 to-red-600 rounded-xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(nr,{className:"h-8 w-8"}),e.jsx("span",{className:"text-sm font-medium opacity-90",children:"Despesas"})]}),e.jsx("div",{className:"text-3xl font-bold",children:B(a.totalDespesas)}),e.jsxs("div",{className:"text-sm opacity-90 mt-1",children:[B(a.despesasMes)," este ms"]})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Ut,{className:"h-8 w-8"}),e.jsx("span",{className:"text-sm font-medium opacity-90",children:"Saldo"})]}),e.jsx("div",{className:"text-3xl font-bold",children:B(a.saldo)}),e.jsx("div",{className:"text-sm opacity-90 mt-1",children:"Resultado lquido"})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(vt,{className:"h-8 w-8"}),e.jsx("span",{className:"text-sm font-medium opacity-90",children:"Pendncias"})]}),e.jsx("div",{className:"text-3xl font-bold",children:B(a.contasReceber+a.contasPagar)}),e.jsxs("div",{className:"text-sm opacity-90 mt-1",children:[" ",B(a.contasReceber)," |  ",B(a.contasPagar)]})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(wt,{className:"h-8 w-8"}),e.jsx("span",{className:"text-sm font-medium opacity-90",children:"Estoque"})]}),e.jsx("div",{className:"text-3xl font-bold",children:B(a.valorEstoque)}),e.jsx("div",{className:"text-sm opacity-90 mt-1",children:"Valor total em materiais"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(io,{className:"h-5 w-5"}),"Filtros Avanados"]}),e.jsx("button",{onClick:()=>{l("all"),d("all"),u(""),m("all"),g(""),p(""),N(""),S(""),R("data"),C("desc"),f(1)},className:"text-sm text-blue-600 hover:text-blue-700",children:"Limpar Filtros"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("input",{type:"text",placeholder:"Buscar por nome...",value:A,onChange:ee=>{u(ee.target.value),f(1)},className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"}),e.jsxs("select",{value:o,onChange:ee=>{l(ee.target.value),f(1)},className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"Todos os tipos"}),e.jsx("option",{value:"receita",children:"Receitas"}),e.jsx("option",{value:"despesa",children:"Despesas"})]}),e.jsxs("select",{value:c,onChange:ee=>{d(ee.target.value),f(1)},className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"Todos os status"}),e.jsx("option",{value:"recebido",children:"Recebido"}),e.jsx("option",{value:"pago",children:"Pago"}),e.jsx("option",{value:"a_receber",children:"A Receber"}),e.jsx("option",{value:"a_pagar",children:"A Pagar"})]}),e.jsxs("select",{value:x,onChange:ee=>{m(ee.target.value),f(1)},className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"Todas as categorias"}),F.map(ee=>e.jsx("option",{value:ee.id,children:ee.name},ee.id))]}),e.jsxs("select",{value:y,onChange:ee=>{g(ee.target.value),f(1)},className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Todos os meses"}),e.jsx("option",{value:"1",children:"Janeiro"}),e.jsx("option",{value:"2",children:"Fevereiro"}),e.jsx("option",{value:"3",children:"Maro"}),e.jsx("option",{value:"4",children:"Abril"}),e.jsx("option",{value:"5",children:"Maio"}),e.jsx("option",{value:"6",children:"Junho"}),e.jsx("option",{value:"7",children:"Julho"}),e.jsx("option",{value:"8",children:"Agosto"}),e.jsx("option",{value:"9",children:"Setembro"}),e.jsx("option",{value:"10",children:"Outubro"}),e.jsx("option",{value:"11",children:"Novembro"}),e.jsx("option",{value:"12",children:"Dezembro"})]}),e.jsxs("select",{value:b,onChange:ee=>{p(ee.target.value),f(1)},className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Todos os anos"}),[2024,2025,2026].map(ee=>e.jsx("option",{value:ee,children:ee},ee))]}),e.jsx("input",{type:"date",value:v,onChange:ee=>{N(ee.target.value),f(1)},placeholder:"Data incio",className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"date",value:D,onChange:ee=>{S(ee.target.value),f(1)},placeholder:"Data fim",className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ordenar por:"}),e.jsxs("select",{value:E,onChange:ee=>R(ee.target.value),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",children:[e.jsx("option",{value:"data",children:"Data"}),e.jsx("option",{value:"valor",children:"Valor"}),e.jsx("option",{value:"created_at",children:"Data de Criao"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>C("asc"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${_==="asc"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:" Crescente"}),e.jsx("button",{onClick:()=>C("desc"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${_==="desc"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:" Decrescente"})]})]})}),e.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:["Mostrando ",Be.length," de ",me.length," lanamentos"]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Lanamentos"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2",children:[e.jsx(wa,{className:"h-4 w-4"}),"Exportar"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>oe(!0),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center gap-2",title:"Atualizar dados",children:[e.jsx(bs,{className:"h-4 w-4"}),"Atualizar"]}),e.jsxs("button",{onClick:()=>{q(void 0),O(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(bt,{className:"h-4 w-4"}),"Novo Lanamento"]})]})]})]}),e.jsx("div",{className:"space-y-2",children:Be.map(ee=>e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors group",children:e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:`p-3 rounded-lg ${ee.tipo==="receita"?"bg-green-100":"bg-red-100"}`,children:e.jsx(ut,{className:`h-5 w-5 ${ee.tipo==="receita"?"text-green-600":"text-red-600"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-medium text-gray-900 truncate",children:ee.descricao}),e.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${ee.tipo==="receita"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:ue(ee.tipo)})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[T(ee.status),e.jsx("span",{className:"text-sm text-gray-600",children:ne(ee.status)})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-lg font-bold ${ee.tipo==="receita"?"text-green-600":"text-red-600"}`,children:[ee.tipo==="receita"?"+":"-"," ",B(Number(ee.valor))]}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-1 justify-end",children:[e.jsx(Ot,{className:"h-3 w-3"}),$(ee.data)]})]}),e.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>{q(ee.id),O(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Editar lanamento",children:e.jsx(Es,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>H(ee.id,ee.descricao),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Excluir lanamento",children:e.jsx(Vt,{className:"h-4 w-4"})})]})]})]})},ee.id))}),me.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ut,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Nenhum lanamento encontrado"})]}),me.length>P&&e.jsxs("div",{className:"flex items-center justify-between mt-6 pt-4 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",L," de ",xe]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>f(Math.max(1,L-1)),disabled:L===1,className:"px-4 py-2 border rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:xe},(ee,je)=>je+1).filter(ee=>ee===1||ee===xe||ee>=L-1&&ee<=L+1).map((ee,je,Pe)=>e.jsxs("div",{className:"flex items-center",children:[je>0&&Pe[je-1]!==ee-1&&e.jsx("span",{className:"px-2 text-gray-400",children:"..."}),e.jsx("button",{onClick:()=>f(ee),className:`px-3 py-2 rounded-lg ${L===ee?"bg-blue-600 text-white":"border hover:bg-gray-50"}`,children:ee})]},ee))}),e.jsx("button",{onClick:()=>f(Math.min(xe,L+1)),disabled:L===xe,className:"px-4 py-2 border rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Prxima"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(vt,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"ltima Sincronizao"}),e.jsx("p",{className:"text-xs text-blue-700",children:"Agora"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm font-medium",children:"Plano Atual: Premium"})})]}),e.jsx(UP,{isOpen:Z,onClose:()=>{O(!1),q(void 0)},onSave:()=>{oe(),O(!1),q(void 0)},entryId:X})]})},N1=()=>{const[s,t]=j.useState(!0),[a,r]=j.useState(null),[n,i]=j.useState([]),[o,l]=j.useState([]);j.useEffect(()=>{c()},[]);const c=async()=>{try{t(!0);const{data:u,error:x}=await se.from("v_financial_summary").select("*").single();if(x)throw x;r(u);const{data:m,error:y}=await se.from("v_financial_monthly_trend").select("*").order("mes",{ascending:!1}).limit(12);if(y)throw y;i((m==null?void 0:m.reverse())||[]);const{data:g,error:b}=await se.from("v_financial_categories_summary").select("*").order("total",{ascending:!1}).limit(10);if(b)throw b;l(g||[])}catch(u){console.error("Erro ao carregar dados:",u)}finally{t(!1)}},d=u=>{const x=typeof u=="string"?parseFloat(u):u;return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(x)};if(s)return e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!a)return e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsx("p",{className:"text-yellow-800",children:"No h dados financeiros disponveis."})})});const A=n.map(u=>({name:u.mes_nome,receitas:parseFloat(u.receitas),despesas:parseFloat(u.despesas),saldo:parseFloat(u.saldo)}));return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Anlise Financeira"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Viso completa da sade financeira"})]}),e.jsx("button",{onClick:c,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Atualizar Dados"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6 border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-green-500 rounded-lg",children:e.jsx(zt,{className:"w-6 h-6 text-white"})}),e.jsxs("span",{className:"text-xs font-medium text-green-700 bg-green-200 px-2 py-1 rounded",children:[a.total_lancamentos_receita," lanamentos"]})]}),e.jsx("p",{className:"text-sm text-green-700 font-medium mb-1",children:"Receitas Totais"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:d(a.receitas_total)}),e.jsxs("div",{className:"mt-3 text-xs text-green-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Recebidas:"}),e.jsx("span",{className:"font-semibold",children:d(a.receitas_recebidas)})]}),e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{children:"A Receber:"}),e.jsx("span",{className:"font-semibold",children:d(a.receitas_a_receber)})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-6 border border-red-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-red-500 rounded-lg",children:e.jsx(nr,{className:"w-6 h-6 text-white"})}),e.jsxs("span",{className:"text-xs font-medium text-red-700 bg-red-200 px-2 py-1 rounded",children:[a.total_lancamentos_despesa," lanamentos"]})]}),e.jsx("p",{className:"text-sm text-red-700 font-medium mb-1",children:"Despesas Totais"}),e.jsx("p",{className:"text-2xl font-bold text-red-900",children:d(a.despesas_total)}),e.jsxs("div",{className:"mt-3 text-xs text-red-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Pagas:"}),e.jsx("span",{className:"font-semibold",children:d(a.despesas_pagas)})]}),e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{children:"A Pagar:"}),e.jsx("span",{className:"font-semibold",children:d(a.despesas_a_pagar)})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6 border border-blue-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 bg-blue-500 rounded-lg",children:e.jsx(Ut,{className:"w-6 h-6 text-white"})})}),e.jsx("p",{className:"text-sm text-blue-700 font-medium mb-1",children:"Saldo Realizado"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:d(a.saldo_realizado)}),e.jsx("div",{className:"mt-3 text-xs text-blue-600",children:e.jsx("p",{children:"Receitas recebidas - Despesas pagas"})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-6 border border-purple-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 bg-purple-500 rounded-lg",children:e.jsx(Ot,{className:"w-6 h-6 text-white"})})}),e.jsx("p",{className:"text-sm text-purple-700 font-medium mb-1",children:"Saldo Previsto"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:d(a.saldo_previsto)}),e.jsx("div",{className:"mt-3 text-xs text-purple-600",children:e.jsx("p",{children:"Incluindo valores a receber/pagar"})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(Ls,{className:"w-5 h-5 text-gray-700"}),e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Tendncia Mensal"})]}),A.length>0?e.jsx("div",{className:"h-80",children:e.jsx(tm,{width:"100%",height:"100%",children:e.jsxs(cp,{data:A,children:[e.jsx(dp,{strokeDasharray:"3 3",opacity:.1}),e.jsx(Ap,{dataKey:"name",tick:{fontSize:12}}),e.jsx(up,{tick:{fontSize:12}}),e.jsx(sm,{formatter:u=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(u)}),e.jsx(Ev,{}),e.jsx(ml,{dataKey:"receitas",name:"Receitas",fill:"#10b981"}),e.jsx(ml,{dataKey:"despesas",name:"Despesas",fill:"#ef4444"}),e.jsx(ml,{dataKey:"saldo",name:"Saldo",fill:"#3b82f6"})]})})}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"Sem dados para exibir"})]}),o.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(mj,{className:"w-5 h-5 text-gray-700"}),e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Top 10 Categorias"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Categoria"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Tipo"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Total"}),e.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-gray-700",children:"Qtd"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"% do Total"})]})}),e.jsx("tbody",{children:o.map((u,x)=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 text-sm text-gray-900",children:u.categoria||"Sem categoria"}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${u.tipo==="receita"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.tipo==="receita"?"Receita":"Despesa"})}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-900 text-right font-medium",children:d(u.total)}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600 text-center",children:u.quantidade}),e.jsxs("td",{className:"py-3 px-4 text-sm text-gray-900 text-right",children:[parseFloat(u.percentual).toFixed(1),"%"]})]},x))})]})})]})]})},_1=()=>{const[s,t]=j.useState([]),[a,r]=j.useState(!0),[n,i]=j.useState(!0),[o,l]=j.useState(!1),[c,d]=j.useState(null),[A,u]=j.useState({account_name:"",bank_name:"",account_number:"",balance:0,active:!0});j.useEffect(()=>{x()},[]);const x=async()=>{try{r(!0);const{data:S,error:E}=await se.from("bank_accounts").select("*").order("created_at",{ascending:!1});if(E)throw E;t(S||[])}catch(S){console.error("Error loading accounts:",S)}finally{r(!1)}},m=async()=>{try{if(!A.account_name||!A.bank_name||!A.account_number){alert("Preencha todos os campos obrigatrios");return}if(c){const{error:S}=await se.from("bank_accounts").update(A).eq("id",c.id);if(S)throw S}else{const{error:S}=await se.from("bank_accounts").insert([A]);if(S)throw S}alert(c?"Conta atualizada!":"Conta criada!"),v(),await x()}catch(S){console.error("Error saving account:",S),alert("Erro ao salvar conta")}},y=async(S,E)=>{if(confirm(`Excluir a conta "${E}"?

Esta ao  irreversvel!`))try{const{error:R}=await se.from("bank_accounts").delete().eq("id",S);if(R)throw R;alert("Conta excluda!"),await x()}catch(R){console.error("Error deleting account:",R),alert("Erro ao excluir conta")}},g=async(S,E)=>{try{const{error:R}=await se.from("bank_accounts").update({active:!E}).eq("id",S);if(R)throw R;alert(E?"Conta congelada!":"Conta ativada!"),await x()}catch(R){console.error("Error freezing account:",R),alert("Erro ao alterar status da conta")}},b=async S=>{try{const{error:E}=await se.from("bank_accounts").update({is_default:!0}).eq("id",S);if(E)throw E;alert("Conta definida como padro!"),await x()}catch(E){console.error("Error setting default account:",E),alert("Erro ao definir conta padro")}},p=S=>{d(S),u({account_name:S.account_name,bank_name:S.bank_name,account_number:S.account_number,balance:S.balance,active:S.active}),l(!0)},v=()=>{l(!1),d(null),u({account_name:"",bank_name:"",account_number:"",balance:0,active:!0})},N=S=>n?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(S):"R$ ",D=s.filter(S=>S.active).reduce((S,E)=>S+Number(E.balance),0);return a?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 pt-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Es,{className:"h-8 w-8 text-blue-600"}),"Contas Bancrias"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gerenciar contas e saldos"})]}),e.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(bt,{className:"h-4 w-4"}),"Nova Conta"]})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-8 text-white shadow-lg mx-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm",children:"Saldo Total"}),e.jsx("h2",{className:"text-4xl font-bold mt-2",children:N(D)})]}),e.jsx("button",{onClick:()=>i(!n),className:"p-3 bg-white/20 rounded-lg hover:bg-white/30 transition-colors",children:n?e.jsx($s,{className:"h-6 w-6"}):e.jsx(Bl,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-300 mb-1",children:[e.jsx(zt,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Este ms"})]}),e.jsx("p",{className:"text-xl font-semibold",children:"+R$ 12.450,00"})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-300 mb-1",children:[e.jsx(nr,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Sadas"})]}),e.jsx("p",{className:"text-xl font-semibold",children:"-R$ 8.320,00"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 px-6 pb-6",children:s.map((S,E)=>e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:E*.1},className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-all",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-3 rounded-lg ${S.active?"bg-blue-100":"bg-gray-100"}`,children:e.jsx(Er,{className:`h-6 w-6 ${S.active?"text-blue-600":"text-gray-400"}`})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:S.account_name}),S.is_default&&e.jsx("span",{className:"px-2 py-0.5 bg-yellow-100 text-yellow-800 text-xs font-medium rounded-full flex items-center gap-1",children:" Padro"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:S.bank_name}),!S.active&&e.jsxs("span",{className:"text-xs text-red-600 flex items-center gap-1 mt-1",children:[e.jsx(gb,{className:"h-3 w-3"}),"Congelada"]})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Conta"}),e.jsx("p",{className:"font-mono text-gray-900",children:S.account_number})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Saldo Atual"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:N(Number(S.balance))})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>p(S),className:"flex-1 px-3 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors text-sm font-medium flex items-center justify-center gap-1",children:[e.jsx(Es,{className:"h-4 w-4"}),"Editar"]}),e.jsx("button",{onClick:()=>g(S.id,S.active),className:`flex-1 px-3 py-2 rounded-lg transition-colors text-sm font-medium flex items-center justify-center gap-1 ${S.active?"bg-yellow-50 text-yellow-600 hover:bg-yellow-100":"bg-green-50 text-green-600 hover:bg-green-100"}`,title:S.active?"Congelar conta":"Ativar conta",children:S.active?e.jsxs(e.Fragment,{children:[e.jsx(gb,{className:"h-4 w-4"})," Congelar"]}):e.jsxs(e.Fragment,{children:[e.jsx(As,{className:"h-4 w-4"})," Ativar"]})}),e.jsx("button",{onClick:()=>y(S.id,S.account_name),className:"px-3 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors text-sm font-medium",title:"Excluir conta",children:e.jsx(Vt,{className:"h-4 w-4"})})]}),!S.is_default&&e.jsx("button",{onClick:()=>b(S.id),className:"w-full px-3 py-2 bg-gradient-to-r from-yellow-50 to-amber-50 text-yellow-700 rounded-lg hover:from-yellow-100 hover:to-amber-100 transition-all text-sm font-medium flex items-center justify-center gap-1 border border-yellow-200",children:" Definir como Padro"})]})]},S.id))}),s.length===0&&e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-gray-100 mx-6",children:[e.jsx(Es,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Nenhuma conta cadastrada"}),e.jsx("button",{onClick:()=>l(!0),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Adicionar Primeira Conta"})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:c?"Editar Conta":"Nova Conta Bancria"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Conta *"}),e.jsx("input",{type:"text",value:A.account_name,onChange:S=>u({...A,account_name:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Conta Corrente Principal"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Banco *"}),e.jsx("input",{type:"text",value:A.bank_name,onChange:S=>u({...A,bank_name:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Banco do Brasil"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nmero da Conta *"}),e.jsx("input",{type:"text",value:A.account_number,onChange:S=>u({...A,account_number:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: 12345-6"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Saldo Inicial (R$)"}),e.jsx("input",{type:"number",step:"0.01",value:A.balance,onChange:S=>u({...A,balance:parseFloat(S.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:m,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:c?"Atualizar":"Criar Conta"}),e.jsx("button",{onClick:v,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancelar"})]})]})})]})},DP=s=>s,IP=s=>s,Cc=()=>{const{isAdmin:s}=rs(),[t,a]=j.useState("employees"),[r,n]=j.useState("personal"),[i,o]=j.useState(""),[l,c]=j.useState("all"),[d,A]=j.useState("all"),[u,x]=j.useState([]),[m,y]=j.useState(!1),[g,b]=j.useState(null),[p,v]=j.useState([]),[N,D]=j.useState(!1),[S,E]=j.useState([{id:"1",name:"Admin Sistema",email:"admin@giartech.com",role:"admin",status:"active",lastLogin:new Date().toISOString(),department:"Administrao",permissions:["all"]},{id:"2",name:"Carlos Gerente",email:"carlos@giartech.com",role:"manager",status:"active",lastLogin:new Date(Date.now()-36e5).toISOString(),department:"Operaes",permissions:["manage_orders","manage_clients","view_financial"]},{id:"3",name:"Ana Tcnica",email:"ana@giartech.com",role:"technician",status:"active",lastLogin:new Date(Date.now()-72e5).toISOString(),department:"Campo",permissions:["view_orders","view_clients"]}]),[R,_]=j.useState(!1),[C,L]=j.useState(null),[f]=j.useState([{id:"view_dashboard",name:"Visualizar Dashboard",description:"Acesso ao painel principal",category:"Dashboard"},{id:"manage_orders",name:"Gerenciar OS",description:"Criar, editar e excluir ordens de servio",category:"OS"},{id:"view_orders",name:"Visualizar OS",description:"Apenas visualizar ordens de servio",category:"OS"},{id:"manage_clients",name:"Gerenciar Clientes",description:"Cadastrar e editar clientes",category:"Clientes"},{id:"view_clients",name:"Visualizar Clientes",description:"Apenas visualizar dados de clientes",category:"Clientes"},{id:"manage_inventory",name:"Gerenciar Estoque",description:"Controle total do estoque",category:"Estoque"},{id:"view_inventory",name:"Visualizar Estoque",description:"Consultar estoque",category:"Estoque"},{id:"manage_financial",name:"Gerenciar Financeiro",description:"Acesso total ao financeiro",category:"Financeiro"},{id:"view_financial",name:"Visualizar Financeiro",description:"Relatrios financeiros",category:"Financeiro"},{id:"manage_users",name:"Gerenciar Usurios",description:"Administrar contas",category:"Admin"},{id:"system_settings",name:"Configuraes",description:"Alterar configuraes",category:"Admin"}]),[F]=j.useState([{id:"admin",name:"Administrador",description:"Acesso total ao sistema",level:10,permissions:f.map(K=>K.id),color:"from-red-500 to-rose-600",icon:wd},{id:"manager",name:"Gerente",description:"Gesto de operaes e equipe",level:8,permissions:["view_dashboard","manage_orders","manage_clients","manage_inventory","view_financial"],color:"from-blue-500 to-indigo-600",icon:os},{id:"technician",name:"Tcnico",description:"Execuo de servios",level:5,permissions:["view_dashboard","view_orders","view_clients","view_inventory"],color:"from-green-500 to-emerald-600",icon:Jt},{id:"external",name:"Externo",description:"Acesso limitado",level:3,permissions:["view_dashboard","view_orders"],color:"from-gray-500 to-slate-600",icon:ui}]),[M,P]=j.useState(!1),[Z,O]=j.useState(null),[X,q]=j.useState(!0),[V,oe]=j.useState({name:"",email:"",phone:"",role:"",salary:0,active:!0,cpf:"",rg:"",birth_date:"",admission_date:"",department:"",address_street:"",address_number:"",address_complement:"",address_neighborhood:"",address_city:"",address_state:"",address_zip_code:"",bank_name:"",bank_agency:"",bank_account:"",bank_account_type:"checking",pix_key:"",driver_license_number:"",driver_license_category:"",driver_license_expiry:"",emergency_contact_name:"",emergency_contact_phone:""}),[H,I]=j.useState({name:"",email:"",role:"technician",department:"",status:"active",permissions:[]});j.useEffect(()=>{B()},[]);const B=async()=>{try{q(!0);const K=await eU();x(K)}catch(K){console.error("Error loading employees:",K)}finally{q(!1)}},$=K=>{K?(b(K),oe(K)):(b(null),oe({name:"",email:"",phone:"",role:"",salary:0,active:!0,cpf:"",rg:"",birth_date:"",admission_date:"",department:"",address_street:"",address_number:"",address_complement:"",address_neighborhood:"",address_city:"",address_state:"",address_zip_code:"",bank_name:"",bank_agency:"",bank_account:"",bank_account_type:"checking",pix_key:"",driver_license_number:"",driver_license_category:"",driver_license_expiry:"",emergency_contact_name:"",emergency_contact_phone:""})),n("personal"),y(!0)},T=async()=>{try{if(!V.name||!V.email){alert("Nome e email so obrigatrios");return}g?await sU(g.id,V):await tU(V),await B(),y(!1),alert("Funcionrio salvo com sucesso!")}catch(K){console.error("Error saving employee:",K),alert("Erro ao salvar funcionrio")}},ne=async K=>{if(confirm("Tem certeza que deseja excluir este funcionrio?"))try{await aU(K),await B(),alert("Funcionrio excludo com sucesso!")}catch(Me){console.error("Error deleting employee:",Me),alert("Erro ao excluir funcionrio")}},ue=K=>{K?(L(K),I({name:K.name,email:K.email,role:K.role,department:K.department||"",status:K.status,permissions:K.permissions})):(L(null),I({name:"",email:"",role:"technician",department:"",status:"active",permissions:[]})),_(!0)},me=()=>{if(!H.name||!H.email){alert("Nome e email so obrigatrios");return}if(C)E(S.map(K=>K.id===C.id?{...K,...H,lastLogin:K.lastLogin}:K));else{const K={id:Date.now().toString(),...H,lastLogin:new Date().toISOString()};E([...S,K])}_(!1),alert("Usurio salvo com sucesso!")},xe=K=>{confirm("Tem certeza que deseja excluir este usurio?")&&(E(S.filter(Me=>Me.id!==K)),alert("Usurio excludo com sucesso!"))},Be=K=>{E(S.map(Me=>Me.id===K?{...Me,status:Me.status==="active"?"inactive":"active"}:Me))},ee=u.filter(K=>{var re,ie,ve;const Me=((re=K.name)==null?void 0:re.toLowerCase().includes(i.toLowerCase()))||((ie=K.email)==null?void 0:ie.toLowerCase().includes(i.toLowerCase()))||((ve=K.cpf)==null?void 0:ve.includes(i)),qe=d==="all"||(d==="active"?K.active:!K.active);return Me&&qe}),je=S.filter(K=>{const Me=K.name.toLowerCase().includes(i.toLowerCase())||K.email.toLowerCase().includes(i.toLowerCase()),qe=l==="all"||K.role===l,re=d==="all"||K.status===d;return Me&&qe&&re}),Pe=K=>{const Me=F.find(qe=>qe.id===K);return(Me==null?void 0:Me.color)||"from-gray-500 to-gray-600"},Xe=K=>{const Me=F.find(qe=>qe.id===K);return(Me==null?void 0:Me.icon)||Jt},Ce=K=>{if(!K)return"Nunca";const Me=new Date(K),re=new Date().getTime()-Me.getTime(),ie=Math.floor(re/6e4);if(ie<1)return"Agora mesmo";if(ie<60)return`H ${ie} min`;const ve=Math.floor(ie/60);return ve<24?`H ${ve}h`:`H ${Math.floor(ve/24)}d`};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(Nt,{className:"h-7 w-7 text-white"})}),"Gesto de Pessoas"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Gerenciamento completo de funcionrios, usurios e acessos"})]})}),e.jsxs("div",{className:"flex gap-2 bg-white rounded-xl p-1 shadow-sm border border-gray-200",children:[e.jsxs("button",{onClick:()=>{a("employees"),o(""),c("all"),A("all")},className:`flex-1 px-6 py-3 rounded-lg font-medium transition-all flex items-center justify-center gap-2 ${t==="employees"?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-md":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(Ab,{className:"h-5 w-5"}),"Funcionrios",e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${t==="employees"?"bg-white/20":"bg-gray-200"}`,children:u.length})]}),e.jsxs("button",{onClick:()=>{a("users"),o(""),c("all"),A("all")},className:`flex-1 px-6 py-3 rounded-lg font-medium transition-all flex items-center justify-center gap-2 ${t==="users"?"bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-md":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(Jt,{className:"h-5 w-5"}),"Usurios do Sistema",e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${t==="users"?"bg-white/20":"bg-gray-200"}`,children:S.length})]}),e.jsxs("button",{onClick:()=>{a("access"),o(""),c("all"),A("all")},className:`flex-1 px-6 py-3 rounded-lg font-medium transition-all flex items-center justify-center gap-2 ${t==="access"?"bg-gradient-to-r from-purple-500 to-pink-600 text-white shadow-md":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(os,{className:"h-5 w-5"}),"Perfis de Acesso",e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${t==="access"?"bg-white/20":"bg-gray-200"}`,children:F.length})]})]})]}),e.jsxs(rt,{mode:"wait",children:[t==="employees"&&e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por nome, email ou CPF...",value:i,onChange:K=>o(K.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("select",{value:d,onChange:K=>A(K.target.value),className:"px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todos os status"}),e.jsx("option",{value:"active",children:"Ativos"}),e.jsx("option",{value:"inactive",children:"Inativos"})]}),e.jsxs("button",{onClick:()=>$(),className:"px-6 py-2.5 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg hover:shadow-lg transition-all flex items-center gap-2 font-medium",children:[e.jsx(bt,{className:"h-5 w-5"}),"Novo Funcionrio"]})]})}),e.jsx("div",{className:"grid gap-4",children:X?e.jsxs("div",{className:"bg-white rounded-xl p-12 text-center shadow-sm border border-gray-200",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200 border-t-blue-500 mx-auto"}),e.jsx("p",{className:"text-gray-600 mt-4",children:"Carregando funcionrios..."})]}):ee.length===0?e.jsxs("div",{className:"bg-white rounded-xl p-12 text-center shadow-sm border border-gray-200",children:[e.jsx(Nt,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Nenhum funcionrio encontrado"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Comece adicionando seu primeiro funcionrio"}),e.jsxs("button",{onClick:()=>$(),className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg hover:shadow-lg transition-all inline-flex items-center gap-2 font-medium",children:[e.jsx(bt,{className:"h-5 w-5"}),"Adicionar Funcionrio"]})]}):ee.map(K=>{var Me,qe;return e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center text-white font-bold text-xl shadow-lg flex-shrink-0",children:((qe=(Me=K.name)==null?void 0:Me[0])==null?void 0:qe.toUpperCase())||"F"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:K.name}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${K.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:K.active?"Ativo":"Inativo"})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[K.email&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Cs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"truncate",children:K.email})]}),K.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(la,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:K.phone})]}),K.department&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Zi,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:K.department})]}),K.role&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Ab,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:K.role})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx("button",{onClick:()=>$(K),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Editar",children:e.jsx(Cu,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>ne(K.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Excluir",children:e.jsx(Vt,{className:"h-5 w-5"})})]})]})},K.id)})})]},"employees"),t==="users"&&e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar usurios por nome ou email...",value:i,onChange:K=>o(K.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("select",{value:l,onChange:K=>c(K.target.value),className:"px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todos os perfis"}),F.map(K=>e.jsx("option",{value:K.id,children:K.name},K.id))]}),e.jsxs("select",{value:d,onChange:K=>A(K.target.value),className:"px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todos os status"}),e.jsx("option",{value:"active",children:"Ativos"}),e.jsx("option",{value:"inactive",children:"Inativos"}),e.jsx("option",{value:"pending",children:"Pendentes"})]}),e.jsxs("button",{onClick:()=>ue(),className:"px-6 py-2.5 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg hover:shadow-lg transition-all flex items-center gap-2 font-medium",children:[e.jsx(bj,{className:"h-5 w-5"}),"Novo Usurio"]})]})}),e.jsx("div",{className:"grid gap-4",children:je.length===0?e.jsxs("div",{className:"bg-white rounded-xl p-12 text-center shadow-sm border border-gray-200",children:[e.jsx(Jt,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Nenhum usurio encontrado"}),e.jsx("p",{className:"text-gray-600",children:"Ajuste os filtros ou adicione um novo usurio"})]}):je.map(K=>{var qe;const Me=Xe(K.role);return e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:`w-14 h-14 bg-gradient-to-br ${Pe(K.role)} rounded-xl flex items-center justify-center text-white shadow-lg flex-shrink-0`,children:e.jsx(Me,{className:"h-7 w-7"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:K.name}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${K.status==="active"?"bg-green-100 text-green-800":K.status==="inactive"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:K.status==="active"?"Ativo":K.status==="inactive"?"Inativo":"Pendente"})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 text-sm mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Cs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"truncate",children:K.email})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`px-2 py-1 bg-gradient-to-r ${Pe(K.role)} text-white rounded-md text-xs font-medium`,children:(qe=F.find(re=>re.id===K.role))==null?void 0:qe.name})}),K.department&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Zi,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:K.department})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(vt,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:Ce(K.lastLogin)})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[K.permissions.slice(0,3).map(re=>{var ie;return e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:((ie=f.find(ve=>ve.id===re))==null?void 0:ie.name)||re},re)}),K.permissions.length>3&&e.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs",children:["+",K.permissions.length-3," mais"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx("button",{onClick:()=>Be(K.id),className:`p-2 rounded-lg transition-colors ${K.status==="active"?"text-red-600 hover:bg-red-50":"text-green-600 hover:bg-green-50"}`,title:K.status==="active"?"Desativar":"Ativar",children:K.status==="active"?e.jsx(Va,{className:"h-5 w-5"}):e.jsx(D6,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>ue(K),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Editar",children:e.jsx(Cu,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>xe(K.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Excluir",children:e.jsx(Vt,{className:"h-5 w-5"})})]})]})},K.id)})})]},"users"),t==="access"&&e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Perfis de Acesso do Sistema"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Configure os nveis de acesso e permisses para cada tipo de usurio"}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:F.map(K=>{const Me=K.icon;return e.jsxs(W.div,{whileHover:{scale:1.02},className:"bg-white rounded-xl p-6 border-2 border-gray-200 hover:border-gray-300 transition-all cursor-pointer",onClick:()=>{O(K),P(!0)},children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${K.color} rounded-xl flex items-center justify-center text-white shadow-lg flex-shrink-0`,children:e.jsx(Me,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:K.name}),e.jsx("p",{className:"text-sm text-gray-600",children:K.description})]}),e.jsxs("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs font-medium",children:["Nvel ",K.level]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Permisses:"}),e.jsx("span",{className:"text-gray-900 font-bold",children:K.permissions.length})]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[K.permissions.slice(0,4).map(qe=>{var re;return e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:(re=f.find(ie=>ie.id===qe))==null?void 0:re.name},qe)}),K.permissions.length>4&&e.jsxs("span",{className:"px-2 py-1 bg-gray-200 text-gray-600 rounded text-xs font-medium",children:["+",K.permissions.length-4]})]})]})]},K.id)})})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Todas as Permisses"}),e.jsx("div",{className:"space-y-4",children:Array.from(new Set(f.map(K=>K.category))).map(K=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:K}),e.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:f.filter(Me=>Me.category===K).map(Me=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(As,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 text-sm",children:Me.name}),e.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:Me.description})]})]},Me.id))})]},K))})]})]},"access")]}),m&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden shadow-2xl",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-blue-500 to-indigo-600",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:g?"Editar Funcionrio":"Novo Funcionrio"}),e.jsx("button",{onClick:()=>y(!1),className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(ht,{className:"h-6 w-6"})})]})}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-180px)]",children:[e.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:[{id:"personal",label:"Dados Pessoais",icon:Jt},{id:"address",label:"Endereo",icon:da},{id:"bank",label:"Bancrios",icon:Es},{id:"license",label:"CNH",icon:uj},{id:"emergency",label:"Emergncia",icon:cs},{id:"documents",label:"Documentos",icon:ut}].map(K=>{const Me=K.icon;return e.jsxs("button",{onClick:()=>n(K.id),className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 whitespace-nowrap ${r===K.id?"bg-blue-500 text-white shadow-md":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(Me,{className:"h-4 w-4"}),K.label]},K.id)})}),r==="personal"&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo *"}),e.jsx("input",{type:"text",value:V.name||"",onChange:K=>oe({...V,name:K.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),e.jsx("input",{type:"email",value:V.email||"",onChange:K=>oe({...V,email:K.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone"}),e.jsx("input",{type:"text",value:V.phone||"",onChange:K=>oe({...V,phone:IP(K.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CPF"}),e.jsx("input",{type:"text",value:V.cpf||"",onChange:K=>oe({...V,cpf:DP(K.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cargo"}),e.jsx("input",{type:"text",value:V.role||"",onChange:K=>oe({...V,role:K.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Departamento"}),e.jsx("input",{type:"text",value:V.department||"",onChange:K=>oe({...V,department:K.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Salrio"}),e.jsx("input",{type:"number",value:V.salary||0,onChange:K=>oe({...V,salary:parseFloat(K.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:V.active!==!1,onChange:K=>oe({...V,active:K.target.checked}),className:"w-4 h-4 text-blue-600 rounded"}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Funcionrio Ativo"})]})]}),r!=="personal"&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:["Contedo da aba ",r," (implementar conforme necessrio)"]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 bg-gray-50 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>y(!1),className:"px-6 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors font-medium",children:"Cancelar"}),e.jsxs("button",{onClick:T,className:"px-6 py-2.5 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg hover:shadow-lg transition-all flex items-center gap-2 font-medium",children:[e.jsx(Gt,{className:"h-5 w-5"}),"Salvar Funcionrio"]})]})]})}),R&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-green-500 to-emerald-600",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:C?"Editar Usurio":"Novo Usurio"}),e.jsx("button",{onClick:()=>_(!1),className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(ht,{className:"h-6 w-6"})})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome *"}),e.jsx("input",{type:"text",value:H.name,onChange:K=>I({...H,name:K.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),e.jsx("input",{type:"email",value:H.email,onChange:K=>I({...H,email:K.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Perfil de Acesso *"}),e.jsx("select",{value:H.role,onChange:K=>{var re;const Me=K.target.value,qe=((re=F.find(ie=>ie.id===Me))==null?void 0:re.permissions)||[];I({...H,role:Me,permissions:qe})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",children:F.map(K=>e.jsx("option",{value:K.id,children:K.name},K.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Departamento"}),e.jsx("input",{type:"text",value:H.department,onChange:K=>I({...H,department:K.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Permisses"}),e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 max-h-60 overflow-y-auto",children:e.jsx("div",{className:"space-y-2",children:H.permissions.map(K=>{var Me;return e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 rounded text-sm",children:[e.jsx(As,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-gray-900",children:(Me=f.find(qe=>qe.id===K))==null?void 0:Me.name})]},K)})})})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 bg-gray-50 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>_(!1),className:"px-6 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors font-medium",children:"Cancelar"}),e.jsxs("button",{onClick:me,className:"px-6 py-2.5 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg hover:shadow-lg transition-all flex items-center gap-2 font-medium",children:[e.jsx(Gt,{className:"h-5 w-5"}),"Salvar Usurio"]})]})]})}),M&&Z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl",children:[e.jsx("div",{className:`p-6 border-b border-gray-200 bg-gradient-to-r ${Z.color}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(Z.icon,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:Z.name}),e.jsx("p",{className:"text-white/80",children:Z.description})]})]}),e.jsx("button",{onClick:()=>P(!1),className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(ht,{className:"h-6 w-6"})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Permisses deste perfil:"}),e.jsx("div",{className:"space-y-2",children:Z.permissions.map(K=>{const Me=f.find(qe=>qe.id===K);return Me?e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(As,{className:"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:Me.name}),e.jsx("p",{className:"text-sm text-gray-600",children:Me.description})]})]},K):null})})]}),e.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:e.jsx("button",{onClick:()=>P(!1),className:"w-full px-6 py-2.5 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"Fechar"})})]})})]})},LP=()=>{const{user:s}=rs(),[t,a]=j.useState([]),[r,n]=j.useState(!0),[i,o]=j.useState(!1),[l,c]=j.useState({email:"",role:"technician"});j.useEffect(()=>{d(),oU()},[]);const d=async()=>{try{n(!0);const N=await rU();a(N)}catch(N){console.error("Error loading invitations:",N)}finally{n(!1)}},A=async N=>{if(N.preventDefault(),!l.email){alert("Por favor, insira um email");return}try{await nU({email:l.email,role:l.role,invited_by:s==null?void 0:s.id}),await d(),o(!1),c({email:"",role:"technician"})}catch(D){console.error("Error creating invitation:",D),alert("Erro ao criar convite. Verifique se o email j no foi convidado.")}},u=async N=>{if(confirm("Tem certeza que deseja cancelar este convite?"))try{await iU(N),await d()}catch(D){console.error("Error canceling invitation:",D),alert("Erro ao cancelar convite")}},x=N=>{const D=`${window.location.origin}/register?token=${N}`;navigator.clipboard.writeText(D),alert("Link copiado para a rea de transferncia!")},m=N=>{switch(N){case"pending":return e.jsx(vt,{className:"h-5 w-5 text-yellow-600"});case"accepted":return e.jsx(Aa,{className:"h-5 w-5 text-green-600"});case"expired":return e.jsx(Ai,{className:"h-5 w-5 text-red-600"});case"cancelled":return e.jsx(es,{className:"h-5 w-5 text-gray-600"});default:return e.jsx(vt,{className:"h-5 w-5 text-gray-600"})}},y=N=>{switch(N){case"pending":return"Pendente";case"accepted":return"Aceito";case"expired":return"Expirado";case"cancelled":return"Cancelado";default:return"Desconhecido"}},g=N=>{switch(N){case"pending":return"bg-yellow-100 text-yellow-800";case"accepted":return"bg-green-100 text-green-800";case"expired":return"bg-red-100 text-red-800";case"cancelled":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},b=N=>{switch(N){case"admin":return"Administrador";case"technician":return"Tcnico";case"external":return"Externo";default:return"Usurio"}},p=N=>{switch(N){case"admin":return"bg-purple-100 text-purple-800";case"technician":return"bg-blue-100 text-blue-800";case"external":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},v=N=>N?new Date(N).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-";return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(Cs,{className:"h-8 w-8 text-blue-600"}),"Convites de Usurios"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Convide novos usurios para acessar o sistema"})]}),e.jsxs("button",{onClick:()=>o(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 transition-colors",children:[e.jsx(bt,{className:"h-5 w-5"}),"Novo Convite"]})]}),r?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),e.jsx("p",{className:"text-gray-600 mt-4",children:"Carregando convites..."})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Funo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Criado em"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expira em"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.jsx(rt,{children:t.map(N=>e.jsxs(W.tr,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:N.email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${p(N.role)}`,children:b(N.role)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[m(N.status),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${g(N.status)}`,children:y(N.status)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:v(N.created_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:v(N.expires_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("div",{className:"flex items-center justify-end gap-2",children:N.status==="pending"&&N.token&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>x(N.token),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Copiar link do convite",children:e.jsx(Gr,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>u(N.id),className:"text-red-600 hover:text-red-900 transition-colors",title:"Cancelar convite",children:e.jsx(ht,{className:"h-4 w-4"})})]})})})]},N.id))})})]})}),t.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Cs,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Nenhum convite encontrado"}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Crie convites para novos usurios"})]})]})]}),e.jsx(rt,{children:i&&e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>o(!1),children:e.jsxs(W.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:N=>N.stopPropagation(),className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Ma,{className:"h-6 w-6 text-blue-600"}),"Novo Convite"]}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ht,{className:"h-6 w-6"})})]})}),e.jsxs("form",{onSubmit:A,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email do Usurio *"}),e.jsx("input",{type:"email",required:!0,value:l.email,onChange:N=>c({...l,email:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"usuario@exemplo.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Funo no Sistema *"}),e.jsxs("select",{value:l.role,onChange:N=>c({...l,role:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"technician",children:"Tcnico"}),e.jsx("option",{value:"admin",children:"Administrador"}),e.jsx("option",{value:"external",children:"Externo"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"O convite expira em 7 dias"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2 transition-colors",children:[e.jsx(Ma,{className:"h-4 w-4"}),"Enviar Convite"]})]})]})]})})})]})},C1=()=>{var L;const[s,t]=j.useState([]),[a,r]=j.useState(!0),[n,i]=j.useState(!1),[o,l]=j.useState(null),[c,d]=j.useState(null),[A,u]=j.useState("all"),[x,m]=j.useState(""),[y,g]=j.useState(new Set),[b,p]=j.useState({name:"",type:"receita",color:"#10b981",icon:"tag",parent_id:null,active:!0});j.useEffect(()=>{v()},[]);const v=async()=>{try{r(!0);const{data:f,error:F}=await se.from("financial_categories").select("*").order("name",{ascending:!0});if(F)throw F;const M=new Map;f==null||f.forEach(Z=>{M.set(Z.id,{...Z,subcategories:[]})});const P=[];M.forEach(Z=>{if(Z.parent_id){const O=M.get(Z.parent_id);O&&(O.subcategories=O.subcategories||[],O.subcategories.push(Z))}else P.push(Z)}),t(P)}catch(f){console.error("Error loading categories:",f)}finally{r(!1)}},N=async()=>{try{if(!b.name){alert("Nome  obrigatrio!");return}const f={name:b.name,type:b.type,color:b.color,icon:b.icon,parent_id:b.parent_id||null,active:b.active};if(o){const{error:F}=await se.from("financial_categories").update({...f,updated_at:new Date().toISOString()}).eq("id",o.id);if(F)throw F}else{const{error:F}=await se.from("financial_categories").insert([f]);if(F)throw F}v(),E()}catch(f){console.error("Error saving category:",f),alert("Erro ao salvar categoria!")}},D=async f=>{if(confirm("Tem certeza que deseja excluir esta categoria?"))try{const{error:F}=await se.from("financial_categories").delete().eq("id",f);if(F)throw F;v()}catch(F){console.error("Error deleting category:",F),alert("Erro ao excluir categoria! Verifique se no existem lanamentos vinculados.")}},S=(f,F)=>{f?(l(f),p({name:f.name,type:f.type,color:f.color,icon:f.icon,parent_id:f.parent_id,active:f.active})):(l(null),p({name:"",type:"receita",color:"#10b981",icon:"tag",parent_id:F||null,active:!0})),i(!0)},E=()=>{i(!1),l(null),d(null)},R=f=>{const F=new Set(y);F.has(f)?F.delete(f):F.add(f),g(F)},_=s.filter(f=>{const F=A==="all"||f.type===A,M=f.name.toLowerCase().includes(x.toLowerCase());return F&&M}),C=[{value:"#10b981",label:"Verde"},{value:"#3b82f6",label:"Azul"},{value:"#ef4444",label:"Vermelho"},{value:"#f59e0b",label:"Laranja"},{value:"#8b5cf6",label:"Roxo"},{value:"#ec4899",label:"Rosa"},{value:"#06b6d4",label:"Ciano"},{value:"#6366f1",label:"ndigo"}];return a?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(hb,{className:"h-8 w-8 text-blue-600"}),"Categorias de Lanamento"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gerencie categorias e subcategorias de receitas e despesas"})]}),e.jsxs("button",{onClick:()=>S(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(bt,{className:"h-4 w-4"}),"Nova Categoria"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(Qt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar categorias...",value:x,onChange:f=>m(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>u("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${A==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Todas"}),e.jsxs("button",{onClick:()=>u("receita"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${A==="receita"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(zt,{className:"h-4 w-4"}),"Receitas"]}),e.jsxs("button",{onClick:()=>u("despesa"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${A==="despesa"?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(nr,{className:"h-4 w-4"}),"Despesas"]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:_.map(f=>e.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center",style:{backgroundColor:`${f.color}20`},children:f.type==="receita"?e.jsx(zt,{className:"h-6 w-6",style:{color:f.color}}):e.jsx(nr,{className:"h-6 w-6",style:{color:f.color}})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:f.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${f.type==="receita"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:f.type==="receita"?"Receita":"Despesa"}),f.subcategories&&f.subcategories.length>0&&e.jsxs("span",{className:"text-xs text-gray-500",children:[f.subcategories.length," subcategorias"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>d(f),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Visualizar",children:e.jsx($s,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>S(f),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Editar",children:e.jsx(Es,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>D(f.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Excluir",children:e.jsx(Vt,{className:"h-4 w-4"})})]})]}),f.subcategories&&f.subcategories.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[e.jsxs("button",{onClick:()=>R(f.id),className:"flex items-center gap-2 text-sm text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(vd,{className:`h-4 w-4 transition-transform ${y.has(f.id)?"rotate-90":""}`}),"Ver subcategorias"]}),y.has(f.id)&&e.jsx("div",{className:"mt-2 space-y-2",children:f.subcategories.map(F=>e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Su,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-700",children:F.name})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>S(F),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",title:"Editar",children:e.jsx(Es,{className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>D(F.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Excluir",children:e.jsx(Vt,{className:"h-3 w-3"})})]})]},F.id))})]}),e.jsxs("button",{onClick:()=>S(void 0,f.id),className:"mt-3 w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-sm text-gray-600 hover:border-blue-500 hover:text-blue-600 transition-colors flex items-center justify-center gap-2",children:[e.jsx(a6,{className:"h-4 w-4"}),"Adicionar Subcategoria"]})]})},f.id))}),_.length===0&&e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg",children:[e.jsx(hb,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma categoria encontrada"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Crie sua primeira categoria de lanamento"}),e.jsxs("button",{onClick:()=>S(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors inline-flex items-center gap-2",children:[e.jsx(bt,{className:"h-4 w-4"}),"Nova Categoria"]})]}),e.jsx(rt,{children:n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b bg-gradient-to-r from-blue-600 to-blue-700 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold",children:o?"Editar Categoria":"Nova Categoria"}),e.jsx("p",{className:"text-blue-100 text-sm mt-1",children:b.parent_id?"Criando subcategoria":"Categoria principal de lanamentos"})]}),e.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto max-h-[calc(90vh-200px)]",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nome da Categoria ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:b.name,onChange:f=>p({...b,name:f.target.value}),placeholder:"Ex: Servios Prestados",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tipo ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{type:"button",onClick:()=>p({...b,type:"receita"}),className:`p-4 border-2 rounded-lg transition-all ${b.type==="receita"?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(zt,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium text-gray-900",children:"Receita"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Entrada de dinheiro"})]}),e.jsxs("button",{type:"button",onClick:()=>p({...b,type:"despesa"}),className:`p-4 border-2 rounded-lg transition-all ${b.type==="despesa"?"border-red-500 bg-red-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(nr,{className:"h-8 w-8 text-red-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium text-gray-900",children:"Despesa"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Sada de dinheiro"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cor"}),e.jsx("div",{className:"grid grid-cols-8 gap-2",children:C.map(f=>e.jsx("button",{type:"button",onClick:()=>p({...b,color:f.value}),className:`w-10 h-10 rounded-lg transition-all ${b.color===f.value?"ring-2 ring-offset-2 ring-blue-500 scale-110":"hover:scale-105"}`,style:{backgroundColor:f.value},title:f.label},f.value))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"active",checked:b.active,onChange:f=>p({...b,active:f.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"active",className:"text-sm text-gray-700",children:"Categoria ativa"})]})]}),e.jsxs("div",{className:"p-6 border-t bg-gray-50 flex gap-3 justify-end",children:[e.jsx("button",{onClick:E,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),e.jsxs("button",{onClick:N,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(Ut,{className:"h-4 w-4"}),"Salvar Categoria"]})]})]})})}),e.jsx(rt,{children:c&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl w-full max-w-2xl",children:[e.jsx("div",{className:"p-6 border-b text-white",style:{background:`linear-gradient(135deg, ${c.color} 0%, ${c.color}dd 100%)`},children:e.jsxs("div",{className:"flex items-center gap-4",children:[c.type==="receita"?e.jsx(zt,{className:"h-12 w-12"}):e.jsx(nr,{className:"h-12 w-12"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:c.name}),e.jsx("p",{className:"text-white/80 text-sm",children:c.type==="receita"?"Categoria de Receita":"Categoria de Despesa"})]})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Tipo"}),e.jsx("p",{className:"font-medium capitalize",children:c.type})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${c.active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:c.active?"Ativa":"Inativa"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Cor"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded",style:{backgroundColor:c.color}}),e.jsx("span",{className:"font-mono text-sm",children:c.color})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Subcategorias"}),e.jsx("p",{className:"font-medium",children:((L=c.subcategories)==null?void 0:L.length)||0})]})]}),c.subcategories&&c.subcategories.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Subcategorias:"}),e.jsx("div",{className:"space-y-2",children:c.subcategories.map(f=>e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg flex items-center gap-2",children:[e.jsx(Su,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium",children:f.name})]},f.id))})]})]}),e.jsxs("div",{className:"p-6 border-t bg-gray-50 flex gap-3 justify-end",children:[e.jsx("button",{onClick:E,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Fechar"}),e.jsxs("button",{onClick:()=>{S(c),d(null)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(Es,{className:"h-4 w-4"}),"Editar"]})]})]})})})]})},Bc={customers:"Clientes",service_orders:"Ordens de Servio",agenda:"Agenda",finance_entries:"Lanamentos Financeiros",employees:"Funcionrios",materials:"Materiais",service_catalog:"Catlogo de Servios",user_profiles:"Perfis de Usurios"},hv={INSERT:e.jsx(bt,{className:"w-4 h-4"}),UPDATE:e.jsx(Es,{className:"w-4 h-4"}),DELETE:e.jsx(Vt,{className:"w-4 h-4"})},xv={INSERT:"bg-green-100 text-green-700 border-green-200",UPDATE:"bg-blue-100 text-blue-700 border-blue-200",DELETE:"bg-red-100 text-red-700 border-red-200"},Ex={INSERT:"Criao",UPDATE:"Edio",DELETE:"Excluso"};function TP(){const[s,t]=j.useState([]),[a,r]=j.useState([]),[n,i]=j.useState(!0),[o,l]=j.useState(null),[c,d]=j.useState({table:"",operation:"",user:"",dateFrom:"",dateTo:"",search:""});j.useEffect(()=>{A()},[c]);const A=async()=>{i(!0);try{let x=se.from("audit_logs").select("*").order("created_at",{ascending:!1}).limit(100);c.table&&(x=x.eq("table_name",c.table)),c.operation&&(x=x.eq("operation",c.operation)),c.user&&(x=x.ilike("user_email",`%${c.user}%`)),c.dateFrom&&(x=x.gte("created_at",c.dateFrom)),c.dateTo&&(x=x.lte("created_at",c.dateTo));const{data:m}=await x,{data:y}=await se.from("audit_summary_by_table").select("*");t(m||[]),r(y||[])}catch(x){console.error("Error loading audit data:",x)}finally{i(!1)}},u=()=>{const x=["Data/Hora","Tabela","Operao","Usurio","ID do Registro"],m=s.map(v=>[Zt(new Date(v.created_at),"dd/MM/yyyy HH:mm:ss"),Bc[v.table_name]||v.table_name,Ex[v.operation],v.user_email||"Sistema",v.record_id]),y=[x.join(","),...m.map(v=>v.map(N=>`"${N}"`).join(","))].join(`
`),g=new Blob([y],{type:"text/csv"}),b=window.URL.createObjectURL(g),p=document.createElement("a");p.href=b,p.download=`auditoria_${Zt(new Date,"yyyy-MM-dd_HHmmss")}.csv`,p.click()};return n?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(os,{className:"w-8 h-8 text-blue-600"}),"Auditoria do Sistema"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Rastreamento completo de todas as operaes no sistema"})]}),e.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(wa,{className:"w-4 h-4"}),"Exportar CSV"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:a.map(x=>e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-md p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:Bc[x.table_name]||x.table_name}),e.jsx(jd,{className:"w-5 h-5 text-gray-400"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total:"}),e.jsx("span",{className:"font-semibold",children:x.total_operations})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-600",children:"Criaes:"}),e.jsx("span",{className:"font-semibold text-green-600",children:x.inserts})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-600",children:"Edies:"}),e.jsx("span",{className:"font-semibold text-blue-600",children:x.updates})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-red-600",children:"Excluses:"}),e.jsx("span",{className:"font-semibold text-red-600",children:x.deletes})]})]})]},x.table_name))}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(io,{className:"w-5 h-5 text-gray-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Filtros"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tabela"}),e.jsxs("select",{value:c.table,onChange:x=>d({...c,table:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Todas"}),Object.entries(Bc).map(([x,m])=>e.jsx("option",{value:x,children:m},x))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Operao"}),e.jsxs("select",{value:c.operation,onChange:x=>d({...c,operation:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Todas"}),e.jsx("option",{value:"INSERT",children:"Criao"}),e.jsx("option",{value:"UPDATE",children:"Edio"}),e.jsx("option",{value:"DELETE",children:"Excluso"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Usurio"}),e.jsx("input",{type:"text",value:c.user,onChange:x=>d({...c,user:x.target.value}),placeholder:"Email do usurio",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Inicial"}),e.jsx("input",{type:"date",value:c.dateFrom,onChange:x=>d({...c,dateFrom:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Final"}),e.jsx("input",{type:"date",value:c.dateTo,onChange:x=>d({...c,dateTo:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(ut,{className:"w-5 h-5"}),"ltimas Atividades (",s.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data/Hora"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tabela"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Operao"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usurio"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Detalhes"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(x=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vt,{className:"w-4 h-4 text-gray-400"}),Zt(new Date(x.created_at),"dd/MM/yyyy HH:mm:ss")]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-md",children:Bc[x.table_name]||x.table_name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-md border ${xv[x.operation]}`,children:[hv[x.operation],Ex[x.operation]]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900",children:x.user_email||"Sistema"})]})}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-500",children:[x.operation==="UPDATE"&&x.changed_fields&&e.jsxs("span",{className:"text-blue-600",children:[x.changed_fields.length," campo(s) alterado(s)"]}),x.operation==="INSERT"&&e.jsx("span",{className:"text-green-600",children:"Novo registro"}),x.operation==="DELETE"&&e.jsx("span",{className:"text-red-600",children:"Registro excludo"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("button",{onClick:()=>l(x),className:"text-blue-600 hover:text-blue-800 font-medium",children:"Ver Detalhes"})})]},x.id))})]})})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between bg-gradient-to-r from-blue-600 to-blue-700 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Detalhes da Auditoria"}),e.jsx("button",{onClick:()=>l(null),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(Ai,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Operao"}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-2 rounded-lg border ${xv[o.operation]}`,children:[hv[o.operation],Ex[o.operation]]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Tabela"}),e.jsx("p",{className:"text-gray-900 font-medium",children:Bc[o.table_name]||o.table_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Usurio"}),e.jsx("p",{className:"text-gray-900",children:o.user_email||"Sistema"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Data/Hora"}),e.jsx("p",{className:"text-gray-900",children:Zt(new Date(o.created_at),"dd/MM/yyyy HH:mm:ss")})]})]}),o.operation==="UPDATE"&&o.changed_fields&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Campos Alterados"}),e.jsx("div",{className:"space-y-3",children:o.changed_fields.map((x,m)=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("p",{className:"font-medium text-gray-900 mb-2",children:x.field}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-red-600 font-medium",children:"ANTES:"}),e.jsx("pre",{className:"mt-1 text-sm text-gray-700 bg-white p-2 rounded border border-red-200",children:JSON.stringify(x.old_value,null,2)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-green-600 font-medium",children:"DEPOIS:"}),e.jsx("pre",{className:"mt-1 text-sm text-gray-700 bg-white p-2 rounded border border-green-200",children:JSON.stringify(x.new_value,null,2)})]})]})]},m))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.old_data&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Dados Anteriores"}),e.jsx("pre",{className:"text-xs bg-gray-50 p-4 rounded-lg border border-gray-200 overflow-x-auto",children:JSON.stringify(o.old_data,null,2)})]}),o.new_data&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Dados Novos"}),e.jsx("pre",{className:"text-xs bg-gray-50 p-4 rounded-lg border border-gray-200 overflow-x-auto",children:JSON.stringify(o.new_data,null,2)})]})]})]})})]})})]})}const QP=()=>{const{isAdmin:s}=rs(),[t,a]=j.useState([]),[r,n]=j.useState(!0),[i,o]=j.useState(""),[l,c]=j.useState("all"),[d,A]=j.useState(!1),[u,x]=j.useState(null),[m,y]=j.useState({name:"",email:"",phone:"",company:"",source:"Website",status:"new",score:0});j.useEffect(()=>{g()},[]);const g=async()=>{try{n(!0);const{data:C,error:L}=await se.from("crm_leads").select("*").order("created_at",{ascending:!1});if(L)throw L;a(C||[])}catch(C){console.error("Error loading leads:",C)}finally{n(!1)}},b=async()=>{try{if(u){const{error:C}=await se.from("crm_leads").update(m).eq("id",u.id);if(C)throw C}else{const{error:C}=await se.from("crm_leads").insert([m]);if(C)throw C}await g(),N()}catch(C){console.error("Error saving lead:",C),alert("Erro ao salvar lead")}},p=async C=>{if(confirm("Tem certeza que deseja excluir este lead?"))try{const{error:L}=await se.from("crm_leads").delete().eq("id",C);if(L)throw L;await g()}catch(L){console.error("Error deleting lead:",L),alert("Erro ao excluir lead")}},v=C=>{x(C),y({name:C.name,email:C.email,phone:C.phone,company:C.company,source:C.source,status:C.status,score:C.score}),A(!0)},N=()=>{A(!1),x(null),y({name:"",email:"",phone:"",company:"",source:"Website",status:"new",score:0})},D=async C=>{if(confirm("Converter este lead em cliente?"))try{const{error:L}=await se.from("customers").insert([{tipo_pessoa:"juridica",nome_razao:C.company||C.name,nome_fantasia:C.company,email:C.email,telefone:C.phone,celular:C.phone}]);if(L)throw L;const{error:f}=await se.from("crm_leads").update({status:"qualified"}).eq("id",C.id);if(f)throw f;alert("Lead convertido em cliente com sucesso!"),await g()}catch(L){console.error("Error converting lead:",L),alert("Erro ao converter lead")}},S=C=>{switch(C){case"new":return e.jsx(vt,{className:"w-4 h-4 text-blue-500"});case"contacted":return e.jsx(la,{className:"w-4 h-4 text-yellow-500"});case"qualified":return e.jsx(Aa,{className:"w-4 h-4 text-green-500"});case"proposal":return e.jsx(zt,{className:"w-4 h-4 text-purple-500"});default:return e.jsx(Ai,{className:"w-4 h-4 text-gray-500"})}},E=C=>({new:"Novo",contacted:"Contatado",qualified:"Qualificado",proposal:"Proposta",lost:"Perdido"})[C]||C,R=t.filter(C=>{const L=C.name.toLowerCase().includes(i.toLowerCase())||C.email.toLowerCase().includes(i.toLowerCase())||C.company.toLowerCase().includes(i.toLowerCase()),f=l==="all"||C.status===l;return L&&f}),_={total:t.length,new:t.filter(C=>C.status==="new").length,contacted:t.filter(C=>C.status==="contacted").length,qualified:t.filter(C=>C.status==="qualified").length};return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"CRM - Leads"}),e.jsx("p",{className:"text-gray-600",children:"Gesto de leads e funil de vendas"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total de Leads"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_.total})]}),e.jsx(Nt,{className:"w-10 h-10 text-blue-500"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Novos"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:_.new})]}),e.jsx(vt,{className:"w-10 h-10 text-blue-500"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Contatados"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:_.contacted})]}),e.jsx(la,{className:"w-10 h-10 text-yellow-500"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Qualificados"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:_.qualified})]}),e.jsx(Aa,{className:"w-10 h-10 text-green-500"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between",children:[e.jsxs("div",{className:"flex-1 flex gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Buscar leads...",value:i,onChange:C=>o(C.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("select",{value:l,onChange:C=>c(C.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todos os Status"}),e.jsx("option",{value:"new",children:"Novos"}),e.jsx("option",{value:"contacted",children:"Contatados"}),e.jsx("option",{value:"qualified",children:"Qualificados"}),e.jsx("option",{value:"proposal",children:"Proposta"}),e.jsx("option",{value:"lost",children:"Perdidos"})]})]}),e.jsxs("button",{onClick:()=>A(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(bt,{className:"w-5 h-5"}),"Novo Lead"]})]})}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nome"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Empresa"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contato"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Origem"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Score"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map(C=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:C.company})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Cs,{className:"w-3 h-3"}),C.email]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(la,{className:"w-3 h-3"}),C.phone]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800",children:C.source})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[S(C.status),e.jsx("span",{className:"text-sm text-gray-900",children:E(C.status)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${C.score}%`}})}),e.jsx("span",{className:"text-sm text-gray-600",children:C.score})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[C.status!=="qualified"&&e.jsx("button",{onClick:()=>D(C),className:"text-green-600 hover:text-green-900",title:"Converter em cliente",children:e.jsx(Aa,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>v(C),className:"text-blue-600 hover:text-blue-900",children:e.jsx(Es,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>p(C.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Vt,{className:"w-5 h-5"})})]})})]},C.id))})]}),R.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Nt,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Nenhum lead encontrado"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Comece adicionando um novo lead."})]})]})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:u?"Editar Lead":"Novo Lead"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome *"}),e.jsx("input",{type:"text",value:m.name,onChange:C=>y({...m,name:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Empresa"}),e.jsx("input",{type:"text",value:m.company,onChange:C=>y({...m,company:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),e.jsx("input",{type:"email",value:m.email,onChange:C=>y({...m,email:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone *"}),e.jsx("input",{type:"tel",value:m.phone,onChange:C=>y({...m,phone:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Origem"}),e.jsxs("select",{value:m.source,onChange:C=>y({...m,source:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"Website",children:"Website"}),e.jsx("option",{value:"Google Ads",children:"Google Ads"}),e.jsx("option",{value:"LinkedIn",children:"LinkedIn"}),e.jsx("option",{value:"Indicao",children:"Indicao"}),e.jsx("option",{value:"Telefone",children:"Telefone"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:m.status,onChange:C=>y({...m,status:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"new",children:"Novo"}),e.jsx("option",{value:"contacted",children:"Contatado"}),e.jsx("option",{value:"qualified",children:"Qualificado"}),e.jsx("option",{value:"proposal",children:"Proposta"}),e.jsx("option",{value:"lost",children:"Perdido"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Score (0-100)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:m.score,onChange:C=>y({...m,score:parseInt(C.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:b,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Salvar"}),e.jsx("button",{onClick:N,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancelar"})]})]})})})]})},PP=()=>{const{isAdmin:s}=rs(),[t,a]=j.useState([]),[r,n]=j.useState([]),[i,o]=j.useState(!0),[l,c]=j.useState(""),[d,A]=j.useState("all"),[u,x]=j.useState(!1),[m,y]=j.useState(null),[g,b]=j.useState({contract_number:"",customer_id:"",start_date:"",end_date:"",value:0,payment_frequency:"monthly",status:"active",notes:""});j.useEffect(()=>{p()},[]);const p=async()=>{try{o(!0);const[C,L]=await Promise.all([se.from("contracts").select(`
            *,
            customer:customers(nome_razao)
          `).order("created_at",{ascending:!1}),se.from("customers").select("id, nome_razao")]);if(C.error)throw C.error;if(L.error)throw L.error;a(C.data||[]),n(L.data||[])}catch(C){console.error("Error loading data:",C)}finally{o(!1)}},v=async()=>{try{if(!g.contract_number||!g.customer_id||!g.start_date){alert("Preencha os campos obrigatrios");return}if(m){const{error:C}=await se.from("contracts").update(g).eq("id",m.id);if(C)throw C}else{const{error:C}=await se.from("contracts").insert([g]);if(C)throw C}await p(),S()}catch(C){console.error("Error saving contract:",C),alert("Erro ao salvar contrato")}},N=async C=>{if(confirm("Tem certeza que deseja excluir este contrato?"))try{const{error:L}=await se.from("contracts").delete().eq("id",C);if(L)throw L;await p()}catch(L){console.error("Error deleting contract:",L),alert("Erro ao excluir contrato")}},D=C=>{y(C),b({contract_number:C.contract_number,customer_id:C.customer_id,start_date:C.start_date,end_date:C.end_date,value:C.value,payment_frequency:C.payment_frequency,status:C.status,notes:C.notes||""}),x(!0)},S=()=>{x(!1),y(null),b({contract_number:"",customer_id:"",start_date:"",end_date:"",value:0,payment_frequency:"monthly",status:"active",notes:""})},E=C=>{const L={active:{bg:"bg-green-100",text:"text-green-800",icon:Aa},pending:{bg:"bg-yellow-100",text:"text-yellow-800",icon:vt},expired:{bg:"bg-red-100",text:"text-red-800",icon:es},cancelled:{bg:"bg-gray-100",text:"text-gray-800",icon:es}},f=L[C]||L.pending,F=f.icon;return e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs flex items-center gap-1 ${f.bg} ${f.text}`,children:[e.jsx(F,{className:"w-3 h-3"}),C==="active"?"Ativo":C==="pending"?"Pendente":C==="expired"?"Expirado":"Cancelado"]})},R=t.filter(C=>{var F,M;const L=C.contract_number.toLowerCase().includes(l.toLowerCase())||((M=(F=C.customer)==null?void 0:F.nome_razao)==null?void 0:M.toLowerCase().includes(l.toLowerCase())),f=d==="all"||C.status===d;return L&&f}),_={total:t.length,active:t.filter(C=>C.status==="active").length,expiringSoon:t.filter(C=>{const L=Math.floor((new Date(C.end_date).getTime()-new Date().getTime())/864e5);return L<=30&&L>0}).length,totalValue:t.filter(C=>C.status==="active").reduce((C,L)=>C+Number(L.value),0)};return i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Gesto de Contratos"}),e.jsx("p",{className:"text-gray-600",children:"Controle de contratos de manuteno e suporte"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total de Contratos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_.total})]}),e.jsx(ut,{className:"w-10 h-10 text-blue-500"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Ativos"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:_.active})]}),e.jsx(Aa,{className:"w-10 h-10 text-green-500"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Expirando em 30 dias"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:_.expiringSoon})]}),e.jsx(es,{className:"w-10 h-10 text-yellow-500"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Valor Total Mensal"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(_.totalValue)})]}),e.jsx(Ut,{className:"w-10 h-10 text-blue-500"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between",children:[e.jsxs("div",{className:"flex-1 flex gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Buscar contratos...",value:l,onChange:C=>c(C.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("select",{value:d,onChange:C=>A(C.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todos os Status"}),e.jsx("option",{value:"active",children:"Ativos"}),e.jsx("option",{value:"pending",children:"Pendentes"}),e.jsx("option",{value:"expired",children:"Expirados"}),e.jsx("option",{value:"cancelled",children:"Cancelados"})]})]}),e.jsxs("button",{onClick:()=>x(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(bt,{className:"w-5 h-5"}),"Novo Contrato"]})]})}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ttulo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Perodo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map(C=>{var L;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.contract_number})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:(L=C.customer)==null?void 0:L.nome_razao})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800",children:"Contrato"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:Zt(new Date(C.start_date),"dd/MM/yyyy")}),e.jsxs("div",{className:"text-xs text-gray-500",children:["at ",Zt(new Date(C.end_date),"dd/MM/yyyy")]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(C.value)}),e.jsx("div",{className:"text-xs text-gray-500",children:C.payment_frequency==="monthly"?"Mensal":C.payment_frequency==="quarterly"?"Trimestral":C.payment_frequency==="biannual"?"Semestral":"Anual"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:E(C.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>D(C),className:"text-blue-600 hover:text-blue-900",children:e.jsx(Es,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>N(C.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Vt,{className:"w-5 h-5"})})]})})]},C.id)})})]}),R.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ut,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Nenhum contrato encontrado"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Comece adicionando um novo contrato."})]})]})]}),u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:m?"Editar Contrato":"Novo Contrato"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nmero do Contrato *"}),e.jsx("input",{type:"text",value:g.contract_number,onChange:C=>b({...g,contract_number:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cliente *"}),e.jsxs("select",{value:g.customer_id,onChange:C=>b({...g,customer_id:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Selecione um cliente"}),r.map(C=>e.jsx("option",{value:C.id,children:C.nome_razao},C.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Frequncia de Pagamento"}),e.jsxs("select",{value:g.payment_frequency,onChange:C=>b({...g,payment_frequency:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"monthly",children:"Mensal"}),e.jsx("option",{value:"quarterly",children:"Trimestral"}),e.jsx("option",{value:"biannual",children:"Semestral"}),e.jsx("option",{value:"annual",children:"Anual"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Incio *"}),e.jsx("input",{type:"date",value:g.start_date,onChange:C=>b({...g,start_date:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Fim *"}),e.jsx("input",{type:"date",value:g.end_date,onChange:C=>b({...g,end_date:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor (R$)"}),e.jsx("input",{type:"number",step:"0.01",value:g.value,onChange:C=>b({...g,value:parseFloat(C.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:v,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Salvar"}),e.jsx("button",{onClick:S,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancelar"})]})]})})})]})},MP=()=>{const[s,t]=j.useState([]),[a,r]=j.useState(!0),[n,i]=j.useState(null),[o,l]=j.useState({}),[c,d]=j.useState(!1);j.useEffect(()=>{A()},[]);const A=async()=>{try{r(!0);const{data:g,error:b}=await se.from("contract_templates").select("*").eq("active",!0).order("is_default",{ascending:!1}).order("name");if(b)throw console.error("Supabase error:",b),b;console.log("Templates loaded:",g),t(g||[])}catch(g){console.error("Error loading templates:",g),alert("Erro ao carregar templates: "+g.message)}finally{r(!1)}},u=g=>{i(g.id),l(g)},x=()=>{i(null),l({})},m=async()=>{if(n)try{d(!0),o.is_default&&await se.from("contract_templates").update({is_default:!1}).neq("id",n);const{error:g}=await se.from("contract_templates").update({name:o.name,contract_text:o.contract_text,contract_clauses:o.contract_clauses,warranty_terms:o.warranty_terms,payment_conditions:o.payment_conditions,bank_details_template:o.bank_details_template,is_default:o.is_default,updated_at:new Date().toISOString()}).eq("id",n);if(g)throw g;alert("Template salvo com sucesso!"),await A(),x()}catch(g){console.error("Error saving template:",g),alert("Erro ao salvar template")}finally{d(!1)}},y=async g=>{try{await se.from("contract_templates").update({is_default:!1}).neq("id",g),await se.from("contract_templates").update({is_default:!0}).eq("id",g),alert("Template definido como padro!"),await A()}catch(b){console.error("Error setting default:",b),alert("Erro ao definir padro")}};return a?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(ut,{className:"h-8 w-8 text-blue-600"}),"Templates de Contrato"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Gerencie os modelos de contrato, termos de garantia e condies de pagamento"})]}),s.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border-2 border-gray-200 p-12 text-center",children:[e.jsx(ut,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Nenhum template encontrado"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"No h templates de contrato cadastrados no momento."}),e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4 max-w-2xl mx-auto",children:e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("strong",{children:"Nota:"})," Os templates devem ser criados diretamente no banco de dados Supabase na tabela ",e.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"contract_templates"}),"."]})})]}):e.jsx("div",{className:"space-y-6",children:s.map(g=>e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-lg border-2 border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 px-6 py-4 border-b-2 border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ut,{className:"h-6 w-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:g.name}),g.is_default&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-semibold mt-1",children:[e.jsx(qs,{className:"h-3 w-3"}),"Template Padro"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!g.is_default&&e.jsxs("button",{onClick:()=>y(g.id),className:"px-3 py-2 bg-green-50 text-green-600 rounded-lg hover:bg-green-100 transition-colors flex items-center gap-2",title:"Definir como padro",children:[e.jsx(qs,{className:"h-4 w-4"}),"Definir Padro"]}),n===g.id?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:m,disabled:c,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:[e.jsx(Gt,{className:"h-4 w-4"}),c?"Salvando...":"Salvar"]}),e.jsxs("button",{onClick:x,disabled:c,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors flex items-center gap-2 disabled:opacity-50",children:[e.jsx(ht,{className:"h-4 w-4"}),"Cancelar"]})]}):e.jsxs("button",{onClick:()=>u(g),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(rr,{className:"h-4 w-4"}),"Editar"]})]})]})}),e.jsx("div",{className:"p-6",children:n===g.id?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-yellow-50 border-2 border-yellow-300 rounded-lg p-4 mb-4",children:e.jsxs("p",{className:"text-sm text-yellow-900 flex items-center gap-2",children:[e.jsx(es,{className:"h-4 w-4"}),e.jsx("strong",{children:"Dica:"})," Use variveis como [NOME_CLIENTE], [VALOR_TOTAL], [NUMERO_OS] para substituio automtica"]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Nome do Template"}),e.jsx("input",{type:"text",value:o.name||"",onChange:b=>l({...o,name:b.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: Contrato Padro"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o.is_default||!1,onChange:b=>l({...o,is_default:b.target.checked}),className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Definir como template padro para todas as novas OS"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" Texto do Contrato Principal"}),e.jsx("textarea",{value:o.contract_text||"",onChange:b=>l({...o,contract_text:b.target.value}),rows:10,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-sm",placeholder:"Digite o texto principal do contrato..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" Clusulas Contratuais"}),e.jsx("textarea",{value:o.contract_clauses||"",onChange:b=>l({...o,contract_clauses:b.target.value}),rows:8,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-sm",placeholder:"Digite as clusulas contratuais..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" Termos de Garantia"}),e.jsx("textarea",{value:o.warranty_terms||"",onChange:b=>l({...o,warranty_terms:b.target.value}),rows:8,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-sm",placeholder:"Digite os termos de garantia..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" Condies de Pagamento"}),e.jsx("textarea",{value:o.payment_conditions||"",onChange:b=>l({...o,payment_conditions:b.target.value}),rows:8,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-sm",placeholder:"Digite as condies de pagamento..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" Dados Bancrios (Template)"}),e.jsx("textarea",{value:o.bank_details_template||"",onChange:b=>l({...o,bank_details_template:b.target.value}),rows:6,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-sm",placeholder:"Digite o template dos dados bancrios..."})]})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border-2 border-blue-200",children:[e.jsxs("h4",{className:"font-bold text-blue-900 mb-2 flex items-center gap-2",children:[e.jsx(ut,{className:"h-4 w-4"}),"Contrato Principal"]}),e.jsx("p",{className:"text-sm text-blue-800 whitespace-pre-wrap line-clamp-6",children:g.contract_text})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border-2 border-purple-200",children:[e.jsxs("h4",{className:"font-bold text-purple-900 mb-2 flex items-center gap-2",children:[e.jsx(ut,{className:"h-4 w-4"}),"Clusulas"]}),e.jsx("p",{className:"text-sm text-purple-800 whitespace-pre-wrap line-clamp-6",children:g.contract_clauses})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border-2 border-green-200",children:[e.jsxs("h4",{className:"font-bold text-green-900 mb-2 flex items-center gap-2",children:[e.jsx(As,{className:"h-4 w-4"}),"Garantia"]}),e.jsx("p",{className:"text-sm text-green-800 whitespace-pre-wrap line-clamp-6",children:g.warranty_terms})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border-2 border-orange-200",children:[e.jsxs("h4",{className:"font-bold text-orange-900 mb-2 flex items-center gap-2",children:[e.jsx(ut,{className:"h-4 w-4"}),"Pagamento"]}),e.jsx("p",{className:"text-sm text-orange-800 whitespace-pre-wrap line-clamp-6",children:g.payment_conditions})]})]})})]},g.id))})]})},pv={contract:"Contrato",service_order:"Ordem de Servio",proposal:"Proposta",budget:"Oramento",receipt:"Recibo",invoice:"Nota Fiscal"},gv=[{id:"order_number",label:"Nmero da OS"},{id:"customer",label:"Cliente"},{id:"date",label:"Data"},{id:"services",label:"Servios"},{id:"materials",label:"Materiais"},{id:"team",label:"Equipe"},{id:"costs",label:"Custos"},{id:"total",label:"Total"},{id:"notes",label:"Observaes"},{id:"signature",label:"Assinatura"}],RP=()=>{var C,L,f,F,M,P,Z,O,X;const[s,t]=j.useState([]),[a,r]=j.useState(!0),[n,i]=j.useState("service_order"),[o,l]=j.useState(null),[c,d]=j.useState({}),[A,u]=j.useState(!1),[x,m]=j.useState(!1),[y,g]=j.useState(!1);j.useEffect(()=>{b()},[n]);const b=async()=>{try{r(!0);const{data:q,error:V}=await se.from("os_templates").select("*").eq("template_type",n).eq("active",!0).order("is_default",{ascending:!1}).order("name");if(V)throw V;t(q||[])}catch(q){console.error("Error loading templates:",q),alert("Erro ao carregar templates")}finally{r(!1)}},p=()=>{l("new"),d({name:"",template_type:n,is_default:!1,logo_url:"",header_text:"ORDEM DE SERVIO",footer_text:"Obrigado pela preferncia!",layout_config:{margins:{top:20,bottom:20,left:20,right:20},fontSize:10,lineHeight:1.2},field_order:["order_number","customer","date","services","materials","team","costs","total","signature"],show_fields:{order_number:!0,customer:!0,date:!0,services:!0,materials:!0,team:!0,costs:!0,total:!0,notes:!0,signature:!0},custom_styles:{primaryColor:"#2563eb",secondaryColor:"#64748b",headerBg:"#f8fafc",borderColor:"#e2e8f0"},active:!0})},v=q=>{l(q.id),d(q)},N=async()=>{try{if(u(!0),!c.name||!c.template_type){alert("Preencha o nome do template");return}if(o==="new"){const{error:q}=await se.from("os_templates").insert([c]);if(q)throw q}else{const{error:q}=await se.from("os_templates").update(c).eq("id",o);if(q)throw q}await b(),l(null),d({})}catch(q){console.error("Error saving template:",q),alert("Erro ao salvar template")}finally{u(!1)}},D=async q=>{if(confirm("Deseja excluir este template?"))try{const{error:V}=await se.from("os_templates").update({active:!1}).eq("id",q);if(V)throw V;await b()}catch(V){console.error("Error deleting template:",V),alert("Erro ao excluir template")}},S=async q=>{try{const{error:V}=await se.from("os_templates").update({is_default:!0}).eq("id",q);if(V)throw V;await b()}catch(V){console.error("Error setting default:",V),alert("Erro ao definir como padro")}},E=async q=>{var oe;const V=(oe=q.target.files)==null?void 0:oe[0];if(V)try{if(m(!0),!V.type.startsWith("image/")){alert("Por favor, selecione uma imagem");return}if(V.size>2*1024*1024){alert("A imagem deve ter no mximo 2MB");return}const H=new FileReader;H.onload=I=>{var $;const B=($=I.target)==null?void 0:$.result;d(T=>({...T,logo_url:B})),m(!1)},H.onerror=()=>{alert("Erro ao carregar imagem"),m(!1)},H.readAsDataURL(V)}catch(H){console.error("Error uploading logo:",H),alert("Erro ao fazer upload da logo"),m(!1)}},R=(q,V)=>{const oe=[...c.field_order||[]],H=V==="up"?q-1:q+1;H<0||H>=oe.length||([oe[q],oe[H]]=[oe[H],oe[q]],d(I=>({...I,field_order:oe})))},_=q=>{d(V=>{var oe;return{...V,show_fields:{...V.show_fields,[q]:!((oe=V.show_fields)!=null&&oe[q])}}})};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Templates de Documentos"}),e.jsx("p",{className:"text-gray-600",children:"Gerencie e personalize templates de documentos"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tipo:"}),Object.entries(pv).map(([q,V])=>e.jsx("button",{onClick:()=>i(q),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n===q?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:V},q))]})}),!o&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsxs("h2",{className:"font-semibold text-gray-900",children:["Templates de ",pv[n]]}),e.jsxs("button",{onClick:p,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(bt,{className:"w-4 h-4"}),"Novo Template"]})]}),a?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Carregando..."}):s.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(ut,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),"Nenhum template encontrado"]}):e.jsx("div",{className:"divide-y divide-gray-200",children:s.map(q=>e.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:q.name}),q.is_default&&e.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:[e.jsx(qs,{className:"w-3 h-3 fill-current"}),"Padro"]})]}),e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Atualizado em ",new Date(q.updated_at).toLocaleDateString("pt-BR")]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!q.is_default&&e.jsx("button",{onClick:()=>S(q.id),className:"p-2 text-gray-600 hover:text-yellow-600 hover:bg-yellow-50 rounded-lg transition-colors",title:"Definir como padro",children:e.jsx(qs,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>v(q),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Editar",children:e.jsx(rr,{className:"w-5 h-5"})}),!q.is_default&&e.jsx("button",{onClick:()=>D(q.id),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Excluir",children:e.jsx(Vt,{className:"w-5 h-5"})})]})]})},q.id))})]}),e.jsx(rt,{children:o&&e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"bg-white rounded-lg shadow-sm",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h2",{className:"font-semibold text-gray-900",children:o==="new"?"Novo Template":"Editar Template"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>g(!y),className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx($s,{className:"w-4 h-4"}),y?"Editor":"Visualizar"]}),e.jsxs("button",{onClick:N,disabled:A,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[e.jsx(Gt,{className:"w-4 h-4"}),A?"Salvando...":"Salvar"]}),e.jsx("button",{onClick:()=>{l(null),d({})},className:"p-2 text-gray-600 hover:text-gray-900 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(ht,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Template"}),e.jsx("input",{type:"text",value:c.name||"",onChange:q=>d(V=>({...V,name:q.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Template Profissional OS"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo/Imagem"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors cursor-pointer",children:[e.jsx(qc,{className:"w-4 h-4"}),x?"Carregando...":"Fazer Upload",e.jsx("input",{type:"file",accept:"image/*",onChange:E,className:"hidden",disabled:x})]}),c.logo_url&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:c.logo_url,alt:"Logo",className:"h-12 w-auto object-contain border border-gray-200 rounded"}),e.jsx("button",{onClick:()=>d(q=>({...q,logo_url:""})),className:"text-red-600 hover:text-red-700",children:e.jsx(ht,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Formatos aceitos: JPG, PNG, GIF. Tamanho mximo: 2MB"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Texto do Cabealho"}),e.jsx("input",{type:"text",value:c.header_text||"",onChange:q=>d(V=>({...V,header_text:q.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: ORDEM DE SERVIO"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Texto do Rodap"}),e.jsx("input",{type:"text",value:c.footer_text||"",onChange:q=>d(V=>({...V,footer_text:q.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Obrigado pela preferncia!"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ordem e Visibilidade dos Campos"}),e.jsx("div",{className:"border border-gray-200 rounded-lg divide-y",children:(c.field_order||[]).map((q,V)=>{var I;const oe=gv.find(B=>B.id===q);if(!oe)return null;const H=((I=c.show_fields)==null?void 0:I[q])!==!1;return e.jsxs("div",{className:`p-3 flex items-center justify-between ${H?"":"bg-gray-50 opacity-60"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:V+1}),e.jsx("input",{type:"checkbox",checked:H,onChange:()=>_(q),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-900",children:oe.label})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>R(V,"up"),disabled:V===0,className:"p-1 text-gray-600 hover:text-blue-600 disabled:opacity-30 disabled:hover:text-gray-600",children:e.jsx(Hc,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>R(V,"down"),disabled:V===(c.field_order||[]).length-1,className:"p-1 text-gray-600 hover:text-blue-600 disabled:opacity-30 disabled:hover:text-gray-600",children:e.jsx(Gp,{className:"w-4 h-4"})})]})]},q)})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Il,{className:"w-4 h-4 inline mr-1"}),"Cores Personalizadas"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Cor Primria"}),e.jsx("input",{type:"color",value:((C=c.custom_styles)==null?void 0:C.primaryColor)||"#2563eb",onChange:q=>d(V=>({...V,custom_styles:{...V.custom_styles,primaryColor:q.target.value}})),className:"w-full h-10 rounded border border-gray-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Cor Secundria"}),e.jsx("input",{type:"color",value:((L=c.custom_styles)==null?void 0:L.secondaryColor)||"#64748b",onChange:q=>d(V=>({...V,custom_styles:{...V.custom_styles,secondaryColor:q.target.value}})),className:"w-full h-10 rounded border border-gray-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Cor do Cabealho"}),e.jsx("input",{type:"color",value:((f=c.custom_styles)==null?void 0:f.headerBg)||"#f8fafc",onChange:q=>d(V=>({...V,custom_styles:{...V.custom_styles,headerBg:q.target.value}})),className:"w-full h-10 rounded border border-gray-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Cor das Bordas"}),e.jsx("input",{type:"color",value:((F=c.custom_styles)==null?void 0:F.borderColor)||"#e2e8f0",onChange:q=>d(V=>({...V,custom_styles:{...V.custom_styles,borderColor:q.target.value}})),className:"w-full h-10 rounded border border-gray-300"})]})]})]}),y&&e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto bg-white shadow-lg",children:[e.jsxs("div",{className:"p-6 text-center border-b-2",style:{backgroundColor:(M=c.custom_styles)==null?void 0:M.headerBg,borderColor:(P=c.custom_styles)==null?void 0:P.borderColor},children:[c.logo_url&&e.jsx("img",{src:c.logo_url,alt:"Logo",className:"h-16 w-auto mx-auto mb-4 object-contain"}),e.jsx("h1",{className:"text-2xl font-bold",style:{color:(Z=c.custom_styles)==null?void 0:Z.primaryColor},children:c.header_text||"ORDEM DE SERVIO"})]}),e.jsx("div",{className:"p-6 space-y-4",children:(c.field_order||[]).map(q=>{var H,I,B;const V=gv.find($=>$.id===q),oe=((H=c.show_fields)==null?void 0:H[q])!==!1;return!V||!oe?null:e.jsxs("div",{className:"flex items-center gap-2 py-2 border-b",style:{borderColor:(I=c.custom_styles)==null?void 0:I.borderColor},children:[e.jsxs("span",{className:"font-medium",style:{color:(B=c.custom_styles)==null?void 0:B.primaryColor},children:[V.label,":"]}),e.jsx("span",{className:"text-gray-600",children:"[Contedo]"})]},q)})}),e.jsx("div",{className:"p-4 text-center text-sm border-t-2",style:{borderColor:(O=c.custom_styles)==null?void 0:O.borderColor,color:(X=c.custom_styles)==null?void 0:X.secondaryColor},children:c.footer_text||"Obrigado pela preferncia!"})]})})]})]})})]})},OP=()=>{const{isAdmin:s}=rs(),[t,a]=j.useState([]),[r,n]=j.useState([]),[i,o]=j.useState([]),[l,c]=j.useState(!0),[d,A]=j.useState(""),[u,x]=j.useState("all"),[m,y]=j.useState(!1),[g,b]=j.useState(null),[p,v]=j.useState({invoice_number:"",customer_id:"",service_order_id:"",issue_date:new Date().toISOString().split("T")[0],due_date:new Date().toISOString().split("T")[0],amount:0,tax_amount:0,total_amount:0,status:"pending",notes:""});j.useEffect(()=>{N()},[]),j.useEffect(()=>{const f=p.amount+p.tax_amount;v(F=>({...F,total_amount:f}))},[p.amount,p.tax_amount]);const N=async()=>{try{c(!0);const[f,F,M]=await Promise.all([se.from("finance_invoices").select(`
            *,
            customer:customers(nome_razao),
            service_order:service_orders(ordem_servico)
          `).order("created_at",{ascending:!1}),se.from("customers").select("id, nome_razao"),se.from("service_orders").select("id, ordem_servico")]);if(f.error)throw f.error;if(F.error)throw F.error;if(M.error)throw M.error;a(f.data||[]),n(F.data||[]),o(M.data||[])}catch(f){console.error("Error loading data:",f)}finally{c(!1)}},D=async()=>{try{if(!p.invoice_number||!p.customer_id){alert("Preencha os campos obrigatrios");return}if(g){const{error:f}=await se.from("finance_invoices").update(p).eq("id",g.id);if(f)throw f}else{const{error:f}=await se.from("finance_invoices").insert([p]);if(f)throw f}await N(),R()}catch(f){console.error("Error saving invoice:",f),alert("Erro ao salvar nota fiscal")}},S=async f=>{if(confirm("Tem certeza que deseja excluir esta nota fiscal?"))try{const{error:F}=await se.from("finance_invoices").delete().eq("id",f);if(F)throw F;await N()}catch(F){console.error("Error deleting invoice:",F),alert("Erro ao excluir nota fiscal")}},E=f=>{b(f),v({invoice_number:f.invoice_number,customer_id:f.customer_id,service_order_id:f.service_order_id||"",issue_date:f.issue_date,due_date:f.due_date,amount:f.amount,tax_amount:f.tax_amount,total_amount:f.total_amount,status:f.status,notes:f.notes||""}),y(!0)},R=()=>{y(!1),b(null),v({invoice_number:"",customer_id:"",service_order_id:"",issue_date:new Date().toISOString().split("T")[0],due_date:new Date().toISOString().split("T")[0],amount:0,tax_amount:0,total_amount:0,status:"pending",notes:""})},_=f=>{const F={pending:{bg:"bg-yellow-100",text:"text-yellow-800",icon:vt},issued:{bg:"bg-blue-100",text:"text-blue-800",icon:Ma},paid:{bg:"bg-green-100",text:"text-green-800",icon:Aa},cancelled:{bg:"bg-red-100",text:"text-red-800",icon:Ai},overdue:{bg:"bg-red-100",text:"text-red-800",icon:es}},M=F[f]||F.pending,P=M.icon;return e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs flex items-center gap-1 ${M.bg} ${M.text}`,children:[e.jsx(P,{className:"w-3 h-3"}),f==="pending"?"Pendente":f==="issued"?"Emitida":f==="paid"?"Paga":f==="cancelled"?"Cancelada":"Vencida"]})},C=t.filter(f=>{var P,Z;const F=f.invoice_number.toLowerCase().includes(d.toLowerCase())||((Z=(P=f.customer)==null?void 0:P.nome_razao)==null?void 0:Z.toLowerCase().includes(d.toLowerCase())),M=u==="all"||f.status===u;return F&&M}),L={total:t.length,pending:t.filter(f=>f.status==="pending").length,issued:t.filter(f=>f.status==="issued").length,paid:t.filter(f=>f.status==="paid").length,totalValue:t.filter(f=>f.status==="paid").reduce((f,F)=>f+Number(F.total_amount),0)};return l?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Notas Fiscais"}),e.jsx("p",{className:"text-gray-600",children:"Gesto e emisso de notas fiscais"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:L.total})]}),e.jsx(ut,{className:"w-10 h-10 text-blue-500"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pendentes"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:L.pending})]}),e.jsx(vt,{className:"w-10 h-10 text-yellow-500"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Emitidas"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:L.issued})]}),e.jsx(Ma,{className:"w-10 h-10 text-blue-500"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pagas"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:L.paid})]}),e.jsx(Aa,{className:"w-10 h-10 text-green-500"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Valor Total"}),e.jsx("p",{className:"text-xl font-bold text-blue-600",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(L.totalValue)})]})})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between",children:[e.jsxs("div",{className:"flex-1 flex gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Buscar notas fiscais...",value:d,onChange:f=>A(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("select",{value:u,onChange:f=>x(f.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todos os Status"}),e.jsx("option",{value:"pending",children:"Pendentes"}),e.jsx("option",{value:"issued",children:"Emitidas"}),e.jsx("option",{value:"paid",children:"Pagas"}),e.jsx("option",{value:"cancelled",children:"Canceladas"})]})]}),e.jsxs("button",{onClick:()=>y(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(bt,{className:"w-5 h-5"}),"Nova NF"]})]})}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nmero"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"OS"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Emisso"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vencimento"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map(f=>{var F,M;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:f.invoice_number})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:(F=f.customer)==null?void 0:F.nome_razao})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-500",children:((M=f.service_order)==null?void 0:M.ordem_servico)||"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:Zt(new Date(f.issue_date),"dd/MM/yyyy")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:Zt(new Date(f.due_date),"dd/MM/yyyy")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(f.total_amount)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_(f.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>E(f),className:"text-blue-600 hover:text-blue-900",title:"Editar",children:e.jsx(Es,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>S(f.id),className:"text-red-600 hover:text-red-900",title:"Excluir",children:e.jsx(Vt,{className:"w-5 h-5"})})]})})]},f.id)})})]}),C.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ut,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Nenhuma nota fiscal encontrada"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Comece adicionando uma nova nota fiscal."})]})]})]}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:g?"Editar Nota Fiscal":"Nova Nota Fiscal"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nmero NF *"}),e.jsx("input",{type:"text",value:p.invoice_number,onChange:f=>v({...p,invoice_number:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:p.status,onChange:f=>v({...p,status:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"pending",children:"Pendente"}),e.jsx("option",{value:"issued",children:"Emitida"}),e.jsx("option",{value:"paid",children:"Paga"}),e.jsx("option",{value:"cancelled",children:"Cancelada"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cliente *"}),e.jsxs("select",{value:p.customer_id,onChange:f=>v({...p,customer_id:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Selecione um cliente"}),r.map(f=>e.jsx("option",{value:f.id,children:f.nome_razao},f.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ordem de Servio (opcional)"}),e.jsxs("select",{value:p.service_order_id,onChange:f=>v({...p,service_order_id:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Sem OS vinculada"}),i.map(f=>e.jsx("option",{value:f.id,children:f.ordem_servico},f.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Emisso"}),e.jsx("input",{type:"date",value:p.issue_date,onChange:f=>v({...p,issue_date:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Vencimento"}),e.jsx("input",{type:"date",value:p.due_date,onChange:f=>v({...p,due_date:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor (R$)"}),e.jsx("input",{type:"number",step:"0.01",value:p.amount,onChange:f=>v({...p,amount:parseFloat(f.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Impostos (R$)"}),e.jsx("input",{type:"number",step:"0.01",value:p.tax_amount,onChange:f=>v({...p,tax_amount:parseFloat(f.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total (R$)"}),e.jsx("input",{type:"number",step:"0.01",value:p.total_amount,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaes"}),e.jsx("textarea",{value:p.notes,onChange:f=>v({...p,notes:f.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:D,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Salvar"}),e.jsx("button",{onClick:R,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancelar"})]})]})})})]})},HP=()=>{const{isAdmin:s}=rs(),[t,a]=j.useState(!0),[r,n]=j.useState(!1),[i,o]=j.useState({company_name:"",trade_name:"",cnpj:"",state_registration:"",municipal_registration:"",address:"",city:"",state:"",zip_code:"",phone:"",email:"",website:"",primary_color:"#3B82F6",secondary_color:"#10B981"});j.useEffect(()=>{l()},[]);const l=async()=>{try{a(!0);const{data:d,error:A}=await se.from("company_settings").select("*").limit(1).maybeSingle();if(A&&A.code!=="PGRST116")throw A;d&&o(d)}catch(d){console.error("Error loading company settings:",d)}finally{a(!1)}},c=async()=>{try{if(n(!0),i.id){const{error:d}=await se.from("company_settings").update(i).eq("id",i.id);if(d)throw d}else{const{data:d,error:A}=await se.from("company_settings").insert([i]).select().single();if(A)throw A;o(d)}alert("Configuraes salvas com sucesso!")}catch(d){console.error("Error saving company settings:",d),alert("Erro ao salvar configuraes")}finally{n(!1)}};return t?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Configuraes da Empresa"}),e.jsx("p",{className:"text-gray-600",children:"Configure as informaes da sua empresa"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Zi,{className:"w-6 h-6"}),"Dados da Empresa"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Razo Social *"}),e.jsx("input",{type:"text",value:i.company_name,onChange:d=>o({...i,company_name:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Fantasia"}),e.jsx("input",{type:"text",value:i.trade_name,onChange:d=>o({...i,trade_name:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CNPJ *"}),e.jsx("input",{type:"text",value:i.cnpj,onChange:d=>o({...i,cnpj:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"00.000.000/0000-00",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Inscrio Estadual"}),e.jsx("input",{type:"text",value:i.state_registration,onChange:d=>o({...i,state_registration:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Inscrio Municipal"}),e.jsx("input",{type:"text",value:i.municipal_registration,onChange:d=>o({...i,municipal_registration:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Endereo"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Endereo Completo"}),e.jsx("input",{type:"text",value:i.address,onChange:d=>o({...i,address:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cidade"}),e.jsx("input",{type:"text",value:i.city,onChange:d=>o({...i,city:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),e.jsx("input",{type:"text",value:i.state,onChange:d=>o({...i,state:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",maxLength:2})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CEP"}),e.jsx("input",{type:"text",value:i.zip_code,onChange:d=>o({...i,zip_code:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"00000-000"})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Contato"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone"}),e.jsx("input",{type:"tel",value:i.phone,onChange:d=>o({...i,phone:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"(00) 0000-0000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-mail"}),e.jsx("input",{type:"email",value:i.email,onChange:d=>o({...i,email:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),e.jsx("input",{type:"url",value:i.website,onChange:d=>o({...i,website:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"https://"})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Personalizao"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cor Primria"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:i.primary_color,onChange:d=>o({...i,primary_color:d.target.value}),className:"h-10 w-20 border border-gray-300 rounded cursor-pointer"}),e.jsx("input",{type:"text",value:i.primary_color,onChange:d=>o({...i,primary_color:d.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cor Secundria"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:i.secondary_color,onChange:d=>o({...i,secondary_color:d.target.value}),className:"h-10 w-20 border border-gray-300 rounded cursor-pointer"}),e.jsx("input",{type:"text",value:i.secondary_color,onChange:d=>o({...i,secondary_color:d.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]})]})]}),e.jsx("div",{className:"mt-8 flex justify-end",children:e.jsxs("button",{onClick:c,disabled:r,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:[e.jsx(Gt,{className:"w-5 h-5"}),r?"Salvando...":"Salvar Configuraes"]})})]})})]})},qP=()=>{const{isAdmin:s}=rs(),[t,a]=j.useState([]),[r,n]=j.useState(!0),[i,o]=j.useState(""),[l,c]=j.useState("all"),[d,A]=j.useState(!1),[u,x]=j.useState(null),[m,y]=j.useState({name:"",type:"ar_condicionado",brand:"",model:"",serial_number:"",status:"active",location:"",notes:""});j.useEffect(()=>{g()},[]);const g=async()=>{try{n(!0);const{data:_,error:C}=await se.from("equipments").select("*").order("name",{ascending:!0});if(C)throw C;a(_||[])}catch(_){console.error("Error loading equipments:",_)}finally{n(!1)}},b=async()=>{try{if(!m.name||!m.brand||!m.model){alert("Preencha os campos obrigatrios");return}if(u){const{error:_}=await se.from("equipments").update(m).eq("id",u.id);if(_)throw _}else{const{error:_}=await se.from("equipments").insert([m]);if(_)throw _}await g(),N()}catch(_){console.error("Error saving equipment:",_),alert("Erro ao salvar equipamento")}},p=async _=>{if(confirm("Tem certeza que deseja excluir este equipamento?"))try{const{error:C}=await se.from("equipments").delete().eq("id",_);if(C)throw C;await g()}catch(C){console.error("Error deleting equipment:",C),alert("Erro ao excluir equipamento")}},v=_=>{x(_),y({name:_.name,type:_.type,brand:_.brand,model:_.model,serial_number:_.serial_number||"",status:_.status||"active",location:_.location||"",notes:_.notes||""}),A(!0)},N=()=>{A(!1),x(null),y({name:"",type:"ar_condicionado",brand:"",model:"",serial_number:"",status:"active",location:"",notes:""})},D=_=>({ar_condicionado:"Ar Condicionado",refrigeracao:"Refrigerao",eletrica:"Eltrica",hidraulica:"Hidrulica",outros:"Outros"})[_]||_,S=t.filter(_=>{const C=_.name.toLowerCase().includes(i.toLowerCase())||_.brand.toLowerCase().includes(i.toLowerCase())||_.model.toLowerCase().includes(i.toLowerCase()),L=l==="all"||_.type===l;return C&&L}),E=["ar_condicionado","refrigeracao","eletrica","hidraulica","outros"],R={total:t.length,byCategory:E.reduce((_,C)=>(_[C]=t.filter(L=>L.type===C).length,_),{})};return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Catlogo de Equipamentos"}),e.jsx("p",{className:"text-gray-600",children:"Gesto de equipamentos e especificaes tcnicas"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:R.total})]}),e.jsx(wt,{className:"w-10 h-10 text-blue-500"})]})}),E.slice(0,4).map(_=>e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:D(_)}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:R.byCategory[_]||0})]})},_))]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between",children:[e.jsxs("div",{className:"flex-1 flex gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Buscar equipamentos...",value:i,onChange:_=>o(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("select",{value:l,onChange:_=>c(_.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todas as Categorias"}),E.map(_=>e.jsx("option",{value:_,children:D(_)},_))]})]}),e.jsxs("button",{onClick:()=>A(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(bt,{className:"w-5 h-5"}),"Novo Equipamento"]})]})}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nome"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Categoria"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Marca"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Modelo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descrio"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map(_=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800",children:D(_.type)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:_.brand})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:_.model})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-500 max-w-xs truncate",children:_.notes})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>v(_),className:"text-blue-600 hover:text-blue-900",children:e.jsx(Es,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>p(_.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Vt,{className:"w-5 h-5"})})]})})]},_.id))})]}),S.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(wt,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Nenhum equipamento encontrado"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Comece adicionando um novo equipamento."})]})]})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:u?"Editar Equipamento":"Novo Equipamento"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome *"}),e.jsx("input",{type:"text",value:m.name,onChange:_=>y({...m,name:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria *"}),e.jsx("select",{value:m.type,onChange:_=>y({...m,type:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:E.map(_=>e.jsx("option",{value:_,children:D(_)},_))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Marca *"}),e.jsx("input",{type:"text",value:m.brand,onChange:_=>y({...m,brand:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Modelo *"}),e.jsx("input",{type:"text",value:m.model,onChange:_=>y({...m,model:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nmero de Srie"}),e.jsx("input",{type:"text",value:m.serial_number,onChange:_=>y({...m,serial_number:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Localizao"}),e.jsx("input",{type:"text",value:m.location,onChange:_=>y({...m,location:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaes"}),e.jsx("textarea",{value:m.notes,onChange:_=>y({...m,notes:_.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:b,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Salvar"}),e.jsx("button",{onClick:N,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancelar"})]})]})})})]})},$P=()=>{const[s,t]=j.useState([]),[a,r]=j.useState(!0),[n,i]=j.useState(""),[o,l]=j.useState(!1),[c,d]=j.useState(null),[A,u]=j.useState("all"),[x,m]=j.useState(!1),[y,g]=j.useState(!1),[b,p]=j.useState(""),[v,N]=j.useState(""),[D,S]=j.useState({name:"",cnpj:"",email:"",phone:"",address:"",contact_person:"",payment_terms:"",active:!0,notes:""});j.useEffect(()=>{E()},[]);const E=async()=>{try{r(!0);const{data:O,error:X}=await se.from("suppliers").select("*").order("name");if(X)throw X;t(O||[])}catch(O){console.error("Error loading suppliers:",O)}finally{r(!1)}},R=async()=>{try{if(!D.name){alert("Nome  obrigatrio!");return}const O={name:D.name,cnpj:D.cnpj||null,email:D.email||null,phone:D.phone||null,address:D.address||null,contact_person:D.contact_person||null,payment_terms:D.payment_terms||null,notes:D.notes||null,active:D.active};if(c){const{error:X}=await se.from("suppliers").update(O).eq("id",c.id);if(X)throw X}else{const{error:X}=await se.from("suppliers").insert([O]);if(X)throw X}l(!1),d(null),f(),E()}catch(O){console.error("Error saving supplier:",O),alert("Erro ao salvar fornecedor!")}},_=O=>{d(O),S({name:O.name,cnpj:O.cnpj||"",email:O.email||"",phone:O.phone||"",address:O.address||"",contact_person:O.contact_person||"",payment_terms:O.payment_terms||"",active:O.active,notes:O.notes||""}),l(!0)},C=async O=>{if(confirm("Deseja realmente excluir este fornecedor?"))try{const{error:X}=await se.from("suppliers").delete().eq("id",O);if(X)throw X;E()}catch(X){console.error("Error deleting supplier:",X),alert("Erro ao excluir fornecedor!")}},L=async(O,X)=>{try{const{error:q}=await se.from("suppliers").update({active:!X}).eq("id",O);if(q)throw q;E()}catch(q){console.error("Error updating status:",q)}},f=()=>{S({name:"",cnpj:"",email:"",phone:"",address:"",contact_person:"",payment_terms:"",active:!0,notes:""}),p(""),N("")},F=async()=>{if(!D.cnpj){p("Digite um CNPJ");return}if(D.cnpj.replace(/\D/g,"").length!==14){p("CNPJ deve ter 14 dgitos");return}m(!0),p("");try{const X=await v1(D.cnpj);X&&S(q=>({...q,name:X.nome_fantasia||X.razao_social||q.name,email:X.email||q.email,phone:X.telefone||q.phone,address:X.logradouro?`${X.logradouro}, ${X.numero||"S/N"}`:q.address}))}catch(X){p(X instanceof Error?X.message:"Erro ao buscar CNPJ")}finally{m(!1)}},M=O=>{const X=w1(O);S({...D,cnpj:X}),p("")},P=s.filter(O=>{var V;const X=O.name.toLowerCase().includes(n.toLowerCase())||((V=O.cnpj)==null?void 0:V.toLowerCase().includes(n.toLowerCase())),q=A==="all"||A==="active"&&O.active||A==="inactive"&&!O.active;return X&&q}),Z={total:s.length,active:s.filter(O=>O.active).length,inactive:s.filter(O=>!O.active).length};return a?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Er,{className:"h-8 w-8 text-blue-600"}),"Gesto de Fornecedores"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gerencie seus fornecedores e parceiros"})]}),e.jsxs("button",{onClick:()=>{d(null),f(),l(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(bt,{className:"h-4 w-4"}),"Novo Fornecedor"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(Er,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Z.total})]})]})}),e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(Aa,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Ativos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Z.active})]})]})}),e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gray-100 rounded-lg",children:e.jsx(Ai,{className:"h-6 w-6 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Inativos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Z.inactive})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar fornecedores...",value:n,onChange:O=>i(O.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("select",{value:A,onChange:O=>u(O.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"Todos"}),e.jsx("option",{value:"active",children:"Ativos"}),e.jsx("option",{value:"inactive",children:"Inativos"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:P.map(O=>e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:`p-6 rounded-xl border-2 transition-all ${O.active?"bg-white border-gray-200 hover:border-blue-300":"bg-gray-50 border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-900 truncate",children:O.name}),O.name&&e.jsx("p",{className:"text-sm text-gray-600 truncate",children:O.name})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full whitespace-nowrap ml-2 ${O.active?"bg-green-100 text-green-700":"bg-gray-200 text-gray-600"}`,children:O.active?"Ativo":"Inativo"})]}),e.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[O.cnpj&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Er,{className:"h-3 w-3 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:O.cnpj})]}),O.email&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Cs,{className:"h-3 w-3 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:O.email})]}),O.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(la,{className:"h-3 w-3 flex-shrink-0"}),e.jsx("span",{children:O.phone})]}),O.address&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(da,{className:"h-3 w-3 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:O.address})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>_(O),className:"flex-1 px-3 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors text-sm font-medium flex items-center justify-center gap-1",children:[e.jsx(Es,{className:"h-4 w-4"}),"Editar"]}),e.jsx("button",{onClick:()=>L(O.id,O.active),className:`px-3 py-2 rounded-lg transition-colors ${O.active?"bg-yellow-50 text-yellow-600 hover:bg-yellow-100":"bg-green-50 text-green-600 hover:bg-green-100"}`,title:O.active?"Desativar":"Ativar",children:O.active?e.jsx(Ai,{className:"h-4 w-4"}):e.jsx(Aa,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>C(O.id),className:"px-3 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors",children:e.jsx(Vt,{className:"h-4 w-4"})})]})]},O.id))}),P.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Er,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Nenhum fornecedor encontrado"})]})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-xl p-6 max-w-3xl w-full my-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:c?"Editar Fornecedor":"Novo Fornecedor"}),e.jsx("button",{onClick:()=>{l(!1),d(null)},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Ai,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Fantasia *"}),e.jsx("input",{type:"text",value:D.name,onChange:O=>S({...D,name:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Materiais Premium Ltda"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CNPJ"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:D.cnpj,onChange:O=>M(O.target.value),onKeyPress:O=>{O.key==="Enter"&&(O.preventDefault(),F())},className:`w-full px-4 py-2 pr-10 border rounded-lg focus:ring-2 focus:ring-blue-500 ${b?"border-red-500":"border-gray-300"}`,placeholder:"00.000.000/0000-00",maxLength:18}),e.jsx("button",{type:"button",onClick:F,disabled:x||!D.cnpj,className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-blue-600 hover:text-blue-700 disabled:text-gray-400",title:"Buscar CNPJ",children:x?e.jsx(Dl,{className:"w-5 h-5 animate-spin"}):e.jsx(Qt,{className:"w-5 h-5"})})]}),b&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:b})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:D.email,onChange:O=>S({...D,email:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"contato@fornecedor.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone"}),e.jsx("input",{type:"text",value:D.phone,onChange:O=>S({...D,phone:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"(00) 0000-0000"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Contato"}),e.jsx("input",{type:"text",value:D.contact_person,onChange:O=>S({...D,contact_person:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Nome do responsvel"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Endereo"}),e.jsx("input",{type:"text",value:D.address,onChange:O=>S({...D,address:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Condies de Pagamento"}),e.jsx("input",{type:"text",value:D.payment_terms,onChange:O=>S({...D,payment_terms:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: 30 dias,  vista, etc"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaes"}),e.jsx("textarea",{value:D.notes,onChange:O=>S({...D,notes:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Informaes adicionais..."})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t border-gray-200",children:[e.jsx("input",{type:"checkbox",id:"ativo",checked:D.active,onChange:O=>S({...D,active:O.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"ativo",className:"text-sm font-medium text-gray-700",children:"Fornecedor ativo"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{l(!1),d(null)},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),e.jsxs("button",{onClick:R,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Aa,{className:"h-4 w-4"}),"Salvar"]})]})]})})]})},VP=({isOpen:s,onClose:t,onSave:a,scheduleId:r})=>{const[n,i]=j.useState(!1),[o,l]=j.useState([]),[c,d]=j.useState({schedule_name:"",inventory_id:"",supplier_name:"",frequency:"monthly",quantity:0,unit_price:0,next_order_date:new Date().toISOString().split("T")[0],active:!0,notes:""});j.useEffect(()=>{s&&(A(),r&&u())},[s,r]);const A=async()=>{try{const{data:p}=await se.from("inventory_items").select("id, name, supplier_name, unit_cost, min_quantity").eq("active",!0).order("name");l(p||[])}catch(p){console.error("Error loading inventory:",p)}},u=async()=>{if(r)try{const{data:p,error:v}=await se.from("purchase_schedules").select("*").eq("id",r).single();if(v)throw v;p&&d({schedule_name:p.schedule_name||"",inventory_id:p.inventory_id||"",supplier_name:p.supplier_name||"",frequency:p.frequency||"monthly",quantity:p.quantity||0,unit_price:p.unit_price||0,next_order_date:p.next_order_date||new Date().toISOString().split("T")[0],active:p.active!==!1,notes:p.notes||""})}catch(p){console.error("Error loading schedule:",p),alert("Erro ao carregar programao")}},x=p=>{const v=o.find(N=>N.id===p);v&&d(N=>({...N,inventory_id:p,supplier_name:v.supplier_name||"",unit_price:v.unit_cost||0,quantity:v.min_quantity*2||10,schedule_name:`Compra Recorrente - ${v.name}`}))},m=async p=>{try{const v=o.find(N=>N.id===p.inventory_id);if(!v)return;await se.from("agenda_events").insert([{title:`Compra Programada: ${v.name}`,description:`Programao automtica de compra
Quantidade: ${p.quantity}
Fornecedor: ${p.supplier_name}
Valor: R$ ${(p.quantity*p.unit_price).toFixed(2)}`,start_date:p.next_order_date,end_date:p.next_order_date,type:"purchase",status:"pending",all_day:!0,color:"#f59e0b",metadata:{schedule_id:r,inventory_id:p.inventory_id,supplier:p.supplier_name,quantity:p.quantity,unit_price:p.unit_price}}])}catch(v){console.error("Error creating agenda event:",v)}},y=async()=>{if(!c.schedule_name||!c.inventory_id||c.quantity<=0){alert("Preencha todos os campos obrigatrios");return}i(!0);try{const p={schedule_name:c.schedule_name,inventory_id:c.inventory_id,supplier_name:c.supplier_name,frequency:c.frequency,quantity:c.quantity,unit_price:c.unit_price,next_order_date:c.next_order_date,active:c.active,notes:c.notes,updated_at:new Date().toISOString()};if(r){const{error:v}=await se.from("purchase_schedules").update(p).eq("id",r);if(v)throw v}else{const{data:v,error:N}=await se.from("purchase_schedules").insert([p]).select().single();if(N)throw N;await m(v)}alert("Programao salva com sucesso!"),a(),t(),g()}catch(p){console.error("Error saving schedule:",p),alert("Erro ao salvar programao")}finally{i(!1)}},g=()=>{d({schedule_name:"",inventory_id:"",supplier_name:"",frequency:"monthly",quantity:0,unit_price:0,next_order_date:new Date().toISOString().split("T")[0],active:!0,notes:""})},b=[{value:"daily",label:"Diria"},{value:"weekly",label:"Semanal"},{value:"biweekly",label:"Quinzenal"},{value:"monthly",label:"Mensal"},{value:"quarterly",label:"Trimestral"}];return s?e.jsx(rt,{children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 rounded-t-xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(bs,{className:"h-6 w-6"}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold",children:[r?"Editar":"Nova"," Programao de Compra"]}),e.jsx("p",{className:"text-sm text-blue-100",children:"Compras automticas recorrentes"})]})]}),e.jsx("button",{onClick:t,className:"text-white hover:bg-white hover:bg-opacity-20 rounded-lg p-2 transition-colors",children:e.jsx(ht,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(es,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Programao Automtica"}),e.jsx("p",{children:"Esta compra ser criada automaticamente na agenda na data especificada e se repetir na frequncia escolhida."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(wt,{className:"inline h-4 w-4 mr-1"}),"Item do Estoque *"]}),e.jsxs("select",{value:c.inventory_id,onChange:p=>x(p.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Selecione um item..."}),o.map(p=>e.jsxs("option",{value:p.id,children:[p.name," - ",p.supplier_name||"Sem fornecedor"]},p.id))]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome da Programao *"}),e.jsx("input",{type:"text",value:c.schedule_name,onChange:p=>d(v=>({...v,schedule_name:p.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Compra Mensal de Cabos",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fornecedor *"}),e.jsx("input",{type:"text",value:c.supplier_name,onChange:p=>d(v=>({...v,supplier_name:p.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Nome do fornecedor",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(bs,{className:"inline h-4 w-4 mr-1"}),"Frequncia *"]}),e.jsx("select",{value:c.frequency,onChange:p=>d(v=>({...v,frequency:p.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:b.map(p=>e.jsx("option",{value:p.value,children:p.label},p.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantidade *"}),e.jsx("input",{type:"number",value:c.quantity,onChange:p=>d(v=>({...v,quantity:parseFloat(p.target.value)||0})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Ut,{className:"inline h-4 w-4 mr-1"}),"Preo Unitrio (R$)"]}),e.jsx("input",{type:"number",value:c.unit_price,onChange:p=>d(v=>({...v,unit_price:parseFloat(p.target.value)||0})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Ot,{className:"inline h-4 w-4 mr-1"}),"Prxima Compra *"]}),e.jsx("input",{type:"date",value:c.next_order_date,onChange:p=>d(v=>({...v,next_order_date:p.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.active,onChange:p=>d(v=>({...v,active:p.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Programao Ativa"})]})}),c.quantity>0&&c.unit_price>0&&e.jsx("div",{className:"md:col-span-2 bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-green-800",children:"Valor Total Estimado:"}),e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["R$ ",(c.quantity*c.unit_price).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes"}),e.jsx("textarea",{value:c.notes,onChange:p=>d(v=>({...v,notes:p.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Informaes adicionais sobre esta programao..."})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 p-6 rounded-b-xl flex justify-end gap-3 border-t",children:[e.jsx("button",{onClick:t,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:"Cancelar"}),e.jsxs("button",{onClick:y,disabled:n,className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-2 rounded-lg hover:shadow-lg transition-all flex items-center gap-2 disabled:opacity-50",children:[e.jsx(Gt,{className:"h-4 w-4"}),n?"Salvando...":"Salvar Programao"]})]})]})})}):null},KP=({isOpen:s,onClose:t,onSave:a,scheduleId:r})=>{const[n,i]=j.useState(!1),[o,l]=j.useState([]),[c,d]=j.useState({schedule_name:"",customer_id:"",equipment_name:"",frequency:"monthly",rental_value:0,start_date:new Date().toISOString().split("T")[0],end_date:"",next_billing_date:new Date().toISOString().split("T")[0],active:!0,notes:"",auto_generate_invoice:!0});j.useEffect(()=>{s&&(A(),r&&u())},[s,r]);const A=async()=>{try{const{data:b}=await se.from("customers").select("id, nome_razao, email, telefone").order("nome_razao");l(b||[])}catch(b){console.error("Error loading customers:",b)}},u=async()=>{if(r)try{const{data:b,error:p}=await se.from("rental_schedules").select("*").eq("id",r).single();if(p)throw p;b&&d({schedule_name:b.schedule_name||"",customer_id:b.customer_id||"",equipment_name:b.equipment_name||"",frequency:b.frequency||"monthly",rental_value:b.rental_value||0,start_date:b.start_date||new Date().toISOString().split("T")[0],end_date:b.end_date||"",next_billing_date:b.next_billing_date||new Date().toISOString().split("T")[0],active:b.active!==!1,notes:b.notes||"",auto_generate_invoice:b.auto_generate_invoice!==!1})}catch(b){console.error("Error loading schedule:",b),alert("Erro ao carregar programao de locao")}},x=async b=>{try{const p=o.find(v=>v.id===b.customer_id);if(!p)return;await se.from("agenda_events").insert([{title:`Locao: ${b.equipment_name}`,description:`Cliente: ${p.nome_razao}
Equipamento: ${b.equipment_name}
Valor: R$ ${b.rental_value.toFixed(2)}
Faturamento automtico: ${b.auto_generate_invoice?"Sim":"No"}`,start_date:b.next_billing_date,end_date:b.next_billing_date,type:"rental",status:"pending",all_day:!0,color:"#8b5cf6",customer_id:b.customer_id,metadata:{schedule_id:r,customer_id:b.customer_id,equipment_name:b.equipment_name,rental_value:b.rental_value,auto_generate_invoice:b.auto_generate_invoice}}])}catch(p){console.error("Error creating agenda event:",p)}},m=async()=>{if(!c.schedule_name||!c.customer_id||!c.equipment_name||c.rental_value<=0){alert("Preencha todos os campos obrigatrios");return}i(!0);try{const b={schedule_name:c.schedule_name,customer_id:c.customer_id,equipment_name:c.equipment_name,frequency:c.frequency,rental_value:c.rental_value,start_date:c.start_date,end_date:c.end_date||null,next_billing_date:c.next_billing_date,active:c.active,notes:c.notes,auto_generate_invoice:c.auto_generate_invoice,updated_at:new Date().toISOString()};if(r){const{error:p}=await se.from("rental_schedules").update(b).eq("id",r);if(p)throw p}else{const{data:p,error:v}=await se.from("rental_schedules").insert([b]).select().single();if(v)throw v;await x(p)}alert("Programao de locao salva com sucesso!"),a(),t(),y()}catch(b){console.error("Error saving rental schedule:",b),alert("Erro ao salvar programao de locao")}finally{i(!1)}},y=()=>{d({schedule_name:"",customer_id:"",equipment_name:"",frequency:"monthly",rental_value:0,start_date:new Date().toISOString().split("T")[0],end_date:"",next_billing_date:new Date().toISOString().split("T")[0],active:!0,notes:"",auto_generate_invoice:!0})},g=[{value:"daily",label:"Diria"},{value:"weekly",label:"Semanal"},{value:"biweekly",label:"Quinzenal"},{value:"monthly",label:"Mensal"},{value:"quarterly",label:"Trimestral"}];return s?e.jsx(rt,{children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-purple-700 text-white p-6 rounded-t-xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(sg,{className:"h-6 w-6"}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold",children:[r?"Editar":"Nova"," Programao de Locao"]}),e.jsx("p",{className:"text-sm text-purple-100",children:"Locaes e faturamentos recorrentes"})]})]}),e.jsx("button",{onClick:t,className:"text-white hover:bg-white hover:bg-opacity-20 rounded-lg p-2 transition-colors",children:e.jsx(ht,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(es,{className:"h-5 w-5 text-purple-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-purple-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Faturamento Automtico"}),e.jsx("p",{children:"Esta locao ser lanada automaticamente na agenda e pode gerar receitas financeiras na data especificada."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome da Programao *"}),e.jsx("input",{type:"text",value:c.schedule_name,onChange:b=>d(p=>({...p,schedule_name:b.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",placeholder:"Ex: Locao Mensal - Escavadeira",required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente *"}),e.jsxs("select",{value:c.customer_id,onChange:b=>d(p=>({...p,customer_id:b.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",required:!0,children:[e.jsx("option",{value:"",children:"Selecione um cliente..."}),o.map(b=>e.jsx("option",{value:b.id,children:b.nome_razao},b.id))]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(wt,{className:"inline h-4 w-4 mr-1"}),"Equipamento/Servio *"]}),e.jsx("input",{type:"text",value:c.equipment_name,onChange:b=>d(p=>({...p,equipment_name:b.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",placeholder:"Nome do equipamento ou servio locado",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(bs,{className:"inline h-4 w-4 mr-1"}),"Frequncia *"]}),e.jsx("select",{value:c.frequency,onChange:b=>d(p=>({...p,frequency:b.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",children:g.map(b=>e.jsx("option",{value:b.value,children:b.label},b.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Ut,{className:"inline h-4 w-4 mr-1"}),"Valor da Locao (R$) *"]}),e.jsx("input",{type:"number",value:c.rental_value,onChange:b=>d(p=>({...p,rental_value:parseFloat(b.target.value)||0})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",min:"0",step:"0.01",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Ot,{className:"inline h-4 w-4 mr-1"}),"Data de Incio *"]}),e.jsx("input",{type:"date",value:c.start_date,onChange:b=>d(p=>({...p,start_date:b.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Trmino (Opcional)"}),e.jsx("input",{type:"date",value:c.end_date,onChange:b=>d(p=>({...p,end_date:b.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prximo Faturamento *"}),e.jsx("input",{type:"date",value:c.next_billing_date,onChange:b=>d(p=>({...p,next_billing_date:b.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",required:!0})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.active,onChange:b=>d(p=>({...p,active:b.target.checked})),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ativa"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.auto_generate_invoice,onChange:b=>d(p=>({...p,auto_generate_invoice:b.target.checked})),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Gerar Receita"})]})]}),c.rental_value>0&&e.jsx("div",{className:"md:col-span-2 bg-purple-50 border border-purple-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-purple-800",children:"Valor por Perodo:"}),e.jsxs("span",{className:"text-2xl font-bold text-purple-600",children:["R$ ",c.rental_value.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes"}),e.jsx("textarea",{value:c.notes,onChange:b=>d(p=>({...p,notes:b.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",rows:3,placeholder:"Informaes adicionais sobre esta locao..."})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 p-6 rounded-b-xl flex justify-end gap-3 border-t",children:[e.jsx("button",{onClick:t,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:"Cancelar"}),e.jsxs("button",{onClick:m,disabled:n,className:"bg-gradient-to-r from-purple-600 to-purple-700 text-white px-6 py-2 rounded-lg hover:shadow-lg transition-all flex items-center gap-2 disabled:opacity-50",children:[e.jsx(Gt,{className:"h-4 w-4"}),n?"Salvando...":"Salvar Programao"]})]})]})})}):null},zP=()=>{const[s,t]=j.useState([]),[a,r]=j.useState([]),[n,i]=j.useState(!0),[o,l]=j.useState("all"),[c,d]=j.useState(""),[A,u]=j.useState("alerts"),[x,m]=j.useState(!1),[y,g]=j.useState(!1);j.useEffect(()=>{b()},[]);const b=async()=>{try{i(!0),await Promise.all([p(),v()])}catch(f){console.error("Error loading data:",f)}finally{i(!1)}},p=async()=>{const{data:f}=await se.from("purchase_orders").select("*").order("created_at",{ascending:!1}).limit(100);t(f||[])},v=async()=>{try{const{data:f,error:F}=await se.rpc("get_items_needing_purchase");if(F)throw F;r(f||[])}catch(f){console.error("Error loading low stock items:",f)}},N=f=>({draft:"bg-gray-100 text-gray-800",pending:"bg-yellow-100 text-yellow-800",approved:"bg-blue-100 text-blue-800",ordered:"bg-purple-100 text-purple-800",partial:"bg-orange-100 text-orange-800",received:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[f]||"bg-gray-100 text-gray-800",D=f=>({draft:"Rascunho",pending:"Pendente",approved:"Aprovado",ordered:"Pedido Feito",partial:"Parcial",received:"Recebido",cancelled:"Cancelado"})[f]||f,S=f=>({low:"text-gray-500",normal:"text-blue-500",high:"text-orange-500",urgent:"text-red-500"})[f]||"text-gray-500",E=f=>({critical:"bg-red-600 text-white",urgent:"bg-orange-500 text-white",normal:"bg-yellow-500 text-white",low:"bg-blue-500 text-white"})[f]||"bg-gray-500 text-white",R=f=>({critical:"CRTICO",urgent:"URGENTE",normal:"NORMAL",low:"BAIXA"})[f]||f,_=s.filter(f=>{const F=f.order_number.toLowerCase().includes(c.toLowerCase())||f.supplier_name.toLowerCase().includes(c.toLowerCase()),M=o==="all"||f.status===o;return F&&M}),C={totalOrders:s.length,pendingOrders:s.filter(f=>f.status==="pending"||f.status==="approved").length,criticalItems:a.filter(f=>f.urgency==="critical").length,totalAlerts:a.length,pendingValue:s.filter(f=>f.status==="pending"||f.status==="approved").reduce((f,F)=>f+(F.final_amount||0),0)},L=async f=>{try{let F=`PO${Date.now()}`;try{const{data:q,error:V}=await se.rpc("generate_purchase_order_number");!V&&q&&(F=q)}catch(q){console.warn("Erro ao gerar nmero do pedido, usando timestamp:",q)}const M=f.supplier||"A Definir",P=f.unit_price||f.estimated_cost/f.recommended_order_qty,{data:Z,error:O}=await se.from("purchase_orders").insert([{order_number:F,supplier_name:M,status:"draft",priority:f.urgency==="critical"?"urgent":f.urgency==="urgent"?"high":"normal",order_date:new Date().toISOString().split("T")[0],notes:`Pedido automtico - ${f.item_name}
Categoria: ${f.category||"N/A"}
Localizao: ${f.location||"N/A"}
Estoque Atual: ${f.current_stock}
Estoque Mnimo: ${f.min_stock}
Dias at ruptura: ${f.days_until_stockout||"N/A"}`}]).select().single();if(O)throw console.error("Erro ao criar pedido:",O),new Error(O.message);if(!Z)throw new Error("Pedido criado mas sem retorno de dados");const{error:X}=await se.from("purchase_order_items").insert([{purchase_order_id:Z.id,inventory_id:f.inventory_id,item_name:f.item_name,quantity:f.recommended_order_qty,unit_price:P,urgency_level:f.urgency}]);if(X)throw console.error("Erro ao adicionar item:",X),new Error(X.message);alert(` Pedido ${F} criado com sucesso!

Fornecedor: ${M}
Quantidade: ${f.recommended_order_qty}
Valor: R$ ${f.estimated_cost.toFixed(2)}`),await b()}catch(F){console.error("Error creating purchase order:",F),alert(` Erro ao criar pedido de compra: ${F.message||"Erro desconhecido"}`)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Sn,{className:"h-8 w-8 text-blue-600"}),"Departamento de Compras"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gesto completa de pedidos e alertas de estoque"})]}),e.jsxs("button",{onClick:()=>alert("Modal de novo pedido em desenvolvimento"),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-lg flex items-center gap-2 hover:shadow-lg transition-all",children:[e.jsx(bt,{className:"h-5 w-5"}),"Novo Pedido"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:[e.jsx(ut,{className:"h-8 w-8 text-blue-500 mb-2"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:C.totalOrders}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total de Pedidos"})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:[e.jsx(vt,{className:"h-8 w-8 text-yellow-500 mb-2"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:C.pendingOrders}),e.jsx("p",{className:"text-sm text-gray-600",children:"Pedidos Pendentes"})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:[e.jsx(cs,{className:"h-8 w-8 text-red-500 animate-pulse mb-2"}),e.jsx("h3",{className:"text-2xl font-bold text-red-600",children:C.criticalItems}),e.jsx("p",{className:"text-sm text-gray-600",children:"Itens Crticos"})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:[e.jsx(wt,{className:"h-8 w-8 text-orange-500 mb-2"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:C.totalAlerts}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total de Alertas"})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:[e.jsx(Ut,{className:"h-8 w-8 text-green-500 mb-2"}),e.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:["R$ ",C.pendingValue.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Valor Pendente"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"flex border-b",children:[e.jsxs("button",{onClick:()=>u("alerts"),className:`flex-1 px-6 py-4 flex items-center justify-center gap-2 transition-colors ${A==="alerts"?"bg-red-50 text-red-600 border-b-2 border-red-600":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(cs,{className:"h-5 w-5"}),e.jsxs("span",{className:"font-medium",children:["Alertas de Estoque (",C.totalAlerts,")"]})]}),e.jsxs("button",{onClick:()=>u("orders"),className:`flex-1 px-6 py-4 flex items-center justify-center gap-2 transition-colors ${A==="orders"?"bg-blue-50 text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(Sn,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Pedidos de Compra"})]}),e.jsxs("button",{onClick:()=>u("schedules"),className:`flex-1 px-6 py-4 flex items-center justify-center gap-2 transition-colors ${A==="schedules"?"bg-blue-50 text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(vt,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Programao"})]}),e.jsxs("button",{onClick:()=>u("quotes"),className:`flex-1 px-6 py-4 flex items-center justify-center gap-2 transition-colors ${A==="quotes"?"bg-blue-50 text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(ut,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Cotaes"})]})]}),e.jsxs("div",{className:"p-6",children:[A==="alerts"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx(cs,{className:"h-6 w-6 text-red-600 animate-pulse"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-semibold text-red-900",children:[C.criticalItems," ",C.criticalItems===1?"Item Crtico":"Itens Crticos"," Necessitando Ateno Imediata"]}),e.jsx("p",{className:"text-sm text-red-700",children:'Clique em "Criar Pedido" para gerar automaticamente um pedido de compra'})]})]}),a.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Urgncia"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Material"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fornecedor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estoque"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Qtd. Recomendada"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Preo Unit."}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:a.map(f=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${E(f.urgency)}`,children:R(f.urgency)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:f.item_name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[f.category||"Sem categoria","  ",f.location||"Sem local"]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium text-gray-900",children:f.supplier||"A definir"}),f.last_purchase_date&&e.jsxs("div",{className:"text-xs text-gray-500",children:["ltima compra: ",new Date(f.last_purchase_date).toLocaleDateString("pt-BR")]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-red-600",children:f.current_stock})," ",e.jsxs("span",{className:"text-gray-500",children:["/ ",f.min_stock]})]}),f.days_until_stockout!==null&&f.days_until_stockout<30&&e.jsxs("div",{className:"text-xs text-orange-600 font-medium",children:[" ",f.days_until_stockout," dias"]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm font-semibold text-gray-900",children:f.recommended_order_qty}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-900",children:["R$ ",(f.unit_price||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"px-6 py-4 text-sm font-bold text-green-600",children:["R$ ",f.estimated_cost.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("button",{onClick:()=>L(f),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium flex items-center gap-2 ml-auto",children:[e.jsx(Sn,{className:"h-4 w-4"}),"Criar Pedido"]})})]},f.inventory_id))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(is,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Tudo Certo!"}),e.jsx("p",{className:"text-gray-600",children:"Nenhum item necessitando compra no momento"})]})]}),A==="orders"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",value:c,onChange:f=>d(f.target.value),placeholder:"Buscar por nmero ou fornecedor...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("select",{value:o,onChange:f=>l(f.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"Todos os Status"}),e.jsx("option",{value:"draft",children:"Rascunho"}),e.jsx("option",{value:"pending",children:"Pendente"}),e.jsx("option",{value:"approved",children:"Aprovado"}),e.jsx("option",{value:"ordered",children:"Pedido Feito"}),e.jsx("option",{value:"received",children:"Recebido"}),e.jsx("option",{value:"cancelled",children:"Cancelado"})]})]}),_.length>0?e.jsx("div",{className:"space-y-3",children:_.map(f=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:f.order_number}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${N(f.status)}`,children:D(f.status)}),e.jsxs("span",{className:`text-sm font-medium ${S(f.priority)}`,children:[f.priority==="urgent"&&" URGENTE",f.priority==="high"&&" ALTA",f.priority==="normal"&&" NORMAL",f.priority==="low"&&" BAIXA"]})]}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{children:["Fornecedor: ",e.jsx("span",{className:"font-medium text-gray-900",children:f.supplier_name})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("span",{children:["Data: ",new Date(f.order_date).toLocaleDateString("pt-BR")]}),f.expected_delivery_date&&e.jsxs("span",{children:["Entrega Prevista: ",new Date(f.expected_delivery_date).toLocaleDateString("pt-BR")]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["R$ ",f.final_amount.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("button",{className:"mt-2 text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center gap-1",children:[e.jsx($s,{className:"h-4 w-4"}),"Ver Detalhes"]})]})]})},f.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Sn,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhum pedido encontrado"}),e.jsx("p",{className:"text-gray-600",children:"Crie seu primeiro pedido de compra"})]})]}),A==="schedules"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-8 border-2 border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"bg-blue-600 p-3 rounded-lg",children:e.jsx(bs,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Programao de Compra"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Compras recorrentes automticas"})]})]}),e.jsx("p",{className:"text-gray-700 mb-6",children:"Configure compras automticas de materiais com base em perodos fixos. O sistema gerar pedidos automaticamente e criar eventos na agenda."}),e.jsxs("button",{onClick:()=>m(!0),className:"w-full bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[e.jsx(bt,{className:"h-5 w-5"}),"Nova Programao de Compra"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-8 border-2 border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"bg-purple-600 p-3 rounded-lg",children:e.jsx(sg,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Programao de Locao"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Locaes e faturamentos recorrentes"})]})]}),e.jsx("p",{className:"text-gray-700 mb-6",children:"Configure locaes de equipamentos com faturamento automtico. O sistema pode gerar receitas financeiras automaticamente na agenda."}),e.jsxs("button",{onClick:()=>g(!0),className:"w-full bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[e.jsx(bt,{className:"h-5 w-5"}),"Nova Programao de Locao"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Programaes Ativas"}),e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(vt,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{children:"Nenhuma programao cadastrada ainda"}),e.jsx("p",{className:"text-sm",children:"Crie sua primeira programao usando os botes acima"})]})]})]}),A==="quotes"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ut,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Cotaes de Fornecedores"}),e.jsx("p",{className:"text-gray-600",children:"Compare preos e condies de diferentes fornecedores"}),e.jsx("button",{className:"mt-4 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Nova Cotao"})]})]})]}),e.jsx(VP,{isOpen:x,onClose:()=>m(!1),onSave:()=>{m(!1),b()}}),e.jsx(KP,{isOpen:y,onClose:()=>g(!1),onSave:()=>{g(!1),b()}})]})},GP=()=>{const s=ys(),[t,a]=j.useState([]),[r,n]=j.useState([]),[i,o]=j.useState(!0),[l,c]=j.useState(!0),[d,A]=j.useState(new Date),[u,x]=j.useState("overview");j.useEffect(()=>{m();const v=setInterval(()=>{l&&m()},6e4);return()=>clearInterval(v)},[l]);const m=async()=>{try{o(!0);const{data:v,error:N}=await se.rpc("get_realtime_campaign_stats",{p_time_window_hours:24});N?console.error("Erro ao carregar campanhas:",N):a(v||[]);const{data:D,error:S}=await se.rpc("check_campaign_alerts");S?console.error("Erro ao carregar alertas:",S):n((D||[]).filter(E=>E.triggered)),A(new Date)}catch(v){console.error("Erro ao carregar dados:",v)}finally{o(!1)}},y=()=>t.reduce((v,N)=>v+N.clicks_today,0),g=()=>t.reduce((v,N)=>v+N.conversions_today,0),b=()=>t.reduce((v,N)=>v+N.cost_today,0),p=()=>{const v=t.reduce((N,D)=>N+D.conversion_rate,0);return t.length>0?v/t.length:0};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 text-white",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"absolute inset-0 bg-grid-white/10"}),e.jsxs("div",{className:"relative px-8 py-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-white/20 backdrop-blur-sm rounded-xl",children:e.jsx(Pa,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Google Ads Premium"}),e.jsxs("span",{className:"px-3 py-1 bg-yellow-400 text-yellow-900 text-xs font-bold rounded-full flex items-center gap-1",children:[e.jsx(hr,{className:"h-3 w-3"}),"PRO"]})]}),e.jsx("p",{className:"text-blue-100 mt-1",children:"Rastreamento em Tempo Real de Campanhas"})]})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-white/10 backdrop-blur-md px-4 py-2 rounded-lg border border-white/20",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(vt,{className:"h-4 w-4"}),e.jsxs("span",{children:["Atualizado: ",d.toLocaleTimeString()]})]})}),e.jsxs("button",{onClick:m,disabled:i,className:"bg-white text-blue-600 px-5 py-2.5 rounded-lg font-semibold flex items-center gap-2 hover:bg-blue-50 transition-all shadow-lg hover:shadow-xl disabled:opacity-50",children:[e.jsx(bs,{className:`h-4 w-4 ${i?"animate-spin":""}`}),"Atualizar"]}),e.jsxs("button",{onClick:()=>c(!l),className:`px-5 py-2.5 rounded-lg font-semibold flex items-center gap-2 transition-all shadow-lg ${l?"bg-green-500 text-white hover:bg-green-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[e.jsx(gi,{className:"h-4 w-4"}),l?"Live":"Paused"]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6 hover:bg-white/15 transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/30 rounded-lg",children:e.jsx(sS,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex items-center gap-1 text-green-300 text-sm",children:[e.jsx(ii,{className:"h-4 w-4"}),e.jsx("span",{children:"+12%"})]})]}),e.jsx("div",{className:"text-4xl font-bold mb-1",children:y().toLocaleString()}),e.jsx("div",{className:"text-blue-100 text-sm",children:"Cliques Hoje"})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6 hover:bg-white/15 transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"p-2 bg-green-500/30 rounded-lg",children:e.jsx(Pa,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex items-center gap-1 text-green-300 text-sm",children:[e.jsx(ii,{className:"h-4 w-4"}),e.jsx("span",{children:"+8%"})]})]}),e.jsx("div",{className:"text-4xl font-bold mb-1",children:g()}),e.jsx("div",{className:"text-blue-100 text-sm",children:"Converses"})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6 hover:bg-white/15 transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"p-2 bg-orange-500/30 rounded-lg",children:e.jsx(Ut,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex items-center gap-1 text-red-300 text-sm",children:[e.jsx(ii,{className:"h-4 w-4"}),e.jsx("span",{children:"+5%"})]})]}),e.jsxs("div",{className:"text-4xl font-bold mb-1",children:["R$ ",b().toFixed(2)]}),e.jsx("div",{className:"text-blue-100 text-sm",children:"Investido Hoje"})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6 hover:bg-white/15 transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"p-2 bg-purple-500/30 rounded-lg",children:e.jsx(zt,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex items-center gap-1 text-green-300 text-sm",children:[e.jsx(ii,{className:"h-4 w-4"}),e.jsx("span",{children:"+3%"})]})]}),e.jsxs("div",{className:"text-4xl font-bold mb-1",children:[p().toFixed(2),"%"]}),e.jsx("div",{className:"text-blue-100 text-sm",children:"Taxa de Converso"})]})]})]})]}),e.jsxs("div",{className:"px-8 py-6 space-y-6",children:[e.jsx(rt,{children:r.length>0&&e.jsx(W.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-gradient-to-r from-amber-50 to-orange-50 border-l-4 border-amber-500 rounded-xl p-6 shadow-lg",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-amber-500 rounded-xl",children:e.jsx(En,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-lg font-bold text-amber-900 mb-2",children:[r.length," Alerta",r.length>1?"s":""," Ativo",r.length>1?"s":""]}),e.jsx("div",{className:"space-y-2",children:r.map(v=>e.jsxs("div",{className:"flex items-center gap-3 bg-white/50 rounded-lg p-3",children:[e.jsx(Fs,{className:"h-5 w-5 text-amber-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-semibold text-amber-900",children:v.campaign_name}),e.jsxs("span",{className:"text-amber-700",children:[" - ",v.alert_name]})]}),e.jsxs("div",{className:"text-sm text-amber-800",children:[e.jsx("span",{className:"font-mono",children:v.current_value.toFixed(2)}),e.jsx("span",{className:"mx-1",children:"/"}),e.jsx("span",{className:"font-mono",children:v.threshold_value.toFixed(2)})]})]},v.alert_id))})]})]})})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-5 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:e.jsx(Ls,{className:"h-5 w-5 text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Campanhas em Tempo Real"})]}),e.jsxs("button",{onClick:()=>s("/google-ads-settings"),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(xr,{className:"h-4 w-4"}),"Configuraes"]})]})}),i?e.jsxs("div",{className:"flex flex-col justify-center items-center py-20",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-blue-600 rounded-full opacity-20 animate-ping"}),e.jsx(bs,{className:"h-12 w-12 text-blue-600 animate-spin relative"})]}),e.jsx("span",{className:"mt-4 text-gray-600 font-medium",children:"Carregando dados em tempo real..."})]}):t.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gray-100 rounded-full mb-4",children:e.jsx(Pa,{className:"h-10 w-10 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Nenhuma campanha ativa"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Conecte sua conta do Google Ads para comear"}),e.jsxs("button",{onClick:()=>s("/google-ads-settings"),className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg",children:[e.jsx(hr,{className:"h-4 w-4"}),"Conectar Google Ads"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Campanha"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-bold text-gray-700 uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(Fs,{className:"h-3 w-3"}),"ltima Hora"]})}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Cliques Hoje"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Converses"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Taxa Conv."}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Custo Hoje"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-bold text-gray-700 uppercase tracking-wider",children:"CPC Mdio"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:t.map((v,N)=>e.jsxs(W.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:N*.05},className:"hover:bg-blue-50/50 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg",children:e.jsx(Pa,{className:"h-4 w-4 text-white"})}),e.jsx("span",{className:"font-semibold text-gray-900",children:v.campaign_name})]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-full text-sm font-bold bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-md",children:[e.jsx(gi,{className:"h-3 w-3"}),v.clicks_last_hour]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:"text-lg font-bold text-gray-900",children:v.clicks_today})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-1 text-lg font-bold text-green-600",children:[e.jsx(is,{className:"h-4 w-4"}),v.conversions_today]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("div",{className:"inline-flex items-center gap-1",children:e.jsxs("span",{className:`text-lg font-bold ${v.conversion_rate>=2?"text-green-600":v.conversion_rate>=1?"text-yellow-600":"text-red-600"}`,children:[v.conversion_rate.toFixed(2),"%"]})})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("span",{className:"text-base font-semibold text-gray-900",children:["R$ ",v.cost_today.toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("span",{className:"text-base font-medium text-gray-700",children:["R$ ",v.avg_cpc.toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("button",{className:"inline-flex items-center gap-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium opacity-0 group-hover:opacity-100",children:[e.jsx($s,{className:"h-4 w-4"}),"Ver"]})})]},v.id))})]})})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl p-8 text-white shadow-2xl",children:e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:"p-4 bg-white/20 backdrop-blur-sm rounded-2xl",children:e.jsx(hr,{className:"h-8 w-8"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-2xl font-bold mb-3",children:"Configure seu Rastreamento Premium"}),e.jsxs("ol",{className:"space-y-3 text-blue-50",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-white/30 rounded-full flex items-center justify-center text-sm font-bold",children:"1"}),e.jsx("span",{children:"Conecte sua conta do Google Ads nas configuraes"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-white/30 rounded-full flex items-center justify-center text-sm font-bold",children:"2"}),e.jsx("span",{children:"Configure alertas personalizados para cada campanha"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-white/30 rounded-full flex items-center justify-center text-sm font-bold",children:"3"}),e.jsx("span",{children:"Sincronizao automtica a cada 15 minutos"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-white/30 rounded-full flex items-center justify-center text-sm font-bold",children:"4"}),e.jsx("span",{children:"Receba notificaes instantneas quando limites forem atingidos"})]})]}),e.jsxs("button",{onClick:()=>s("/google-ads-settings"),className:"mt-6 inline-flex items-center gap-2 px-6 py-3 bg-white text-blue-600 rounded-lg hover:bg-blue-50 transition-colors font-semibold shadow-lg",children:[e.jsx(xr,{className:"h-5 w-5"}),"Configurar Agora"]})]})]})})]})]})},WP=()=>{const s=ys(),[t,a]=j.useState([]),[r,n]=j.useState(!0),[i,o]=j.useState(!1),[l,c]=j.useState({account_name:"",customer_id:"",sync_frequency_minutes:15});j.useEffect(()=>{d()},[]);const d=async()=>{try{n(!0);const{data:y,error:g}=await se.from("google_ads_accounts").select("*").order("created_at",{ascending:!1});if(g)throw g;a(y||[])}catch(y){console.error("Erro ao carregar contas:",y)}finally{n(!1)}},A=async y=>{y.preventDefault();try{const{error:g}=await se.from("google_ads_accounts").insert([{account_name:l.account_name,customer_id:l.customer_id,is_active:!0,sync_frequency_minutes:l.sync_frequency_minutes}]);if(g)throw g;alert(" Conta adicionada com sucesso!"),o(!1),c({account_name:"",customer_id:"",sync_frequency_minutes:15}),d()}catch(g){console.error("Erro ao adicionar conta:",g),alert(` Erro ao adicionar conta: ${g.message}`)}},u=async y=>{if(confirm("Tem certeza que deseja remover esta conta?"))try{const{error:g}=await se.from("google_ads_accounts").delete().eq("id",y);if(g)throw g;alert(" Conta removida com sucesso!"),d()}catch(g){console.error("Erro ao remover conta:",g),alert(` Erro ao remover conta: ${g.message}`)}},x=async(y,g)=>{try{const{error:b}=await se.from("google_ads_accounts").update({is_active:!g}).eq("id",y);if(b)throw b;d()}catch(b){console.error("Erro ao atualizar conta:",b),alert(` Erro ao atualizar conta: ${b.message}`)}},m=async y=>{try{alert(" Iniciando sincronizao...");const v=await(await fetch("https://hevvpugkhcmujiyncysq.supabase.co/functions/v1/google-ads-sync",{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhldnZwdWdraGNtdWppeW5jeXNxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3NjkwNDAsImV4cCI6MjA3NTM0NTA0MH0.THnFgVOEDqtcVTcEyzfSwvjvlkfxJjRmSZtn2woIYEs","Content-Type":"application/json"},body:JSON.stringify({account_id:y,force_sync:!0})})).json();v.success?(alert(` Sincronizao concluda!

${v.records_synced} registros sincronizados em ${v.sync_duration_seconds}s`),d()):alert(` Erro na sincronizao: ${v.error}`)}catch(g){console.error("Erro ao sincronizar:",g),alert(` Erro ao sincronizar: ${g.message}`)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(xr,{className:"h-8 w-8 text-blue-600"}),"Configuraes Google Ads"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Conecte e gerencie suas contas do Google Ads"})]}),e.jsxs("button",{onClick:()=>o(!i),className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-3 rounded-lg flex items-center gap-2 hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg",children:[e.jsx(bt,{className:"h-5 w-5"}),i?"Cancelar":"Adicionar Conta"]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-500 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-blue-900 mb-3 flex items-center gap-2",children:[e.jsx(ui,{className:"h-5 w-5"}),"Como conectar sua conta Google Ads (Mtodo Simplificado)"]}),e.jsxs("div",{className:"space-y-3 text-sm text-blue-800",children:[e.jsxs("div",{className:"bg-white/50 rounded-lg p-4",children:[e.jsx("p",{className:"font-semibold mb-2",children:" Passo 1: Obtenha seu Customer ID"}),e.jsxs("ol",{className:"list-decimal ml-5 space-y-1",children:[e.jsxs("li",{children:["Acesse: ",e.jsx("a",{href:"https://ads.google.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline hover:text-blue-700",children:"https://ads.google.com"})]}),e.jsx("li",{children:"Faa login na sua conta"}),e.jsxs("li",{children:["No canto superior direito, voc ver um nmero no formato: ",e.jsx("strong",{children:"123-456-7890"})]}),e.jsx("li",{children:"Esse  seu Customer ID (ID do cliente)"})]})]}),e.jsxs("div",{className:"bg-white/50 rounded-lg p-4",children:[e.jsx("p",{className:"font-semibold mb-2",children:" Passo 2: Adicione a Conta Abaixo"}),e.jsxs("ol",{className:"list-decimal ml-5 space-y-1",children:[e.jsx("li",{children:'Clique em "Adicionar Conta"'}),e.jsx("li",{children:'Preencha o nome da sua conta (ex: "Minha Empresa")'}),e.jsx("li",{children:"Cole o Customer ID que voc copiou"}),e.jsx("li",{children:"Configure a frequncia de sincronizao"}),e.jsx("li",{children:'Clique em "Salvar"'})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-300 rounded-lg p-4",children:[e.jsxs("p",{className:"font-semibold text-green-900 mb-2 flex items-center gap-2",children:[e.jsx(os,{className:"h-5 w-5"}),"Quer usar dados REAIS do Google Ads?"]}),e.jsx("p",{className:"text-green-800 mb-3",children:"Configure a conexo OAuth 2.0 para sincronizar automaticamente suas campanhas, cliques e converses reais!"}),e.jsxs("button",{onClick:()=>s("/google-ads-oauth"),className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-semibold",children:[e.jsx(os,{className:"h-4 w-4"}),"Configurar API Real"]})]}),e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[e.jsxs("p",{className:"font-semibold text-amber-900 mb-2 flex items-center gap-2",children:[e.jsx(cs,{className:"h-4 w-4"}),"Modo de Demonstrao Ativo"]}),e.jsx("p",{className:"text-amber-800",children:"Atualmente o sistema est em modo demonstrao e ir gerar dados simulados. Perfeito para testar a interface antes de conectar com a API real."})]})]})]}),i&&e.jsxs(W.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx(bt,{className:"h-6 w-6 text-blue-600"}),"Adicionar Nova Conta"]}),e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome da Conta"}),e.jsx("input",{type:"text",required:!0,value:l.account_name,onChange:y=>c({...l,account_name:y.target.value}),placeholder:"Ex: Minha Empresa - Campanhas",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer ID (ID do Cliente)"}),e.jsx("input",{type:"text",required:!0,value:l.customer_id,onChange:y=>c({...l,customer_id:y.target.value}),placeholder:"123-456-7890",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Encontre no canto superior direito do Google Ads"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Frequncia de Sincronizao (minutos)"}),e.jsxs("select",{value:l.sync_frequency_minutes,onChange:y=>c({...l,sync_frequency_minutes:parseInt(y.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:5,children:"A cada 5 minutos"}),e.jsx("option",{value:15,children:"A cada 15 minutos"}),e.jsx("option",{value:30,children:"A cada 30 minutos"}),e.jsx("option",{value:60,children:"A cada 1 hora"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs("button",{type:"submit",className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg flex items-center justify-center gap-2 hover:bg-blue-700 transition-colors font-semibold",children:[e.jsx(Gt,{className:"h-5 w-5"}),"Salvar Conta"]}),e.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-semibold",children:"Cancelar"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Contas Conectadas"})}),r?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx(bs,{className:"h-8 w-8 text-blue-600 animate-spin"})}):t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Pa,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"Nenhuma conta conectada"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:'Clique em "Adicionar Conta" para comear'})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:t.map(y=>e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},className:"p-6 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`p-2 rounded-lg ${y.is_active?"bg-green-100":"bg-gray-100"}`,children:e.jsx(Pa,{className:`h-5 w-5 ${y.is_active?"text-green-600":"text-gray-400"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:y.account_name}),e.jsx("p",{className:"text-sm text-gray-600 font-mono",children:y.customer_id})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${y.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:y.is_active?" Ativa":" Pausada"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(bs,{className:"h-4 w-4"}),e.jsxs("span",{children:["Sincroniza a cada ",y.sync_frequency_minutes," min"]})]}),y.last_sync_at&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(is,{className:"h-4 w-4 text-green-600"}),e.jsxs("span",{children:["ltima sync: ",new Date(y.last_sync_at).toLocaleString()]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>m(y.id),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 text-sm font-medium",children:[e.jsx(Fs,{className:"h-4 w-4"}),"Sincronizar"]}),e.jsx("button",{onClick:()=>x(y.id,y.is_active),className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 text-sm font-medium ${y.is_active?"bg-yellow-100 text-yellow-700 hover:bg-yellow-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:y.is_active?"Pausar":"Ativar"}),e.jsxs("button",{onClick:()=>u(y.id),className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors flex items-center gap-2 text-sm font-medium",children:[e.jsx(Vt,{className:"h-4 w-4"}),"Remover"]})]})]})},y.id))})]})]})},JP=()=>{const s=ys(),[t,a]=j.useState(1),[r,n]=j.useState(!1),[i,o]=j.useState({client_secret:!1,developer_token:!1}),[l,c]=j.useState({client_id:"",client_secret:"",developer_token:"",customer_id:"687-563-5815"}),[d,A]=j.useState(null);j.useEffect(()=>{u()},[]);const u=async()=>{try{const{data:g}=await se.from("google_ads_accounts").select("id, client_id, customer_id, oauth_connected").eq("customer_id","687-563-5815").maybeSingle();g&&(A(g.id),c(b=>({...b,client_id:g.client_id||"",customer_id:g.customer_id})),g.oauth_connected&&a(4))}catch(g){console.error("Erro ao carregar configurao:",g)}},x=async()=>{if(!l.client_id||!l.client_secret||!l.developer_token){alert("Por favor, preencha todos os campos!");return}try{if(n(!0),!d){alert("Conta no encontrada. Por favor, crie a conta primeiro.");return}const{error:g}=await se.from("google_ads_accounts").update({client_id:l.client_id,client_secret_encrypted:l.client_secret,developer_token_encrypted:l.developer_token}).eq("id",d);if(g)throw g;alert(" Credenciais salvas com sucesso!"),a(3)}catch(g){console.error("Erro ao salvar credenciais:",g),alert(` Erro ao salvar: ${g.message}`)}finally{n(!1)}},m=async()=>{try{n(!0);const g=`${window.location.origin}/oauth/callback`,p=`https://accounts.google.com/o/oauth2/v2/auth?client_id=${encodeURIComponent(l.client_id)}&redirect_uri=${encodeURIComponent(g)}&response_type=code&scope=${encodeURIComponent("https://www.googleapis.com/auth/adwords")}&access_type=offline&prompt=consent&state=${d}`;window.location.href=p}catch(g){console.error("Erro ao iniciar OAuth:",g),alert(` Erro: ${g.message}`),n(!1)}},y=g=>{navigator.clipboard.writeText(g),alert(" Copiado!")};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl p-6 text-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(os,{className:"h-8 w-8"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Configurao OAuth Google Ads"})]}),e.jsx("p",{className:"text-blue-100",children:"Conecte sua conta com dados reais via API oficial"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:[1,2,3,4].map(g=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold ${t>=g?"bg-blue-600 text-white":"bg-gray-200 text-gray-500"}`,children:g}),g<4&&e.jsx("div",{className:`w-16 h-1 mx-2 ${t>g?"bg-blue-600":"bg-gray-200"}`})]},g))}),t===1&&e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(ui,{className:"h-6 w-6 text-blue-600"}),"Passo 1: Obter Credenciais Google"]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Antes de continuar, voc precisa das credenciais do Google Cloud Console e Google Ads."})]}),e.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-5",children:[e.jsx("h3",{className:"font-bold text-blue-900 mb-3",children:" Voc vai precisar de:"}),e.jsxs("ul",{className:"space-y-2 text-sm text-blue-800",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(is,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Client ID:"})," Do Google Cloud Console OAuth 2.0"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(is,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Client Secret:"})," Do Google Cloud Console OAuth 2.0"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(is,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Developer Token:"})," Do Google Ads API Center"]})]})]})]}),e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[e.jsxs("p",{className:"text-amber-900 font-medium mb-2 flex items-center gap-2",children:[e.jsx(cs,{className:"h-5 w-5"}),"Ainda no tem as credenciais?"]}),e.jsx("p",{className:"text-amber-800 text-sm mb-3",children:"Siga o guia completo que criamos para voc!"}),e.jsxs("a",{href:"/GUIA_CONEXAO_GOOGLE_ADS_API_REAL.md",target:"_blank",className:"inline-flex items-center gap-2 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors text-sm font-medium",children:[e.jsx(ju,{className:"h-4 w-4"}),"Abrir Guia Completo"]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:()=>a(2),className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-semibold flex items-center justify-center gap-2",children:["J tenho as credenciais",e.jsx(ui,{className:"h-5 w-5"})]})})]}),t===2&&e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(Va,{className:"h-6 w-6 text-blue-600"}),"Passo 2: Inserir Credenciais"]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Cole suas credenciais abaixo. Elas sero armazenadas de forma segura e criptografada."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer ID (ID do Cliente)"}),e.jsx("input",{type:"text",value:l.customer_id,readOnly:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 font-mono text-gray-600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client ID *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:l.client_id,onChange:g=>c({...l,client_id:g.target.value}),placeholder:"123456789-abc.apps.googleusercontent.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm"}),e.jsx("button",{onClick:()=>y(l.client_id),className:"absolute right-2 top-2 p-2 text-gray-400 hover:text-gray-600",children:e.jsx(Gr,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Do Google Cloud Console  Credentials  OAuth 2.0 Client ID"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client Secret *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:i.client_secret?"text":"password",value:l.client_secret,onChange:g=>c({...l,client_secret:g.target.value}),placeholder:"GOCSPX-...",className:"w-full px-4 py-2 pr-20 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm"}),e.jsx("div",{className:"absolute right-2 top-2 flex gap-1",children:e.jsx("button",{onClick:()=>o({...i,client_secret:!i.client_secret}),className:"p-2 text-gray-400 hover:text-gray-600",children:i.client_secret?e.jsx(Bl,{className:"h-4 w-4"}):e.jsx($s,{className:"h-4 w-4"})})})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Secret fornecido junto com o Client ID"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Developer Token *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:i.developer_token?"text":"password",value:l.developer_token,onChange:g=>c({...l,developer_token:g.target.value}),placeholder:"abc123xyz...",className:"w-full px-4 py-2 pr-20 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm"}),e.jsx("div",{className:"absolute right-2 top-2 flex gap-1",children:e.jsx("button",{onClick:()=>o({...i,developer_token:!i.developer_token}),className:"p-2 text-gray-400 hover:text-gray-600",children:i.developer_token?e.jsx(Bl,{className:"h-4 w-4"}):e.jsx($s,{className:"h-4 w-4"})})})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Do Google Ads  Tools  API Center  Developer Token"})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("p",{className:"text-green-900 font-medium mb-1 flex items-center gap-2",children:[e.jsx(os,{className:"h-5 w-5"}),"Segurana Garantida"]}),e.jsx("p",{className:"text-green-800 text-sm",children:"Suas credenciais sero criptografadas antes de serem armazenadas no banco de dados. Apenas o sistema poder descriptograf-las para uso na API."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>a(1),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-semibold",children:"Voltar"}),e.jsxs("button",{onClick:x,disabled:r,className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-semibold flex items-center justify-center gap-2 disabled:bg-gray-400",children:[r?"Salvando...":"Salvar Credenciais",e.jsx(Va,{className:"h-5 w-5"})]})]})]}),t===3&&e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(C6,{className:"h-6 w-6 text-blue-600"}),"Passo 3: Autorizar Conexo"]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Agora voc ser redirecionado para o Google para autorizar o acesso  sua conta do Google Ads."})]}),e.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-5",children:[e.jsx("h3",{className:"font-bold text-blue-900 mb-3",children:"O que vai acontecer:"}),e.jsxs("ol",{className:"space-y-2 text-sm text-blue-800 list-decimal list-inside",children:[e.jsx("li",{children:"Voc ser levado para a pgina de login do Google"}),e.jsx("li",{children:"Faa login com a conta do Google Ads (687-563-5815)"}),e.jsx("li",{children:"Autorize o acesso aos dados do Google Ads"}),e.jsx("li",{children:"Ser redirecionado de volta automaticamente"}),e.jsx("li",{children:"A sincronizao comear imediatamente!"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-6 text-center",children:[e.jsx(Fs,{className:"h-12 w-12 text-green-600 mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Pronto para conectar!"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Clique no boto abaixo para iniciar a autorizao OAuth"}),e.jsxs("button",{onClick:m,disabled:r,className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg font-bold text-lg disabled:from-gray-400 disabled:to-gray-500",children:[r?"Redirecionando...":"Conectar com Google",e.jsx(ju,{className:"h-6 w-6"})]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsx("button",{onClick:()=>a(2),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-semibold",children:"Voltar"})})]}),t===4&&e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-green-100 rounded-full mb-6",children:e.jsx(is,{className:"h-12 w-12 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Conexo Estabelecida!"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Sua conta est conectada e sincronizando dados reais do Google Ads"}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-6 mb-8",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Prximas Aes:"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx("button",{onClick:()=>s("/google-ads-tracking"),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:"Ver Dashboard"}),e.jsx("button",{onClick:()=>s("/google-ads-settings"),className:"px-6 py-3 bg-white border-2 border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50 transition-colors font-semibold",children:"Gerenciar Contas"})]})]})]})]})]})},YP=({onRouteSelect:s})=>{const[t,a]=j.useState([]),[r,n]=j.useState([]),[i,o]=j.useState(!0),[l,c]=j.useState(!1),[d,A]=j.useState(null),[u,x]=j.useState([]),[m,y]=j.useState("today"),[g,b]=j.useState({route_name:"",route_date:new Date().toISOString().split("T")[0],assigned_employee_id:"",vehicle_id:"",estimated_duration_minutes:0,notes:""});j.useEffect(()=>{p(),v()},[m]);const p=async()=>{try{o(!0);let L=se.from("routes").select(`
          *,
          route_stops(count)
        `).order("route_date",{ascending:!1}).order("created_at",{ascending:!1});if(m==="today"){const P=new Date().toISOString().split("T")[0];L=L.eq("route_date",P)}else m!=="all"&&(L=L.eq("status",m));const{data:f,error:F}=await L;if(F)throw F;const M=await Promise.all((f||[]).map(async P=>{var O,X;let Z="No atribudo";if(P.assigned_employee_id){const{data:q}=await se.from("employees").select("name").eq("id",P.assigned_employee_id).single();q&&(Z=q.name)}return{...P,employee_name:Z,stop_count:((X=(O=P.route_stops)==null?void 0:O[0])==null?void 0:X.count)||0}}));a(M)}catch(L){console.error("Error loading routes:",L)}finally{o(!1)}},v=async()=>{try{const{data:L}=await se.from("employees").select("id, name").eq("active",!0).order("name");n(L||[])}catch(L){console.error("Error loading employees:",L)}},N=async L=>{try{const{data:f,error:F}=await se.from("route_stops").select("*").eq("route_id",L).order("stop_order");if(F)throw F;x(f||[])}catch(f){console.error("Error loading stops:",f)}},D=async()=>{if(!g.route_name){alert("Nome da rota  obrigatrio!");return}try{const{error:L}=await se.from("routes").insert([g]);if(L)throw L;await p(),b({route_name:"",route_date:new Date().toISOString().split("T")[0],assigned_employee_id:"",vehicle_id:"",estimated_duration_minutes:0,notes:""}),c(!1)}catch(L){console.error("Error creating route:",L),alert("Erro ao criar rota!")}},S=async(L,f)=>{var F;try{const M={status:f};if(f==="in_progress"&&!((F=t.find(Z=>Z.id===L))!=null&&F.start_time)&&(M.start_time=new Date().toISOString()),f==="completed"){M.end_time=new Date().toISOString();const Z=t.find(O=>O.id===L);if(Z!=null&&Z.start_time){const O=new Date(Z.start_time),X=new Date;M.actual_duration_minutes=Math.round((X.getTime()-O.getTime())/6e4)}}const{error:P}=await se.from("routes").update(M).eq("id",L);if(P)throw P;await p()}catch(M){console.error("Error updating status:",M),alert("Erro ao atualizar status!")}},E=async L=>{if(confirm("Deseja realmente excluir esta rota?"))try{const{error:f}=await se.from("routes").delete().eq("id",L);if(f)throw f;await p()}catch(f){console.error("Error deleting route:",f),alert("Erro ao excluir rota!")}},R=L=>{A(L===d?null:L),L!==d&&(N(L),s&&s(L))},_=L=>{switch(L){case"pending":return{label:"Pendente",icon:vt,color:"yellow",bgColor:"bg-yellow-100",textColor:"text-yellow-800"};case"in_progress":return{label:"Em Andamento",icon:cd,color:"blue",bgColor:"bg-blue-100",textColor:"text-blue-800"};case"completed":return{label:"Concluda",icon:is,color:"green",bgColor:"bg-green-100",textColor:"text-green-800"};case"cancelled":return{label:"Cancelada",icon:eo,color:"red",bgColor:"bg-red-100",textColor:"text-red-800"};default:return{label:L,icon:vt,color:"gray",bgColor:"bg-gray-100",textColor:"text-gray-800"}}},C=L=>new Date(L).toLocaleDateString("pt-BR");return i?e.jsx("div",{className:"text-center py-8",children:"Carregando rotas..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 rounded-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Gesto de Rotas"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Planeje e acompanhe as rotas da equipe"})]}),e.jsxs("button",{onClick:()=>c(!l),className:"px-6 py-3 bg-white text-blue-600 rounded-lg hover:bg-blue-50 flex items-center gap-2 transition-colors font-semibold",children:[e.jsx(bt,{className:"h-5 w-5"}),"Nova Rota"]})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("span",{className:"text-sm font-medium",children:"Filtrar:"}),e.jsx("button",{onClick:()=>y("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${m==="all"?"bg-white text-blue-600":"bg-blue-500 text-white hover:bg-blue-400"}`,children:"Todas"}),e.jsx("button",{onClick:()=>y("today"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${m==="today"?"bg-white text-blue-600":"bg-blue-500 text-white hover:bg-blue-400"}`,children:"Hoje"}),e.jsx("button",{onClick:()=>y("pending"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${m==="pending"?"bg-white text-blue-600":"bg-blue-500 text-white hover:bg-blue-400"}`,children:"Pendentes"}),e.jsx("button",{onClick:()=>y("in_progress"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${m==="in_progress"?"bg-white text-blue-600":"bg-blue-500 text-white hover:bg-blue-400"}`,children:"Em Andamento"}),e.jsx("button",{onClick:()=>y("completed"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${m==="completed"?"bg-white text-blue-600":"bg-blue-500 text-white hover:bg-blue-400"}`,children:"Concludas"})]})]}),e.jsx(rt,{children:l&&e.jsxs(W.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(no,{className:"h-5 w-5 text-blue-600"}),"Nova Rota"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome da Rota *"}),e.jsx("input",{type:"text",value:g.route_name,onChange:L=>b({...g,route_name:L.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Rota Centro - Manh"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data"}),e.jsx("input",{type:"date",value:g.route_date,onChange:L=>b({...g,route_date:L.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Funcionrio"}),e.jsxs("select",{value:g.assigned_employee_id,onChange:L=>b({...g,assigned_employee_id:L.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione..."}),r.map(L=>e.jsx("option",{value:L.id,children:L.name},L.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Veculo/Placa"}),e.jsx("input",{type:"text",value:g.vehicle_id,onChange:L=>b({...g,vehicle_id:L.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: ABC-1234"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Durao Estimada (minutos)"}),e.jsx("input",{type:"number",value:g.estimated_duration_minutes,onChange:L=>b({...g,estimated_duration_minutes:parseInt(L.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes"}),e.jsx("textarea",{value:g.notes,onChange:L=>b({...g,notes:L.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Observaes sobre a rota..."})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:D,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Criar Rota"})]})]})}),t.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[e.jsx(no,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),e.jsx("p",{className:"text-gray-600",children:"Nenhuma rota encontrada"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:'Clique em "Nova Rota" para comear'})]}):e.jsx("div",{className:"space-y-4",children:t.map(L=>{const f=_(L.status),F=f.icon,M=d===L.id;return e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{onClick:()=>R(L.id),className:"p-6 hover:bg-gray-50 transition-colors cursor-pointer",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:L.route_name}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${f.bgColor} ${f.textColor}`,children:[e.jsx(F,{className:"h-3 w-3 inline mr-1"}),f.label]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mt-3 text-sm",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500 flex items-center gap-1",children:[e.jsx(da,{className:"h-3 w-3"}),"Data:"]}),e.jsx("p",{className:"font-medium",children:C(L.route_date)})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500 flex items-center gap-1",children:[e.jsx(Jt,{className:"h-3 w-3"}),"Responsvel:"]}),e.jsx("p",{className:"font-medium",children:L.employee_name})]}),L.vehicle_id&&e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500 flex items-center gap-1",children:[e.jsx(uj,{className:"h-3 w-3"}),"Veculo:"]}),e.jsx("p",{className:"font-medium",children:L.vehicle_id})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500 flex items-center gap-1",children:[e.jsx(da,{className:"h-3 w-3"}),"Paradas:"]}),e.jsx("p",{className:"font-medium",children:L.stop_count})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500 flex items-center gap-1",children:[e.jsx(zt,{className:"h-3 w-3"}),"Distncia:"]}),e.jsxs("p",{className:"font-medium",children:[L.total_distance_km," km"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[L.status==="pending"&&e.jsx("button",{onClick:P=>{P.stopPropagation(),S(L.id,"in_progress")},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Iniciar rota",children:e.jsx(cd,{className:"h-5 w-5"})}),L.status==="in_progress"&&e.jsx("button",{onClick:P=>{P.stopPropagation(),S(L.id,"completed")},className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Concluir rota",children:e.jsx(is,{className:"h-5 w-5"})}),e.jsx("button",{onClick:P=>{P.stopPropagation(),E(L.id)},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Excluir rota",children:e.jsx(Vt,{className:"h-5 w-5"})})]})]})}),e.jsx(rt,{children:M&&e.jsxs(W.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"border-t border-gray-200 bg-gray-50 p-6",children:[e.jsxs("h5",{className:"font-semibold mb-4",children:["Paradas da Rota (",u.length,")"]}),u.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"Nenhuma parada adicionada ainda"}):e.jsx("div",{className:"space-y-3",children:u.map((P,Z)=>e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center font-bold",children:Z+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h6",{className:"font-medium text-gray-900",children:P.customer_name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:P.address}),P.notes&&e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:P.notes})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${_(P.status).bgColor} ${_(P.status).textColor}`,children:_(P.status).label})]})},P.id))})]})})]},L.id)})})]})},XP=()=>{const[s,t]=j.useState(null);return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-3 bg-blue-600 rounded-lg",children:e.jsx(no,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Rastreamento e Gesto de Rotas"}),e.jsx("p",{className:"text-gray-600",children:"Planeje, acompanhe e gerencie as rotas da equipe em tempo real"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Rotas Hoje"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"0"})]}),e.jsx(da,{className:"h-12 w-12 text-blue-500 opacity-20"})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Em Andamento"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"0"})]}),e.jsx(no,{className:"h-12 w-12 text-blue-500 opacity-20"})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"KM Hoje"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:"0"})]}),e.jsx(zt,{className:"h-12 w-12 text-green-500 opacity-20"})]})})]}),e.jsx(YP,{onRouteSelect:t}),e.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:" Como funciona o rastreamento em tempo real?"}),e.jsxs("div",{className:"space-y-2 text-sm text-blue-800",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"1. Planejamento:"})," Crie rotas e adicione as paradas (ordens de servio) em sequncia"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"2. Atribuio:"})," Designe um funcionrio e veculo para cada rota"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"3. Rastreamento:"})," Quando a rota  iniciada, o sistema registra a localizao em tempo real"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"4. Otimizao:"})," Visualize o progresso, distncia percorrida e tempo estimado"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"5. Histrico:"})," Todo o trajeto fica registrado para anlise posterior"]})]})]}),e.jsxs("div",{className:"mt-6 bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-3",children:" Recursos Disponveis"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-purple-800",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:" Gesto de Rotas"}),e.jsx("p",{className:"text-purple-700",children:"Criar, editar e gerenciar rotas dirias"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:" Paradas Sequenciais"}),e.jsx("p",{className:"text-purple-700",children:"Adicionar ordens de servio em ordem"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:" Clculo de Distncia"}),e.jsx("p",{className:"text-purple-700",children:"Distncia total calculada automaticamente"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:" Status em Tempo Real"}),e.jsx("p",{className:"text-purple-700",children:"Acompanhe o progresso de cada rota"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:" Histrico Completo"}),e.jsx("p",{className:"text-purple-700",children:"Registros de todas as movimentaes"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:" Otimizao de Rotas"}),e.jsx("p",{className:"text-purple-700",children:"Sugestes de melhor sequncia"})]})]})]})]})})},ZP=async s=>{},eM=()=>{const[s,t]=j.useState([]),[a,r]=j.useState([]),[n,i]=j.useState(!0),[o,l]=j.useState(""),[c,d]=j.useState("all"),[A,u]=j.useState("all"),[x,m]=j.useState(!1),[y,g]=j.useState(!1),[b,p]=j.useState(null),[v,N]=j.useState(null),[D,S]=j.useState({title:"",description:"",content:"",department:"Operacional",category:"",status:"draft",tags:[],template_type:""}),[E,R]=j.useState(""),_=["Operacional","Financeiro","Comercial","RH","TI","Geral"],C=[{value:"draft",label:"Rascunho",color:"gray",icon:vt},{value:"review",label:"Em Reviso",color:"yellow",icon:$s},{value:"approved",label:"Aprovado",color:"green",icon:is},{value:"archived",label:"Arquivado",color:"blue",icon:r0}];j.useEffect(()=>{L(),f()},[]);const L=async()=>{try{i(!0);const{data:B,error:$}=await se.from("documents").select("*").order("updated_at",{ascending:!1});if($)throw $;t(B||[])}catch(B){console.error("Erro ao carregar documentos:",B)}finally{i(!1)}},f=async()=>{try{const{data:B,error:$}=await se.from("document_templates").select("*").eq("is_active",!0).order("name");if($)throw $;r(B||[])}catch(B){console.error("Erro ao carregar templates:",B)}},F=B=>{S({...D,content:B.content_template,department:B.department,category:B.category||"",template_type:B.name}),g(!1),m(!0)},M=async()=>{try{if(b){const{error:B}=await se.from("documents").update({title:D.title,description:D.description,content:D.content,department:D.department,category:D.category,status:D.status,tags:D.tags,updated_at:new Date().toISOString()}).eq("id",b.id);if(B)throw B}else{const{error:B}=await se.from("documents").insert({title:D.title,description:D.description,content:D.content,department:D.department,category:D.category,status:D.status,tags:D.tags,template_type:D.template_type,version:1});if(B)throw B}await L(),X()}catch(B){console.error("Erro ao salvar documento:",B),alert("Erro ao salvar documento")}},P=B=>{p(B),S({title:B.title,description:B.description||"",content:B.content,department:B.department,category:B.category||"",status:B.status,tags:B.tags||[],template_type:B.template_type||""}),m(!0)},Z=async B=>{if(confirm("Tem certeza que deseja excluir este documento?"))try{const{error:$}=await se.from("documents").delete().eq("id",B);if($)throw $;await L()}catch($){console.error("Erro ao excluir documento:",$),alert("Erro ao excluir documento")}},O=B=>{ZP({title:B.title,description:B.description,content:B.content,department:B.department,category:B.category,version:B.version,createdAt:B.created_at,updatedAt:B.updated_at,status:B.status,tags:B.tags}).save(`${B.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_v${B.version}.pdf`)},X=()=>{m(!1),p(null),S({title:"",description:"",content:"",department:"Operacional",category:"",status:"draft",tags:[],template_type:""})},q=()=>{E.trim()&&!D.tags.includes(E.trim())&&(S({...D,tags:[...D.tags,E.trim()]}),R(""))},V=B=>{S({...D,tags:D.tags.filter($=>$!==B)})},oe=s.filter(B=>{var ue;const $=B.title.toLowerCase().includes(o.toLowerCase())||((ue=B.description)==null?void 0:ue.toLowerCase().includes(o.toLowerCase()))||B.tags.some(me=>me.toLowerCase().includes(o.toLowerCase())),T=c==="all"||B.department===c,ne=A==="all"||B.status===A;return $&&T&&ne}),H=B=>{const $=C.find(T=>T.value===B);return $?$.icon:vt},I=B=>({draft:"bg-gray-100 text-gray-800",review:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",archived:"bg-blue-100 text-blue-800"})[B]||"bg-gray-100 text-gray-800";return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Documentao"}),e.jsx("p",{className:"text-indigo-100",children:"Gerencie documentos departamentais e gere PDFs"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>g(!0),className:"bg-white text-indigo-600 px-6 py-3 rounded-lg font-medium hover:bg-indigo-50 transition-colors flex items-center gap-2",children:[e.jsx(Nu,{className:"h-5 w-5"}),"Usar Template"]}),e.jsxs("button",{onClick:()=>m(!0),className:"bg-indigo-500 text-white px-6 py-3 rounded-lg font-medium hover:bg-indigo-400 transition-colors flex items-center gap-2",children:[e.jsx(bt,{className:"h-5 w-5"}),"Novo Documento"]})]})]})}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Qt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",value:o,onChange:B=>l(B.target.value),placeholder:"Buscar documentos, tags...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("select",{value:c,onChange:B=>d(B.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"all",children:"Todos os Departamentos"}),_.map(B=>e.jsx("option",{value:B,children:B},B))]}),e.jsxs("select",{value:A,onChange:B=>u(B.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"all",children:"Todos os Status"}),C.map(B=>e.jsx("option",{value:B.value,children:B.label},B.value))]})]}),n?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando documentos..."})]}):oe.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ut,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Nenhum documento encontrado"}),e.jsx("button",{onClick:()=>m(!0),className:"text-indigo-600 hover:text-indigo-700 font-medium",children:"Criar primeiro documento"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:oe.map(B=>{var T;const $=H(B.status);return e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:B.title}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:B.description})]}),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1 ${I(B.status)}`,children:[e.jsx($,{className:"h-3 w-3"}),(T=C.find(ne=>ne.value===B.status))==null?void 0:T.label]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 mb-3",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ut,{className:"h-3 w-3"}),B.department]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Nu,{className:"h-3 w-3"}),"v",B.version]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ot,{className:"h-3 w-3"}),new Date(B.updated_at).toLocaleDateString("pt-BR")]})]}),B.tags&&B.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[B.tags.slice(0,3).map(ne=>e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 rounded text-xs",children:ne},ne)),B.tags.length>3&&e.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 rounded text-xs",children:["+",B.tags.length-3]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>N(B),className:"flex-1 px-3 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 transition-colors text-sm flex items-center justify-center gap-1",children:[e.jsx($s,{className:"h-4 w-4"}),"Ver"]}),e.jsxs("button",{onClick:()=>P(B),className:"flex-1 px-3 py-2 bg-indigo-100 text-indigo-700 rounded hover:bg-indigo-200 transition-colors text-sm flex items-center justify-center gap-1",children:[e.jsx(rr,{className:"h-4 w-4"}),"Editar"]}),e.jsx("button",{onClick:()=>O(B),className:"px-3 py-2 bg-green-100 text-green-700 rounded hover:bg-green-200 transition-colors",children:e.jsx(wa,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Z(B.id),className:"px-3 py-2 bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors",children:e.jsx(Vt,{className:"h-4 w-4"})})]})]},B.id)})})]}),e.jsx(rt,{children:y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between bg-gradient-to-r from-indigo-600 to-purple-600 text-white",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Selecionar Template"}),e.jsx("p",{className:"text-indigo-100 text-sm mt-1",children:"Escolha um template para comear"})]}),e.jsx("button",{onClick:()=>g(!1),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(ht,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map(B=>e.jsxs("div",{onClick:()=>F(B),className:"border border-gray-200 rounded-lg p-4 hover:border-indigo-500 hover:shadow-md transition-all cursor-pointer",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:B.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:B.description}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded",children:B.department}),B.category&&e.jsx("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 rounded",children:B.category})]})]},B.id))})})]})})}),e.jsx(rt,{children:x&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between bg-gradient-to-r from-indigo-600 to-purple-600 text-white",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:b?"Editar Documento":"Novo Documento"}),e.jsx("p",{className:"text-indigo-100 text-sm mt-1",children:b?"Atualize as informaes do documento":"Preencha as informaes do documento"})]}),e.jsx("button",{onClick:X,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(ht,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ttulo *"}),e.jsx("input",{type:"text",value:D.title,onChange:B=>S({...D,title:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Ttulo do documento"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{value:D.description,onChange:B=>S({...D,description:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",rows:2,placeholder:"Breve descrio do documento"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Departamento *"}),e.jsx("select",{value:D.department,onChange:B=>S({...D,department:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:_.map(B=>e.jsx("option",{value:B,children:B},B))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria"}),e.jsx("input",{type:"text",value:D.category,onChange:B=>S({...D,category:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Relatrio, Procedimento, etc"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("select",{value:D.status,onChange:B=>S({...D,status:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:C.map(B=>e.jsx("option",{value:B.value,children:B.label},B.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:E,onChange:B=>R(B.target.value),onKeyPress:B=>B.key==="Enter"&&(B.preventDefault(),q()),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Adicionar tag..."}),e.jsx("button",{onClick:q,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:e.jsx(Su,{className:"h-5 w-5"})})]}),D.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:D.tags.map(B=>e.jsxs("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-sm flex items-center gap-2",children:[B,e.jsx("button",{onClick:()=>V(B),className:"hover:text-indigo-900",children:e.jsx(ht,{className:"h-3 w-3"})})]},B))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contedo * (suporta Markdown)"}),e.jsx("textarea",{value:D.content,onChange:B=>S({...D,content:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 font-mono text-sm",rows:15,placeholder:`# Ttulo do Documento

## Seo 1

Contedo da seo...

- Item 1
- Item 2`}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Dicas: Use # para ttulos, ## para subttulos, - para listas"})]})]})}),e.jsxs("div",{className:"p-6 border-t bg-gray-50 flex gap-3",children:[e.jsx("button",{onClick:X,className:"flex-1 px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors font-medium",children:"Cancelar"}),e.jsxs("button",{onClick:M,disabled:!D.title||!D.content,className:"flex-1 px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-medium flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Gt,{className:"h-5 w-5"}),b?"Atualizar Documento":"Criar Documento"]})]})]})})}),e.jsx(rt,{children:v&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between bg-gradient-to-r from-indigo-600 to-purple-600 text-white",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:v.title}),e.jsxs("p",{className:"text-indigo-100 text-sm mt-1",children:[v.department,"  Verso ",v.version]})]}),e.jsx("button",{onClick:()=>N(null),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(ht,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[v.description&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Descrio"}),e.jsx("p",{className:"text-gray-600",children:v.description})]}),e.jsx("div",{className:"prose max-w-none",children:v.content.split(`
`).map((B,$)=>B.startsWith("# ")?e.jsx("h1",{className:"text-3xl font-bold mt-6 mb-4",children:B.substring(2)},$):B.startsWith("## ")?e.jsx("h2",{className:"text-2xl font-bold mt-5 mb-3",children:B.substring(3)},$):B.startsWith("### ")?e.jsx("h3",{className:"text-xl font-bold mt-4 mb-2",children:B.substring(4)},$):B.startsWith("- ")?e.jsx("li",{className:"ml-6",children:B.substring(2)},$):B.trim()===""?e.jsx("br",{},$):e.jsx("p",{className:"mb-2",children:B},$))})]}),e.jsxs("div",{className:"p-6 border-t bg-gray-50 flex gap-3",children:[e.jsxs("button",{onClick:()=>O(v),className:"flex-1 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium flex items-center justify-center gap-2",children:[e.jsx(wa,{className:"h-5 w-5"}),"Baixar PDF"]}),e.jsxs("button",{onClick:()=>{N(null),P(v)},className:"flex-1 px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-medium flex items-center justify-center gap-2",children:[e.jsx(rr,{className:"h-5 w-5"}),"Editar"]})]})]})})})]})},tM=()=>{const s=ys(),[t,a]=j.useState([]),[r,n]=j.useState(!0),[i,o]=j.useState(!1),[l,c]=j.useState(null),[d,A]=j.useState(!1),[u,x]=j.useState({account_name:"",email_address:"",smtp_host:"",smtp_port:587,smtp_user:"",smtp_password:"",smtp_secure:!0,imap_host:"",imap_port:993,imap_user:"",imap_password:"",imap_secure:!0,sender_name:"",signature:"",is_default:!1,is_active:!0});j.useEffect(()=>{m()},[]);const m=async()=>{try{n(!0);const{data:E,error:R}=await se.from("email_accounts").select("*").order("is_default",{ascending:!1}).order("created_at",{ascending:!1});if(R)throw R;a(E||[])}catch(E){console.error("Error loading email accounts:",E)}finally{n(!1)}},y=async E=>{var R,_;E.preventDefault();try{if(l){const{error:C}=await se.from("email_accounts").update(u).eq("id",l);if(C)throw C;alert(" Conta de email atualizada com sucesso!")}else{const{error:C}=await se.from("email_accounts").insert([u]);if(C)throw C;alert(" Conta de email criada com sucesso!")}v(),m()}catch(C){console.error("Error saving email account:",C),(R=C==null?void 0:C.message)!=null&&R.includes("email_address")&&((_=C==null?void 0:C.message)!=null&&_.includes("already exists"))?alert(` ERRO: O email "${u.email_address}" j est cadastrado!

Para editar esta conta:
1. Feche este formulrio
2. Clique no cone de configurao () da conta existente
3. Faa as alteraes necessrias`):(C==null?void 0:C.code)==="23505"?alert(` ERRO: Esta conta de email j existe no sistema!

Verifique a lista de contas abaixo.`):alert(` Erro ao salvar conta de email:

${(C==null?void 0:C.message)||"Erro desconhecido"}`)}},g=E=>{x({account_name:E.account_name,email_address:E.email_address,smtp_host:E.smtp_host,smtp_port:E.smtp_port,smtp_user:E.smtp_user,smtp_password:E.smtp_password,smtp_secure:E.smtp_secure,imap_host:E.imap_host||"",imap_port:E.imap_port||993,imap_user:E.imap_user||"",imap_password:E.imap_password||"",imap_secure:E.imap_secure,sender_name:E.sender_name,signature:E.signature||"",is_default:E.is_default,is_active:E.is_active}),c(E.id),o(!0)},b=async(E,R)=>{if(confirm(`Deseja realmente excluir a conta ${R}?`))try{const{error:_}=await se.from("email_accounts").delete().eq("id",E);if(_)throw _;m()}catch(_){console.error("Error deleting account:",_),alert("Erro ao excluir conta")}},p=async E=>{try{await se.from("email_accounts").update({is_default:!1}).neq("id",E);const{error:R}=await se.from("email_accounts").update({is_default:!0}).eq("id",E);if(R)throw R;m()}catch(R){console.error("Error setting default:",R)}},v=()=>{x({account_name:"",email_address:"",smtp_host:"",smtp_port:587,smtp_user:"",smtp_password:"",smtp_secure:!0,imap_host:"",imap_port:993,imap_user:"",imap_password:"",imap_secure:!0,sender_name:"",signature:"",is_default:!1,is_active:!0}),c(null),o(!1),A(!1)},N=()=>{x(E=>({...E,smtp_host:"smtp.gmail.com",smtp_port:587,imap_host:"imap.gmail.com",imap_port:993}))},D=()=>{x(E=>({...E,smtp_host:"smtp-mail.outlook.com",smtp_port:587,imap_host:"outlook.office365.com",imap_port:993}))},S=()=>{if(!u.email_address){alert("Por favor, preencha o endereo de email primeiro!");return}const E=u.email_address.split("@")[1],R=u.account_name||`Email Corporativo - ${u.email_address.split("@")[0]}`,_=u.sender_name||u.email_address.split("@")[0].charAt(0).toUpperCase()+u.email_address.split("@")[0].slice(1);x(C=>({...C,account_name:R,sender_name:_,smtp_host:`mail.${E}`,smtp_port:587,smtp_user:C.email_address,imap_host:`mail.${E}`,imap_port:993,imap_user:C.email_address,imap_password:C.smtp_password,smtp_secure:!0,imap_secure:!0,signature:`

---
Atenciosamente,
${_}
${E}`})),alert(` Configuraes Hostgator preenchidas!

Agora voc s precisa:
1. Verificar os dados
2. Preencher a senha
3. Salvar`)};return r?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(bs,{className:"h-8 w-8 animate-spin text-blue-600"})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(Cs,{className:"h-8 w-8 text-blue-600"}),"Configuraes de Email"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure contas de email corporativo para envio e recebimento"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[!i&&e.jsxs("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(bt,{className:"h-5 w-5"}),"Nova Conta"]}),e.jsxs("button",{onClick:()=>s("/"),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg flex items-center gap-2 font-medium transition-colors",title:"Voltar ao Dashboard",children:[e.jsx(An,{className:"h-5 w-5"}),"Voltar ao Sistema"]})]})]}),i&&e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:l?"Editar Conta":"Nova Conta de Email"}),e.jsx("button",{onClick:v,className:"text-gray-500 hover:text-gray-700",children:e.jsx(ht,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Configurao Rpida:"})," Selecione seu provedor de email"]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx("button",{type:"button",onClick:S,className:"px-4 py-2 bg-orange-50 text-orange-700 rounded-lg text-sm hover:bg-orange-100 font-medium border border-orange-200",children:" Hostgator"}),e.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 bg-red-50 text-red-700 rounded-lg text-sm hover:bg-red-100 font-medium border border-red-200",children:" Gmail"}),e.jsx("button",{type:"button",onClick:D,className:"px-4 py-2 bg-blue-50 text-blue-700 rounded-lg text-sm hover:bg-blue-100 font-medium border border-blue-200",children:" Outlook"})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[" ",e.jsx("strong",{children:"Hostgator:"})," Preencha primeiro o email, depois clique no boto"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Conta *"}),e.jsx("input",{type:"text",required:!0,value:u.account_name,onChange:E=>x({...u,account_name:E.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Email Comercial"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Endereo de Email *"}),e.jsx("input",{type:"email",required:!0,value:u.email_address,onChange:E=>x({...u,email_address:E.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"contato@empresa.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Remetente *"}),e.jsx("input",{type:"text",required:!0,value:u.sender_name,onChange:E=>x({...u,sender_name:E.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Empresa LTDA"})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Configuraes de Envio (SMTP)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Servidor SMTP *"}),e.jsx("input",{type:"text",required:!0,value:u.smtp_host,onChange:E=>x({...u,smtp_host:E.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"smtp.gmail.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Porta SMTP *"}),e.jsx("input",{type:"number",required:!0,value:u.smtp_port,onChange:E=>x({...u,smtp_port:parseInt(E.target.value)}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Usurio SMTP *"}),e.jsx("input",{type:"text",required:!0,value:u.smtp_user,onChange:E=>x({...u,smtp_user:E.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Senha SMTP *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:d?"text":"password",required:!0,value:u.smtp_password,onChange:E=>x({...u,smtp_password:E.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{type:"button",onClick:()=>A(!d),className:"absolute right-2 top-2",children:d?e.jsx(Bl,{className:"h-5 w-5 text-gray-400"}):e.jsx($s,{className:"h-5 w-5 text-gray-400"})})]})]})]}),e.jsx("div",{className:"mt-3",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:u.smtp_secure,onChange:E=>x({...u,smtp_secure:E.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Usar conexo segura (TLS/SSL)"})]})})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Configuraes de Recebimento (IMAP) - Opcional"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Servidor IMAP"}),e.jsx("input",{type:"text",value:u.imap_host,onChange:E=>x({...u,imap_host:E.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"imap.gmail.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Porta IMAP"}),e.jsx("input",{type:"number",value:u.imap_port,onChange:E=>x({...u,imap_port:parseInt(E.target.value)}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Usurio IMAP"}),e.jsx("input",{type:"text",value:u.imap_user,onChange:E=>x({...u,imap_user:E.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Senha IMAP"}),e.jsx("input",{type:d?"text":"password",value:u.imap_password,onChange:E=>x({...u,imap_password:E.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assinatura de Email"}),e.jsx("textarea",{value:u.signature,onChange:E=>x({...u,signature:E.target.value}),rows:4,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:`Atenciosamente,
Sua Empresa
Tel: (11) 1234-5678`})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:u.is_default,onChange:E=>x({...u,is_default:E.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Conta padro"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:u.is_active,onChange:E=>x({...u,is_active:E.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Conta ativa"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:l?"Salvar Alteraes":"Criar Conta"}),e.jsx("button",{type:"button",onClick:v,className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancelar"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Contas Configuradas"}),t.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Cs,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"Nenhuma conta de email configurada"}),e.jsx("p",{className:"text-sm mt-1",children:'Clique em "Nova Conta" para adicionar'})]}):e.jsx("div",{className:"space-y-3",children:t.map(E=>e.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-lg",children:E.account_name}),E.is_default&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded",children:"Padro"}),!E.is_active&&e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:"Inativa"})]}),e.jsx("p",{className:"text-gray-600",children:E.email_address}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["SMTP: ",E.smtp_host,":",E.smtp_port,E.imap_host&&` | IMAP: ${E.imap_host}:${E.imap_port}`]})]}),e.jsxs("div",{className:"flex gap-2",children:[!E.is_default&&e.jsx("button",{onClick:()=>p(E.id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Definir como padro",children:e.jsx(As,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>g(E),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",title:"Editar",children:e.jsx(xr,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>b(E.id,E.email_address),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Excluir",children:e.jsx(Vt,{className:"h-5 w-5"})})]})]})},E.id))})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:" Dicas de Configurao"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:' Para Gmail: Ative "Acesso a apps menos seguros" ou use "Senhas de app"'}),e.jsx("li",{children:" Para Outlook/Hotmail: Use smtp-mail.outlook.com na porta 587"}),e.jsx("li",{children:" Para domnios prprios: Consulte seu provedor de hospedagem"}),e.jsx("li",{children:" Recomendamos sempre usar conexo segura (TLS/SSL)"})]})]})]})})},sM=()=>{const s=ys(),[t,a]=j.useState([]),[r,n]=j.useState(!0),[i,o]=j.useState(!1),[l,c]=j.useState("inbox"),[d,A]=j.useState(""),[u,x]=j.useState(null);j.useEffect(()=>{m()},[l]);const m=async()=>{try{n(!0);let S=se.from("email_messages").select("*").order("created_at",{ascending:!1});l==="inbox"?S=S.eq("direction","received").eq("is_archived",!1):l==="sent"?S=S.eq("direction","sent"):l==="starred"?S=S.eq("is_starred",!0):l==="archived"&&(S=S.eq("is_archived",!0));const{data:E,error:R}=await S;if(R){console.error("Error loading messages:",R),a([]);return}a(E||[])}catch(S){console.error("Error loading messages:",S),a([])}finally{n(!1)}},y=async()=>{try{o(!0);const R=await fetch("https://hevvpugkhcmujiyncysq.supabase.co/functions/v1/fetch-imap-emails",{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhldnZwdWdraGNtdWppeW5jeXNxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3NjkwNDAsImV4cCI6MjA3NTM0NTA0MH0.THnFgVOEDqtcVTcEyzfSwvjvlkfxJjRmSZtn2woIYEs","Content-Type":"application/json"},body:JSON.stringify({})}),_=await R.json();if(!R.ok)throw new Error(_.error||"Erro ao sincronizar emails");alert(_.message||"Sincronizao realizada com sucesso!"),await m()}catch(S){console.error("Erro ao sincronizar:",S),alert(`Erro ao sincronizar emails: ${S.message}`)}finally{o(!1)}},g=async(S,E)=>{try{const{error:R}=await se.from("email_messages").update({is_read:E,read_at:E?new Date().toISOString():null}).eq("id",S);if(R)throw R;m()}catch(R){console.error("Error updating message:",R)}},b=async(S,E)=>{try{const{error:R}=await se.from("email_messages").update({is_starred:!E}).eq("id",S);if(R)throw R;m()}catch(R){console.error("Error updating message:",R)}},p=async S=>{try{const{error:E}=await se.from("email_messages").update({is_archived:!0}).eq("id",S);if(E)throw E;m(),x(null)}catch(E){console.error("Error archiving message:",E)}},v=async S=>{if(confirm("Deseja realmente excluir esta mensagem?"))try{const{error:E}=await se.from("email_messages").delete().eq("id",S);if(E)throw E;m(),x(null)}catch(E){console.error("Error deleting message:",E)}},N=t.filter(S=>{var E,R,_;return((E=S.subject)==null?void 0:E.toLowerCase().includes(d.toLowerCase()))||((R=S.from_address)==null?void 0:R.toLowerCase().includes(d.toLowerCase()))||((_=S.from_name)==null?void 0:_.toLowerCase().includes(d.toLowerCase()))}),D=S=>{switch(S){case"inbox":return t.filter(E=>E.direction==="received"&&!E.is_archived).length;case"sent":return t.filter(E=>E.direction==="sent").length;case"starred":return t.filter(E=>E.is_starred).length;case"archived":return t.filter(E=>E.is_archived).length;default:return t.length}};return r?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(bs,{className:"h-8 w-8 animate-spin text-blue-600"})}):e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"flex h-screen",children:[e.jsxs("div",{className:"w-64 bg-white border-r border-gray-200 p-4",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(dn,{to:"/email/compose",className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2 font-medium",children:[e.jsx(bt,{className:"h-5 w-5"}),"Novo Email"]})}),e.jsxs("nav",{className:"space-y-1",children:[e.jsxs("button",{onClick:()=>c("inbox"),className:`w-full flex items-center gap-3 px-4 py-2 rounded-lg text-left ${l==="inbox"?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(f6,{className:"h-5 w-5"}),e.jsx("span",{children:"Caixa de Entrada"}),e.jsx("span",{className:"ml-auto text-sm font-medium",children:D("inbox")})]}),e.jsxs("button",{onClick:()=>c("sent"),className:`w-full flex items-center gap-3 px-4 py-2 rounded-lg text-left ${l==="sent"?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(Ma,{className:"h-5 w-5"}),e.jsx("span",{children:"Enviados"}),e.jsx("span",{className:"ml-auto text-sm font-medium",children:D("sent")})]}),e.jsxs("button",{onClick:()=>c("starred"),className:`w-full flex items-center gap-3 px-4 py-2 rounded-lg text-left ${l==="starred"?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(qs,{className:"h-5 w-5"}),e.jsx("span",{children:"Com Estrela"}),e.jsx("span",{className:"ml-auto text-sm font-medium",children:D("starred")})]}),e.jsxs("button",{onClick:()=>c("archived"),className:`w-full flex items-center gap-3 px-4 py-2 rounded-lg text-left ${l==="archived"?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(r0,{className:"h-5 w-5"}),e.jsx("span",{children:"Arquivados"}),e.jsx("span",{className:"ml-auto text-sm font-medium",children:D("archived")})]})]}),e.jsx("div",{className:"mt-6 pt-6 border-t",children:e.jsxs(dn,{to:"/email/settings",className:"text-sm text-blue-600 hover:text-blue-700 flex items-center gap-2",children:[e.jsx(Cs,{className:"h-4 w-4"}),"Configuraes de Email"]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Qt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Pesquisar emails...",value:d,onChange:S=>A(S.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsx("button",{onClick:m,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",title:"Atualizar",children:e.jsx(bs,{className:"h-5 w-5"})}),e.jsxs("button",{onClick:y,disabled:i,className:"px-3 py-2 text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 rounded-lg flex items-center gap-2 font-medium transition-colors",title:"Sincronizar emails do servidor",children:[e.jsx(bs,{className:`h-4 w-4 ${i?"animate-spin":""}`}),i?"Sincronizando...":"Sincronizar"]}),e.jsxs("button",{onClick:()=>s("/"),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg flex items-center gap-2 font-medium transition-colors",title:"Voltar ao Dashboard",children:[e.jsx(An,{className:"h-5 w-5"}),"Voltar ao Sistema"]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50",children:N.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[e.jsx(Cs,{className:"h-16 w-16 mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg",children:"Nenhuma mensagem encontrada"}),e.jsxs("p",{className:"text-sm mt-1",children:[l==="inbox"&&"Sua caixa de entrada est vazia",l==="sent"&&"Voc ainda no enviou nenhum email",l==="starred"&&"Nenhuma mensagem marcada com estrela",l==="archived"&&"Nenhuma mensagem arquivada"]})]}):e.jsx("div",{className:"divide-y",children:N.map(S=>{var E;return e.jsx("div",{onClick:()=>{x(S),!S.is_read&&S.direction==="received"&&g(S.id,!0)},className:`p-4 cursor-pointer hover:bg-gray-100 transition-colors ${!S.is_read&&S.direction==="received"?"bg-blue-50":"bg-white"} ${(u==null?void 0:u.id)===S.id?"border-l-4 border-blue-600":""}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("button",{onClick:R=>{R.stopPropagation(),b(S.id,S.is_starred)},className:"mt-1",children:e.jsx(qs,{className:`h-5 w-5 ${S.is_starred?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:`font-medium truncate ${!S.is_read&&S.direction==="received"?"text-gray-900 font-semibold":"text-gray-700"}`,children:[S.direction==="sent"?"Para: ":"",S.from_name||S.from_address]}),e.jsx("p",{className:`text-sm truncate ${!S.is_read&&S.direction==="received"?"text-gray-900 font-medium":"text-gray-600"}`,children:S.subject})]}),e.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:new Date(S.created_at).toLocaleDateString("pt-BR")})]}),e.jsxs("p",{className:"text-sm text-gray-500 truncate",children:[(E=S.body_text)==null?void 0:E.substring(0,100),"..."]})]})]})},S.id)})})})]}),u&&e.jsxs("div",{className:"w-2/5 bg-white border-l border-gray-200 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold truncate",children:u.subject}),e.jsx("button",{onClick:()=>x(null),className:"text-gray-500 hover:text-gray-700",children:""})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("button",{onClick:()=>p(u.id),className:"px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg flex items-center gap-2",children:[e.jsx(r0,{className:"h-4 w-4"}),"Arquivar"]}),e.jsxs("button",{onClick:()=>v(u.id),className:"px-3 py-1.5 text-sm bg-red-50 text-red-600 hover:bg-red-100 rounded-lg flex items-center gap-2",children:[e.jsx(Vt,{className:"h-4 w-4"}),"Excluir"]})]}),e.jsxs("div",{className:"text-sm space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"De:"})," ",e.jsxs("span",{className:"text-gray-600",children:[u.from_name," <",u.from_address,">"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Data:"})," ",e.jsx("span",{className:"text-gray-600",children:new Date(u.created_at).toLocaleString("pt-BR")})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:u.body_html?e.jsx("div",{dangerouslySetInnerHTML:{__html:u.body_html}}):e.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-700",children:u.body_text})})]})]})})},aM=()=>{const s=ys(),[t,a]=j.useState(!1),[r,n]=j.useState([]),[i,o]=j.useState([]),[l,c]=j.useState({account_id:"",to:"",cc:"",bcc:"",subject:"",body_text:"",body_html:""});j.useEffect(()=>{d(),A()},[]);const d=async()=>{try{const{data:m,error:y}=await se.from("email_accounts").select("id, account_name, email_address, sender_name").eq("is_active",!0).order("is_default",{ascending:!1});if(y)throw y;n(m||[]),m&&m.length>0&&c(g=>({...g,account_id:m[0].id}))}catch(m){console.error("Error loading accounts:",m)}},A=async()=>{try{const{data:m,error:y}=await se.from("email_templates").select("id, name, subject, body_html, body_text").eq("is_active",!0).order("name");if(y)throw y;o(m||[])}catch(m){console.error("Error loading templates:",m)}},u=m=>{const y=i.find(g=>g.id===m);y&&c(g=>({...g,subject:y.subject,body_text:y.body_text,body_html:y.body_html}))},x=async m=>{if(m.preventDefault(),!l.to||!l.subject||!l.body_text&&!l.body_html){alert("Preencha todos os campos obrigatrios");return}a(!0);try{const{data:y,error:g}=await se.functions.invoke("send-smtp-email",{body:{account_id:l.account_id,to:l.to.split(",").map(b=>b.trim()).filter(b=>b),cc:l.cc?l.cc.split(",").map(b=>b.trim()).filter(b=>b):void 0,bcc:l.bcc?l.bcc.split(",").map(b=>b.trim()).filter(b=>b):void 0,subject:l.subject,body_text:l.body_text,body_html:l.body_html}});if(console.log("Email function response:",{result:y,error:g}),g){const b=g.message||"Erro desconhecido";throw console.error("Edge function error:",g),new Error(b)}if(!(y!=null&&y.success)){const b=(y==null?void 0:y.error)||"Erro ao enviar email";throw console.error("Email sending failed:",y),new Error(b)}alert("Email enviado com sucesso!"),s("/email/inbox")}catch(y){console.error("Error sending email:",y);const g=y.message||"Erro desconhecido";alert(`Erro ao enviar email:

${g}

Verifique se a conta de email est configurada corretamente nas Configuraes de Email.`)}finally{a(!1)}};return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Novo Email"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>s("/"),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg flex items-center gap-2 font-medium transition-colors",title:"Voltar ao Dashboard",children:[e.jsx(An,{className:"h-5 w-5"}),"Voltar ao Sistema"]}),e.jsx("button",{onClick:()=>s("/email/inbox"),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",children:e.jsx(ht,{className:"h-5 w-5"})})]})]})}),e.jsxs("form",{onSubmit:x,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"De (Conta de Email) *"}),e.jsxs("select",{required:!0,value:l.account_id,onChange:m=>c({...l,account_id:m.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione uma conta"}),r.map(m=>e.jsxs("option",{value:m.id,children:[m.account_name," (",m.email_address,")"]},m.id))]}),r.length===0&&e.jsx("p",{className:"text-sm text-orange-600 mt-1",children:"Nenhuma conta configurada. Configure em Configuraes de Email."})]}),i.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Usar Template (Opcional)"}),e.jsxs("select",{onChange:m=>m.target.value&&u(m.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",defaultValue:"",children:[e.jsx("option",{value:"",children:"Nenhum template"}),i.map(m=>e.jsx("option",{value:m.id,children:m.name},m.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Para * ",e.jsx("span",{className:"text-xs text-gray-500",children:"(separe mltiplos emails com vrgula)"})]}),e.jsx("input",{type:"text",required:!0,value:l.to,onChange:m=>c({...l,to:m.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"destinatario@email.com, outro@email.com"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["CC ",e.jsx("span",{className:"text-xs text-gray-500",children:"(cpia)"})]}),e.jsx("input",{type:"text",value:l.cc,onChange:m=>c({...l,cc:m.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"copia@email.com"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["CCO ",e.jsx("span",{className:"text-xs text-gray-500",children:"(cpia oculta)"})]}),e.jsx("input",{type:"text",value:l.bcc,onChange:m=>c({...l,bcc:m.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"copia.oculta@email.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assunto *"}),e.jsx("input",{type:"text",required:!0,value:l.subject,onChange:m=>c({...l,subject:m.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Assunto do email"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensagem *"}),e.jsx("textarea",{required:!0,value:l.body_text,onChange:m=>c({...l,body_text:m.target.value}),rows:12,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 font-mono text-sm",placeholder:"Digite a mensagem do email..."}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"A assinatura configurada ser adicionada automaticamente"})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsx("button",{type:"submit",disabled:t||r.length===0,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center gap-2 font-medium",children:t?e.jsxs(e.Fragment,{children:[e.jsx(Dl,{className:"h-5 w-5 animate-spin"}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ma,{className:"h-5 w-5"}),"Enviar Email"]})}),e.jsx("button",{type:"button",onClick:()=>s("/email/inbox"),className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancelar"})]})]})]}),e.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:" Dicas"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:" Use templates para agilizar o envio de emails recorrentes"}),e.jsx("li",{children:" Para enviar para mltiplos destinatrios, separe os emails com vrgula"}),e.jsx("li",{children:" A assinatura da conta ser adicionada automaticamente ao final"}),e.jsx("li",{children:" Verifique se a conta SMTP est configurada corretamente"})]})]})]})})};class fv{static async sendMessage(t){return{response:""}}}const rM={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 ms",other:"cerca de {{count}} meses"},xMonths:{one:"1 ms",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},nM=(s,t,a)=>{let r;const n=rM[s];return typeof n=="string"?r=n:t===1?r=n.one:r=n.other.replace("{{count}}",String(t)),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"em "+r:"h "+r:r},iM={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},oM={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},lM={full:"{{date}} 's' {{time}}",long:"{{date}} 's' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},cM={date:bh({formats:iM,defaultWidth:"full"}),time:bh({formats:oM,defaultWidth:"full"}),dateTime:bh({formats:lM,defaultWidth:"full"})},dM={lastWeek:s=>{const t=s.getDay();return"'"+(t===0||t===6?"ltimo":"ltima")+"' eeee 's' p"},yesterday:"'ontem s' p",today:"'hoje s' p",tomorrow:"'amanh s' p",nextWeek:"eeee 's' p",other:"P"},AM=(s,t,a,r)=>{const n=dM[s];return typeof n=="function"?n(t):n},uM={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},mM={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},hM={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},xM={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","tera","quarta","quinta","sexta","sbado"],wide:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},pM={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"}},gM={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},fM=(s,t)=>{const a=Number(s);return(t==null?void 0:t.unit)==="week"?a+"":a+""},bM={ordinalNumber:fM,era:hc({values:uM,defaultWidth:"wide"}),quarter:hc({values:mM,defaultWidth:"wide",argumentCallback:s=>s-1}),month:hc({values:hM,defaultWidth:"wide"}),day:hc({values:xM,defaultWidth:"wide"}),dayPeriod:hc({values:pM,defaultWidth:"wide",formattingValues:gM,defaultFormattingWidth:"wide"})},yM=/^(\d+)[o]?/i,vM=/\d+/i,wM={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},jM={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},NM={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},_M={any:[/1/i,/2/i,/3/i,/4/i]},CM={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|maro|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},BM={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},SM={narrow:/^(dom|[23456]?|s[a]b)/i,short:/^(dom|[23456]?|s[a]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[a]b)/i,wide:/^(domingo|(segunda|ter[c]a|quarta|quinta|sexta)([- ]feira)?|s[a]bado)/i},kM={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[a]b/i]},EM={narrow:/^(a|p|mn|md|(da) (manh|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manh|tarde|noite))/i},FM={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manh/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},UM={ordinalNumber:LN({matchPattern:yM,parsePattern:vM,valueCallback:s=>parseInt(s,10)}),era:xc({matchPatterns:wM,defaultMatchWidth:"wide",parsePatterns:jM,defaultParseWidth:"any"}),quarter:xc({matchPatterns:NM,defaultMatchWidth:"wide",parsePatterns:_M,defaultParseWidth:"any",valueCallback:s=>s+1}),month:xc({matchPatterns:CM,defaultMatchWidth:"wide",parsePatterns:BM,defaultParseWidth:"any"}),day:xc({matchPatterns:SM,defaultMatchWidth:"wide",parsePatterns:kM,defaultParseWidth:"any"}),dayPeriod:xc({matchPatterns:EM,defaultMatchWidth:"any",parsePatterns:FM,defaultParseWidth:"any"})},va={code:"pt-BR",formatDistance:nM,formatLong:cM,formatRelative:AM,localize:bM,match:UM,options:{weekStartsOn:0,firstWeekContainsDate:1}};function DM(){const[s,t]=j.useState(!1),[a,r]=j.useState([]),[n,i]=j.useState(""),[o,l]=j.useState(!1),[c,d]=j.useState(!1),[A,u]=j.useState(null),x=j.useRef(null),m=j.useRef(null);j.useEffect(()=>{s&&!A&&y()},[s]),j.useEffect(()=>{g()},[a]),j.useEffect(()=>{s&&m.current&&m.current.focus()},[s]);const y=async()=>{const S=new fv(void 0,"user",void 0);u(S);const E=new Date().getHours(),R=E<12?"Bom dia":E<18?"Boa tarde":"Boa noite";r([{id:`msg_${Date.now()}`,role:"assistant",content:`${R}! Sou o Thomaz, seu consultor empresarial.

Posso ajudar com anlises financeiras, procedimentos operacionais, consultoria estratgica e muito mais.

Sobre o que precisa conversar?`,timestamp:new Date}])},g=()=>{var S;(S=x.current)==null||S.scrollIntoView({behavior:"smooth"})},b=async S=>{d(!0);const E=S.split(" ").length,R=Math.min(E*50,2e3);await new Promise(_=>setTimeout(_,R)),d(!1)},p=async()=>{r([]),i(""),l(!0);try{const S=new fv;u(S);const E=new Date().getHours(),R=E<12?"Bom dia":E<18?"Boa tarde":"Boa noite",_={id:`msg_${Date.now()}_welcome`,role:"assistant",content:`${R}! Nova conversa iniciada. Como posso ajudar?`,timestamp:new Date};r([_])}catch(S){console.error("Erro ao reiniciar chat:",S)}finally{l(!1)}},v=async S=>{const E=n.trim();if(!E||!A)return;i("");const R={id:`msg_${Date.now()}_user`,role:"user",content:E,timestamp:new Date};r(_=>[..._,R]),l(!0);try{await b(E);const _=await A.processMessage(E),C={id:`msg_${Date.now()}_assistant`,role:"assistant",content:_.response,timestamp:new Date};r(L=>[...L,C])}catch(_){console.error("Erro ao processar mensagem:",_);const C={id:`msg_${Date.now()}_error`,role:"assistant",content:`Desculpe, tive um problema ao processar sua solicitao. 

Pode tentar novamente?`,timestamp:new Date};r(L=>[...L,C])}finally{l(!1)}},N=S=>{navigator.clipboard.writeText(S)},D=S=>S.split(`
`).map((E,R)=>{if(E.startsWith("**")&&E.endsWith("**")){const _=E.slice(2,-2);return e.jsx("div",{className:"font-bold text-lg mb-2",children:_},R)}return E.startsWith("")||E.startsWith("-")?e.jsxs("div",{className:"ml-4 my-1",children:[" ",E.slice(1).trim()]},R):E.trim()?e.jsx("div",{className:"my-1",children:E},R):e.jsx("div",{className:"h-2"},R)});return s?e.jsx(rt,{children:e.jsxs(W.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},className:"fixed bottom-6 right-6 w-[450px] h-[700px] bg-white rounded-2xl shadow-2xl flex flex-col z-50 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center",children:e.jsx(jA,{className:"w-7 h-7 text-blue-600"})}),e.jsx(W.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:2},className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-400 rounded-full border-2 border-white"})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-2",children:["Thomaz",e.jsx(hr,{className:"w-4 h-4 text-yellow-300"})]}),e.jsx("p",{className:"text-xs text-blue-100",children:"Consultor Snior - Especialista em Gesto"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[a.length>1&&e.jsx(W.button,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:p,className:"text-white/80 hover:text-white transition-colors p-2 hover:bg-white/10 rounded-lg",title:"Reiniciar conversa",children:e.jsx(Zp,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>t(!1),className:"text-white/80 hover:text-white transition-colors p-2 hover:bg-white/10 rounded-lg",children:e.jsx(ht,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[a.map(S=>e.jsxs(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex gap-3 ${S.role==="user"?"flex-row-reverse":"flex-row"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${S.role==="user"?"bg-blue-600":"bg-gradient-to-br from-purple-600 to-blue-600"}`,children:S.role==="user"?e.jsx(Jt,{className:"w-5 h-5 text-white"}):e.jsx(jA,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:`flex-1 ${S.role==="user"?"items-end":"items-start"} flex flex-col`,children:[e.jsx("div",{className:`max-w-[85%] rounded-2xl p-4 shadow-sm ${S.role==="user"?"bg-gradient-to-br from-blue-600 to-blue-700 text-white rounded-br-none":"bg-gradient-to-br from-white to-gray-50 border border-gray-200 text-gray-900 rounded-bl-none"}`,children:e.jsx("div",{className:"text-sm whitespace-pre-wrap",children:D(S.content)})}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 px-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:Zt(S.timestamp,"HH:mm",{locale:va})}),S.role==="assistant"&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>N(S.content),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",title:"Copiar",children:e.jsx(Gr,{className:"w-3 h-3"})}),e.jsx("button",{className:"p-1 text-gray-400 hover:text-green-600 transition-colors",title:"til",children:e.jsx(JS,{className:"w-3 h-3"})}),e.jsx("button",{className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"No til",children:e.jsx(GS,{className:"w-3 h-3"})})]})]})]})]},S.id)),c&&e.jsxs(W.div,{initial:{opacity:0},animate:{opacity:1},className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-600 to-blue-600 flex items-center justify-center",children:e.jsx(jA,{className:"w-5 h-5 text-white"})}),e.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-2xl rounded-bl-none p-3",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(W.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:.6,delay:0},className:"w-2 h-2 bg-gray-400 rounded-full"}),e.jsx(W.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:.6,delay:.2},className:"w-2 h-2 bg-gray-400 rounded-full"}),e.jsx(W.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:.6,delay:.4},className:"w-2 h-2 bg-gray-400 rounded-full"})]})})]}),e.jsx("div",{ref:x})]}),e.jsxs("div",{className:"p-4 bg-white border-t",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{ref:m,type:"text",value:n,onChange:S=>i(S.target.value),onKeyPress:S=>S.key==="Enter"&&!o&&v(),placeholder:"Fale comigo naturalmente...",disabled:o,className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all disabled:opacity-50 disabled:cursor-not-allowed text-base"}),e.jsx("button",{onClick:()=>v(),disabled:o||!n.trim(),className:"px-4 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center",children:o?e.jsx(Dl,{className:"w-5 h-5 animate-spin"}):e.jsx(Ma,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Conversa criptografada e segura  Dados em tempo real"})]})]})}):e.jsxs(W.button,{initial:{scale:0},animate:{scale:1},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>t(!0),className:"fixed bottom-6 right-6 w-16 h-16 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-full shadow-2xl flex items-center justify-center z-50 hover:shadow-blue-500/50 transition-all",children:[e.jsx(jA,{className:"w-8 h-8"}),e.jsx(W.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{repeat:1/0,duration:2},className:"absolute -top-1 -right-1 w-4 h-4 bg-green-400 rounded-full"})]})}function IM(){const[s,t]=j.useState(!1),[a,r]=j.useState(!1),[n,i]=j.useState([]),[o,l]=j.useState(""),[c,d]=j.useState(!1),[A]=j.useState(crypto.randomUUID()),u=j.useRef(null);j.useEffect(()=>{x()},[n]),j.useEffect(()=>{s&&n.length===0&&i([{id:"welcome",role:"assistant",content:` Ol! Sou o **Assistente Giartech**, sua inteligncia corporativa.

Posso ajud-lo com:

 **Financeiro** - Receitas, despesas, DRE e anlises
 **Ordens de Servio** - Status, anlises e insights
 **Estoque** - Inventrio e alertas
 **Clientes** - CRM e base de dados
 **Equipe** - Colaboradores e performance
 **Indicadores** - KPIs e dashboards
 **Agenda** - Compromissos e eventos

Como posso ajud-lo hoje?`,timestamp:new Date().toISOString()}])},[s]);const x=()=>{var p;(p=u.current)==null||p.scrollIntoView({behavior:"smooth"})},m=async()=>{if(!o.trim()||c)return;const p=o.trim();l("");const v={id:`user-${Date.now()}`,role:"user",content:p,timestamp:new Date().toISOString()};i(N=>[...N,v]),d(!0);try{const S=await(await fetch("https://hevvpugkhcmujiyncysq.supabase.co/functions/v1/giartech-assistant",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhldnZwdWdraGNtdWppeW5jeXNxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3NjkwNDAsImV4cCI6MjA3NTM0NTA0MH0.THnFgVOEDqtcVTcEyzfSwvjvlkfxJjRmSZtn2woIYEs"},body:JSON.stringify({message:p,conversationId:A,userId:"current-user"})})).json();if(S.success&&S.response){const E={id:`assistant-${Date.now()}`,role:"assistant",content:S.response,timestamp:S.timestamp,intent:S.intent};i(R=>[...R,E])}else throw new Error(S.error||"Erro ao processar mensagem")}catch(N){console.error("Error:",N);const D={id:`error-${Date.now()}`,role:"assistant",content:" Desculpe, ocorreu um erro ao processar sua mensagem. Por favor, tente novamente.",timestamp:new Date().toISOString()};i(S=>[...S,D])}finally{d(!1)}},y=[{icon:Ut,text:"Como est o financeiro?",color:"text-green-600"},{icon:zt,text:"Quantas OSs temos hoje?",color:"text-blue-600"},{icon:Ot,text:"O que tenho na agenda hoje?",color:"text-indigo-600"},{icon:wt,text:"Qual o status do estoque?",color:"text-orange-600"}],g=p=>{l(p)},b=p=>{switch(p){case"financial":return"";case"serviceOrders":return"";case"inventory":return"";case"clients":return"";case"employees":return"";case"analytics":return"";case"calendar":return"";default:return""}};return s?e.jsxs(W.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:`fixed z-50 bg-white rounded-2xl shadow-2xl border border-gray-200 flex flex-col ${a?"bottom-6 right-6 w-80 h-16":"bottom-6 right-6 w-[450px] h-[650px]"}`,style:{maxHeight:"calc(100vh - 100px)"},children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 text-white px-4 py-3 rounded-t-2xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(hr,{className:"h-6 w-6"}),e.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-green-400 rounded-full animate-pulse"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-sm",children:"Assistente Giartech"}),e.jsx("p",{className:"text-xs text-blue-100",children:"Inteligncia Corporativa"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>r(!a),className:"p-1 hover:bg-white/20 rounded-lg transition-colors",children:a?e.jsx(R6,{className:"h-4 w-4"}):e.jsx(J6,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>t(!1),className:"p-1 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(ht,{className:"h-4 w-4"})})]})]}),!a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[n.map(p=>e.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex ${p.role==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] rounded-2xl px-4 py-3 ${p.role==="user"?"bg-blue-600 text-white":"bg-white border border-gray-200 text-gray-900"}`,children:[p.role==="assistant"&&p.intent&&e.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:[b(p.intent)," ",p.intent]}),e.jsx("div",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:p.content.split(`
`).map((v,N)=>{let D=v;return D=D.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),D=D.replace(/\*(.*?)\*/g,"<em>$1</em>"),e.jsxs("span",{children:[e.jsx("span",{dangerouslySetInnerHTML:{__html:D}}),N<p.content.split(`
`).length-1&&e.jsx("br",{})]},N)})}),e.jsx("div",{className:`text-xs mt-2 ${p.role==="user"?"text-blue-100":"text-gray-400"}`,children:new Date(p.timestamp).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]})},p.id)),c&&e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-start",children:e.jsx("div",{className:"bg-white border border-gray-200 rounded-2xl px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),e.jsx("div",{ref:u})]}),n.length===1&&e.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 bg-white",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2 font-medium",children:"Perguntas rpidas:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:y.map((p,v)=>e.jsxs("button",{onClick:()=>g(p.text),className:"flex items-center gap-2 px-3 py-2 bg-gray-50 hover:bg-gray-100 rounded-lg text-xs text-left transition-colors border border-gray-200",children:[e.jsx(p.icon,{className:`h-4 w-4 ${p.color} flex-shrink-0`}),e.jsx("span",{className:"text-gray-700 line-clamp-2",children:p.text})]},v))})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200 bg-white rounded-b-2xl",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:o,onChange:p=>l(p.target.value),onKeyPress:p=>p.key==="Enter"&&!p.shiftKey&&m(),placeholder:"Digite sua pergunta...",disabled:c,className:"flex-1 px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50 disabled:text-gray-400 text-sm"}),e.jsx("button",{onClick:m,disabled:!o.trim()||c,className:"bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-700 hover:to-indigo-800 disabled:from-gray-300 disabled:to-gray-400 text-white p-3 rounded-xl transition-all duration-200 disabled:cursor-not-allowed",children:e.jsx(Ma,{className:"h-5 w-5"})})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-2 text-center",children:"Powered by Giartech Intelligence"})]})]})]}):e.jsxs(W.button,{initial:{scale:0},animate:{scale:1},onClick:()=>t(!0),className:"fixed bottom-6 right-6 z-50 bg-gradient-to-br from-blue-600 to-indigo-700 text-white p-4 rounded-full shadow-2xl hover:shadow-3xl transition-all duration-300 group",children:[e.jsxs("div",{className:"relative",children:[e.jsx(hr,{className:"h-7 w-7 animate-pulse"}),e.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full animate-ping"}),e.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full"})]}),e.jsx("div",{className:"absolute bottom-full right-0 mb-2 px-3 py-1 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:"Assistente Giartech"})]})}class LM{async reason(t){return{result:""}}}function TM({userId:s,userRole:t="user",companyId:a,userName:r}){const[n,i]=j.useState([]),[o,l]=j.useState(""),[c,d]=j.useState(!1),[A,u]=j.useState(""),[x]=j.useState(()=>new LM),[m,y]=j.useState(null),[g,b]=j.useState(null),p=j.useRef(null),v=j.useRef(null),N=j.useRef(null);j.useEffect(()=>{D()},[]),j.useEffect(()=>{S()},[n,A]),j.useEffect(()=>{E()},[o]);const D=async()=>{const F=new Date().getHours(),Z=`${F<12?"Bom dia":F<18?"Boa tarde":"Boa noite"}, ${r||"colega"}! 

Sou o **Thomaz**, a inteligncia artificial da Giartech. Trabalho aqui como consultor empresarial e estou pronto para conversar sobre qualquer aspecto da nossa operao.

**Posso ajudar com:**
 Anlise financeira e estratgica
 Processos operacionais e melhores prticas
 Gerao de documentos e relatrios
 Consultas sobre clientes, ordens de servio e projetos
 Insights sobre o negcio e oportunidades

**Como funciono:**
Tenho acesso profundo a toda nossa base de conhecimento, **dados em tempo real** do sistema e experincia em gesto empresarial. Penso, analiso e respondo como um consultor especializado.

**Experimente perguntar:**
 "Mostre o dashboard geral da empresa"
 "Quantas ordens de servio temos abertas?"
 "Qual o status financeiro este ms?"
 "Quais itens esto em baixa no estoque?"

O que precisa hoje? Pode conversar naturalmente comigo, como faria com qualquer colega de trabalho.`;i([{id:`msg_${Date.now()}`,role:"assistant",content:Z,timestamp:new Date,confidence:"high"}])},S=()=>{var F;(F=p.current)==null||F.scrollIntoView({behavior:"smooth"})},E=()=>{const F=v.current;F&&(F.style.height="auto",F.style.height=Math.min(F.scrollHeight,150)+"px")},R=async()=>{if(!o.trim()||c)return;const F={id:`msg_${Date.now()}`,role:"user",content:o.trim(),timestamp:new Date};i(M=>[...M,F]),l(""),d(!0),u("");try{const M=["Analisando sua solicitao...","Buscando informaes relevantes...","Consultando base de conhecimento...","Processando dados em tempo real...","Formulando resposta..."];for(const O of M)u(O),await new Promise(X=>setTimeout(X,300));const P=await x.reason({userMessage:F.content,conversationHistory:n.map(O=>({role:O.role,content:O.content})),userRole:t,companyContext:{userId:s,companyId:a}});u("");const Z={id:`msg_${Date.now()+1}`,role:"assistant",content:P.response.answer,timestamp:new Date,confidence:P.response.confidence>.8?"high":P.response.confidence>.6?"medium":"low",sources:[],thinking:P.reasoning.thoughtProcess.join("  "),realData:P.realData};await _(Z)}catch(M){console.error("Erro ao processar mensagem:",M);const P={id:`msg_${Date.now()+1}`,role:"assistant",content:"Desculpe, encontrei um problema ao processar sua solicitao. Poderia reformular ou tentar novamente?",timestamp:new Date,confidence:"low"};i(Z=>[...Z,P])}finally{d(!1),u("")}},_=async F=>{const M=F.content.split(" ");let P="";const Z={...F,content:"",isStreaming:!0};i(O=>[...O,Z]);for(let O=0;O<M.length;O++){P+=(O>0?" ":"")+M[O],i(q=>{const V=[...q],oe=V.length-1;return V[oe]={...V[oe],content:P},V});const X=M[O].length>8?40:20;await new Promise(q=>setTimeout(q,X))}i(O=>{const X=[...O],q=X.length-1;return X[q]={...X[q],isStreaming:!1},X})},C=F=>{F.key==="Enter"&&!F.shiftKey&&(F.preventDefault(),R())},L=F=>{switch(F){case"high":return"text-green-600";case"medium":return"text-yellow-600";case"low":return"text-red-600";default:return"text-gray-600"}},f=F=>{switch(F){case"high":return"Alta confiana";case"medium":return"Confiana mdia";case"low":return"Baixa confiana";default:return""}};return e.jsxs("div",{className:"flex flex-col h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between max-w-5xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-800 rounded-xl flex items-center justify-center",children:e.jsx(xl,{className:"w-6 h-6 text-white"})}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Thomaz AI"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Consultor Empresarial  Giartech"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(hr,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{children:"Inteligncia Avanada"})]})]})}),e.jsx("div",{ref:N,className:"flex-1 overflow-y-auto px-4 py-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx(rt,{children:n.map((F,M)=>e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:`flex gap-4 ${F.role==="user"?"flex-row-reverse":"flex-row"}`,children:[e.jsx("div",{className:"flex-shrink-0",children:F.role==="assistant"?e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-600 to-blue-800 rounded-lg flex items-center justify-center",children:e.jsx(xl,{className:"w-5 h-5 text-white"})}):e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-gray-600 to-gray-800 rounded-lg flex items-center justify-center",children:e.jsx(Nt,{className:"w-5 h-5 text-white"})})}),e.jsxs("div",{className:`flex-1 ${F.role==="user"?"max-w-2xl ml-auto":"max-w-3xl"}`,children:[e.jsxs("div",{className:`rounded-2xl px-4 py-3 ${F.role==="user"?"bg-blue-600 text-white":"bg-white border border-gray-200 text-gray-900"}`,children:[e.jsx("div",{className:"prose prose-sm max-w-none",children:F.content.split(`
`).map((P,Z)=>P.startsWith("**")&&P.endsWith("**")?e.jsx("p",{className:"font-semibold mb-2",children:P.slice(2,-2)},Z):P.startsWith("")?e.jsx("li",{className:"ml-4",children:P.slice(1).trim()},Z):P?e.jsx("p",{className:"mb-2",children:P},Z):e.jsx("br",{},Z))}),F.isStreaming&&e.jsx(W.span,{animate:{opacity:[1,.5,1]},transition:{repeat:1/0,duration:1},className:"inline-block w-2 h-4 bg-blue-600 ml-1"})]}),F.role==="assistant"&&!F.isStreaming&&e.jsxs("div",{className:"flex items-center gap-3 mt-2 px-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:Zt(F.timestamp,"HH:mm",{locale:va})}),F.confidence&&e.jsxs("div",{className:`flex items-center gap-1 text-xs ${L(F.confidence)}`,children:[e.jsx(As,{className:"w-3 h-3"}),e.jsx("span",{children:f(F.confidence)})]}),F.sources&&F.sources.length>0&&e.jsxs("button",{onClick:()=>y(m===F.id?null:F.id),className:"flex items-center gap-1 text-xs text-blue-600 hover:text-blue-800",children:[e.jsx(ut,{className:"w-3 h-3"}),e.jsxs("span",{children:[F.sources.length," fontes"]}),e.jsx(Ir,{className:`w-3 h-3 transition-transform ${m===F.id?"rotate-180":""}`})]})]}),e.jsx(rt,{children:m===F.id&&F.sources&&e.jsxs(W.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"mt-2 bg-gray-50 rounded-lg p-3 border border-gray-200",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Fontes consultadas:"}),e.jsx("div",{className:"space-y-2",children:F.sources.map((P,Z)=>{var O;return e.jsx("div",{className:"text-xs text-gray-600 pl-3 border-l-2 border-blue-300",children:P.title||((O=P.content)==null?void 0:O.substring(0,100))+"..."},Z)})})]})})]})]},F.id))}),A&&e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex gap-4",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-600 to-blue-800 rounded-lg flex items-center justify-center",children:e.jsx(ro,{className:"w-5 h-5 text-white animate-spin"})}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"bg-white border border-gray-200 rounded-2xl px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Fs,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm italic",children:A})]})})})]}),e.jsx("div",{ref:p})]})}),e.jsx("div",{className:"bg-white border-t border-gray-200 px-4 py-4 shadow-lg",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-end gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("textarea",{ref:v,value:o,onChange:F=>l(F.target.value),onKeyDown:C,disabled:c,placeholder:"Converse naturalmente com o Thomaz... (Enter para enviar, Shift+Enter para nova linha)",className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none bg-white text-gray-900 placeholder-gray-500 disabled:bg-gray-50 disabled:text-gray-500",rows:1,style:{minHeight:"48px",maxHeight:"150px"}}),e.jsxs("div",{className:"absolute bottom-2 right-2 text-xs text-gray-400",children:[o.length,"/2000"]})]}),e.jsx(W.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:R,disabled:!o.trim()||c,className:`p-3 rounded-xl transition-all ${o.trim()&&!c?"bg-blue-600 hover:bg-blue-700 text-white shadow-lg shadow-blue-500/50":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:c?e.jsx(ro,{className:"w-5 h-5 animate-spin"}):e.jsx(Ma,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 px-2",children:[e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(hr,{className:"w-3 h-3"}),"Inteligncia contextual ativa"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(xl,{className:"w-3 h-3"}),"Raciocnio avanado"]})]}),e.jsx("span",{className:"text-xs text-gray-400",children:"Thomaz AI v2.0  Giartech"})]})]})})]})}function QM(){const{user:s}=rs();return e.jsx(TM,{userId:s==null?void 0:s.id,userRole:(s==null?void 0:s.role)||"user",companyId:void 0,userName:s==null?void 0:s.name})}function B1(s,t,a,r,n){r=r||{};var i=1.15,o=n.internal.scaleFactor,l=n.internal.getFontSize()/o,c=n.getLineHeightFactor?n.getLineHeightFactor():i,d=l*c,A=/\r\n|\r|\n/g,u="",x=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(u=typeof s=="string"?s.split(A):s,x=u.length||1),a+=l*(2-i),r.valign==="middle"?a-=x/2*d:r.valign==="bottom"&&(a-=x*d),r.halign==="center"||r.halign==="right"){var m=l;if(r.halign==="center"&&(m*=.5),u&&x>=1){for(var y=0;y<u.length;y++)n.text(u[y],t-n.getStringUnitWidth(u[y])*m,a),a+=d;return n}t-=n.getStringUnitWidth(s)*m}return r.halign==="justify"?n.text(s,t,a,{maxWidth:r.maxWidth||100,align:"justify"}):n.text(s,t,a),n}var bv={},Nl=function(){function s(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return s.setDefaults=function(t,a){a===void 0&&(a=null),a?a.__autoTableDocumentDefaults=t:bv=t},s.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},s.prototype.applyStyles=function(t,a){var r,n,i;a===void 0&&(a=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(t.font&&(c=t.font),t.fontStyle){l=t.fontStyle;var d=this.getFontList()[c];d&&d.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(d[0]),l=d[0])}if(this.jsPDFDocument.setFont(c,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!a){var A=s.unifyColor(t.fillColor);A&&(r=this.jsPDFDocument).setFillColor.apply(r,A),A=s.unifyColor(t.textColor),A&&(n=this.jsPDFDocument).setTextColor.apply(n,A),A=s.unifyColor(t.lineColor),A&&(i=this.jsPDFDocument).setDrawColor.apply(i,A),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},s.prototype.splitTextToSize=function(t,a,r){return this.jsPDFDocument.splitTextToSize(t,a,r)},s.prototype.rect=function(t,a,r,n,i){return this.jsPDFDocument.rect(t,a,r,n,i)},s.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},s.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},s.prototype.getDocument=function(){return this.jsPDFDocument},s.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},s.prototype.addPage=function(){return this.jsPDFDocument.addPage()},s.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},s.prototype.getGlobalOptions=function(){return bv||{}},s.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},s.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},s.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},s.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},s.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},s.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},s}(),tp=function(s,t){return tp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n])},tp(s,t)};function S1(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");tp(s,t);function a(){this.constructor=s}s.prototype=t===null?Object.create(t):(a.prototype=t.prototype,new a)}var k1=function(s){S1(t,s);function t(a){var r=s.call(this)||this;return r._element=a,r}return t}(Array);function PM(s){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/s,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function MM(s){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[s]}function Vu(s,t,a){a.applyStyles(t,!0);var r=Array.isArray(s)?s:[s],n=r.map(function(i){return a.getTextWidth(i)}).reduce(function(i,o){return Math.max(i,o)},0);return n}function E1(s,t,a,r){var n=t.settings.tableLineWidth,i=t.settings.tableLineColor;s.applyStyles({lineWidth:n,lineColor:i});var o=F1(n,!1);o&&s.rect(a.x,a.y,t.getWidth(s.pageSize().width),r.y-a.y,o)}function F1(s,t){var a=s>0,r=t||t===0;return a&&r?"DF":a?"S":r?"F":null}function km(s,t){var a,r,n,i;if(s=s||t,Array.isArray(s)){if(s.length>=4)return{top:s[0],right:s[1],bottom:s[2],left:s[3]};if(s.length===3)return{top:s[0],right:s[1],bottom:s[2],left:s[1]};if(s.length===2)return{top:s[0],right:s[1],bottom:s[0],left:s[1]};s.length===1?s=s[0]:s=t}return typeof s=="object"?(typeof s.vertical=="number"&&(s.top=s.vertical,s.bottom=s.vertical),typeof s.horizontal=="number"&&(s.right=s.horizontal,s.left=s.horizontal),{left:(a=s.left)!==null&&a!==void 0?a:t,top:(r=s.top)!==null&&r!==void 0?r:t,right:(n=s.right)!==null&&n!==void 0?n:t,bottom:(i=s.bottom)!==null&&i!==void 0?i:t}):(typeof s!="number"&&(s=t),{top:s,right:s,bottom:s,left:s})}function U1(s,t){var a=km(t.settings.margin,0);return s.pageSize().width-(a.left+a.right)}function RM(s,t,a,r,n){var i={},o=1.3333333333333333,l=Fx(t,function(N){return n.getComputedStyle(N).backgroundColor});l!=null&&(i.fillColor=l);var c=Fx(t,function(N){return n.getComputedStyle(N).color});c!=null&&(i.textColor=c);var d=HM(r,a);d&&(i.cellPadding=d);var A="borderTopColor",u=o*a,x=r.borderTopWidth;if(r.borderBottomWidth===x&&r.borderRightWidth===x&&r.borderLeftWidth===x){var m=(parseFloat(x)||0)/u;m&&(i.lineWidth=m)}else i.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/u,right:(parseFloat(r.borderRightWidth)||0)/u,bottom:(parseFloat(r.borderBottomWidth)||0)/u,left:(parseFloat(r.borderLeftWidth)||0)/u},i.lineWidth.top||(i.lineWidth.right?A="borderRightColor":i.lineWidth.bottom?A="borderBottomColor":i.lineWidth.left&&(A="borderLeftColor"));var y=Fx(t,function(N){return n.getComputedStyle(N)[A]});y!=null&&(i.lineColor=y);var g=["left","right","center","justify"];g.indexOf(r.textAlign)!==-1&&(i.halign=r.textAlign),g=["middle","bottom","top"],g.indexOf(r.verticalAlign)!==-1&&(i.valign=r.verticalAlign);var b=parseInt(r.fontSize||"");isNaN(b)||(i.fontSize=b/o);var p=OM(r);p&&(i.fontStyle=p);var v=(r.fontFamily||"").toLowerCase();return s.indexOf(v)!==-1&&(i.font=v),i}function OM(s){var t="";return(s.fontWeight==="bold"||s.fontWeight==="bolder"||parseInt(s.fontWeight)>=700)&&(t="bold"),(s.fontStyle==="italic"||s.fontStyle==="oblique")&&(t+="italic"),t}function Fx(s,t){var a=D1(s,t);if(!a)return null;var r=a.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var n=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],i=parseInt(r[4]);return i===0||isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function D1(s,t){var a=t(s);return a==="rgba(0, 0, 0, 0)"||a==="transparent"||a==="initial"||a==="inherit"?s.parentElement==null?null:D1(s.parentElement,t):a}function HM(s,t){var a=[s.paddingTop,s.paddingRight,s.paddingBottom,s.paddingLeft],r=96/(72/t),n=(parseInt(s.lineHeight)-parseInt(s.fontSize))/t/2,i=a.map(function(l){return parseInt(l||"0")/r}),o=km(i,0);return n>o.top&&(o.top=n),n>o.bottom&&(o.bottom=n),o}function I1(s,t,a,r,n){var i,o;r===void 0&&(r=!1),n===void 0&&(n=!1);var l;typeof t=="string"?l=a.document.querySelector(t):l=t;var c=Object.keys(s.getFontList()),d=s.scaleFactor(),A=[],u=[],x=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:A,body:u,foot:x};for(var m=0;m<l.rows.length;m++){var y=l.rows[m],g=(o=(i=y==null?void 0:y.parentElement)===null||i===void 0?void 0:i.tagName)===null||o===void 0?void 0:o.toLowerCase(),b=qM(c,d,a,y,r,n);b&&(g==="thead"?A.push(b):g==="tfoot"?x.push(b):u.push(b))}return{head:A,body:u,foot:x}}function qM(s,t,a,r,n,i){for(var o=new k1(r),l=0;l<r.cells.length;l++){var c=r.cells[l],d=a.getComputedStyle(c);if(n||d.display!=="none"){var A=void 0;i&&(A=RM(s,c,t,d,a)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:A,_element:c,content:$M(c)})}}var u=a.getComputedStyle(r);if(o.length>0&&(n||u.display!=="none"))return o}function $M(s){var t=s.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(a){return a.trim()}).join(`
`),t.innerText||t.textContent||""}function VM(s,t,a){for(var r=0,n=[s,t,a];r<n.length;r++){var i=n[r];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function kn(s,t,a,r,n){if(s==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(s),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(i[c]=l[c])}return i}function KM(s,t){var a=new Nl(s),r=a.getDocumentOptions(),n=a.getGlobalOptions();VM(n,r,t);var i=kn({},n,r,t),o;typeof window<"u"&&(o=window);var l=zM(n,r,t),c=GM(n,r,t),d=WM(a,i),A=YM(a,i,o);return{id:t.tableId,content:A,hooks:c,styles:l,settings:d}}function zM(s,t,a){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},n=function(c){if(c==="columnStyles"){var d=s[c],A=t[c],u=a[c];r.columnStyles=kn({},d,A,u)}else{var x=[s,t,a],m=x.map(function(y){return y[c]||{}});r[c]=kn({},m[0],m[1],m[2])}},i=0,o=Object.keys(r);i<o.length;i++){var l=o[i];n(l)}return r}function GM(s,t,a){for(var r=[s,t,a],n={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,o=r;i<o.length;i++){var l=o[i];l.didParseCell&&n.didParseCell.push(l.didParseCell),l.willDrawCell&&n.willDrawCell.push(l.willDrawCell),l.didDrawCell&&n.didDrawCell.push(l.didDrawCell),l.willDrawPage&&n.willDrawPage.push(l.willDrawPage),l.didDrawPage&&n.didDrawPage.push(l.didDrawPage)}return n}function WM(s,t){var a,r,n,i,o,l,c,d,A,u,x,m,y=km(t.margin,40/s.scaleFactor()),g=(a=JM(s,t.startY))!==null&&a!==void 0?a:y.top,b;t.showFoot===!0?b="everyPage":t.showFoot===!1?b="never":b=(r=t.showFoot)!==null&&r!==void 0?r:"everyPage";var p;t.showHead===!0?p="everyPage":t.showHead===!1?p="never":p=(n=t.showHead)!==null&&n!==void 0?n:"everyPage";var v=(i=t.useCss)!==null&&i!==void 0?i:!1,N=t.theme||(v?"plain":"striped"),D=!!t.horizontalPageBreak,S=(o=t.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=t.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:v,theme:N,startY:g,margin:y,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(d=t.rowPageBreak)!==null&&d!==void 0?d:"auto",tableWidth:(A=t.tableWidth)!==null&&A!==void 0?A:"auto",showHead:p,showFoot:b,tableLineWidth:(u=t.tableLineWidth)!==null&&u!==void 0?u:0,tableLineColor:(x=t.tableLineColor)!==null&&x!==void 0?x:200,horizontalPageBreak:D,horizontalPageBreakRepeat:S,horizontalPageBreakBehaviour:(m=t.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function JM(s,t){var a=s.getLastAutoTable(),r=s.scaleFactor(),n=s.pageNumber(),i=!1;if(a&&a.startPageNumber){var o=a.startPageNumber+a.pageNumber-1;i=o===n}return typeof t=="number"?t:(t==null||t===!1)&&i&&(a==null?void 0:a.finalY)!=null?a.finalY+20/r:null}function YM(s,t,a){var r=t.head||[],n=t.body||[],i=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(a){var l=I1(s,t.html,a,o,t.useCss)||{};r=l.head||r,n=l.body||r,i=l.foot||r}else console.error("Cannot parse html in non browser environment")}var c=t.columns||XM(r,n,i);return{columns:c,head:r,body:n,foot:i}}function XM(s,t,a){var r=s[0]||t[0]||a[0]||[],n=[];return Object.keys(r).filter(function(i){return i!=="_element"}).forEach(function(i){var o=1,l;Array.isArray(r)?l=r[parseInt(i)]:l=r[i],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var c=0;c<o;c++){var d=void 0;Array.isArray(r)?d=n.length:d=i+(c>0?"_".concat(c):"");var A={dataKey:d};n.push(A)}}),n}var sp=function(){function s(t,a,r){this.table=a,this.pageNumber=a.pageNumber,this.settings=a.settings,this.cursor=r,this.doc=t.getDocument()}return s}(),ZM=function(s){S1(t,s);function t(a,r,n,i,o,l){var c=s.call(this,a,r,l)||this;return c.cell=n,c.row=i,c.column=o,c.section=i.section,c}return t}(sp),eR=function(){function s(t,a){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=a.columns,this.head=a.head,this.body=a.body,this.foot=a.foot}return s.prototype.getHeadHeight=function(t){return this.head.reduce(function(a,r){return a+r.getMaxCellHeight(t)},0)},s.prototype.getFootHeight=function(t){return this.foot.reduce(function(a,r){return a+r.getMaxCellHeight(t)},0)},s.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},s.prototype.callCellHooks=function(t,a,r,n,i,o){for(var l=0,c=a;l<c.length;l++){var d=c[l],A=new ZM(t,this,r,n,i,o),u=d(A)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],u)return!1}return!0},s.prototype.callEndPageHooks=function(t,a){t.applyStyles(t.userStyles);for(var r=0,n=this.hooks.didDrawPage;r<n.length;r++){var i=n[r];i(new sp(t,this,a))}},s.prototype.callWillDrawPageHooks=function(t,a){for(var r=0,n=this.hooks.willDrawPage;r<n.length;r++){var i=n[r];i(new sp(t,this,a))}},s.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var a=this.columns.reduce(function(n,i){return n+i.wrappedWidth},0);return a}else{var r=this.settings.margin;return t-r.left-r.right}},s}(),L1=function(){function s(t,a,r,n,i){i===void 0&&(i=!1),this.height=0,this.raw=t,t instanceof k1&&(this.raw=t._element,this.element=t._element),this.index=a,this.section=r,this.cells=n,this.spansMultiplePages=i}return s.prototype.getMaxCellHeight=function(t){var a=this;return t.reduce(function(r,n){var i;return Math.max(r,((i=a.cells[n.index])===null||i===void 0?void 0:i.height)||0)},0)},s.prototype.hasRowSpan=function(t){var a=this;return t.filter(function(r){var n=a.cells[r.index];return n?n.rowSpan>1:!1}).length>0},s.prototype.canEntireRowFit=function(t,a){return this.getMaxCellHeight(a)<=t},s.prototype.getMinimumRowHeight=function(t,a){var r=this;return t.reduce(function(n,i){var o=r.cells[i.index];if(!o)return 0;var l=a.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),d=c+l;return d>n?d:n},0)},s}(),T1=function(){function s(t,a,r){var n;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=a,this.section=r,this.raw=t;var i=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,i=(n=t.content)!==null&&n!==void 0?n:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var o=i!=null?""+i:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return s.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var a=this.height-this.padding("vertical");t=this.y+a/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var n=this.width-this.padding("horizontal");r=this.x+n/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:t}},s.prototype.getContentHeight=function(t,a){a===void 0&&(a=1.15);var r=Array.isArray(this.text)?this.text.length:1,n=this.styles.fontSize/t*a,i=r*n+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},s.prototype.padding=function(t){var a=km(this.styles.cellPadding,0);return t==="vertical"?a.top+a.bottom:t==="horizontal"?a.left+a.right:a[t]},s}(),tR=function(){function s(t,a,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=a,this.index=r}return s.prototype.getMaxCustomCellWidth=function(t){for(var a=0,r=0,n=t.allRows();r<n.length;r++){var i=n[r],o=i.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(a=Math.max(a,o.styles.cellWidth))}return a},s}();function sR(s,t){aR(s,t);var a=[],r=0;t.columns.forEach(function(i){var o=i.getMaxCustomCellWidth(t);o?i.width=o:(i.width=i.wrappedWidth,a.push(i)),r+=i.width});var n=t.getWidth(s.pageSize().width)-r;n&&(n=ap(a,n,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),n&&(n=ap(a,n,function(i){return i.minWidth})),n=Math.abs(n),!t.settings.horizontalPageBreak&&n>.1/s.scaleFactor()&&(n=n<1?n:Math.round(n),console.warn("Of the table content, ".concat(n," units width could not fit page"))),nR(t),iR(t,s),rR(t)}function aR(s,t){var a=s.scaleFactor(),r=t.settings.horizontalPageBreak,n=U1(s,t);t.allRows().forEach(function(i){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d){var A=t.hooks.didParseCell;t.callCellHooks(s,A,d,i,c,null);var u=d.padding("horizontal");d.contentWidth=Vu(d.text,d.styles,s)+u;var x=Vu(d.text.join(" ").split(/[^\S\u00A0]+/),d.styles,s);if(d.minReadableWidth=x+d.padding("horizontal"),typeof d.styles.cellWidth=="number")d.minWidth=d.styles.cellWidth,d.wrappedWidth=d.styles.cellWidth;else if(d.styles.cellWidth==="wrap"||r===!0)d.contentWidth>n?(d.minWidth=n,d.wrappedWidth=n):(d.minWidth=d.contentWidth,d.wrappedWidth=d.contentWidth);else{var m=10/a;d.minWidth=d.styles.minCellWidth||m,d.wrappedWidth=d.contentWidth,d.minWidth>d.wrappedWidth&&(d.wrappedWidth=d.minWidth)}}}}),t.allRows().forEach(function(i){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d&&d.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,d.wrappedWidth),c.minWidth=Math.max(c.minWidth,d.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,d.minReadableWidth);else{var A=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},u=A.cellWidth||A.minCellWidth;u&&typeof u=="number"&&(c.minWidth=u,c.wrappedWidth=u)}d&&(d.colSpan>1&&!c.minWidth&&(c.minWidth=d.minWidth),d.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=d.minWidth))}})}function ap(s,t,a){for(var r=t,n=s.reduce(function(m,y){return m+y.wrappedWidth},0),i=0;i<s.length;i++){var o=s[i],l=o.wrappedWidth/n,c=r*l,d=o.width+c,A=a(o),u=d<A?A:d;t-=u-o.width,o.width=u}if(t=Math.round(t*1e10)/1e10,t){var x=s.filter(function(m){return t<0?m.width>a(m):!0});x.length&&(t=ap(x,t,a))}return t}function rR(s){for(var t={},a=1,r=s.allRows(),n=0;n<r.length;n++)for(var i=r[n],o=0,l=s.columns;o<l.length;o++){var c=l[o],d=t[c.index];if(a>1)a--,delete i.cells[c.index];else if(d)d.cell.height+=i.height,a=d.cell.colSpan,delete i.cells[c.index],d.left--,d.left<=1&&delete t[c.index];else{var A=i.cells[c.index];if(!A)continue;if(A.height=i.height,A.rowSpan>1){var u=r.length-n,x=A.rowSpan>u?u:A.rowSpan;t[c.index]={cell:A,left:x,row:i}}}}}function nR(s){for(var t=s.allRows(),a=0;a<t.length;a++)for(var r=t[a],n=null,i=0,o=0,l=0;l<s.columns.length;l++){var c=s.columns[l];if(o-=1,o>1&&s.columns[l+1])i+=c.width,delete r.cells[c.index];else if(n){var d=n;delete r.cells[c.index],n=null,d.width=c.width+i}else{var d=r.cells[c.index];if(!d)continue;if(o=d.colSpan,i=0,d.colSpan>1){n=d,i+=c.width;continue}d.width=c.width+i}}}function iR(s,t){for(var a={count:0,height:0},r=0,n=s.allRows();r<n.length;r++){for(var i=n[r],o=0,l=s.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d){t.applyStyles(d.styles,!0);var A=d.width-d.padding("horizontal");if(d.styles.overflow==="linebreak")d.text=t.splitTextToSize(d.text,A+1/t.scaleFactor(),{fontSize:d.styles.fontSize});else if(d.styles.overflow==="ellipsize")d.text=yv(d.text,A,d.styles,t,"...");else if(d.styles.overflow==="hidden")d.text=yv(d.text,A,d.styles,t,"");else if(typeof d.styles.overflow=="function"){var u=d.styles.overflow(d.text,A);typeof u=="string"?d.text=[u]:d.text=u}d.contentHeight=d.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var x=d.contentHeight/d.rowSpan;d.rowSpan>1&&a.count*a.height<x*d.rowSpan?a={height:x,count:d.rowSpan}:a&&a.count>0&&a.height>x&&(x=a.height),x>i.height&&(i.height=x)}}a.count--}}function yv(s,t,a,r,n){return s.map(function(i){return oR(i,t,a,r,n)})}function oR(s,t,a,r,n){var i=1e4*r.scaleFactor();if(t=Math.ceil(t*i)/i,t>=Vu(s,a,r))return s;for(;t<Vu(s+n,a,r)&&!(s.length<=1);)s=s.substring(0,s.length-1);return s.trim()+n}function lR(s,t){var a=new Nl(s),r=cR(t,a.scaleFactor()),n=new eR(t,r);return sR(a,n),a.applyStyles(a.userStyles),n}function cR(s,t){var a=s.content,r=AR(a.columns);if(a.head.length===0){var n=vv(r,"head");n&&a.head.push(n)}if(a.foot.length===0){var n=vv(r,"foot");n&&a.foot.push(n)}var i=s.settings.theme,o=s.styles;return{columns:r,head:Ux("head",a.head,r,o,i,t),body:Ux("body",a.body,r,o,i,t),foot:Ux("foot",a.foot,r,o,i,t)}}function Ux(s,t,a,r,n,i){var o={},l=t.map(function(c,d){for(var A=0,u={},x=0,m=0,y=0,g=a;y<g.length;y++){var b=g[y];if(o[b.index]==null||o[b.index].left===0)if(m===0){var p=void 0;Array.isArray(c)?p=c[b.index-x-A]:p=c[b.dataKey];var v={};typeof p=="object"&&!Array.isArray(p)&&(v=(p==null?void 0:p.styles)||{});var N=uR(s,b,d,n,r,i,v),D=new T1(p,N,s);u[b.dataKey]=D,u[b.index]=D,m=D.colSpan-1,o[b.index]={left:D.rowSpan-1,times:m}}else m--,x++;else o[b.index].left--,m=o[b.index].times,A++}return new L1(c,d,s,u)});return l}function vv(s,t){var a={};return s.forEach(function(r){if(r.raw!=null){var n=dR(t,r.raw);n!=null&&(a[r.dataKey]=n)}}),Object.keys(a).length>0?a:null}function dR(s,t){if(s==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(s==="foot"&&typeof t=="object")return t.footer;return null}function AR(s){return s.map(function(t,a){var r,n;return typeof t=="object"?n=(r=t.dataKey)!==null&&r!==void 0?r:a:n=a,new tR(n,t,a)})}function uR(s,t,a,r,n,i,o){var l=MM(r),c;s==="head"?c=n.headStyles:s==="body"?c=n.bodyStyles:s==="foot"&&(c=n.footStyles);var d=kn({},l.table,l[s],n.styles,c),A=n.columnStyles[t.dataKey]||n.columnStyles[t.index]||{},u=s==="body"?A:{},x=s==="body"&&a%2===0?kn({},l.alternateRow,n.alternateRowStyles):{},m=PM(i),y=kn({},m,d,x,u);return kn(y,o)}function mR(s,t,a){var r;a===void 0&&(a={});var n=U1(s,t),i=new Map,o=[],l=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(x){var m=t.columns.find(function(y){return y.dataKey===x||y.index===x});m&&!i.has(m.index)&&(i.set(m.index,!0),o.push(m.index),l.push(t.columns[m.index]),n-=m.wrappedWidth)});for(var d=!0,A=(r=a==null?void 0:a.start)!==null&&r!==void 0?r:0;A<t.columns.length;){if(i.has(A)){A++;continue}var u=t.columns[A].wrappedWidth;if(d||n>=u)d=!1,o.push(A),l.push(t.columns[A]),n-=u;else break;A++}return{colIndexes:o,columns:l,lastIndex:A-1}}function hR(s,t){for(var a=[],r=0;r<t.columns.length;r++){var n=mR(s,t,{start:r});n.columns.length&&(a.push(n),r=n.lastIndex)}return a}function xR(s,t){var a=t.settings,r=a.startY,n=a.margin,i={x:n.left,y:r},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=r+n.bottom+o;if(a.pageBreak==="avoid"){var c=t.body,d=c.reduce(function(x,m){return x+m.height},0);l+=d}var A=new Nl(s);(a.pageBreak==="always"||a.startY!=null&&l>A.pageSize().height)&&(P1(A),i.y=n.top),t.callWillDrawPageHooks(A,i);var u=kn({},i);t.startPageNumber=A.pageNumber(),a.horizontalPageBreak?pR(A,t,u,i):(A.applyStyles(A.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(x){return Tn(A,t,x,i,t.columns)}),A.applyStyles(A.userStyles),t.body.forEach(function(x,m){var y=m===t.body.length-1;Ku(A,t,x,y,u,i,t.columns)}),A.applyStyles(A.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(x){return Tn(A,t,x,i,t.columns)})),E1(A,t,u,i),t.callEndPageHooks(A,i),t.finalY=i.y,s.lastAutoTable=t,A.applyStyles(A.userStyles)}function pR(s,t,a,r){var n=hR(s,t),i=t.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")n.forEach(function(d,A){s.applyStyles(s.userStyles),A>0?Zc(s,t,a,r,d.columns,!0):wv(s,t,r,d.columns),gR(s,t,a,r,d.columns),Dx(s,t,r,d.columns)});else for(var o=-1,l=n[0],c=function(){var d=o;if(l){s.applyStyles(s.userStyles);var A=l.columns;o>=0?Zc(s,t,a,r,A,!0):wv(s,t,r,A),d=jv(s,t,o+1,r,A),Dx(s,t,r,A)}var u=d-o;n.slice(1).forEach(function(x){s.applyStyles(s.userStyles),Zc(s,t,a,r,x.columns,!0),jv(s,t,o+1,r,x.columns,u),Dx(s,t,r,x.columns)}),o=d};o<t.body.length-1;)c()}function wv(s,t,a,r){var n=t.settings;s.applyStyles(s.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&t.head.forEach(function(i){return Tn(s,t,i,a,r)})}function gR(s,t,a,r,n){s.applyStyles(s.userStyles),t.body.forEach(function(i,o){var l=o===t.body.length-1;Ku(s,t,i,l,a,r,n)})}function jv(s,t,a,r,n,i){s.applyStyles(s.userStyles),i=i??t.body.length;var o=Math.min(a+i,t.body.length),l=-1;return t.body.slice(a,o).forEach(function(c,d){var A=a+d===t.body.length-1,u=Q1(s,t,A,r);c.canEntireRowFit(u,n)&&(Tn(s,t,c,r,n),l=a+d)}),l}function Dx(s,t,a,r){var n=t.settings;s.applyStyles(s.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&t.foot.forEach(function(i){return Tn(s,t,i,a,r)})}function fR(s,t,a){var r=a.getLineHeight(s.styles.fontSize),n=s.padding("vertical"),i=Math.floor((t-n)/r);return Math.max(0,i)}function bR(s,t,a,r){var n={};s.spansMultiplePages=!0,s.height=0;for(var i=0,o=0,l=a.columns;o<l.length;o++){var c=l[o],d=s.cells[c.index];if(d){Array.isArray(d.text)||(d.text=[d.text]);var A=new T1(d.raw,d.styles,d.section);A=kn(A,d),A.text=[];var u=fR(d,t,r);d.text.length>u&&(A.text=d.text.splice(u,d.text.length));var x=r.scaleFactor(),m=r.getLineHeightFactor();d.contentHeight=d.getContentHeight(x,m),d.contentHeight>=t&&(d.contentHeight=t,A.styles.minCellHeight-=t),d.contentHeight>s.height&&(s.height=d.contentHeight),A.contentHeight=A.getContentHeight(x,m),A.contentHeight>i&&(i=A.contentHeight),n[c.index]=A}}var y=new L1(s.raw,-1,s.section,n,!0);y.height=i;for(var g=0,b=a.columns;g<b.length;g++){var c=b[g],A=y.cells[c.index];A&&(A.height=y.height);var d=s.cells[c.index];d&&(d.height=s.height)}return y}function yR(s,t,a,r){var n=s.pageSize().height,i=r.settings.margin,o=i.top+i.bottom,l=n-o;t.section==="body"&&(l-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var c=t.getMinimumRowHeight(r.columns,s),d=c<a;if(c>l)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!d)return!1;var A=t.hasRowSpan(r.columns),u=t.getMaxCellHeight(r.columns)>l;return u?(A&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(A||r.settings.rowPageBreak==="avoid")}function Ku(s,t,a,r,n,i,o){var l=Q1(s,t,r,i);if(a.canEntireRowFit(l,o))Tn(s,t,a,i,o);else if(yR(s,a,l,t)){var c=bR(a,l,t,s);Tn(s,t,a,i,o),Zc(s,t,n,i,o),Ku(s,t,c,r,n,i,o)}else Zc(s,t,n,i,o),Ku(s,t,a,r,n,i,o)}function Tn(s,t,a,r,n){r.x=t.settings.margin.left;for(var i=0,o=n;i<o.length;i++){var l=o[i],c=a.cells[l.index];if(!c){r.x+=l.width;continue}s.applyStyles(c.styles),c.x=r.x,c.y=r.y;var d=t.callCellHooks(s,t.hooks.willDrawCell,c,a,l,r);if(d===!1){r.x+=l.width;continue}vR(s,c,r);var A=c.getTextPos();B1(c.text,A.x,A.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},s.getDocument()),t.callCellHooks(s,t.hooks.didDrawCell,c,a,l,r),r.x+=l.width}r.y+=a.height}function vR(s,t,a){var r=t.styles;if(s.getDocument().setFillColor(s.getDocument().getFillColor()),typeof r.lineWidth=="number"){var n=F1(r.lineWidth,r.fillColor);n&&s.rect(t.x,a.y,t.width,t.height,n)}else typeof r.lineWidth=="object"&&(r.fillColor&&s.rect(t.x,a.y,t.width,t.height,"F"),wR(s,t,a,r.lineWidth))}function wR(s,t,a,r){var n,i,o,l;r.top&&(n=a.x,i=a.y,o=a.x+t.width,l=a.y,r.right&&(o+=.5*r.right),r.left&&(n-=.5*r.left),c(r.top,n,i,o,l)),r.bottom&&(n=a.x,i=a.y+t.height,o=a.x+t.width,l=a.y+t.height,r.right&&(o+=.5*r.right),r.left&&(n-=.5*r.left),c(r.bottom,n,i,o,l)),r.left&&(n=a.x,i=a.y,o=a.x,l=a.y+t.height,r.top&&(i-=.5*r.top),r.bottom&&(l+=.5*r.bottom),c(r.left,n,i,o,l)),r.right&&(n=a.x+t.width,i=a.y,o=a.x+t.width,l=a.y+t.height,r.top&&(i-=.5*r.top),r.bottom&&(l+=.5*r.bottom),c(r.right,n,i,o,l));function c(d,A,u,x,m){s.getDocument().setLineWidth(d),s.getDocument().line(A,u,x,m,"S")}}function Q1(s,t,a,r){var n=t.settings.margin.bottom,i=t.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&a)&&(n+=t.getFootHeight(t.columns)),s.pageSize().height-r.y-n}function Zc(s,t,a,r,n,i){n===void 0&&(n=[]),i===void 0&&(i=!1),s.applyStyles(s.userStyles),t.settings.showFoot==="everyPage"&&!i&&t.foot.forEach(function(l){return Tn(s,t,l,r,n)}),t.callEndPageHooks(s,r);var o=t.settings.margin;E1(s,t,a,r),P1(s),t.pageNumber++,r.x=o.left,r.y=o.top,a.y=o.top,t.callWillDrawPageHooks(s,r),t.settings.showHead==="everyPage"&&(t.head.forEach(function(l){return Tn(s,t,l,r,n)}),s.applyStyles(s.userStyles))}function P1(s){var t=s.pageNumber();s.setPage(t+1);var a=s.pageNumber();return a===t?(s.addPage(),!0):!1}function jR(s){s.API.autoTable=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var r=t[0],n=KM(this,r),i=lR(this,n);return xR(this,i),this},s.API.lastAutoTable=!1,s.API.autoTableText=function(t,a,r,n){B1(t,a,r,n,this)},s.API.autoTableSetDefaults=function(t){return Nl.setDefaults(t,this),this},s.autoTableSetDefaults=function(t,a){Nl.setDefaults(t,a)},s.API.autoTableHtmlToJson=function(t,a){var r;if(a===void 0&&(a=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var n=new Nl(this),i=I1(n,t,window,a,!1),o=i.head,l=i.body,c=((r=o[0])===null||r===void 0?void 0:r.map(function(d){return d.content}))||[];return{columns:c,rows:l,data:l}}}var Ix;try{if(typeof window<"u"&&window){var Nv=window,_v=Nv.jsPDF||((Ix=Nv.jspdf)===null||Ix===void 0?void 0:Ix.jsPDF);_v&&jR(_v)}}catch(s){console.error("Could not apply autoTable plugin",s)}function M1(){const[s,t]=j.useState(""),[a,r]=j.useState(Zt(new Date().setDate(1),"yyyy-MM-dd")),[n,i]=j.useState(Zt(new Date,"yyyy-MM-dd")),[o,l]=j.useState(null),[c,d]=j.useState(!1),[A,u]=j.useState(!1),x=[{id:"financial",name:"Relatrio Financeiro",description:"DRE, Fluxo de Caixa, Contas a Pagar/Receber",icon:e.jsx(Ut,{className:"h-6 w-6"}),category:"financial"},{id:"service_orders",name:"Relatrio de OSs",description:"Anlise completa de ordens de servio",icon:e.jsx(ut,{className:"h-6 w-6"}),category:"operational"},{id:"sales",name:"Relatrio de Vendas",description:"Vendas por cliente, produto e perodo",icon:e.jsx(zt,{className:"h-6 w-6"}),category:"commercial"},{id:"inventory",name:"Relatrio de Estoque",description:"Movimentaes, inventrio e curva ABC",icon:e.jsx(wt,{className:"h-6 w-6"}),category:"inventory"},{id:"customers",name:"Relatrio de Clientes",description:"Anlise de base de clientes e performance",icon:e.jsx(Nt,{className:"h-6 w-6"}),category:"commercial"},{id:"performance",name:"Relatrio de Performance",description:"KPIs, mtricas e anlise de desempenho",icon:e.jsx(Ls,{className:"h-6 w-6"}),category:"operational"}];j.useEffect(()=>{s&&m()},[s,a,n]);const m=async()=>{d(!0);try{const{data:b}=await se.from("finance_entries").select("*").gte("due_date",a).lte("due_date",n),p=(b==null?void 0:b.filter(S=>S.type==="income"&&S.status==="paid").reduce((S,E)=>S+(E.amount||0),0))||0,v=(b==null?void 0:b.filter(S=>S.type==="expense"&&S.status==="paid").reduce((S,E)=>S+(E.amount||0),0))||0,{count:N}=await se.from("service_orders").select("*",{count:"exact",head:!0}).gte("created_at",a).lte("created_at",n),{count:D}=await se.from("customers").select("*",{count:"exact",head:!0});l({revenue:p,expenses:v,profit:p-v,serviceOrders:N||0,customers:D||0,avgTicket:N?p/N:0})}catch(b){console.error("Error loading report data:",b)}finally{d(!1)}},y=async()=>{var b;u(!0);try{const p=new Ft;p.setFontSize(20),p.setTextColor(37,99,235),p.text("Giartech - Relatrio Gerencial",20,20),p.setFontSize(12),p.setTextColor(100);const v=((b=x.find(S=>S.id===s))==null?void 0:b.name)||"Relatrio";if(p.text(v,20,30),p.text(`Perodo: ${Zt(new Date(a),"dd/MM/yyyy",{locale:va})} - ${Zt(new Date(n),"dd/MM/yyyy",{locale:va})}`,20,37),p.text(`Gerado em: ${Zt(new Date,"dd/MM/yyyy 's' HH:mm",{locale:va})}`,20,44),p.setDrawColor(229,231,235),p.line(20,50,190,50),o){p.setFontSize(16),p.setTextColor(0),p.text("Resumo Executivo",20,60);const S=[["Mtrica","Valor"],["Receitas",`R$ ${o.revenue.toLocaleString("pt-BR",{minimumFractionDigits:2})}`],["Despesas",`R$ ${o.expenses.toLocaleString("pt-BR",{minimumFractionDigits:2})}`],["Lucro",`R$ ${o.profit.toLocaleString("pt-BR",{minimumFractionDigits:2})}`],["Ordens de Servio",o.serviceOrders.toString()],["Ticket Mdio",`R$ ${o.avgTicket.toLocaleString("pt-BR",{minimumFractionDigits:2})}`],["Total de Clientes",o.customers.toString()]];p.autoTable({startY:65,head:[S[0]],body:S.slice(1),theme:"grid",headStyles:{fillColor:[37,99,235],textColor:255,fontSize:11,fontStyle:"bold"},bodyStyles:{fontSize:10},alternateRowStyles:{fillColor:[248,250,252]}})}if(s==="financial"){const S=p.lastAutoTable.finalY+15;p.setFontSize(16),p.setTextColor(0),p.text("Detalhamento Financeiro",20,S);const{data:E}=await se.from("finance_entries").select("*").gte("due_date",a).lte("due_date",n).order("due_date",{ascending:!1}).limit(20);if(E&&E.length>0){const R=E.map(_=>[Zt(new Date(_.due_date),"dd/MM/yyyy"),_.description,_.type==="income"?"Receita":"Despesa",`R$ ${(_.amount||0).toLocaleString("pt-BR",{minimumFractionDigits:2})}`,_.status==="paid"?"Pago":_.status==="pending"?"Pendente":"Cancelado"]);p.autoTable({startY:S+5,head:[["Data","Descrio","Tipo","Valor","Status"]],body:R,theme:"grid",headStyles:{fillColor:[37,99,235],textColor:255,fontSize:10,fontStyle:"bold"},bodyStyles:{fontSize:9},columnStyles:{0:{cellWidth:25},1:{cellWidth:60},2:{cellWidth:25},3:{cellWidth:30},4:{cellWidth:25}}})}}if(s==="service_orders"){const S=p.lastAutoTable.finalY+15;p.setFontSize(16),p.setTextColor(0),p.text("Ordens de Servio",20,S);const{data:E}=await se.from("service_orders").select("*").gte("created_at",a).lte("created_at",n).order("created_at",{ascending:!1}).limit(20);if(E&&E.length>0){const R=E.map(_=>[_.order_number,Zt(new Date(_.created_at),"dd/MM/yyyy"),_.status==="pending"?"Pendente":_.status==="in_progress"?"Em Andamento":_.status==="completed"?"Concluda":"Cancelada",`R$ ${(_.total_value||0).toLocaleString("pt-BR",{minimumFractionDigits:2})}`]);p.autoTable({startY:S+5,head:[["OS","Data","Status","Valor"]],body:R,theme:"grid",headStyles:{fillColor:[37,99,235],textColor:255,fontSize:10,fontStyle:"bold"},bodyStyles:{fontSize:9}})}}const N=p.internal.getNumberOfPages();for(let S=1;S<=N;S++)p.setPage(S),p.setFontSize(9),p.setTextColor(150),p.text(`Pgina ${S} de ${N}`,p.internal.pageSize.width/2,p.internal.pageSize.height-10,{align:"center"});const D=`relatorio_${s}_${Zt(new Date,"yyyyMMdd_HHmmss")}.pdf`;p.save(D)}catch(p){console.error("Error generating PDF:",p),alert("Erro ao gerar relatrio PDF")}finally{u(!1)}},g=async()=>{try{let b="data:text/csv;charset=utf-8,";if(s==="financial"){const{data:N}=await se.from("finance_entries").select("*").gte("due_date",a).lte("due_date",n);b+=`Data,Descrio,Tipo,Valor,Status
`,N==null||N.forEach(D=>{b+=`${D.due_date},"${D.description}",${D.type},${D.amount},${D.status}
`})}const p=encodeURI(b),v=document.createElement("a");v.setAttribute("href",p),v.setAttribute("download",`relatorio_${s}_${Zt(new Date,"yyyyMMdd")}.csv`),document.body.appendChild(v),v.click(),document.body.removeChild(v)}catch(b){console.error("Error exporting CSV:",b)}};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Relatrios Avanados"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gere relatrios detalhados e anlises do seu negcio"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:x.map(b=>e.jsxs(W.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t(b.id),className:`p-4 rounded-lg border-2 transition-all text-left ${s===b.id?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300 bg-white"}`,children:[e.jsx("div",{className:`inline-flex p-2 rounded-lg mb-3 ${s===b.id?"bg-blue-600 text-white":"bg-gray-100 text-gray-600"}`,children:b.icon}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:b.name}),e.jsx("p",{className:"text-sm text-gray-600",children:b.description})]},b.id))}),s&&e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(lm,{className:"h-5 w-5 text-gray-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Filtros"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Inicial"}),e.jsx("input",{type:"date",value:a,onChange:b=>r(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Final"}),e.jsx("input",{type:"date",value:n,onChange:b=>i(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("button",{onClick:y,disabled:A||c,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:A?e.jsxs(e.Fragment,{children:[e.jsx(ro,{className:"h-4 w-4 animate-spin"}),"Gerando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(wa,{className:"h-4 w-4"}),"Gerar PDF"]})}),e.jsx("button",{onClick:g,disabled:c,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Exportar CSV",children:e.jsx(ut,{className:"h-4 w-4"})})]})]})]}),s&&o&&e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Preview do Relatrio"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-green-700",children:"Receitas"}),e.jsx(ii,{className:"h-4 w-4 text-green-600"})]}),e.jsxs("p",{className:"text-2xl font-bold text-green-900",children:["R$ ",o.revenue.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-red-700",children:"Despesas"}),e.jsx(zp,{className:"h-4 w-4 text-red-600"})]}),e.jsxs("p",{className:"text-2xl font-bold text-red-900",children:["R$ ",o.expenses.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:`rounded-lg p-4 ${o.profit>=0?"bg-gradient-to-br from-blue-50 to-blue-100":"bg-gradient-to-br from-orange-50 to-orange-100"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`text-sm font-medium ${o.profit>=0?"text-blue-700":"text-orange-700"}`,children:"Lucro"}),e.jsx(zt,{className:`h-4 w-4 ${o.profit>=0?"text-blue-600":"text-orange-600"}`})]}),e.jsxs("p",{className:`text-2xl font-bold ${o.profit>=0?"text-blue-900":"text-orange-900"}`,children:["R$ ",o.profit.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ordens de Servio"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:o.serviceOrders})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ticket Mdio"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:["R$ ",o.avgTicket.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total de Clientes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:o.customers})]})]})]}),!s&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ls,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Selecione um Tipo de Relatrio"}),e.jsx("p",{className:"text-gray-600",children:"Escolha um dos tipos de relatrio acima para comear"})]})]})}const fg=()=>{const[s,t]=j.useState([]),a=j.useCallback((c,d,A)=>{const u=Math.random().toString(36).substring(7),x={id:u,type:c,message:d,duration:A};return t(m=>[...m,x]),u},[]),r=j.useCallback(c=>{t(d=>d.filter(A=>A.id!==c))},[]),n=j.useCallback((c,d)=>a("success",c,d),[a]),i=j.useCallback((c,d)=>a("error",c,d),[a]),o=j.useCallback((c,d)=>a("warning",c,d),[a]),l=j.useCallback((c,d)=>a("info",c,d),[a]);return{toasts:s,addToast:a,removeToast:r,success:n,error:i,warning:o,info:l}};function Cv(){const[s,t]=j.useState([]),[a,r]=j.useState([]),[n,i]=j.useState(!0),[o,l]=j.useState(null),[c,d]=j.useState(!1),[A,u]=j.useState(!1),[x,m]=j.useState({name:"",description:"",trigger_type:"service_order_created",actions:[],priority:1}),y=fg();j.useEffect(()=>{g()},[]);const g=async()=>{try{const{data:E,error:R}=await se.from("automation_rules").select("*").order("priority",{ascending:!1});if(R)throw R;t(E||[])}catch(E){console.error("Error loading rules:",E),y.error("Erro ao carregar regras")}finally{i(!1)}},b=async E=>{try{const{data:R,error:_}=await se.from("automation_logs").select("*").eq("rule_id",E).order("executed_at",{ascending:!1}).limit(50);if(_)throw _;r(R||[]),d(!0)}catch(R){console.error("Error loading logs:",R),y.error("Erro ao carregar histrico")}},p=async(E,R)=>{try{const{error:_}=await se.from("automation_rules").update({is_active:!R}).eq("id",E);if(_)throw _;y.success(R?"Automao pausada":"Automao ativada"),g()}catch(_){console.error("Error toggling rule:",_),y.error("Erro ao alterar status")}},v=async E=>{if(confirm("Deseja realmente excluir esta automao?"))try{const{error:R}=await se.from("automation_rules").delete().eq("id",E);if(R)throw R;y.success("Automao excluda"),g()}catch(R){console.error("Error deleting rule:",R),y.error("Erro ao excluir automao")}},N=async()=>{try{if(!x.name||!x.description){y.error("Preencha nome e descrio");return}const{error:E}=await se.from("automation_rules").insert({name:x.name,description:x.description,trigger_type:x.trigger_type,trigger_conditions:{},actions:x.actions.length>0?x.actions:[{type:"notification",config:{message:"Automao executada"}}],is_active:!0,priority:x.priority,execution_count:0});if(E)throw E;y.success("Automao criada com sucesso!"),u(!1),m({name:"",description:"",trigger_type:"service_order_created",actions:[],priority:1}),g()}catch(E){console.error("Error saving automation:",E),y.error("Erro ao salvar: "+E.message)}},D=E=>({service_order_created:"OS Criada",service_order_completed:"OS Concluda",payment_received:"Pagamento Recebido",payment_overdue:"Pagamento Atrasado",stock_low:"Estoque Baixo",customer_created:"Cliente Cadastrado",custom_date:"Data Especfica"})[E]||E,S=E=>{switch(E){case"success":return"text-green-600 bg-green-50";case"failed":return"text-red-600 bg-red-50";case"running":return"text-blue-600 bg-blue-50";default:return"text-gray-600 bg-gray-50"}};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Automaes e Workflows"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure regras automticas para seu negcio"})]}),e.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",onClick:()=>u(!0),children:[e.jsx(bt,{className:"h-4 w-4"}),"Nova Automao"]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 mb-6",children:s.map(E=>e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`p-2 rounded-lg ${E.is_active?"bg-green-100":"bg-gray-100"}`,children:e.jsx(Fs,{className:`h-5 w-5 ${E.is_active?"text-green-600":"text-gray-400"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:E.name}),e.jsx("p",{className:"text-sm text-gray-600",children:E.description})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>p(E.id,E.is_active),className:`p-2 rounded-lg transition-colors ${E.is_active?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-50"}`,title:E.is_active?"Pausar":"Ativar",children:E.is_active?e.jsx(fj,{className:"h-4 w-4"}):e.jsx(cd,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>b(E.id),className:"p-2 rounded-lg text-blue-600 hover:bg-blue-50 transition-colors",title:"Ver Histrico",children:e.jsx(dm,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>v(E.id),className:"p-2 rounded-lg text-red-600 hover:bg-red-50 transition-colors",title:"Excluir",children:e.jsx(Vt,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Gatilho"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 mt-1",children:D(E.trigger_type)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Prioridade"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 mt-1",children:E.priority})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Execues"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 mt-1",children:E.execution_count})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"ltima Execuo"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 mt-1",children:E.last_executed_at?Zt(new Date(E.last_executed_at),"dd/MM/yyyy HH:mm",{locale:va}):"Nunca"})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[e.jsx("span",{className:"text-xs text-gray-500 mb-2 block",children:"Aes Configuradas"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:E.actions.map((R,_)=>e.jsx("span",{className:"px-3 py-1 bg-blue-50 text-blue-700 rounded-full text-xs font-medium",children:R.type==="notification"?" Notificao":R.type==="email"?" Email":R.type==="webhook"?" Webhook":R.type},_))})]})]},E.id))}),s.length===0&&e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[e.jsx(Fs,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma Automao Configurada"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Crie sua primeira automao para comear a otimizar seus processos"}),e.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors inline-flex items-center gap-2",onClick:()=>u(!0),children:[e.jsx(bt,{className:"h-4 w-4"}),"Criar Primeira Automao"]})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[80vh] overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Histrico de Execues"}),e.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(eo,{className:"h-6 w-6"})})]})}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(80vh-120px)]",children:a.length===0?e.jsx("div",{className:"p-12 text-center text-gray-500",children:"Nenhuma execuo registrada"}):e.jsx("div",{className:"divide-y divide-gray-100",children:a.map(E=>e.jsxs("div",{className:"p-4 hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[E.status==="success"&&e.jsx(is,{className:"h-5 w-5 text-green-600"}),E.status==="failed"&&e.jsx(eo,{className:"h-5 w-5 text-red-600"}),E.status==="running"&&e.jsx(vt,{className:"h-5 w-5 text-blue-600 animate-spin"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:E.trigger_event})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S(E.status)}`,children:E.status==="success"?"Sucesso":E.status==="failed"?"Falhou":E.status==="running"?"Executando":"Pendente"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsx("span",{children:Zt(new Date(E.executed_at),"dd/MM/yyyy 's' HH:mm",{locale:va})}),e.jsxs("span",{children:[E.actions_executed," aes executadas"]}),E.actions_failed>0&&e.jsxs("span",{className:"text-red-600",children:[E.actions_failed," falharam"]})]}),E.error_message&&e.jsx("div",{className:"mt-2 p-2 bg-red-50 rounded text-xs text-red-700",children:E.error_message})]},E.id))})})]})}),A&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Nova Automao"}),e.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(eo,{className:"h-6 w-6"})})]})}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-160px)]",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Automao *"}),e.jsx("input",{type:"text",value:x.name,onChange:E=>m({...x,name:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Notificar OS Concluda"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio *"}),e.jsx("textarea",{value:x.description,onChange:E=>m({...x,description:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Descreva o que esta automao faz"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gatilho (Quando Executar)"}),e.jsxs("select",{value:x.trigger_type,onChange:E=>m({...x,trigger_type:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"service_order_created",children:"Quando OS for Criada"}),e.jsx("option",{value:"service_order_completed",children:"Quando OS for Concluda"}),e.jsx("option",{value:"payment_received",children:"Quando Pagamento for Recebido"}),e.jsx("option",{value:"payment_overdue",children:"Quando Pagamento Atrasar"}),e.jsx("option",{value:"stock_low",children:"Quando Estoque Baixo"}),e.jsx("option",{value:"customer_created",children:"Quando Cliente for Cadastrado"}),e.jsx("option",{value:"custom_date",children:"Em Data Especfica"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prioridade"}),e.jsxs("select",{value:x.priority,onChange:E=>m({...x,priority:parseInt(E.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"1",children:"Baixa"}),e.jsx("option",{value:"5",children:"Mdia"}),e.jsx("option",{value:"10",children:"Alta"})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(cs,{className:"h-5 w-5 text-blue-600 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Ao Padro"}),e.jsx("p",{children:"Esta automao criar uma notificao quando for acionada. Voc poder adicionar mais aes aps criar a automao."})]})]})})]})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:N,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Criar Automao"})]})]})})]})}function R1(){const[s,t]=j.useState([]),[a,r]=j.useState(!0),[n,i]=j.useState(""),[o,l]=j.useState("all");j.useEffect(()=>{c()},[]);const c=async()=>{try{r(!0);const{data:g,error:b}=await se.from("v_customer_credit_scoring").select("*").order("credit_score",{ascending:!1});if(b)throw b;t(g||[])}catch(g){console.error("Erro ao carregar credit scoring:",g)}finally{r(!1)}},d=async()=>{try{r(!0);const{error:g}=await se.rpc("recalculate_all_credit_scores");if(g)throw g;await c(),alert("Scores recalculados com sucesso!")}catch(g){console.error("Erro ao recalcular scores:",g),alert("Erro ao recalcular scores. Tente novamente.")}},A=g=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0,maximumFractionDigits:0}).format(g),u=g=>({Excelente:"bg-green-100 text-green-800 border-green-300",Bom:"bg-blue-100 text-blue-800 border-blue-300",Mdio:"bg-yellow-100 text-yellow-800 border-yellow-300","Alto Risco":"bg-orange-100 text-orange-800 border-orange-300",Bloqueado:"bg-red-100 text-red-800 border-red-300"})[g]||"bg-gray-100 text-gray-800 border-gray-300",x=g=>g==="Excelente"||g==="Bom"?e.jsx(is,{className:"h-5 w-5"}):g==="Bloqueado"||g==="Alto Risco"?e.jsx(cs,{className:"h-5 w-5"}):e.jsx(os,{className:"h-5 w-5"}),m=s.filter(g=>{const b=g.customer_name.toLowerCase().includes(n.toLowerCase()),p=o==="all"||g.risk_category===o;return b&&p}),y={total:s.length,excelente:s.filter(g=>g.risk_category==="Excelente").length,bom:s.filter(g=>g.risk_category==="Bom").length,medio:s.filter(g=>g.risk_category==="Mdio").length,alto:s.filter(g=>g.risk_category==="Alto Risco").length,bloqueado:s.filter(g=>g.risk_category==="Bloqueado").length};return a?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx(bs,{className:"h-12 w-12 animate-spin text-blue-600"})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Credit Scoring"}),e.jsx("p",{className:"text-gray-600",children:"Anlise de risco e crdito de clientes"})]}),e.jsxs("button",{onClick:d,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 shadow-lg",children:[e.jsx(bs,{className:"h-5 w-5"}),"Recalcular Todos"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl p-6 shadow-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Total"}),e.jsx(os,{className:"h-5 w-5 text-gray-400"})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:y.total})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl p-6 shadow-md text-white cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>l(o==="Excelente"?"all":"Excelente"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium opacity-90",children:"Excelente"}),e.jsx(is,{className:"h-5 w-5"})]}),e.jsx("p",{className:"text-3xl font-bold",children:y.excelente})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gradient-to-br from-blue-500 to-cyan-600 rounded-xl p-6 shadow-md text-white cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>l(o==="Bom"?"all":"Bom"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium opacity-90",children:"Bom"}),e.jsx(zt,{className:"h-5 w-5"})]}),e.jsx("p",{className:"text-3xl font-bold",children:y.bom})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-gradient-to-br from-yellow-500 to-orange-500 rounded-xl p-6 shadow-md text-white cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>l(o==="Mdio"?"all":"Mdio"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium opacity-90",children:"Mdio"}),e.jsx(cs,{className:"h-5 w-5"})]}),e.jsx("p",{className:"text-3xl font-bold",children:y.medio})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-gradient-to-br from-red-500 to-pink-600 rounded-xl p-6 shadow-md text-white cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>l(o==="Alto Risco"||o==="Bloqueado"?"all":"Alto Risco"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium opacity-90",children:"Risco Alto"}),e.jsx(cs,{className:"h-5 w-5"})]}),e.jsx("p",{className:"text-3xl font-bold",children:y.alto+y.bloqueado})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar cliente...",value:n,onChange:g=>i(g.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-4 px-4 font-semibold text-gray-700",children:"Cliente"}),e.jsx("th",{className:"text-left py-4 px-4 font-semibold text-gray-700",children:"Tipo"}),e.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-700",children:"Score"}),e.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-700",children:"Categoria"}),e.jsx("th",{className:"text-right py-4 px-4 font-semibold text-gray-700",children:"Limite Sugerido"}),e.jsx("th",{className:"text-right py-4 px-4 font-semibold text-gray-700",children:"Total Compras"})]})}),e.jsx("tbody",{children:m.map(g=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsx("div",{className:"font-medium text-gray-900",children:g.customer_name})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:g.customer_type})}),e.jsx("td",{className:"py-4 px-4 text-center",children:e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:g.credit_score})}),e.jsx("td",{className:"py-4 px-4 text-center",children:e.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-semibold border ${u(g.risk_category)}`,children:[x(g.risk_category),g.risk_category]})}),e.jsx("td",{className:"py-4 px-4 text-right font-semibold text-gray-900",children:A(g.suggested_credit_limit)}),e.jsx("td",{className:"py-4 px-4 text-right text-gray-600",children:A(g.total_purchases)})]},g.customer_id))})]}),m.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(os,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Nenhum cliente encontrado"})]})]})]})]})})}function bg({tabs:s,defaultTab:t,className:a=""}){var o;const[r,n]=j.useState(t||((o=s[0])==null?void 0:o.id)),i=s.find(l=>l.id===r);return e.jsxs("div",{className:`flex flex-col h-full ${a}`,children:[e.jsxs("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:[e.jsx("div",{className:"flex items-center space-x-1 px-6 py-4 overflow-x-auto scrollbar-thin",children:s.map(l=>{const c=l.icon,d=r===l.id;return e.jsxs("button",{onClick:()=>n(l.id),className:`
                  relative flex items-center space-x-2 px-4 py-2.5 rounded-lg
                  transition-all duration-200 whitespace-nowrap
                  ${d?"bg-blue-50 text-blue-700 font-medium shadow-sm":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}
                `,children:[e.jsx(c,{className:`w-5 h-5 ${d?"text-blue-600":"text-gray-500"}`}),e.jsx("span",{children:l.label}),l.badge!==void 0&&l.badge>0&&e.jsx("span",{className:`
                    ml-1 px-2 py-0.5 text-xs font-semibold rounded-full
                    ${d?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"}
                  `,children:l.badge}),d&&e.jsx(W.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600",transition:{type:"spring",stiffness:500,damping:30}})]},l.id)})}),(i==null?void 0:i.description)&&e.jsx("div",{className:"px-6 pb-3",children:e.jsx("p",{className:"text-sm text-gray-600",children:i.description})})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsx(rt,{mode:"wait",children:e.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"h-full",children:i&&e.jsx(i.component,{})},r)})})]})}function NR(){const s=[{id:"dashboard",label:"Dashboard",icon:Ls,component:y1,description:"Viso geral integrada do financeiro com KPIs principais"},{id:"movimentacoes",label:"Movimentaes",icon:Ut,component:j1,description:"Gesto de receitas, despesas e fluxo de caixa"},{id:"analise",label:"Anlise",icon:gi,component:N1,description:"Anlises avanadas: EBITDA, ROI, Margens e Indicadores"},{id:"contas",label:"Contas Bancrias",icon:Es,component:_1,description:"Gerenciamento de contas bancrias e saldos"},{id:"categorias",label:"Categorias",icon:e6,component:C1,description:"Organizao de categorias e subcategorias financeiras"}];return e.jsxs("div",{className:"h-full",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:" Centro Financeiro"}),e.jsx("p",{className:"text-blue-100",children:"Gesto completa do financeiro: dashboard, movimentaes, anlises e configuraes"})]}),e.jsx(bg,{tabs:s,defaultTab:"dashboard"})]})}function _R(){return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-8 text-center",children:[e.jsx(Pa,{className:"h-16 w-16 text-purple-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Metas Financeiras"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Sistema de acompanhamento de metas e targets estratgicos"}),e.jsx("div",{className:"inline-block bg-white rounded-lg px-6 py-3 shadow-md",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Em desenvolvimento - Disponvel em breve"})})]})})}function CR(){return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 rounded-2xl p-8 text-center",children:[e.jsx(cs,{className:"h-16 w-16 text-red-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Alertas Crticos"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Sistema de monitoramento de alertas e problemas que precisam ateno"}),e.jsx("div",{className:"inline-block bg-white rounded-lg px-6 py-3 shadow-md",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Em desenvolvimento - Disponvel em breve"})})]})})}function BR(){const s=[{id:"credit-scoring",label:"Credit Scoring",icon:os,component:R1,description:"Anlise de risco e crdito de clientes com score automatizado"},{id:"metas",label:"Metas & Targets",icon:Pa,component:_R,description:"Acompanhamento de objetivos e metas financeiras estratgicas"},{id:"alertas",label:"Alertas Crticos",icon:cs,component:CR,description:"Problemas e situaes que requerem ateno imediata"}];return e.jsxs("div",{className:"h-full",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 text-white px-6 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:" Consolidado Executivo"}),e.jsx("p",{className:"text-blue-100",children:"Anlises estratgicas complementares: Credit Scoring, Metas e Alertas"})]}),e.jsx(bg,{tabs:s,defaultTab:"credit-scoring"})]})}function SR(){return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-8 text-center",children:[e.jsx(eg,{className:"h-16 w-16 text-blue-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Relatrios Customizados"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Crie relatrios personalizados com os dados que voc precisa"}),e.jsx("div",{className:"inline-block bg-white rounded-lg px-6 py-3 shadow-md",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Em desenvolvimento - Disponvel em breve"})})]})})}function kR(){return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-8 text-center",children:[e.jsx(dm,{className:"h-16 w-16 text-purple-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Histrico de Relatrios"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Acesse relatrios gerados anteriormente e baixe novamente"}),e.jsx("div",{className:"inline-block bg-white rounded-lg px-6 py-3 shadow-md",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Em desenvolvimento - Disponvel em breve"})})]})})}function ER(){const s=[{id:"dashboards",label:"Dashboards",icon:mj,component:f1,description:"Relatrios visuais interativos com grficos e anlises"},{id:"pdfs",label:"PDFs Profissionais",icon:ut,component:M1,description:"Relatrios em PDF para impresso e apresentaes"},{id:"customizados",label:"Customizados",icon:eg,component:SR,description:"Crie relatrios personalizados com seus prprios filtros"},{id:"historico",label:"Histrico",icon:dm,component:kR,description:"Histrico de relatrios gerados anteriormente"}];return e.jsxs("div",{className:"h-full",children:[e.jsxs("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-700 text-white px-6 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:" Relatrios"}),e.jsx("p",{className:"text-emerald-100",children:"Todos os relatrios e anlises em um nico lugar"})]}),e.jsx(bg,{tabs:s,defaultTab:"dashboards"})]})}Wu.register(np,Zu,em,Ju,Yu,rp,Xu);function FR(){var N,D;const[s,t]=j.useState([]),[a,r]=j.useState([]),[n,i]=j.useState("all"),[o,l]=j.useState(!0);j.useEffect(()=>{c()},[]);const c=async()=>{l(!0);try{const{data:S}=await se.from("v_rfm_summary").select("*").order("total_value",{ascending:!1});t(S||[]);const{data:E}=await se.from("v_customer_rfm_segments").select("*").order("monetary_value",{ascending:!1}).limit(100);r(E||[])}catch(S){console.error("Error loading RFM data:",S)}finally{l(!1)}},d=S=>({Champions:"#10b981",Loyal:"#3b82f6",Potential:"#8b5cf6","At Risk":"#f59e0b",Lost:"#ef4444",New:"#6b7280",Other:"#9ca3af"})[S]||"#9ca3af",A=S=>{switch(S){case"Champions":return e.jsx(qs,{className:"h-5 w-5"});case"Loyal":return e.jsx(Nt,{className:"h-5 w-5"});case"Potential":return e.jsx(zt,{className:"h-5 w-5"});case"At Risk":return e.jsx(cs,{className:"h-5 w-5"});case"Lost":return e.jsx(vt,{className:"h-5 w-5"});default:return e.jsx(Nt,{className:"h-5 w-5"})}},u=S=>({Champions:"Recompensar com programa VIP e benefcios exclusivos",Loyal:"Oferecer upsell, cross-sell e produtos premium",Potential:"Engajar com benefcios de fidelidade","At Risk":" URGENTE: Campanha de reteno imediata!",Lost:"Campanha de win-back agressiva com ofertas especiais",New:"Nutrir relacionamento e apresentar catlogo",Other:"Monitorar comportamento"})[S]||"Monitorar",x={labels:s.map(S=>S.segment),datasets:[{data:s.map(S=>S.count),backgroundColor:s.map(S=>d(S.segment)),borderWidth:2,borderColor:"#fff"}]},m={labels:s.map(S=>S.segment),datasets:[{label:"Valor Total (R$)",data:s.map(S=>S.total_value),backgroundColor:s.map(S=>d(S.segment))}]},y=n==="all"?a:a.filter(S=>S.segment===n),g=a.length,b=s.reduce((S,E)=>S+E.total_value,0),p=((N=s.find(S=>S.segment==="Champions"))==null?void 0:N.count)||0,v=((D=s.find(S=>S.segment==="At Risk"))==null?void 0:D.count)||0;return o?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent"})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Anlise RFM de Clientes"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Segmentao por Recncia, Frequncia e Valor Monetrio"})]}),e.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(bs,{className:"h-4 w-4"}),"Atualizar"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total de Clientes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:g})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(Nt,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Valor Total"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:["R$ ",(b/1e3).toFixed(0),"k"]})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(Ut,{className:"h-6 w-6 text-green-600"})})]})}),e.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Champions"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 mt-1",children:p}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Melhores clientes"})]}),e.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:e.jsx(qs,{className:"h-6 w-6 text-yellow-600"})})]})}),e.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Em Risco"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600 mt-1",children:v}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Requerem ateno"})]}),e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(cs,{className:"h-6 w-6 text-orange-600"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.4},className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Distribuio por Segmento"}),e.jsx("div",{className:"h-64",children:e.jsx(IN,{data:x,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})})]}),e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.5},className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Valor por Segmento"}),e.jsx("div",{className:"h-64",children:e.jsx(au,{data:m,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:S=>"R$ "+(Number(S)/1e3).toFixed(0)+"k"}}}}})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map((S,E)=>e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6+E*.1},className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>i(S.segment),style:{borderLeft:`4px solid ${d(S.segment)}`},children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:`${d(S.segment)}20`},children:e.jsx("div",{style:{color:d(S.segment)},children:A(S.segment)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:S.segment}),e.jsxs("p",{className:"text-sm text-gray-600",children:[S.count," clientes"]})]})]})}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Valor Total:"}),e.jsxs("span",{className:"font-semibold",children:["R$ ",(S.total_value/1e3).toFixed(1),"k"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Freq. Mdia:"}),e.jsxs("span",{className:"font-semibold",children:[S.avg_frequency," compras"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Recncia Mdia:"}),e.jsxs("span",{className:"font-semibold",children:[S.avg_recency," dias"]})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:e.jsxs("p",{className:"text-xs text-gray-700",children:[e.jsx("strong",{children:"Ao:"})," ",u(S.segment)]})})]},S.segment))}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Clientes ",n!=="all"?`- ${n}`:""]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{value:n,onChange:S=>i(S.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"Todos os Segmentos"}),s.map(S=>e.jsx("option",{value:S.segment,children:S.segment},S.segment))]})})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Segmento"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Scores"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Recncia"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Frequncia"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Valor"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:y.slice(0,20).map(S=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:S.customer_name}),e.jsx("div",{className:"text-sm text-gray-500",children:S.email})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-3 py-1 text-xs font-medium rounded-full text-white",style:{backgroundColor:d(S.segment)},children:S.segment})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:["R:",S.r_score]}),e.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded",children:["F:",S.f_score]}),e.jsxs("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded",children:["M:",S.m_score]})]})}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-900",children:[S.recency_days," dias"]}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-900",children:[S.frequency_count," compras"]}),e.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:["R$ ",S.monetary_value.toFixed(2)]})]},S.customer_id))})]})}),y.length>20&&e.jsxs("div",{className:"p-4 border-t border-gray-200 text-center text-sm text-gray-600",children:["Mostrando 20 de ",y.length," clientes"]})]})]})}const UR=()=>{const[s,t]=j.useState(!0),[a,r]=j.useState([]),[n,i]=j.useState("current_month"),[o,l]=j.useState(null),[c,d]=j.useState([]);j.useEffect(()=>{A()},[n]);const A=async()=>{try{t(!0);const[g,b]=await Promise.all([se.from("employees").select("*").eq("active",!0).order("name"),se.from("v_technician_performance_public").select("*").order("completion_rate",{ascending:!1})]);r(g.data||[]),d(b.data||[])}catch(g){console.error("Error loading performance data:",g)}finally{t(!1)}},u=()=>c.slice(0,3),x=g=>c.find(b=>b.employee_id===g)||{},m=g=>g>=90?"text-green-600 bg-green-50":g>=70?"text-blue-600 bg-blue-50":g>=50?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50",y=g=>Array.from({length:5},(b,p)=>e.jsx(qs,{className:`w-4 h-4 ${p<g?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},p));return s?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ls,{className:"w-12 h-12 text-blue-600 animate-pulse mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando dados de desempenho..."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Dashboard de Desempenho - Tcnicos"}),e.jsx("p",{className:"text-gray-600",children:"Acompanhe mtricas de produtividade, qualidade e satisfao"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Perodo"}),e.jsxs("select",{value:n,onChange:g=>i(g.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"current_week",children:"Semana Atual"}),e.jsx("option",{value:"current_month",children:"Ms Atual"}),e.jsx("option",{value:"last_month",children:"Ms Anterior"}),e.jsx("option",{value:"current_quarter",children:"Trimestre Atual"}),e.jsx("option",{value:"current_year",children:"Ano Atual"})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tcnico"}),e.jsxs("select",{value:o||"",onChange:g=>l(g.target.value||null),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Todos os Tcnicos"}),a.map(g=>e.jsx("option",{value:g.id,children:g.name},g.id))]})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Wp,{className:"w-6 h-6 text-yellow-500"}),"Top 3 Performers"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:u().map((g,b)=>e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:b*.1},className:`bg-white rounded-lg shadow-sm p-6 border-2 ${b===0?"border-yellow-400":b===1?"border-gray-400":"border-orange-400"}`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${b===0?"bg-yellow-100 text-yellow-600":b===1?"bg-gray-100 text-gray-600":"bg-orange-100 text-orange-600"} font-bold text-xl`,children:["#",b+1]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:g.technician_name}),e.jsx("p",{className:"text-sm text-gray-500",children:"Tcnico"})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Taxa de Concluso"}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${m(g.completion_rate)}`,children:[g.completion_rate,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"OS Concludas"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[g.total_os_completed,"/",g.total_os_assigned]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Avaliao Mdia"}),e.jsx("div",{className:"flex items-center gap-1",children:y(Math.round(g.avg_customer_rating||0))})]})]})]},g.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:e.jsx(is,{className:"w-6 h-6 text-blue-600"})}),e.jsx(zt,{className:"w-5 h-5 text-green-500"})]}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"OS Concludas"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.reduce((g,b)=>g+(b.total_os_completed||0),0)}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["De ",c.reduce((g,b)=>g+(b.total_os_assigned||0),0)," atribudas"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-green-50 rounded-lg",children:e.jsx(Nu,{className:"w-6 h-6 text-green-600"})}),e.jsx(zt,{className:"w-5 h-5 text-green-500"})]}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Taxa de Checklist"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[c.length>0?Math.round(c.reduce((g,b)=>g+(b.checklist_completion_rate||0),0)/c.length):0,"%"]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[c.reduce((g,b)=>g+(b.total_checklists_completed||0),0)," completos"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-purple-50 rounded-lg",children:e.jsx(Mi,{className:"w-6 h-6 text-purple-600"})}),e.jsx(zt,{className:"w-5 h-5 text-green-500"})]}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Fotos Enviadas"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.reduce((g,b)=>g+(b.total_photos_submitted||0),0)}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Relatrios fotogrficos"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-yellow-50 rounded-lg",children:e.jsx(vt,{className:"w-6 h-6 text-yellow-600"})}),e.jsx(Pa,{className:"w-5 h-5 text-blue-500"})]}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Horas Trabalhadas"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[Math.round(c.reduce((g,b)=>g+(b.total_hours_worked||0),0)),"h"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Tempo total produtivo"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Desempenho Detalhado por Tcnico"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tcnico"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"OS Concludas"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Taxa Concluso"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No Prazo"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Checklist"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fotos"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assinaturas"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avaliao"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Horas"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(g=>{var p;const b=x(g.id);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white font-semibold",children:((p=g.name)==null?void 0:p.charAt(0))||"?"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:g.name}),e.jsx("p",{className:"text-xs text-gray-500",children:g.email})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:b.total_os_completed||0}),e.jsxs("span",{className:"text-xs text-gray-500",children:["/",b.total_os_assigned||0]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("span",{className:`inline-flex px-3 py-1 rounded-full text-xs font-medium ${m(b.completion_rate||0)}`,children:[b.completion_rate||0,"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-green-600 font-medium",children:b.on_time_completion||0}),e.jsx("span",{className:"text-gray-400 mx-1",children:"/"}),e.jsx("span",{className:"text-red-600 font-medium",children:b.late_completion||0})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("span",{className:"text-sm text-gray-900",children:[b.checklist_completion_rate||0,"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:"text-sm text-gray-900",children:b.total_photos_submitted||0})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:"text-sm text-gray-900",children:b.total_signatures_collected||0})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("div",{className:"flex items-center justify-center gap-1",children:y(Math.round(b.avg_customer_rating||0))})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("span",{className:"text-sm text-gray-900",children:[Math.round(b.total_hours_worked||0),"h"]})})]},g.id)})})]})})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(is,{className:"w-8 h-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-green-900",children:"Excelente Desempenho"}),e.jsxs("p",{className:"text-sm text-green-700",children:[c.filter(g=>(g.completion_rate||0)>=90).length," tcnicos acima de 90%"]})]})]})}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(es,{className:"w-8 h-8 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-yellow-900",children:"Ateno Necessria"}),e.jsxs("p",{className:"text-sm text-yellow-700",children:[c.filter(g=>(g.completion_rate||0)<70&&(g.completion_rate||0)>=50).length," tcnicos entre 50-70%"]})]})]})}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(es,{className:"w-8 h-8 text-red-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-900",children:"Requer Ao Imediata"}),e.jsxs("p",{className:"text-sm text-red-700",children:[c.filter(g=>(g.completion_rate||0)<50).length," tcnicos abaixo de 50%"]})]})]})})]})]})})},DR=()=>{var p;const s=ys(),t=zu(),{user:a,logout:r}=rs(),[n,i]=j.useState(!1),[o,l]=j.useState(!1),[c,d]=j.useState([]),[A,u]=j.useState(0),x=[{id:"home",label:"Incio",icon:gj,path:"/mobile",color:"blue"},{id:"agenda",label:"Agenda",icon:Ot,path:"/mobile/agenda",color:"purple"},{id:"orders",label:"OS",icon:ea,path:"/mobile/orders",color:"green"},{id:"purchases",label:"Compras",icon:Sn,path:"/mobile/purchases",color:"orange"},{id:"routes",label:"Rotas",icon:da,path:"/mobile/routes",color:"red"}];j.useEffect(()=>{m()},[a]);const m=async()=>{if(a!=null&&a.user_id)try{const{data:v}=await se.from("notifications").select("*").eq("user_id",a.user_id).eq("read",!1).order("created_at",{ascending:!1}).limit(5);d(v||[]),u((v==null?void 0:v.length)||0)}catch(v){console.error("Error loading notifications:",v)}},y=v=>v==="/mobile"?t.pathname==="/mobile":t.pathname.startsWith(v),g=v=>{const N={blue:"from-blue-500 to-blue-600",purple:"from-purple-500 to-purple-600",green:"from-green-500 to-green-600",orange:"from-orange-500 to-orange-600",red:"from-red-500 to-red-600"};return N[v.color]||N.blue},b=()=>{r(),s("/mobile/login")};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 pb-24",children:[e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 via-blue-700 to-purple-600 text-white sticky top-0 z-30 shadow-2xl",children:[e.jsx("div",{className:"h-1 bg-gradient-to-r from-yellow-400 via-pink-500 to-purple-500"}),e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsxs(W.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},className:"flex items-center gap-3 flex-1",children:[e.jsx(W.div,{whileTap:{scale:.9},className:"w-12 h-12 bg-gradient-to-br from-white/20 to-white/5 backdrop-blur-sm rounded-2xl flex items-center justify-center border border-white/20 shadow-lg",children:e.jsx(Jt,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-bold text-base truncate",children:((p=a==null?void 0:a.name)==null?void 0:p.split(" ")[0])||"Tcnico"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),e.jsx("p",{className:"text-xs text-blue-100",children:"Online"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(W.button,{whileTap:{scale:.9},onClick:()=>l(!o),className:"relative p-2.5 bg-white/10 backdrop-blur-sm rounded-xl hover:bg-white/20 transition-colors border border-white/10",children:[e.jsx(En,{className:"w-5 h-5"}),A>0&&e.jsx(W.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-xs font-bold border-2 border-white",children:A})]}),e.jsx(W.button,{whileTap:{scale:.9},onClick:()=>i(!n),className:"p-2.5 bg-white/10 backdrop-blur-sm rounded-xl hover:bg-white/20 transition-colors border border-white/10",children:e.jsx(xr,{className:"w-5 h-5"})})]})]})]})}),e.jsx(rt,{children:n&&e.jsxs(e.Fragment,{children:[e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",onClick:()=>i(!1)}),e.jsxs(W.div,{initial:{opacity:0,scale:.95,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},transition:{type:"spring",damping:25,stiffness:300},className:"fixed top-20 right-4 bg-white rounded-3xl shadow-2xl z-50 overflow-hidden border border-gray-100 w-80",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-6 text-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-14 h-14 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center border border-white/30",children:e.jsx(Jt,{className:"w-7 h-7"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-lg",children:a==null?void 0:a.name}),e.jsx("p",{className:"text-xs text-blue-100",children:a==null?void 0:a.role})]})]}),e.jsx("p",{className:"text-sm text-blue-100",children:a==null?void 0:a.email})]}),e.jsxs("div",{className:"p-3",children:[e.jsxs("button",{onClick:()=>{i(!1),s("/mobile/profile")},className:"w-full px-4 py-3.5 text-left hover:bg-gray-50 rounded-2xl transition-colors flex items-center gap-3 group",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center group-hover:bg-blue-200 transition-colors",children:e.jsx(Jt,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Meu Perfil"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Ver e editar informaes"})]})]}),e.jsxs("button",{onClick:b,className:"w-full px-4 py-3.5 text-left hover:bg-red-50 rounded-2xl transition-colors flex items-center gap-3 group",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-xl flex items-center justify-center group-hover:bg-red-200 transition-colors",children:e.jsx(i0,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-red-600",children:"Sair"}),e.jsx("p",{className:"text-xs text-red-400",children:"Desconectar da conta"})]})]})]})]})]})}),e.jsx(rt,{children:o&&e.jsxs(e.Fragment,{children:[e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",onClick:()=>l(!1)}),e.jsxs(W.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:100},transition:{type:"spring",damping:25,stiffness:300},className:"fixed top-0 right-0 bottom-0 w-80 bg-white shadow-2xl z-50 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Notificaes"}),e.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-white/20 rounded-xl transition-colors",children:e.jsx(ht,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:c.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(En,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"Sem notificaes"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Voc est em dia!"})]}):c.map(v=>e.jsxs(W.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-2xl p-4 border border-blue-100",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm mb-1",children:v.title}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:v.message}),e.jsx("p",{className:"text-xs text-gray-400",children:new Date(v.created_at).toLocaleString("pt-BR")})]},v.id))})]})]})}),e.jsx("div",{className:"p-4",children:e.jsx(Bv,{})}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-30",children:[e.jsx("div",{className:"bg-white/90 backdrop-blur-xl border-t border-gray-200/50 shadow-2xl",children:e.jsx("div",{className:"flex items-center justify-around px-2 py-3",children:x.map(v=>{const N=y(v.path);return e.jsxs(W.button,{onClick:()=>s(v.path),whileTap:{scale:.9},className:"relative flex flex-col items-center gap-1 px-3 py-2 rounded-2xl transition-all flex-1",children:[N&&e.jsx(W.div,{layoutId:"activeTab",className:`absolute inset-0 bg-gradient-to-br ${g(v)} rounded-2xl opacity-10`,transition:{type:"spring",stiffness:500,damping:30}}),e.jsxs(W.div,{className:`relative ${N?"text-blue-600":"text-gray-500"}`,animate:{scale:N?1.1:1},transition:{type:"spring",stiffness:500,damping:30},children:[e.jsx(v.icon,{className:"w-6 h-6",strokeWidth:N?2.5:2}),N&&e.jsx(W.div,{layoutId:"activeIndicator",className:`absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-gradient-to-r ${g(v)} rounded-full`})]}),e.jsx("span",{className:`text-xs font-semibold transition-colors ${N?"text-blue-600":"text-gray-500"}`,children:v.label})]},v.id)})})}),e.jsx("div",{className:"h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500"})]})]})},IR=()=>{var m;const s=ys(),{user:t}=rs(),[a,r]=j.useState({pendingOrders:0,inProgressOrders:0,completedToday:0,todayEvents:0}),[n,i]=j.useState([]),[o,l]=j.useState([]),[c,d]=j.useState(!0);j.useEffect(()=>{A()},[t]);const A=async()=>{var y,g,b,p;if(t!=null&&t.employee_id)try{d(!0);const v=new Date().toISOString().split("T")[0],[N,D,S,E]=await Promise.all([se.from("service_order_assignments").select("service_order_id").eq("employee_id",t.employee_id).eq("status","pending"),se.from("service_order_assignments").select("service_order_id").eq("employee_id",t.employee_id).eq("status","in_progress"),se.from("service_order_assignments").select("service_order_id").eq("employee_id",t.employee_id).eq("status","completed").gte("completed_at",v),se.from("agenda_events").select("*").eq("employee_id",t.employee_id).gte("event_date",v).lte("event_date",v)]);r({pendingOrders:((y=N.data)==null?void 0:y.length)||0,inProgressOrders:((g=D.data)==null?void 0:g.length)||0,completedToday:((b=S.data)==null?void 0:b.length)||0,todayEvents:((p=E.data)==null?void 0:p.length)||0});const R=await se.from("service_order_assignments").select(`
          *,
          service_orders (
            id,
            order_number,
            status,
            scheduled_date,
            customers (name)
          )
        `).eq("employee_id",t.employee_id).in("status",["pending","in_progress"]).order("assigned_at",{ascending:!1}).limit(5);i(R.data||[]),l(E.data||[])}catch(v){console.error("Error loading data:",v)}finally{d(!1)}},u=y=>({pending:"bg-yellow-500",in_progress:"bg-blue-500",completed:"bg-green-500",cancelled:"bg-red-500"})[y]||"bg-gray-500",x=y=>({pending:"Pendente",in_progress:"Em Execuo",completed:"Concluda",cancelled:"Cancelada"})[y]||y;return c?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Carregando..."})]})}):e.jsxs("div",{className:"space-y-6 pb-8",children:[e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-blue-600 to-blue-800 rounded-3xl p-6 text-white shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold mb-1",children:["Bem-vindo, ",(m=t==null?void 0:t.name)==null?void 0:m.split(" ")[0],"!"]}),e.jsx("p",{className:"text-blue-100",children:new Date().toLocaleDateString("pt-BR",{weekday:"long",day:"numeric",month:"long"})})]}),e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(qs,{className:"w-8 h-8 text-yellow-300"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-6",children:[e.jsxs("div",{className:"bg-white/10 rounded-xl p-3 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(is,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Concludas Hoje"})]}),e.jsx("p",{className:"text-3xl font-bold",children:a.completedToday})]}),e.jsxs("div",{className:"bg-white/10 rounded-xl p-3 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(vt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Em Andamento"})]}),e.jsx("p",{className:"text-3xl font-bold",children:a.inProgressOrders})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(W.button,{onClick:()=>s("/mobile/orders"),whileTap:{scale:.95},className:"bg-white rounded-2xl p-6 shadow-lg text-left",children:[e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center mb-3",children:e.jsx(es,{className:"w-6 h-6 text-yellow-600"})}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mb-1",children:a.pendingOrders}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"OS Pendentes"})]}),e.jsxs(W.button,{onClick:()=>s("/mobile/agenda"),whileTap:{scale:.95},className:"bg-white rounded-2xl p-6 shadow-lg text-left",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mb-3",children:e.jsx(Ot,{className:"w-6 h-6 text-blue-600"})}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mb-1",children:a.todayEvents}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Eventos Hoje"})]})]}),n.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Minhas OS"}),e.jsx("button",{onClick:()=>s("/mobile/orders"),className:"text-blue-600 font-semibold text-sm",children:"Ver todas"})]}),e.jsx("div",{className:"space-y-3",children:n.map(y=>{var g;return e.jsxs(W.button,{onClick:()=>s(`/service-orders/${y.service_orders.id}/mobile`),whileTap:{scale:.98},className:"w-full bg-white rounded-2xl p-4 shadow-lg text-left",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"font-bold text-gray-900 text-lg",children:["OS #",y.service_orders.order_number]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold text-white ${u(y.status)}`,children:x(y.status)})]}),e.jsx("p",{className:"text-gray-700 font-medium",children:(g=y.service_orders.customers)==null?void 0:g.name})]}),e.jsx(ea,{className:"w-6 h-6 text-gray-400 flex-shrink-0"})]}),y.service_orders.scheduled_date&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(Ot,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(y.service_orders.scheduled_date).toLocaleDateString("pt-BR")})]})]},y.id)})})]}),o.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Agenda de Hoje"}),e.jsx("button",{onClick:()=>s("/mobile/agenda"),className:"text-blue-600 font-semibold text-sm",children:"Ver agenda"})]}),e.jsx("div",{className:"space-y-3",children:o.map(y=>e.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(Ot,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-gray-900",children:y.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:y.description}),y.start_time&&e.jsxs("p",{className:"text-sm text-blue-600 font-semibold mt-2",children:[y.start_time.substring(0,5),y.end_time&&` - ${y.end_time.substring(0,5)}`]})]})]})},y.id))})]}),n.length===0&&o.length===0&&e.jsxs("div",{className:"bg-white rounded-2xl p-8 text-center shadow-lg",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Fs,{className:"w-10 h-10 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Tudo em dia!"}),e.jsx("p",{className:"text-gray-600",children:"Voc no tem ordens de servio ou eventos pendentes no momento."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(W.button,{onClick:()=>s("/mobile/library"),whileTap:{scale:.95},className:"bg-gradient-to-br from-purple-600 to-purple-700 rounded-2xl p-6 text-white shadow-xl text-left",children:[e.jsx(Wp,{className:"w-8 h-8 mb-3"}),e.jsx("p",{className:"font-bold text-lg",children:"Biblioteca"}),e.jsx("p",{className:"text-sm text-purple-100",children:"Manuais e docs"})]}),e.jsxs(W.button,{onClick:()=>s("/mobile/routes"),whileTap:{scale:.95},className:"bg-gradient-to-br from-green-600 to-green-700 rounded-2xl p-6 text-white shadow-xl text-left",children:[e.jsx(zt,{className:"w-8 h-8 mb-3"}),e.jsx("p",{className:"font-bold text-lg",children:"Minhas Rotas"}),e.jsx("p",{className:"text-sm text-green-100",children:"Rastreamento"})]})]})]})},LR=()=>{const s=ys(),{user:t}=rs(),[a,r]=j.useState([]),[n,i]=j.useState([]),[o,l]=j.useState(!0),[c,d]=j.useState("all"),[A,u]=j.useState("");j.useEffect(()=>{x()},[t]),j.useEffect(()=>{m()},[a,c,A]);const x=async()=>{if(t!=null&&t.employee_id)try{l(!0);const{data:v,error:N}=await se.from("service_order_assignments").select(`
          *,
          service_orders (
            id,
            order_number,
            status,
            scheduled_date,
            priority,
            customers (
              name,
              phone,
              customer_addresses (street, number, city)
            )
          )
        `).eq("employee_id",t.employee_id).order("assigned_at",{ascending:!1});r(v||[])}catch(v){console.error("Error loading orders:",v)}finally{l(!1)}},m=()=>{let v=a;c!=="all"&&(v=v.filter(N=>N.status===c)),A&&(v=v.filter(N=>{var D,S,E;return((D=N.service_orders.order_number)==null?void 0:D.toLowerCase().includes(A.toLowerCase()))||((E=(S=N.service_orders.customers)==null?void 0:S.name)==null?void 0:E.toLowerCase().includes(A.toLowerCase()))})),i(v)},y=v=>({pending:"bg-yellow-500",in_progress:"bg-blue-500",completed:"bg-green-500",cancelled:"bg-red-500"})[v]||"bg-gray-500",g=v=>({pending:"Pendente",in_progress:"Em Execuo",completed:"Concluda",cancelled:"Cancelada"})[v]||v,b=v=>v==="pending"?e.jsx(es,{className:"w-5 h-5"}):v==="in_progress"?e.jsx(ld,{className:"w-5 h-5"}):v==="completed"?e.jsx(is,{className:"w-5 h-5"}):e.jsx(ea,{className:"w-5 h-5"}),p=v=>v==="urgent"?"border-l-red-500":v==="high"?"border-l-orange-500":"border-l-blue-500";return o?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Carregando ordens..."})]})}):e.jsxs("div",{className:"space-y-4 pb-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Minhas OS"}),e.jsx("div",{className:"px-3 py-1 bg-blue-600 text-white rounded-full text-sm font-bold",children:n.length})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Qt,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por OS ou cliente...",value:A,onChange:v=>u(v.target.value),className:"w-full pl-12 pr-4 py-4 bg-white border-2 border-gray-200 rounded-2xl text-gray-900 placeholder-gray-400 focus:outline-none focus:border-blue-500 text-base"})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto hide-scrollbar pb-2",children:[{id:"all",label:"Todas",count:a.length},{id:"pending",label:"Pendentes",count:a.filter(v=>v.status==="pending").length},{id:"in_progress",label:"Em Execuo",count:a.filter(v=>v.status==="in_progress").length},{id:"completed",label:"Concludas",count:a.filter(v=>v.status==="completed").length}].map(v=>e.jsxs("button",{onClick:()=>d(v.id),className:`flex-shrink-0 px-4 py-2 rounded-xl font-semibold text-sm transition-all ${c===v.id?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-600 border-2 border-gray-200"}`,children:[v.label," (",v.count,")"]},v.id))}),n.length===0?e.jsxs("div",{className:"bg-white rounded-2xl p-8 text-center shadow-lg",children:[e.jsx(ea,{className:"w-20 h-20 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:A?"Nenhum resultado":"Nenhuma OS encontrada"}),e.jsx("p",{className:"text-gray-600",children:A?"Tente buscar por outro termo":"Voc no tem ordens de servio atribudas no momento"})]}):e.jsx("div",{className:"space-y-3",children:n.map(v=>{var S;const N=v.service_orders,D=N.customers;return e.jsxs(W.button,{onClick:()=>s(`/service-orders/${N.id}/mobile`),whileTap:{scale:.98},className:`w-full bg-white rounded-2xl p-5 shadow-lg text-left border-l-4 ${p(N.priority)}`,children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"font-bold text-gray-900 text-lg",children:["OS #",N.order_number]}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-bold text-white flex items-center gap-1 ${y(v.status)}`,children:[b(v.status),g(v.status)]})]}),e.jsx("p",{className:"text-gray-900 font-semibold text-base",children:D==null?void 0:D.name})]})}),e.jsxs("div",{className:"space-y-2 mt-3",children:[N.scheduled_date&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Ot,{className:"w-4 h-4"}),e.jsxs("span",{children:["Agendado: ",new Date(N.scheduled_date).toLocaleDateString("pt-BR")]})]}),((S=D==null?void 0:D.customer_addresses)==null?void 0:S[0])&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(da,{className:"w-4 h-4"}),e.jsxs("span",{className:"line-clamp-1",children:[D.customer_addresses[0].street,", ",D.customer_addresses[0].number," - ",D.customer_addresses[0].city]})]}),v.assigned_at&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(vt,{className:"w-4 h-4"}),e.jsxs("span",{children:["Atribuda em ",new Date(v.assigned_at).toLocaleDateString("pt-BR")]})]})]}),N.priority&&N.priority!=="normal"&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:e.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-bold ${N.priority==="urgent"?"bg-red-100 text-red-700":N.priority==="high"?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:N.priority==="urgent"?" URGENTE":N.priority==="high"?" ALTA PRIORIDADE":"NORMAL"})})]},v.id)})})]})},TR=()=>{const{user:s}=rs(),[t,a]=j.useState([]),[r,n]=j.useState(new Date),[i,o]=j.useState(!0);j.useEffect(()=>{l()},[s,r]);const l=async()=>{if(s!=null&&s.employee_id)try{o(!0);const m=r.toISOString().split("T")[0],{data:y,error:g}=await se.from("agenda_events").select(`
          *,
          service_orders (
            order_number,
            customers (name)
          )
        `).eq("employee_id",s.employee_id).gte("event_date",m).lte("event_date",m).order("start_time",{ascending:!0});a(y||[])}catch(m){console.error("Error loading events:",m)}finally{o(!1)}},c=m=>{const y=new Date(r);y.setDate(y.getDate()+m),n(y)},d=()=>{const m=new Date;return r.toDateString()===m.toDateString()},A=m=>({service:"bg-blue-500",meeting:"bg-purple-500",maintenance:"bg-orange-500",training:"bg-green-500",other:"bg-gray-500"})[m]||"bg-gray-500",u=m=>({service:"Servio",meeting:"Reunio",maintenance:"Manuteno",training:"Treinamento",other:"Outro"})[m]||m,x=m=>m==="completed"?e.jsx(is,{className:"w-5 h-5 text-green-600"}):m==="cancelled"?e.jsx(es,{className:"w-5 h-5 text-red-600"}):e.jsx(vt,{className:"w-5 h-5 text-blue-600"});return e.jsxs("div",{className:"space-y-4 pb-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Minha Agenda"}),e.jsx("div",{className:"px-3 py-1 bg-blue-600 text-white rounded-full text-sm font-bold",children:t.length})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:()=>c(-1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(od,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.getDate()}),e.jsx("p",{className:"text-sm text-gray-600",children:r.toLocaleDateString("pt-BR",{month:"long",year:"numeric"})}),e.jsx("p",{className:"text-xs text-blue-600 font-semibold",children:r.toLocaleDateString("pt-BR",{weekday:"long"})})]}),e.jsx("button",{onClick:()=>c(1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(vd,{className:"w-6 h-6 text-gray-600"})})]}),d()&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-3 text-center",children:e.jsxs("p",{className:"text-sm font-semibold text-blue-700",children:[" Hoje - ",new Date().toLocaleDateString("pt-BR")]})}),!d()&&e.jsx("button",{onClick:()=>n(new Date),className:"w-full bg-blue-600 text-white px-4 py-3 rounded-xl font-semibold hover:bg-blue-700 transition-colors",children:"Voltar para Hoje"})]}),i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Carregando eventos..."})]})}):t.length===0?e.jsxs("div",{className:"bg-white rounded-2xl p-8 text-center shadow-lg",children:[e.jsx(Ot,{className:"w-20 h-20 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Nenhum evento"}),e.jsx("p",{className:"text-gray-600",children:"Voc no tem eventos agendados para esta data"})]}):e.jsx("div",{className:"space-y-3",children:t.map(m=>{var y,g;return e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-5 shadow-lg",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold text-white ${A(m.event_type)}`,children:u(m.event_type)}),x(m.status)]}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:m.title}),m.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:m.description})]})}),e.jsxs("div",{className:"flex items-center gap-2 text-blue-600 font-semibold mb-3 bg-blue-50 rounded-xl p-3",children:[e.jsx(vt,{className:"w-5 h-5"}),e.jsxs("span",{children:[(y=m.start_time)==null?void 0:y.substring(0,5),m.end_time&&` - ${m.end_time.substring(0,5)}`]})]}),e.jsxs("div",{className:"space-y-2",children:[m.location&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(da,{className:"w-4 h-4"}),e.jsx("span",{children:m.location})]}),m.service_orders&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Ot,{className:"w-4 h-4"}),e.jsxs("span",{children:["OS #",m.service_orders.order_number," - ",(g=m.service_orders.customers)==null?void 0:g.name]})]}),m.notes&&e.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-xl",children:e.jsxs("p",{className:"text-sm text-yellow-900",children:[e.jsx("span",{className:"font-semibold",children:"Observaes:"})," ",m.notes]})})]}),m.status==="completed"&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-lg text-xs font-bold",children:" Concludo"})}),m.status==="cancelled"&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-700 rounded-lg text-xs font-bold",children:" Cancelado"})})]},m.id)})})]})},QR=()=>{const[s,t]=j.useState([]),[a,r]=j.useState([]),[n,i]=j.useState(!0),[o,l]=j.useState(""),[c,d]=j.useState("all"),[A,u]=j.useState([]);j.useEffect(()=>{x()},[]),j.useEffect(()=>{m()},[s,o,c]);const x=async()=>{try{i(!0);const{data:v,error:N}=await se.from("digital_library").select("*").eq("status","active").order("created_at",{ascending:!1});if(v){t(v);const D=Array.from(new Set(v.map(S=>S.category).filter(Boolean)));u(D)}}catch(v){console.error("Error loading documents:",v)}finally{i(!1)}},m=()=>{let v=s;c!=="all"&&(v=v.filter(N=>N.category===c)),o&&(v=v.filter(N=>{var D,S,E;return((D=N.title)==null?void 0:D.toLowerCase().includes(o.toLowerCase()))||((S=N.description)==null?void 0:S.toLowerCase().includes(o.toLowerCase()))||((E=N.tags)==null?void 0:E.some(R=>R.toLowerCase().includes(o.toLowerCase())))})),r(v)},y=v=>v!=null&&v.includes("pdf")?"":v!=null&&v.includes("image")?"":v!=null&&v.includes("video")?"":v!=null&&v.includes("word")||v!=null&&v.includes("doc")?"":v!=null&&v.includes("excel")||v!=null&&v.includes("sheet")?"":"",g=v=>({manual:"bg-blue-500",procedimento:"bg-green-500",treinamento:"bg-purple-500",seguranca:"bg-red-500",tecnico:"bg-orange-500",administrativo:"bg-gray-500"})[v==null?void 0:v.toLowerCase()]||"bg-gray-500",b=async v=>{v.file_url&&window.open(v.file_url,"_blank")},p=async v=>{v.file_url&&window.open(v.file_url,"_blank")};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Carregando biblioteca..."})]})}):e.jsxs("div",{className:"space-y-4 pb-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Biblioteca Digital"}),e.jsx("div",{className:"px-3 py-1 bg-purple-600 text-white rounded-full text-sm font-bold",children:a.length})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Qt,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar documentos...",value:o,onChange:v=>l(v.target.value),className:"w-full pl-12 pr-4 py-4 bg-white border-2 border-gray-200 rounded-2xl text-gray-900 placeholder-gray-400 focus:outline-none focus:border-purple-500 text-base"})]}),A.length>0&&e.jsxs("div",{className:"flex gap-2 overflow-x-auto hide-scrollbar pb-2",children:[e.jsx("button",{onClick:()=>d("all"),className:`flex-shrink-0 px-4 py-2 rounded-xl font-semibold text-sm transition-all ${c==="all"?"bg-purple-600 text-white shadow-lg":"bg-white text-gray-600 border-2 border-gray-200"}`,children:"Todos"}),A.map(v=>e.jsx("button",{onClick:()=>d(v),className:`flex-shrink-0 px-4 py-2 rounded-xl font-semibold text-sm transition-all capitalize ${c===v?"bg-purple-600 text-white shadow-lg":"bg-white text-gray-600 border-2 border-gray-200"}`,children:v},v))]}),a.length===0?e.jsxs("div",{className:"bg-white rounded-2xl p-8 text-center shadow-lg",children:[e.jsx(db,{className:"w-20 h-20 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:o?"Nenhum resultado":"Nenhum documento"}),e.jsx("p",{className:"text-gray-600",children:o?"Tente buscar por outro termo":"No h documentos disponveis no momento"})]}):e.jsx("div",{className:"space-y-3",children:a.map(v=>e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-5 shadow-lg",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center text-2xl flex-shrink-0",children:y(v.file_type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[v.category&&e.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-bold text-white ${g(v.category)}`,children:v.category}),v.is_featured&&e.jsx(qs,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"})]}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:v.title}),v.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:v.description})]})]}),v.tags&&v.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:v.tags.map((N,D)=>e.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-lg text-xs font-medium flex items-center gap-1",children:[e.jsx(Su,{className:"w-3 h-3"}),N]},D))}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 mb-4",children:[v.file_size&&e.jsxs("span",{children:[(v.file_size/1024/1024).toFixed(2)," MB"]}),v.created_at&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(vt,{className:"w-3 h-3"}),e.jsx("span",{children:new Date(v.created_at).toLocaleDateString("pt-BR")})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>p(v),className:"px-4 py-3 bg-purple-600 text-white rounded-xl font-semibold hover:bg-purple-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx($s,{className:"w-5 h-5"}),"Visualizar"]}),e.jsxs("button",{onClick:()=>b(v),className:"px-4 py-3 border-2 border-purple-600 text-purple-600 rounded-xl font-semibold hover:bg-purple-50 transition-colors flex items-center justify-center gap-2",children:[e.jsx(wa,{className:"w-5 h-5"}),"Baixar"]})]})]},v.id))}),s.length===0&&!n&&e.jsxs("div",{className:"bg-gradient-to-br from-purple-100 to-purple-200 rounded-2xl p-8 text-center",children:[e.jsx(db,{className:"w-20 h-20 text-purple-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-purple-900 mb-2",children:"Biblioteca em Construo"}),e.jsx("p",{className:"text-purple-800",children:"Manuais, procedimentos e documentos tcnicos sero disponibilizados em breve."})]})]})},PR=()=>{const{user:s}=rs(),[t,a]=j.useState(null),[r,n]=j.useState([]),[i,o]=j.useState(!0),[l,c]=j.useState(!1),[d,A]=j.useState(null);j.useEffect(()=>{u(),x()},[s]),j.useEffect(()=>{let N;return l&&(N=navigator.geolocation.watchPosition(D=>{A({lat:D.coords.latitude,lng:D.coords.longitude})},D=>{console.error("Error getting location:",D)},{enableHighAccuracy:!0,maximumAge:1e4})),()=>{N&&navigator.geolocation.clearWatch(N)}},[l]);const u=async()=>{if(s!=null&&s.employee_id)try{const N=new Date().toISOString().split("T")[0],{data:D,error:S}=await se.from("route_tracking").select("*").eq("employee_id",s.employee_id).gte("route_date",N).order("created_at",{ascending:!1});n(D||[])}catch(N){console.error("Error loading routes:",N)}finally{o(!1)}},x=async()=>{if(s!=null&&s.employee_id)try{const{data:N,error:D}=await se.from("route_tracking").select("*").eq("employee_id",s.employee_id).eq("status","in_progress").order("created_at",{ascending:!1}).limit(1).single();N&&(a(N),c(!0))}catch{}},m=async()=>{if(s!=null&&s.employee_id)try{const{data:N,error:D}=await se.from("route_tracking").insert({employee_id:s.employee_id,route_date:new Date().toISOString().split("T")[0],start_time:new Date().toISOString(),status:"in_progress",route_points:d?[d]:[]}).select().single();N&&(a(N),c(!0))}catch(N){console.error("Error starting route:",N)}},y=async()=>{c(!1)},g=async()=>{c(!0)},b=async()=>{if(t)try{const{error:N}=await se.from("route_tracking").update({end_time:new Date().toISOString(),status:"completed"}).eq("id",t.id);a(null),c(!1),u()}catch(N){console.error("Error ending route:",N)}},p=(N,D)=>{const S=`https://www.google.com/maps/search/?api=1&query=${N},${D}`;window.open(S,"_blank")},v=(N,D)=>{const S=new Date(N),R=(D?new Date(D):new Date).getTime()-S.getTime(),_=Math.floor(R/(1e3*60*60)),C=Math.floor(R%(1e3*60*60)/(1e3*60));return`${_}h ${C}min`};return i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-green-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Carregando rotas..."})]})}):e.jsxs("div",{className:"space-y-4 pb-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Minhas Rotas"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(no,{className:"w-5 h-5 text-green-600"}),l&&e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"})]})]}),t?e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-green-600 to-green-700 rounded-3xl p-6 text-white shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(da,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-100",children:"Rota Ativa"}),e.jsx("p",{className:"text-xl font-bold",children:"Em Andamento"})]})]}),l&&e.jsxs("div",{className:"flex items-center gap-2 bg-white/20 rounded-full px-3 py-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-300 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-semibold",children:"Rastreando"})]})]}),e.jsx("div",{className:"bg-white/10 rounded-2xl p-4 backdrop-blur-sm mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-100 mb-1",children:"Iniciado"}),e.jsx("p",{className:"text-lg font-bold",children:new Date(t.start_time).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-100 mb-1",children:"Durao"}),e.jsx("p",{className:"text-lg font-bold",children:v(t.start_time)})]})]})}),d&&e.jsxs("button",{onClick:()=>p(d.lat,d.lng),className:"w-full bg-white text-green-700 px-4 py-3 rounded-xl font-bold hover:bg-green-50 transition-colors flex items-center justify-center gap-2 mb-3",children:[e.jsx(Th,{className:"w-5 h-5"}),"Ver no Mapa"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[l?e.jsxs("button",{onClick:y,className:"bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-3 rounded-xl font-semibold transition-colors flex items-center justify-center gap-2",children:[e.jsx(fj,{className:"w-5 h-5"}),"Pausar"]}):e.jsxs("button",{onClick:g,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-3 rounded-xl font-semibold transition-colors flex items-center justify-center gap-2",children:[e.jsx(cd,{className:"w-5 h-5"}),"Retomar"]}),e.jsxs("button",{onClick:b,className:"col-span-2 bg-red-500 hover:bg-red-600 text-white px-4 py-3 rounded-xl font-semibold transition-colors flex items-center justify-center gap-2",children:[e.jsx(PS,{className:"w-5 h-5"}),"Finalizar Rota"]})]})]}):e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-6 shadow-lg text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(no,{className:"w-10 h-10 text-green-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Nenhuma rota ativa"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Inicie uma nova rota para comear o rastreamento"}),e.jsxs("button",{onClick:m,className:"w-full bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-4 rounded-2xl font-bold hover:from-green-700 hover:to-green-800 transition-all shadow-lg flex items-center justify-center gap-2",children:[e.jsx(cd,{className:"w-6 h-6"}),"Iniciar Nova Rota"]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Histrico de Rotas"}),r.length===0?e.jsxs("div",{className:"bg-white rounded-2xl p-8 text-center shadow-lg",children:[e.jsx(Th,{className:"w-20 h-20 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Nenhuma rota registrada"}),e.jsx("p",{className:"text-gray-600",children:"Suas rotas completadas aparecero aqui"})]}):e.jsx("div",{className:"space-y-3",children:r.map(N=>e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-5 shadow-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold text-white ${N.status==="completed"?"bg-green-500":N.status==="in_progress"?"bg-blue-500":"bg-gray-500"}`,children:N.status==="completed"?" Concluda":N.status==="in_progress"?" Em Andamento":"Pausada"})}),e.jsx("p",{className:"text-sm text-gray-600",children:new Date(N.route_date).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"})})]}),e.jsx(Th,{className:"w-6 h-6 text-gray-400"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(vt,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Incio"})]}),e.jsx("p",{className:"font-bold text-gray-900",children:new Date(N.start_time).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]}),N.end_time&&e.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(is,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Trmino"})]}),e.jsx("p",{className:"font-bold text-gray-900",children:new Date(N.end_time).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]})]}),N.end_time&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(zt,{className:"w-4 h-4"}),e.jsxs("span",{children:["Durao: ",e.jsx("span",{className:"font-bold text-gray-900",children:v(N.start_time,N.end_time)})]})]})})]},N.id))})]})]})},MR=()=>{ys();const{user:s}=rs(),{showToast:t}=fg(),[a,r]=j.useState("new"),[n,i]=j.useState([]),[o,l]=j.useState([]),[c,d]=j.useState([]),[A,u]=j.useState([]),[x,m]=j.useState(!0),[y,g]=j.useState(""),[b,p]=j.useState("materials"),[v,N]=j.useState("normal"),[D,S]=j.useState(""),[E,R]=j.useState(""),[_,C]=j.useState([]),[L,f]=j.useState(!1);j.useEffect(()=>{F()},[s]);const F=async()=>{if(s!=null&&s.employee_id)try{m(!0);const{data:I}=await se.from("purchase_requests").select(`
          *,
          purchase_request_items (*)
        `).eq("requester_id",s.employee_id).order("created_at",{ascending:!1}),{data:B}=await se.from("inventory_items").select("*").eq("active",!0).order("name"),{data:$}=await se.from("special_tools_catalog").select("*").eq("active",!0).order("name"),{data:T}=await se.from("technician_vehicle_inventory").select(`
          *,
          inventory_items (name, unit, sku)
        `).eq("employee_id",s.employee_id);i(I||[]),l(B||[]),d($||[]),u(T||[])}catch(I){console.error("Error loading data:",I)}finally{m(!1)}},M=(I,B)=>{const $={id:Math.random().toString(),type:B,item_id:I.id,name:I.name,quantity:1,unit:I.unit||"un",estimated_price:B==="material"?I.purchase_price:I.is_rental?I.rental_price_daily:I.purchase_price,urgency_reason:""};C([..._,$]),f(!1)},P=I=>{C(_.filter(B=>B.id!==I))},Z=(I,B)=>{C(_.map($=>$.id===I?{...$,quantity:B}:$))},O=async()=>{if(_.length===0){t("Adicione ao menos um item","error");return}try{const I=_.map(T=>({item_type:T.type,material_id:T.type==="material"?T.item_id:null,tool_id:T.type==="tool"?T.item_id:null,custom_description:T.name,quantity:T.quantity,unit:T.unit,estimated_unit_price:T.estimated_price,urgency_reason:T.urgency_reason})),{data:B,error:$}=await se.rpc("create_purchase_request_mobile",{p_requester_id:s.employee_id,p_request_type:b,p_urgency:v,p_reason:D,p_notes:E,p_items:I});if($)throw $;t("Solicitao enviada com sucesso!","success"),C([]),S(""),R(""),N("normal"),r("history"),F()}catch(I){console.error("Error submitting request:",I),t(I.message||"Erro ao enviar solicitao","error")}},X=I=>({pending:"bg-yellow-500",approved:"bg-blue-500",in_purchase:"bg-purple-500",purchased:"bg-green-500",delivered:"bg-green-600",cancelled:"bg-red-500"})[I]||"bg-gray-500",q=I=>({pending:"Pendente",approved:"Aprovada",in_purchase:"Em Compra",purchased:"Comprada",delivered:"Entregue",cancelled:"Cancelada"})[I]||I,V=I=>I==="delivered"?e.jsx(is,{className:"w-5 h-5"}):I==="cancelled"?e.jsx(eo,{className:"w-5 h-5"}):I==="pending"?e.jsx(vt,{className:"w-5 h-5"}):e.jsx(es,{className:"w-5 h-5"}),oe=o.filter(I=>{var B;return(B=I.name)==null?void 0:B.toLowerCase().includes(y.toLowerCase())}),H=c.filter(I=>{var B;return(B=I.name)==null?void 0:B.toLowerCase().includes(y.toLowerCase())});return x?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Carregando compras..."})]})}):e.jsxs("div",{className:"space-y-4 pb-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Solicitaes de Compra"}),e.jsx(Sn,{className:"w-6 h-6 text-blue-600"})]}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto hide-scrollbar",children:[e.jsxs("button",{onClick:()=>r("new"),className:`flex-shrink-0 px-4 py-2 rounded-xl font-semibold text-sm transition-all ${a==="new"?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-600 border-2 border-gray-200"}`,children:[e.jsx(bt,{className:"w-4 h-4 inline mr-1"}),"Nova Solicitao"]}),e.jsxs("button",{onClick:()=>r("materials"),className:`flex-shrink-0 px-4 py-2 rounded-xl font-semibold text-sm transition-all ${a==="materials"?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-600 border-2 border-gray-200"}`,children:[e.jsx(wt,{className:"w-4 h-4 inline mr-1"}),"Meu Estoque"]}),e.jsxs("button",{onClick:()=>r("tools"),className:`flex-shrink-0 px-4 py-2 rounded-xl font-semibold text-sm transition-all ${a==="tools"?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-600 border-2 border-gray-200"}`,children:[e.jsx(dd,{className:"w-4 h-4 inline mr-1"}),"Ferramentas"]}),e.jsxs("button",{onClick:()=>r("history"),className:`flex-shrink-0 px-4 py-2 rounded-xl font-semibold text-sm transition-all ${a==="history"?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-600 border-2 border-gray-200"}`,children:[e.jsx(vt,{className:"w-4 h-4 inline mr-1"}),"Histrico (",n.length,")"]})]}),e.jsxs(rt,{mode:"wait",children:[a==="new"&&e.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:e.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Criar Nova Solicitao"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"O que voc precisa?"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["materials","tools","both"].map(I=>e.jsxs("button",{onClick:()=>p(I),className:`px-4 py-3 rounded-xl font-semibold text-sm transition-all ${b===I?"bg-blue-600 text-white":"bg-gray-100 text-gray-600"}`,children:[I==="materials"&&e.jsx(wt,{className:"w-4 h-4 inline mr-1"}),I==="tools"&&e.jsx(dd,{className:"w-4 h-4 inline mr-1"}),I==="both"&&e.jsx(Sn,{className:"w-4 h-4 inline mr-1"}),I==="materials"?"Materiais":I==="tools"?"Ferramentas":"Ambos"]},I))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Urgncia"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"normal",label:"Normal",color:"bg-blue-100 text-blue-700"},{value:"high",label:"Alta",color:"bg-orange-100 text-orange-700"},{value:"urgent",label:"Urgente",color:"bg-red-100 text-red-700"}].map(I=>e.jsx("button",{onClick:()=>N(I.value),className:`px-4 py-3 rounded-xl font-semibold text-sm transition-all ${v===I.value?I.color:"bg-gray-100 text-gray-600"}`,children:I.label},I.value))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Motivo da solicitao"}),e.jsx("input",{type:"text",value:D,onChange:I=>S(I.target.value),placeholder:"Ex: Material em falta, ferramenta necessria para obra...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes (opcional)"}),e.jsx("textarea",{value:E,onChange:I=>R(I.target.value),placeholder:"Informaes adicionais...",rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Itens (",_.length,")"]}),e.jsxs("button",{onClick:()=>f(!0),className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm font-semibold",children:[e.jsx(bt,{className:"w-4 h-4 inline mr-1"}),"Adicionar"]})]}),_.length===0?e.jsxs("div",{className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl p-6 text-center",children:[e.jsx(wt,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Nenhum item adicionado"})]}):e.jsxs("div",{className:"space-y-2",children:[_.map(I=>e.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:I.name}),e.jsx("p",{className:"text-xs text-gray-500",children:I.type==="material"?" Material":" Ferramenta"})]}),e.jsx("button",{onClick:()=>P(I.id),className:"p-1 text-red-600 hover:bg-red-100 rounded",children:e.jsx(Vt,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:I.quantity,onChange:B=>Z(I.id,parseFloat(B.target.value)||1),min:"1",step:"0.01",className:"w-20 px-2 py-1 border border-gray-300 rounded text-center"}),e.jsx("span",{className:"text-sm text-gray-600",children:I.unit}),I.estimated_price&&e.jsxs("span",{className:"ml-auto text-sm font-semibold text-green-600",children:["R$ ",(I.quantity*I.estimated_price).toFixed(2)]})]})]},I.id)),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-3 flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold text-blue-900",children:"Total Estimado"}),e.jsxs("span",{className:"text-xl font-bold text-blue-600",children:["R$ ",_.reduce((I,B)=>I+B.quantity*(B.estimated_price||0),0).toFixed(2)]})]})]})]}),e.jsxs("button",{onClick:O,disabled:_.length===0,className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-4 rounded-2xl font-bold hover:from-blue-700 hover:to-blue-800 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(Ma,{className:"w-5 h-5"}),"Enviar Solicitao"]})]})},"new"),a==="materials"&&e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-100 to-blue-200 rounded-2xl p-5",children:[e.jsx("h3",{className:"font-bold text-blue-900 mb-2",children:"Inventrio do Veculo"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Materiais disponveis no seu carro"})]}),A.length===0?e.jsxs("div",{className:"bg-white rounded-2xl p-8 text-center shadow-lg",children:[e.jsx(wt,{className:"w-20 h-20 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Estoque vazio"}),e.jsx("p",{className:"text-gray-600",children:"Configure seu inventrio no sistema"})]}):A.map(I=>{var T,ne;const B=I.current_quantity/I.max_quantity*100,$=I.current_quantity<=I.min_quantity;return e.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-gray-900",children:(T=I.inventory_items)==null?void 0:T.name}),e.jsx("p",{className:"text-sm text-gray-500",children:(ne=I.inventory_items)==null?void 0:ne.sku})]}),$&&e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded-lg text-xs font-bold",children:" Baixo"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 mb-1",children:[e.jsx("span",{children:"Quantidade"}),e.jsxs("span",{children:[I.current_quantity," / ",I.max_quantity," ",I.unit]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${$?"bg-red-500":B>50?"bg-green-500":"bg-yellow-500"}`,style:{width:`${Math.min(B,100)}%`}})})]}),I.location_in_vehicle&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[" ",I.location_in_vehicle]})]},I.id)})]},"materials"),a==="tools"&&e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-orange-100 to-orange-200 rounded-2xl p-5",children:[e.jsx("h3",{className:"font-bold text-orange-900 mb-2",children:"Ferramentas Especiais"}),e.jsx("p",{className:"text-sm text-orange-700",children:"Disponveis para locao/compra"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Qt,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar ferramentas...",value:y,onChange:I=>g(I.target.value),className:"w-full pl-12 pr-4 py-4 bg-white border-2 border-gray-200 rounded-2xl focus:outline-none focus:border-orange-500"})]}),H.map(I=>{var B;return e.jsx("div",{className:"bg-white rounded-2xl p-5 shadow-lg",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-xl flex items-center justify-center text-2xl flex-shrink-0",children:""}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-gray-900",children:I.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:I.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[I.is_rental&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Diria:"}),e.jsxs("span",{className:"font-bold text-green-600 ml-1",children:["R$ ",(B=I.rental_price_daily)==null?void 0:B.toFixed(2)]})]}),I.available>0?e.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-bold",children:[" ",I.available," disponvel(is)"]}):e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded text-xs font-bold",children:" Indisponvel"})]})]})]})},I.id)})]},"tools"),a==="history"&&e.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-3",children:n.length===0?e.jsxs("div",{className:"bg-white rounded-2xl p-8 text-center shadow-lg",children:[e.jsx(vt,{className:"w-20 h-20 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Nenhuma solicitao"}),e.jsx("p",{className:"text-gray-600",children:"Suas solicitaes aparecero aqui"})]}):n.map(I=>{var B;return e.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-bold text-gray-900",children:I.request_number}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-bold text-white flex items-center gap-1 ${X(I.status)}`,children:[V(I.status),q(I.status)]})]}),I.reason&&e.jsx("p",{className:"text-sm text-gray-600",children:I.reason})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Itens:"}),e.jsx("span",{className:"font-semibold",children:((B=I.purchase_request_items)==null?void 0:B.length)||0})]}),I.estimated_total&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Valor estimado:"}),e.jsxs("span",{className:"font-bold text-green-600",children:["R$ ",I.estimated_total.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Data:"}),e.jsx("span",{children:new Date(I.created_at).toLocaleDateString("pt-BR")})]})]}),I.approval_notes&&e.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-xl",children:e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("span",{className:"font-semibold",children:"Observao:"})," ",I.approval_notes]})})]},I.id)})},"history")]}),L&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-end",children:e.jsxs(W.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},className:"bg-white rounded-t-3xl w-full max-h-[80vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-5 border-b",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Adicionar Item"}),e.jsx("button",{onClick:()=>f(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:""})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>p("materials"),className:`flex-1 px-4 py-2 rounded-xl font-semibold text-sm ${b==="materials"?"bg-blue-600 text-white":"bg-gray-100 text-gray-600"}`,children:"Materiais"}),e.jsx("button",{onClick:()=>p("tools"),className:`flex-1 px-4 py-2 rounded-xl font-semibold text-sm ${b==="tools"?"bg-orange-600 text-white":"bg-gray-100 text-gray-600"}`,children:"Ferramentas"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-5 space-y-2",children:b==="materials"?oe.map(I=>e.jsxs("button",{onClick:()=>M(I,"material"),className:"w-full bg-gray-50 hover:bg-blue-50 rounded-xl p-4 text-left transition-colors",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:I.name}),e.jsx("p",{className:"text-sm text-gray-500",children:I.sku}),I.purchase_price&&e.jsxs("p",{className:"text-sm text-green-600 font-semibold mt-1",children:["R$ ",I.purchase_price.toFixed(2)," / ",I.unit]})]},I.id)):H.map(I=>{var B;return e.jsxs("button",{onClick:()=>M(I,"tool"),className:"w-full bg-gray-50 hover:bg-orange-50 rounded-xl p-4 text-left transition-colors",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:I.name}),e.jsx("p",{className:"text-sm text-gray-500",children:I.description}),I.is_rental&&e.jsxs("p",{className:"text-sm text-green-600 font-semibold mt-1",children:["R$ ",(B=I.rental_price_daily)==null?void 0:B.toFixed(2)," / dia"]})]},I.id)})})]})})]})},RR=()=>{const[s,t]=j.useState([]),[a,r]=j.useState(!0),[n,i]=j.useState(null),[o,l]=j.useState({totalToPay:0,totalPaid:0,totalRemaining:0,overdueCount:0}),[c,d]=j.useState(!1),[A,u]=j.useState(!1),[x,m]=j.useState(null),[y,g]=j.useState(""),[b,p]=j.useState("pix"),[v,N]=j.useState(new Date().toISOString().split("T")[0]),[D,S]=j.useState(""),[E,R]=j.useState([]),[_,C]=j.useState("all"),[L,f]=j.useState(null),[F,M]=j.useState({base_salary:"",bonuses:"",discounts:"",due_date:""});j.useEffect(()=>{P()},[_]);const P=async()=>{try{r(!0),i(null);let B=se.from("v_pending_salary_payments").select("*");_!=="all"&&(B=B.eq("payment_status",_));const{data:$,error:T}=await B;if(T)throw T;t($||[]);const ne=($==null?void 0:$.reduce((Be,ee)=>Be+Number(ee.gross_amount),0))||0,ue=($==null?void 0:$.reduce((Be,ee)=>Be+Number(ee.paid_amount),0))||0,me=($==null?void 0:$.reduce((Be,ee)=>Be+Number(ee.remaining_amount),0))||0,xe=($==null?void 0:$.filter(Be=>Be.payment_status==="overdue").length)||0;l({totalToPay:ne,totalPaid:ue,totalRemaining:me,overdueCount:xe})}catch(B){console.error("Error loading salaries:",B),i(B.message||"Erro ao carregar salrios")}finally{r(!1)}},Z=async()=>{var B,$;if(confirm("Criar salrios para o ms atual para todos os funcionrios ativos?"))try{const{data:T,error:ne}=await se.rpc("create_monthly_salaries");if(ne)throw ne;alert(`Sucesso! ${((B=T[0])==null?void 0:B.created_count)||0} salrios criados no valor total de R$ ${((($=T[0])==null?void 0:$.total_amount)||0).toFixed(2)}`),P()}catch(T){console.error("Error creating salaries:",T),alert("Erro ao criar salrios: "+T.message)}},O=B=>{m(B),g(B.remaining_amount.toString()),p("pix"),N(new Date().toISOString().split("T")[0]),S(""),d(!0)},X=async()=>{if(!x||!y||Number(y)<=0){alert("Por favor, preencha o valor do pagamento");return}if(Number(y)>x.remaining_amount){alert("Valor do pagamento no pode ser maior que o saldo devedor");return}try{const{data:B,error:$}=await se.rpc("register_salary_payment",{p_salary_id:x.id,p_amount:Number(y),p_payment_method:b,p_payment_date:v,p_notes:D||null});if($)throw $;alert("Pagamento registrado com sucesso!"),d(!1),P()}catch(B){console.error("Error registering payment:",B),alert("Erro ao registrar pagamento: "+B.message)}},q=B=>{f(B.id),M({base_salary:B.base_salary.toString(),bonuses:(B.bonuses||0).toString(),discounts:(B.discounts||0).toString(),due_date:Zt(new Date(B.due_date),"yyyy-MM-dd")})},V=()=>{f(null),M({base_salary:"",bonuses:"",discounts:"",due_date:""})},oe=async B=>{try{const{data:$,error:T}=await se.rpc("update_salary_tracking",{p_salary_id:B,p_base_salary:F.base_salary?Number(F.base_salary):null,p_bonuses:F.bonuses?Number(F.bonuses):null,p_discounts:F.discounts?Number(F.discounts):null,p_due_date:F.due_date||null,p_notes:null});if(T)throw T;alert("Salrio atualizado com sucesso!"),V(),P()}catch($){console.error("Error updating salary:",$),alert("Erro ao atualizar salrio: "+$.message)}},H=async B=>{try{const{data:$,error:T}=await se.from("v_salary_payment_history").select("*").eq("salary_tracking_id",B).order("payment_date",{ascending:!1});if(T)throw T;R($||[]),u(!0)}catch($){console.error("Error loading payment history:",$)}},I=B=>{const $={pending:{label:"Pendente",color:"bg-yellow-100 text-yellow-800"},partial:{label:"Parcial",color:"bg-blue-100 text-blue-800"},paid:{label:"Pago",color:"bg-green-100 text-green-800"},overdue:{label:"Atrasado",color:"bg-red-100 text-red-800"}},T=$[B]||$.pending;return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${T.color}`,children:T.label})};return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(es,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-red-600 font-medium",children:n}),e.jsx("button",{onClick:()=>P(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Tentar Novamente"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Gesto de Salrios"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Controle de pagamentos com suporte a parcelas"})]}),e.jsxs("button",{onClick:Z,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(bt,{className:"w-5 h-5"}),"Criar Salrios do Ms"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total a Pagar"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["R$ ",o.totalToPay.toFixed(2)]})]}),e.jsx(Ut,{className:"w-10 h-10 text-blue-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Pago"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["R$ ",o.totalPaid.toFixed(2)]})]}),e.jsx(is,{className:"w-10 h-10 text-green-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Restante"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["R$ ",o.totalRemaining.toFixed(2)]})]}),e.jsx(zt,{className:"w-10 h-10 text-orange-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Atrasados"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:o.overdueCount})]}),e.jsx(es,{className:"w-10 h-10 text-red-600"})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(lm,{className:"w-5 h-5 text-gray-600"}),e.jsxs("select",{value:_,onChange:B=>C(B.target.value),className:"border border-gray-300 rounded-lg px-4 py-2",children:[e.jsx("option",{value:"all",children:"Todos os Status"}),e.jsx("option",{value:"overdue",children:"Atrasados"}),e.jsx("option",{value:"partial",children:"Parciais"}),e.jsx("option",{value:"pending",children:"Pendentes"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Funcionrio"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ms Ref."}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Valor Bruto"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Pago"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Restante"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Vencimento"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-6 py-8 text-center text-gray-500",children:"Nenhum salrio pendente encontrado"})}):s.map(B=>{const $=L===B.id,T=$?Number(F.base_salary||0)+Number(F.bonuses||0)-Number(F.discounts||0):Number(B.gross_amount||0);return e.jsxs("tr",{className:`${$?"bg-blue-50":"hover:bg-gray-50"}`,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Nt,{className:"w-5 h-5 text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:B.employee_name})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Zt(new Date(B.reference_month),"MM/yyyy",{locale:va})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:$?e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Base:"}),e.jsx("input",{type:"number",step:"0.01",value:F.base_salary,onChange:ne=>M({...F,base_salary:ne.target.value}),className:"w-28 px-2 py-1 text-sm border border-gray-300 rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Bnus:"}),e.jsx("input",{type:"number",step:"0.01",value:F.bonuses,onChange:ne=>M({...F,bonuses:ne.target.value}),className:"w-28 px-2 py-1 text-sm border border-gray-300 rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Desc:"}),e.jsx("input",{type:"number",step:"0.01",value:F.discounts,onChange:ne=>M({...F,discounts:ne.target.value}),className:"w-28 px-2 py-1 text-sm border border-gray-300 rounded"})]}),e.jsxs("div",{className:"text-xs font-medium text-blue-600 mt-1",children:["Total: R$ ",T.toFixed(2)]})]}):e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"font-medium text-gray-900",children:["R$ ",Number(B.gross_amount).toFixed(2)]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Base: R$ ",Number(B.base_salary).toFixed(2)]}),B.bonuses>0&&e.jsxs("div",{className:"text-xs text-green-600",children:["+Bnus: R$ ",Number(B.bonuses).toFixed(2)]}),B.discounts>0&&e.jsxs("div",{className:"text-xs text-red-600",children:["-Desc: R$ ",Number(B.discounts).toFixed(2)]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600 font-medium",children:["R$ ",Number(B.paid_amount).toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-orange-600 font-medium",children:["R$ ",$?(T-Number(B.paid_amount)).toFixed(2):Number(B.remaining_amount).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:$?e.jsx("input",{type:"date",value:F.due_date,onChange:ne=>M({...F,due_date:ne.target.value}),className:"px-2 py-1 text-sm border border-gray-300 rounded"}):e.jsx("span",{className:"text-gray-500",children:Zt(new Date(B.due_date),"dd/MM/yyyy",{locale:va})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:I(B.payment_status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("div",{className:"flex items-center gap-2",children:$?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>oe(B.id),className:"flex items-center gap-1 text-green-600 hover:text-green-800 font-medium",title:"Salvar",children:e.jsx(Gt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:V,className:"flex items-center gap-1 text-red-600 hover:text-red-800 font-medium",title:"Cancelar",children:e.jsx(ht,{className:"w-4 h-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>q(B),className:"text-gray-600 hover:text-gray-800",title:"Editar",children:e.jsx(rr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>O(B),className:"text-blue-600 hover:text-blue-800 font-medium",children:"Pagar"}),B.payment_count>0&&e.jsx("button",{onClick:()=>H(B.id),className:"text-gray-600 hover:text-gray-800",title:"Ver histrico",children:e.jsx(dm,{className:"w-5 h-5"})})]})})})]},B.id)})})]})})}),c&&x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Registrar Pagamento"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Funcionrio"}),e.jsx("p",{className:"font-medium",children:x.employee_name}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Ms Referncia"}),e.jsx("p",{className:"font-medium",children:Zt(new Date(x.reference_month),"MMMM yyyy",{locale:va})}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Saldo Devedor"}),e.jsxs("p",{className:"text-lg font-bold text-orange-600",children:["R$ ",x.remaining_amount.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor do Pagamento"}),e.jsx("input",{type:"number",step:"0.01",value:y,onChange:B=>g(B.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Forma de Pagamento"}),e.jsxs("select",{value:b,onChange:B=>p(B.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"pix",children:"PIX"}),e.jsx("option",{value:"transferencia",children:"Transferncia"}),e.jsx("option",{value:"dinheiro",children:"Dinheiro"}),e.jsx("option",{value:"cheque",children:"Cheque"}),e.jsx("option",{value:"cartao",children:"Carto"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data do Pagamento"}),e.jsx("input",{type:"date",value:v,onChange:B=>N(B.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes"}),e.jsx("textarea",{value:D,onChange:B=>S(B.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Observaes sobre o pagamento (opcional)"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>d(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{onClick:X,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Confirmar Pagamento"})]})]})}),A&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl max-w-2xl w-full p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Histrico de Pagamentos"}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:E.map(B=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:B.employee_name}),e.jsx("p",{className:"text-sm text-gray-600",children:Zt(new Date(B.reference_month),"MMMM yyyy",{locale:va})})]}),e.jsxs("p",{className:"text-lg font-bold text-green-600",children:["R$ ",Number(B.payment_amount).toFixed(2)]})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 text-sm text-gray-600",children:[e.jsx("span",{children:Zt(new Date(B.payment_date),"dd/MM/yyyy")}),e.jsx("span",{className:"capitalize",children:B.payment_method})]}),B.notes&&e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:B.notes})]},B.payment_id))}),e.jsx("button",{onClick:()=>u(!1),className:"w-full mt-6 px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Fechar"})]})})]})},OR=()=>{const[s,t]=j.useState([]),[a,r]=j.useState([]),[n,i]=j.useState(!0),[o,l]=j.useState(!1),[c,d]=j.useState(""),[A,u]=j.useState(""),[x,m]=j.useState(new Date().toISOString().split("T")[0]),[y,g]=j.useState(Zt(new Date(new Date().setMonth(new Date().getMonth()+1)),"yyyy-MM-dd")),[b,p]=j.useState(""),[v,N]=j.useState({totalPending:0,totalDeducted:0,pendingCount:0});j.useEffect(()=>{D()},[]);const D=async()=>{try{i(!0),await Promise.all([S(),E()])}catch(f){console.error("Error loading data:",f)}finally{i(!1)}},S=async()=>{try{const{data:f,error:F}=await se.from("v_pending_advances").select("*").order("deducted_from_month",{ascending:!0});if(F)throw F;t(f||[]);const M=(f==null?void 0:f.reduce((X,q)=>X+Number(q.amount),0))||0,P=(f==null?void 0:f.length)||0,{data:Z}=await se.from("v_advance_summary").select("deducted_amount"),O=(Z==null?void 0:Z.reduce((X,q)=>X+Number(q.deducted_amount),0))||0;N({totalPending:M,totalDeducted:O,pendingCount:P})}catch(f){console.error("Error loading advances:",f)}},E=async()=>{try{const{data:f,error:F}=await se.from("employees").select("id, name, salary").eq("active",!0).order("name");if(F)throw F;r(f||[])}catch(f){console.error("Error loading employees:",f)}},R=async()=>{if(!c||!A||Number(A)<=0){alert("Por favor, selecione o funcionrio e informe o valor");return}try{const{data:f,error:F}=await se.rpc("register_monthly_advance",{p_employee_id:c,p_reference_month:y,p_amount:Number(A),p_payment_date:x,p_notes:b||null});if(F)throw F;alert("Vale registrado com sucesso! Ser descontado automaticamente no ms indicado."),l(!1),C(),D()}catch(f){console.error("Error registering advance:",f),alert("Erro ao registrar vale: "+f.message)}},_=async f=>{if(confirm("Tem certeza que deseja cancelar este vale?"))try{const{error:F}=await se.rpc("cancel_salary_advance",{p_advance_id:f,p_reason:"Cancelado manualmente pelo usurio"});if(F)throw F;alert("Vale cancelado com sucesso!"),D()}catch(F){console.error("Error cancelling advance:",F),alert("Erro ao cancelar vale: "+F.message)}},C=()=>{d(""),u(""),m(new Date().toISOString().split("T")[0]),g(Zt(new Date(new Date().setMonth(new Date().getMonth()+1)),"yyyy-MM-dd")),p("")},L=f=>{const F={overdue:{label:"Atrasado",color:"bg-red-100 text-red-800"},current:{label:"Ms Atual",color:"bg-blue-100 text-blue-800"},future:{label:"Futuro",color:"bg-gray-100 text-gray-800"}},M=F[f]||F.future;return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${M.color}`,children:M.label})};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Vales e Adiantamentos"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Desconto automtico no salrio do ms indicado"})]}),e.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(bt,{className:"w-5 h-5"}),"Registrar Vale"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Vales Pendentes"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["R$ ",v.totalPending.toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[v.pendingCount," vale(s)"]})]}),e.jsx(nr,{className:"w-10 h-10 text-orange-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"J Descontados"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["R$ ",v.totalDeducted.toFixed(2)]})]}),e.jsx(is,{className:"w-10 h-10 text-green-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Geral"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["R$ ",(v.totalPending+v.totalDeducted).toFixed(2)]})]}),e.jsx(Ut,{className:"w-10 h-10 text-gray-600"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Vales Pendentes de Desconto"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Funcionrio"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Data do Vale"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Descontar em"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Timing"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Observaes"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(is,{className:"w-12 h-12 text-gray-300"}),e.jsx("p",{children:"Nenhum vale pendente de desconto"})]})})}):s.map(f=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Nt,{className:"w-5 h-5 text-gray-400 mr-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:f.employee_name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Salrio: R$ ",Number(f.employee_salary).toFixed(2)]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:"text-lg font-bold text-orange-600",children:["R$ ",Number(f.amount).toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Zt(new Date(f.advance_date),"dd/MM/yyyy",{locale:va})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Zt(new Date(f.deducted_from_month),"MMMM/yyyy",{locale:va})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:L(f.deduction_timing)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs truncate",children:f.notes||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("button",{onClick:()=>_(f.advance_id),className:"text-red-600 hover:text-red-800 font-medium flex items-center gap-1",children:[e.jsx(eo,{className:"w-4 h-4"}),"Cancelar"]})})]},f.advance_id))})]})})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Registrar Vale/Adiantamento"}),e.jsx("button",{onClick:()=>{l(!1),C()},className:"text-gray-400 hover:text-gray-600",children:e.jsx(ht,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx(es,{className:"w-4 h-4 inline mr-1"}),"O vale ser descontado automaticamente ao criar o salrio do ms indicado"]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Funcionrio *"}),e.jsxs("select",{value:c,onChange:f=>d(f.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Selecione o funcionrio"}),a.map(f=>e.jsxs("option",{value:f.id,children:[f.name," - Salrio: R$ ",f.salary.toFixed(2)]},f.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor do Vale *"}),e.jsx("input",{type:"number",step:"0.01",value:A,onChange:f=>u(f.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0.00",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data do Adiantamento *"}),e.jsx("input",{type:"date",value:x,onChange:f=>m(f.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descontar no Ms *"}),e.jsx("input",{type:"month",value:y.substring(0,7),onChange:f=>g(f.target.value+"-01"),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"O desconto ser aplicado automaticamente ao criar o salrio deste ms"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes"}),e.jsx("textarea",{value:b,onChange:f=>p(f.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Motivo do vale, observaes..."})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{l(!1),C()},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{onClick:R,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Registrar Vale"})]})]})})]})},HR=()=>{const[s,t]=j.useState(!0),[a,r]=j.useState(new Date().getFullYear()),[n,i]=j.useState([]),[o,l]=j.useState([]),[c,d]=j.useState({totalPaid:0,totalRemaining:0,averageMonthly:0,employeeCount:0});j.useEffect(()=>{A()},[a]);const A=async()=>{try{t(!0),await Promise.all([u(),x(),m()])}catch(g){console.error("Error loading reports:",g)}finally{t(!1)}},u=async()=>{try{const{data:g,error:b}=await se.rpc("get_yearly_salary_report",{p_year:a});if(b)throw b;const p=TN(new Date(a,0,1)),v=QN(new Date(a,11,31)),N=PN({start:p,end:v}),D=new Map;N.forEach(S=>{const E=Zt(S,"yyyy-MM");D.set(E,{month:E,total_base:0,total_bonuses:0,total_discounts:0,total_gross:0,total_paid:0,total_remaining:0,employee_count:0})}),g==null||g.forEach(S=>{D.set(S.month,{month:S.month,total_base:Number(S.total_base),total_bonuses:Number(S.total_bonuses),total_discounts:Number(S.total_discounts),total_gross:Number(S.total_gross),total_paid:Number(S.total_paid),total_remaining:Number(S.total_remaining),employee_count:S.employee_count})}),i(Array.from(D.values()))}catch(g){console.error("Error loading monthly data:",g)}},x=async()=>{try{const{data:g,error:b}=await se.from("v_employee_salary_summary").select("*").order("total_remaining",{ascending:!1});if(b)throw b;l(g||[])}catch(g){console.error("Error loading employee data:",g)}},m=async()=>{try{const{data:g,error:b}=await se.from("v_monthly_salary_consolidated").select("total_paid, total_remaining, employee_count").eq("year",a);if(b)throw b;const p=(g==null?void 0:g.reduce((S,E)=>S+Number(E.total_paid),0))||0,v=(g==null?void 0:g.reduce((S,E)=>S+Number(E.total_remaining),0))||0,N=Math.max(...(g==null?void 0:g.map(S=>S.employee_count))||[0]),D=g&&g.length>0?p/g.length:0;d({totalPaid:p,totalRemaining:v,averageMonthly:D,employeeCount:N})}catch(g){console.error("Error loading yearly stats:",g)}},y=g=>{let b="",p="";g==="monthly"?(b=`Ms,Salrio Base,Bnus,Descontos,Total Bruto,Pago,Restante,Funcionrios
`,n.forEach(D=>{const S=Zt(new Date(D.month+"-01"),"MMMM yyyy",{locale:va});b+=`${S},${D.total_base.toFixed(2)},${D.total_bonuses.toFixed(2)},${D.total_discounts.toFixed(2)},${D.total_gross.toFixed(2)},${D.total_paid.toFixed(2)},${D.total_remaining.toFixed(2)},${D.employee_count}
`}),p=`relatorio-mensal-salarios-${a}.csv`):(b=`Funcionrio,Salrio Atual,Meses,Total Bruto,Total Pago,Restante,Pendentes,Parciais,Pagos
`,o.forEach(D=>{b+=`${D.employee_name},${D.current_salary.toFixed(2)},${D.total_months},${D.total_gross.toFixed(2)},${D.total_paid.toFixed(2)},${D.total_remaining.toFixed(2)},${D.months_pending},${D.months_partial},${D.months_paid}
`}),p=`relatorio-funcionarios-salarios-${a}.csv`);const v=new Blob([b],{type:"text/csv;charset=utf-8;"}),N=document.createElement("a");N.href=URL.createObjectURL(v),N.download=p,N.click()};return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Relatrios de Salrios"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Anlises consolidadas de todos os pagamentos (funcionrios de simulao excludos)"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("select",{value:a,onChange:g=>r(Number(g.target.value)),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:Array.from({length:5},(g,b)=>new Date().getFullYear()-b).map(g=>e.jsx("option",{value:g,children:g},g))})})]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ut,{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-green-900 mb-1",children:"Relatrio Consolidado"}),e.jsxs("p",{className:"text-sm text-green-800",children:["Este relatrio resgata ",e.jsx("strong",{children:"TODOS os valores pagos"})," nos meses anteriores, incluindo:"]}),e.jsxs("ul",{className:"text-sm text-green-800 mt-2 space-y-1",children:[e.jsx("li",{children:" Pagamentos feitos atravs do tracking de salrios"}),e.jsx("li",{children:" Pagamentos parciais de meses anteriores"}),e.jsx("li",{children:" Lanamentos diretos do financeiro (quando vinculados)"}),e.jsx("li",{children:" Vales e adiantamentos descontados"})]}),e.jsxs("p",{className:"text-sm text-green-800 mt-2",children:[e.jsx("strong",{children:"Observao:"})," Funcionrios de simulao/teste foram automaticamente excludos dos relatrios."]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg shadow p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm opacity-90",children:["Total Pago ",a]}),e.jsxs("p",{className:"text-2xl font-bold mt-1",children:["R$ ",c.totalPaid.toFixed(2)]})]}),e.jsx(Ut,{className:"w-10 h-10 opacity-80"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg shadow p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:"Restante a Pagar"}),e.jsxs("p",{className:"text-2xl font-bold mt-1",children:["R$ ",c.totalRemaining.toFixed(2)]})]}),e.jsx(zt,{className:"w-10 h-10 opacity-80"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg shadow p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:"Mdia Mensal"}),e.jsxs("p",{className:"text-2xl font-bold mt-1",children:["R$ ",c.averageMonthly.toFixed(2)]})]}),e.jsx(Ls,{className:"w-10 h-10 opacity-80"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg shadow p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:"Funcionrios"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:c.employeeCount})]}),e.jsx(Nt,{className:"w-10 h-10 opacity-80"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"w-5 h-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Relatrio Mensal"})]}),e.jsxs("button",{onClick:()=>y("monthly"),className:"flex items-center gap-2 text-sm text-blue-600 hover:text-blue-800 font-medium",children:[e.jsx(wa,{className:"w-4 h-4"}),"Exportar CSV"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ms"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Base"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Bnus"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Descontos"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Bruto"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Pago"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Restante"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Func."})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[n.map(g=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Zt(new Date(g.month+"-01"),"MMMM yyyy",{locale:va})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:["R$ ",g.total_base.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-green-600",children:["R$ ",g.total_bonuses.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-red-600",children:["R$ ",g.total_discounts.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-900",children:["R$ ",g.total_gross.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-green-600 font-medium",children:["R$ ",g.total_paid.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-orange-600 font-medium",children:["R$ ",g.total_remaining.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-500",children:g.employee_count})]},g.month)),n.length>0&&e.jsxs("tr",{className:"bg-gray-100 font-bold",children:[e.jsx("td",{className:"px-6 py-4 text-sm",children:"TOTAL"}),e.jsxs("td",{className:"px-6 py-4 text-sm text-right",children:["R$ ",n.reduce((g,b)=>g+b.total_base,0).toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 text-sm text-right text-green-600",children:["R$ ",n.reduce((g,b)=>g+b.total_bonuses,0).toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 text-sm text-right text-red-600",children:["R$ ",n.reduce((g,b)=>g+b.total_discounts,0).toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 text-sm text-right",children:["R$ ",n.reduce((g,b)=>g+b.total_gross,0).toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 text-sm text-right text-green-600",children:["R$ ",n.reduce((g,b)=>g+b.total_paid,0).toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 text-sm text-right text-orange-600",children:["R$ ",n.reduce((g,b)=>g+b.total_remaining,0).toFixed(2)]}),e.jsx("td",{})]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Nt,{className:"w-5 h-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Relatrio por Funcionrio"})]}),e.jsxs("button",{onClick:()=>y("employee"),className:"flex items-center gap-2 text-sm text-blue-600 hover:text-blue-800 font-medium",children:[e.jsx(wa,{className:"w-4 h-4"}),"Exportar CSV"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Funcionrio"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Salrio Atual"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Meses"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total Bruto"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total Pago"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Restante"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(g=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:g.employee_name}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:["R$ ",Number(g.current_salary).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-500",children:g.total_months}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-900",children:["R$ ",Number(g.total_gross).toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-green-600 font-medium",children:["R$ ",Number(g.total_paid).toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-orange-600 font-medium",children:["R$ ",Number(g.total_remaining).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center",children:e.jsxs("div",{className:"flex gap-1 justify-center",children:[e.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded",children:[g.months_paid,""]}),g.months_partial>0&&e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:[g.months_partial,""]}),g.months_pending>0&&e.jsxs("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded",children:[g.months_pending,""]})]})})]},g.employee_id))})]})})]})]})},qR=({employeeId:s,employeeName:t,onImportComplete:a})=>{const[r,n]=j.useState([]),[i,o]=j.useState(null),[l,c]=j.useState(!0),[d,A]=j.useState(!1),[u,x]=j.useState(new Set);j.useEffect(()=>{m()},[s]);const m=async()=>{try{c(!0);const{data:p,error:v}=await se.from("v_unlinked_salary_payments").select("*").order("payment_date",{ascending:!1});if(v)throw v;const{data:N,error:D}=await se.rpc("get_employee_payment_summary",{p_employee_id:s});if(D)throw D;n(p||[]),o((N==null?void 0:N[0])||null)}catch(p){console.error("Error loading data:",p)}finally{c(!1)}},y=p=>{const v=new Set(u);v.has(p)?v.delete(p):v.add(p),x(v)},g=async()=>{var p;if(u.size===0){alert("Selecione pelo menos um lanamento para importar");return}if(confirm(`Importar ${u.size} lanamento(s) para ${t}?`))try{A(!0);let v=0,N=0;for(const D of Array.from(u)){const S=r.find(_=>_.id===D);if(!S)continue;const{data:E,error:R}=await se.rpc("import_finance_entry_to_salary",{p_finance_entry_id:D,p_employee_id:s,p_reference_month:S.reference_month});R||!((p=E==null?void 0:E[0])!=null&&p.success)?(N++,console.error("Error importing payment:",R)):v++}alert(`Importao concluda!

 Sucesso: ${v}
 Falha: ${N}`),x(new Set),m(),a==null||a()}catch(v){console.error("Error importing payments:",v),alert("Erro ao importar lanamentos: "+v.message)}finally{A(!1)}},b=async(p,v)=>{var N,D;if(confirm(`Importar este lanamento para ${t}?`))try{A(!0);const{data:S,error:E}=await se.rpc("import_finance_entry_to_salary",{p_finance_entry_id:p,p_employee_id:s,p_reference_month:v.reference_month});if(E)throw E;(N=S==null?void 0:S[0])!=null&&N.success?(alert("Lanamento importado com sucesso!"),m(),a==null||a()):alert("Erro: "+(((D=S==null?void 0:S[0])==null?void 0:D.message)||"Falha ao importar"))}catch(S){console.error("Error importing payment:",S),alert("Erro ao importar: "+S.message)}finally{A(!1)}};return l?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[i&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-6 border border-blue-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(zt,{className:"w-5 h-5 text-blue-600"}),"Resumo de Pagamentos: ",t]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Salrio Base Total"}),e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["R$ ",Number(i.total_salary_base).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Pago (Tracking)"}),e.jsxs("p",{className:"text-xl font-bold text-green-600",children:["R$ ",Number(i.total_paid_tracking).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Vales Pendentes"}),e.jsxs("p",{className:"text-xl font-bold text-orange-600",children:["R$ ",Number(i.total_advances).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"No Vinculados"}),e.jsxs("p",{className:"text-xl font-bold text-red-600",children:["R$ ",Number(i.total_unlinked_payments).toFixed(2)]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-blue-200 flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-gray-600",children:[e.jsx(Ot,{className:"w-4 h-4 inline mr-1"}),i.payment_months," ms(es) registrado(s)"]}),i.last_payment_date&&e.jsxs("span",{className:"text-gray-600",children:["ltimo pagamento: ",Zt(new Date(i.last_payment_date),"dd/MM/yyyy",{locale:va})]})]}),i.has_pending&&e.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium",children:"Possui Pendncias"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Lanamentos Financeiros Disponveis"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Lanamentos de salrios ainda no vinculados ao tracking"})]}),u.size>0&&e.jsxs("button",{onClick:g,disabled:d,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:[e.jsx(qc,{className:"w-4 h-4"}),"Importar Selecionados (",u.size,")"]})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:r.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(is,{className:"w-12 h-12 text-green-500 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"Todos os lanamentos de salrios esto vinculados!"})]}):r.map(p=>e.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`p-4 hover:bg-gray-50 transition-colors ${u.has(p.id)?"bg-blue-50":""}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("input",{type:"checkbox",checked:u.has(p.id),onChange:()=>y(p.id),className:"mt-1 w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx(es,{className:"w-5 h-5 text-yellow-600"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:p.descricao||"Sem descrio"}),e.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-3 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ot,{className:"w-4 h-4"}),Zt(new Date(p.payment_date),"dd/MM/yyyy",{locale:va})]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ut,{className:"w-4 h-4"}),p.payment_method||"No especificado"]}),e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs",children:p.suggested_type})]}),p.observacoes&&e.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:[e.jsx(ut,{className:"w-4 h-4 inline mr-1"}),p.observacoes]})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsxs("div",{className:"text-xl font-bold text-gray-900",children:["R$ ",Number(p.amount).toFixed(2)]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Ref: ",Zt(new Date(p.reference_month),"MM/yyyy",{locale:va})]})]})]}),e.jsx("div",{className:"mt-3 flex items-center gap-2",children:e.jsxs("button",{onClick:()=>b(p.id,p),disabled:d,className:"px-3 py-1.5 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 disabled:opacity-50 flex items-center gap-1",children:[e.jsx(n0,{className:"w-4 h-4"}),"Vincular a ",t]})})]})]})},p.id))})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(es,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 text-sm",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-1",children:"Como funciona a integrao:"}),e.jsxs("ul",{className:"space-y-1 text-blue-800",children:[e.jsxs("li",{children:[" Lanamentos criados no ",e.jsx("strong",{children:"Financeiro"}),' com categoria "Salrios" aparecem aqui']}),e.jsxs("li",{children:[" Voc pode ",e.jsx("strong",{children:"vincular"})," esses lanamentos ao tracking de salrios"]}),e.jsxs("li",{children:[" Aps vinculados, eles contam no ",e.jsx("strong",{children:"valor pago"})," do ms"]}),e.jsxs("li",{children:[" A sincronizao  ",e.jsx("strong",{children:"automtica"})," - no h duplicao"]}),e.jsxs("li",{children:[" Lanamentos j vinculados ",e.jsx("strong",{children:"no aparecem"})," na lista"]})]})]})]})})]})},$R=({isOpen:s,onClose:t,onSave:a,title:r,subtitle:n,loading:i=!1,saveButtonText:o="Salvar",tabs:l,activeTab:c,onTabChange:d,children:A,maxWidth:u="4xl"})=>{if(!s)return null;const x={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","4xl":"max-w-4xl","6xl":"max-w-6xl"}[u];return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:`bg-white rounded-xl w-full ${x} max-h-[90vh] overflow-hidden flex flex-col`,children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between bg-gradient-to-r from-blue-600 to-blue-700 text-white",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:r}),n&&e.jsx("p",{className:"text-blue-100 text-sm mt-1",children:n})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(ht,{className:"h-6 w-6"})})]}),l&&l.length>0&&e.jsx("div",{className:"flex border-b bg-gray-50",children:l.map(m=>{const y=m.icon;return e.jsxs("button",{onClick:()=>d&&d(m.id),className:`flex-1 px-6 py-4 font-medium text-sm flex items-center justify-center gap-2 border-b-2 transition-all ${c===m.id?"border-blue-600 text-blue-600 bg-white":"border-transparent text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[e.jsx(y,{className:"h-4 w-4"}),m.label]},m.id)})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:A}),e.jsxs("div",{className:"p-6 border-t bg-gray-50 flex gap-3",children:[e.jsx("button",{onClick:t,className:"flex-1 px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors font-medium",children:"Cancelar"}),e.jsx("button",{onClick:a,disabled:i,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors font-medium flex items-center justify-center gap-2",children:i?e.jsx(e.Fragment,{children:"Salvando..."}):e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"h-5 w-5"}),o]})})]})]})})},VR=()=>{const[s,t]=j.useState([]),[a,r]=j.useState(!0),[n,i]=j.useState(null),[o,l]=j.useState(null),[c,d]=j.useState(!1),[A,u]=j.useState({salary:"",workHoursPerDay:"8",workDaysPerMonth:"22"}),[x,m]=j.useState(!1);j.useEffect(()=>{y()},[]);const y=async()=>{try{r(!0);const{data:E,error:R}=await se.from("v_employee_salary_details").select("*").eq("active",!0).order("employee_name");if(R)throw R;t(E||[])}catch(E){console.error("Error loading employees:",E)}finally{r(!1)}},g=E=>{i(E.employee_id),u({salary:E.monthly_salary.toString(),workHoursPerDay:E.work_hours_per_day.toString(),workDaysPerMonth:E.work_days_per_month.toString()})},b=()=>{i(null),u({salary:"",workHoursPerDay:"8",workDaysPerMonth:"22"})},p=async E=>{try{const{data:R,error:_}=await se.rpc("update_employee_salary",{p_employee_id:E,p_new_salary:Number(A.salary),p_work_hours_per_day:Number(A.workHoursPerDay),p_work_days_per_month:Number(A.workDaysPerMonth)});if(_)throw _;alert(`Salrio atualizado com sucesso!

Mensal: R$ ${R[0].new_monthly_salary.toFixed(2)}
Por Hora: R$ ${R[0].new_hourly_rate.toFixed(2)}
Por Dia: R$ ${R[0].new_daily_rate.toFixed(2)}`),b(),y()}catch(R){console.error("Error updating salary:",R),alert("Erro ao atualizar salrio: "+R.message)}},v=async(E,R)=>{if(confirm(`Sincronizar ${R} com o tracking de salrios do ms atual?`))try{m(!0);const{error:_}=await se.rpc("sync_employee_to_salary_tracking",{p_employee_id:E,p_reference_month:new Date().toISOString().split("T")[0]});if(_)throw _;alert("Funcionrio sincronizado com sucesso!"),y()}catch(_){console.error("Error syncing employee:",_),alert("Erro ao sincronizar: "+_.message)}finally{m(!1)}},N=E=>{l(E),d(!0)},D=()=>{d(!1),l(null),y()},S=()=>{const E=Number(A.salary)||0,R=Number(A.workHoursPerDay)||8,_=Number(A.workDaysPerMonth)||22,C=R*_,L=C>0?E/C:0,f=_>0?E/_:0;return{hourlyRate:L,dailyRate:f,totalHours:C}};return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Edio de Salrios"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Gerencie salrios com fracionamento e integrao financeira"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Nt,{className:"w-5 h-5"}),e.jsxs("span",{children:[s.length," funcionrio(s)"]})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(zt,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-1",children:"Sincronizao Automtica"}),e.jsxs("p",{className:"text-sm text-blue-800",children:["Sistema reconhece automaticamente novos funcionrios e seus salrios da Gesto de Pessoas. Clique no cone ",e.jsx(n0,{className:"w-4 h-4 inline"})," para vincular lanamentos financeiros."]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Funcionrio"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Salrio Mensal"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Por Hora"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Por Dia"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Horas/Dia"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Dias/Ms"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Aes"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[s.map(E=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.employee_name}),e.jsxs("div",{className:"text-sm text-gray-500",children:[E.role,"  ",E.department]}),E.total_months>0&&e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[E.total_months," ms(es)  R$ ",Number(E.total_paid).toFixed(2)," pagos"]})]})}),n===E.employee_id?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"number",step:"0.01",value:A.salary,onChange:R=>u({...A,salary:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("span",{className:"text-sm font-medium text-blue-600",children:["R$ ",S().hourlyRate.toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("span",{className:"text-sm font-medium text-blue-600",children:["R$ ",S().dailyRate.toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"number",step:"0.5",value:A.workHoursPerDay,onChange:R=>u({...A,workHoursPerDay:R.target.value}),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-center"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"number",value:A.workDaysPerMonth,onChange:R=>u({...A,workDaysPerMonth:R.target.value}),className:"w-16 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-center"})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"text-xs text-gray-500",children:[S().totalHours,"h/ms"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>p(E.employee_id),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg",title:"Salvar",children:e.jsx(Gt,{className:"w-5 h-5"})}),e.jsx("button",{onClick:b,className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg",title:"Cancelar",children:e.jsx(ht,{className:"w-5 h-5"})})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:["R$ ",Number(E.monthly_salary).toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(vt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["R$ ",Number(E.hourly_rate).toFixed(2)]})]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(Ot,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["R$ ",Number(E.daily_rate).toFixed(2)]})]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("span",{className:"text-sm text-gray-600",children:[E.work_hours_per_day,"h"]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("span",{className:"text-sm text-gray-600",children:[E.work_days_per_month," dias"]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:E.total_months>0?e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"Sincronizado"}):e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:"Novo"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>g(E),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Editar salrio",children:e.jsx(Cu,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>v(E.employee_id,E.employee_name),disabled:x,className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg disabled:opacity-50",title:"Sincronizar com tracking",children:e.jsx(bs,{className:`w-5 h-5 ${x?"animate-spin":""}`})}),e.jsx("button",{onClick:()=>N(E),className:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg",title:"Ver lanamentos financeiros",children:e.jsx(n0,{className:"w-5 h-5"})})]})})]})]},E.employee_id)),s.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-6 py-8 text-center text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(Nt,{className:"w-12 h-12 text-gray-300"}),e.jsx("p",{children:"Nenhum funcionrio ativo encontrado"})]})})})]})]})})}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Como funciona o fracionamento:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ut,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Salrio Mensal"}),e.jsx("p",{className:"text-gray-600",children:"Valor total pago por ms"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(vt,{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Taxa por Hora"}),e.jsx("p",{className:"text-gray-600",children:"Salrio  (Horas/dia  Dias/ms)"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ot,{className:"w-5 h-5 text-purple-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Taxa por Dia"}),e.jsx("p",{className:"text-gray-600",children:"Salrio  Dias teis no ms"})]})]})]})]}),e.jsx(rt,{children:c&&o&&e.jsx($R,{isOpen:c,onClose:D,title:`Lanamentos Financeiros - ${o.employee_name}`,size:"xl",children:e.jsx(qR,{employeeId:o.employee_id,employeeName:o.employee_name,onImportComplete:D})})})]})},KR=()=>{const[s,t]=j.useState("payments"),a=[{id:"payments",label:"Pagamentos",icon:Ut},{id:"advances",label:"Vales/Adiantamentos",icon:nr},{id:"employees",label:"Editar Salrios",icon:Nt},{id:"reports",label:"Relatrios",icon:Ls}];return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-white rounded-lg shadow mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex -mb-px",children:a.map(r=>{const n=r.icon;return e.jsxs("button",{onClick:()=>t(r.id),className:`flex items-center gap-2 px-6 py-4 border-b-2 font-medium text-sm transition-colors ${s===r.id?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(n,{className:"w-5 h-5"}),r.label]},r.id)})})})}),e.jsxs("div",{children:[s==="payments"&&e.jsx(RR,{}),s==="advances"&&e.jsx(OR,{}),s==="employees"&&e.jsx(VR,{}),s==="reports"&&e.jsx(HR,{})]})]})})},zR=()=>{const s=ys(),{login:t}=rs(),[a,r]=j.useState(""),[n,i]=j.useState(""),[o,l]=j.useState(!1),[c,d]=j.useState(!1),[A,u]=j.useState(""),[x,m]=j.useState("splash");j.useEffect(()=>{const g=setTimeout(()=>{m("login")},2500);return()=>clearTimeout(g)},[]);const y=async g=>{g.preventDefault(),u(""),d(!0);try{const{data:b,error:p}=await se.from("user_profiles").select("*").eq("email",a).single();if(p||!b)throw new Error("Usurio no encontrado");const{data:v}=await se.from("employees").select("*").eq("user_id",b.user_id).single();t({user_id:b.user_id,email:b.email,name:b.name,role:b.role,employee_id:v==null?void 0:v.id}),await new Promise(N=>setTimeout(N,800)),s("/mobile")}catch(b){console.error("Login error:",b),u(b.message||"Email ou senha incorretos")}finally{d(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 via-blue-700 to-blue-900 flex items-center justify-center p-4 overflow-hidden relative",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx(W.div,{animate:{scale:[1,1.2,1],rotate:[0,90,0]},transition:{duration:20,repeat:1/0,ease:"linear"},className:"absolute -top-24 -right-24 w-96 h-96 bg-white/5 rounded-full blur-3xl"}),e.jsx(W.div,{animate:{scale:[1,1.3,1],rotate:[0,-90,0]},transition:{duration:25,repeat:1/0,ease:"linear"},className:"absolute -bottom-24 -left-24 w-96 h-96 bg-blue-400/10 rounded-full blur-3xl"})]}),e.jsxs(rt,{mode:"wait",children:[x==="splash"&&e.jsxs(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,scale:.8},transition:{duration:.5},className:"text-center z-10",children:[e.jsxs(W.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20},className:"relative mb-8",children:[e.jsx("div",{className:"w-32 h-32 bg-white rounded-3xl flex items-center justify-center mx-auto shadow-2xl",children:e.jsx(W.div,{animate:{rotate:[0,360]},transition:{duration:3,repeat:1/0,ease:"linear"},children:e.jsx(Fs,{className:"w-16 h-16 text-blue-600"})})}),e.jsx(W.div,{animate:{scale:[1,1.2,1],opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},className:"absolute -inset-4 bg-white/20 rounded-full blur-xl"})]}),e.jsx(W.h1,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"text-4xl font-bold text-white mb-2",children:"Giartech"}),e.jsx(W.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"text-blue-100 text-lg",children:"Sistema Integrado Mobile"}),e.jsxs(W.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"mt-12 flex items-center justify-center gap-2",children:[e.jsx(W.div,{animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0},className:"w-3 h-3 bg-white rounded-full"}),e.jsx(W.div,{animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0,delay:.2},className:"w-3 h-3 bg-white rounded-full"}),e.jsx(W.div,{animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0,delay:.4},className:"w-3 h-3 bg-white rounded-full"})]})]},"splash"),x==="login"&&e.jsxs(W.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:300,damping:30},className:"w-full max-w-md z-10",children:[e.jsxs(W.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-white rounded-2xl shadow-2xl mb-4",children:e.jsx(Fs,{className:"w-10 h-10 text-blue-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Bem-vindo de volta!"}),e.jsx("p",{className:"text-blue-100",children:"Acesse sua conta para continuar"})]}),e.jsxs(W.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},className:"bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl p-8",children:[e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(Cs,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",value:a,onChange:g=>r(g.target.value),placeholder:"seu@email.com",required:!0,className:"w-full pl-12 pr-4 py-4 bg-gray-50 border-2 border-gray-200 rounded-2xl text-gray-900 placeholder-gray-400 focus:outline-none focus:border-blue-500 focus:bg-white transition-all text-base"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(Va,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:o?"text":"password",value:n,onChange:g=>i(g.target.value),placeholder:"",required:!0,className:"w-full pl-12 pr-14 py-4 bg-gray-50 border-2 border-gray-200 rounded-2xl text-gray-900 placeholder-gray-400 focus:outline-none focus:border-blue-500 focus:bg-white transition-all text-base"}),e.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:o?e.jsx(Bl,{className:"w-5 h-5"}):e.jsx($s,{className:"w-5 h-5"})})]})]}),e.jsx(rt,{children:A&&e.jsxs(W.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center gap-2 p-4 bg-red-50 border-2 border-red-200 rounded-2xl",children:[e.jsx(es,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-600 font-medium",children:A})]})}),e.jsx(W.button,{type:"submit",disabled:c,whileTap:{scale:.98},className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-4 rounded-2xl font-bold hover:from-blue-700 hover:to-blue-800 transition-all shadow-lg shadow-blue-500/50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-lg",children:c?e.jsxs(e.Fragment,{children:[e.jsx(ro,{className:"w-6 h-6 animate-spin"}),"Entrando..."]}):e.jsxs(e.Fragment,{children:["Entrar",e.jsx(za,{className:"w-6 h-6"})]})})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500 text-center mb-4 font-semibold",children:"Recursos do App Mobile"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(Nd,{className:"w-4 h-4 text-blue-600"})}),e.jsx("span",{className:"font-medium",children:"Interface Otimizada"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(Fs,{className:"w-4 h-4 text-green-600"})}),e.jsx("span",{className:"font-medium",children:"Acesso Rpido"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(hr,{className:"w-4 h-4 text-purple-600"})}),e.jsx("span",{className:"font-medium",children:"Experincia Premium"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(os,{className:"w-4 h-4 text-orange-600"})}),e.jsx("span",{className:"font-medium",children:"100% Seguro"})]})]})]})]}),e.jsx(W.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"text-center text-blue-100 text-sm mt-6",children:" 2025 Giartech. Todos os direitos reservados."})]},"login")]})]})},GR=()=>{const[s,t]=j.useState([]),[a,r]=j.useState([]),[n,i]=j.useState(null),[o,l]=j.useState(""),[c,d]=j.useState(""),[A,u]=j.useState(!0),[x,m]=j.useState(!1),[y,g]=j.useState(""),[b,p]=j.useState("all"),{showToast:v}=fg();j.useEffect(()=>{N()},[]);const N=async()=>{try{u(!0);const{data:C,error:L}=await se.from("service_orders").select(`
          *,
          customers (name, phone),
          customer_addresses (street, number, city, state)
        `).in("workflow_stage",["new","awaiting_assignment"]).order("created_at",{ascending:!1}),{data:f,error:F}=await se.from("employees").select(`
          *,
          technician_availability (
            current_workload,
            max_workload,
            is_available
          ),
          service_order_assignments (
            status
          )
        `).in("role",["technician","field_technician"]).eq("active",!0);if(C&&t(C),f){const M=f.map(P=>{var q;const Z=(q=P.technician_availability)==null?void 0:q[0],X=(P.service_order_assignments||[]).filter(V=>V.status==="in_progress"||V.status==="pending").length;return{...P,current_workload:(Z==null?void 0:Z.current_workload)||X,max_workload:(Z==null?void 0:Z.max_workload)||5,is_available:(Z==null?void 0:Z.is_available)!==!1,availability_percentage:((Z==null?void 0:Z.current_workload)||X)/((Z==null?void 0:Z.max_workload)||5)*100}});r(M.sort((P,Z)=>P.current_workload-Z.current_workload))}}catch(C){console.error("Error loading data:",C),v("Erro ao carregar dados","error")}finally{u(!1)}},D=async(C,L,f=!0)=>{try{if(m(!0),f){const{data:F,error:M}=await se.rpc("distribute_service_order",{p_service_order_id:C,p_technician_id:L,p_notes:c});if(M)throw M;v("OS distribuda com sucesso!","success")}else{const F=s.find(P=>P.id===C),{error:M}=await se.from("os_assignments_queue").insert({service_order_id:C,priority:(F==null?void 0:F.priority)==="urgent"?100:(F==null?void 0:F.priority)==="high"?75:50,status:"pending"});if(M)throw M;v("OS adicionada  fila de distribuio automtica","success")}i(null),l(""),d(""),N()}catch(F){console.error("Error distributing OS:",F),v(F.message||"Erro ao distribuir OS","error")}finally{m(!1)}},S=C=>C==="urgent"?"bg-red-500":C==="high"?"bg-orange-500":"bg-blue-500",E=C=>C==="urgent"?" URGENTE":C==="high"?" ALTA":" NORMAL",R=C=>C>=80?"bg-red-500":C>=60?"bg-orange-500":C>=40?"bg-yellow-500":"bg-green-500",_=s.filter(C=>{var F,M,P;const L=((F=C.order_number)==null?void 0:F.toLowerCase().includes(y.toLowerCase()))||((P=(M=C.customers)==null?void 0:M.name)==null?void 0:P.toLowerCase().includes(y.toLowerCase())),f=b==="all"||C.priority===b;return L&&f});return A?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando distribuio..."})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Distribuio de OS"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gerencie a atribuio de ordens de servio para tcnicos"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:_.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Aguardando"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-3xl font-bold text-green-600",children:a.filter(C=>C.is_available).length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Disponveis"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(ea,{className:"w-6 h-6 text-blue-600"}),"Ordens No Atribudas"]})}),e.jsxs("div",{className:"flex gap-3 mb-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por OS ou cliente...",value:y,onChange:C=>g(C.target.value),className:"w-full pl-10 pr-4 py-2 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500"})]}),e.jsxs("select",{value:b,onChange:C=>p(C.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"Todas Prioridades"}),e.jsx("option",{value:"urgent",children:"Urgente"}),e.jsx("option",{value:"high",children:"Alta"}),e.jsx("option",{value:"normal",children:"Normal"})]})]}),e.jsx("div",{className:"space-y-3 max-h-[600px] overflow-y-auto",children:_.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(is,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Tudo atribudo!"}),e.jsx("p",{className:"text-gray-600",children:"No h ordens de servio aguardando atribuio."})]}):_.map(C=>{var L,f;return e.jsxs(W.div,{onClick:()=>i(C),whileHover:{scale:1.02},className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${(n==null?void 0:n.id)===C.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"font-bold text-gray-900",children:["OS #",C.order_number]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold text-white ${S(C.priority)}`,children:E(C.priority)})]}),e.jsx("p",{className:"font-semibold text-gray-700",children:(L=C.customers)==null?void 0:L.name}),((f=C.customer_addresses)==null?void 0:f[0])&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[C.customer_addresses[0].street,", ",C.customer_addresses[0].number," - ",C.customer_addresses[0].city]})]}),e.jsxs("div",{className:"text-right text-sm text-gray-500",children:[e.jsx(vt,{className:"w-4 h-4 inline mr-1"}),new Date(C.created_at).toLocaleDateString("pt-BR")]})]}),C.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-2 line-clamp-2",children:C.description})]},C.id)})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2 mb-4",children:[e.jsx(Nt,{className:"w-6 h-6 text-green-600"}),"Tcnicos Disponveis"]}),e.jsx("div",{className:"space-y-3 max-h-[600px] overflow-y-auto",children:a.map(C=>e.jsxs(W.div,{onClick:()=>l(C.id),whileHover:{scale:1.02},className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${o===C.id?"border-green-500 bg-green-50":"border-gray-200 hover:border-green-300"} ${C.is_available?"":"opacity-50"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-gray-900",children:C.full_name}),e.jsx("p",{className:"text-sm text-gray-500",children:C.role})]}),!C.is_available&&e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded text-xs font-bold",children:"Indisponvel"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 mb-1",children:[e.jsx("span",{children:"Carga de Trabalho"}),e.jsxs("span",{children:[C.current_workload," / ",C.max_workload]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${R(C.availability_percentage)}`,style:{width:`${Math.min(C.availability_percentage,100)}%`}})})]}),e.jsx("div",{className:"flex items-center justify-between text-sm",children:e.jsxs("span",{className:"text-gray-600",children:[e.jsx(gi,{className:"w-4 h-4 inline mr-1"}),C.availability_percentage.toFixed(0),"% ocupado"]})})]},C.id))})]}),n&&e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-blue-600 to-blue-800 rounded-xl shadow-lg p-6 text-white",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Atribuir OS"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Observaes"}),e.jsx("textarea",{value:c,onChange:C=>d(C.target.value),placeholder:"Adicione observaes sobre esta atribuio...",rows:3,className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:border-white/40"})]}),e.jsx("button",{onClick:()=>D(n.id,o),disabled:!o||x,className:"w-full bg-white text-blue-600 px-4 py-3 rounded-lg font-bold hover:bg-blue-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),"Atribuindo..."]}):e.jsxs(e.Fragment,{children:[e.jsx(bj,{className:"w-5 h-5"}),"Atribuir Manualmente"]})}),e.jsxs("button",{onClick:()=>D(n.id,"",!1),disabled:x,className:"w-full bg-white/20 backdrop-blur-sm text-white px-4 py-3 rounded-lg font-bold hover:bg-white/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(Fs,{className:"w-5 h-5"}),"Distribuir Automaticamente"]})]})]})]})]})]})},pt=({children:s})=>e.jsx(e.Fragment,{children:s});function WR(){const[s,t]=j.useState(!0),[a,r]=j.useState(!1),[n,i]=j.useState(!1),[o,l]=j.useState(!1),[c,d]=j.useState(!1),[A,u]=j.useState(""),[x,m]=j.useState(""),[y]=j.useState("admin"),[g,b]=j.useState(!1),[p,v]=j.useState(!1),N=zu(),[D,S]=j.useState(!1),{isSearchOpen:E,closeSearch:R}=DU(),_=LU(),[C,L]=j.useState(!1);j.useEffect(()=>{QU()},[]),j.useEffect(()=>{const M=P=>{(P.metaKey||P.ctrlKey)&&P.key==="k"&&(P.preventDefault(),L(!0))};return window.addEventListener("keydown",M),()=>window.removeEventListener("keydown",M)},[]),j.useEffect(()=>{(async()=>{try{console.log(" Inicializando ThomazAI...");const Z=await yk();Z.success?(console.log(" ThomazAI inicializado com sucesso!"),console.log(` ${Z.metrics.totalDocuments} documentos | ${Z.metrics.totalChunks} chunks`),v(!0)):(console.warn(" ThomazAI iniciado com avisos:",Z.errors),v(!0))}catch(Z){console.error(" Erro ao inicializar ThomazAI:",Z),v(!0)}})();const P=setTimeout(()=>{t(!1),!localStorage.getItem("os_system_tutorial_completed")&&r(!0)},1500);return()=>clearTimeout(P)},[]),j.useEffect(()=>{const M=async()=>{try{const Z=await fetch("/version.json?t="+Date.now());if(!Z.ok)return;const O=Z.headers.get("content-type");if(!O||!O.includes("application/json"))return;const X=await Z.json(),q=localStorage.getItem("app_version");q&&q!==X.version?(console.log("Nova verso disponvel:",X.version),confirm(`Nova verso ${X.version} disponvel!

${X.description}

Deseja atualizar agora?`)&&(localStorage.setItem("app_version",X.version),window.location.reload())):q||localStorage.setItem("app_version",X.version)}catch{}};M();const P=setInterval(M,5*60*1e3);return()=>clearInterval(P)},[]);const f=M=>{u(M),i(!0),b(!0),setTimeout(()=>{b(!1)},1e4)},F=M=>{m(M),l(!0)};return s?e.jsx(bk,{}):e.jsxs(MU,{children:[e.jsxs(rt,{mode:"wait",children:[e.jsxs(SN,{location:N,children:[e.jsx(tt,{path:"/login",element:e.jsx(bP,{})}),e.jsx(tt,{path:"/mobile/login",element:e.jsx(zR,{})}),e.jsx(tt,{path:"/pricing",element:e.jsx(vP,{})}),e.jsx(tt,{path:"/",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(Av,{})})})}),e.jsx(tt,{path:"/home",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(uv,{})})})}),e.jsx(tt,{path:"/ordens-servico-kanban",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(AP,{})})})}),e.jsx(tt,{path:"/departmental-dashboard",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(BP,{})})})}),e.jsx(tt,{path:"/service-orders",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(GU,{})})})}),e.jsx(tt,{path:"/service-orders/create",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(Yh,{})})})}),e.jsx(tt,{path:"/service-orders/:id/view",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(eD,{})})})}),e.jsx(tt,{path:"/service-orders/:id/mobile",element:e.jsx(pt,{children:e.jsx(cD,{})})}),e.jsxs(tt,{path:"/mobile",element:e.jsx(pt,{children:e.jsx(DR,{})}),children:[e.jsx(tt,{index:!0,element:e.jsx(IR,{})}),e.jsx(tt,{path:"agenda",element:e.jsx(TR,{})}),e.jsx(tt,{path:"orders",element:e.jsx(LR,{})}),e.jsx(tt,{path:"purchases",element:e.jsx(MR,{})}),e.jsx(tt,{path:"library",element:e.jsx(QR,{})}),e.jsx(tt,{path:"routes",element:e.jsx(PR,{})}),e.jsx(tt,{path:"profile",element:e.jsx(dv,{})})]}),e.jsx(tt,{path:"/os-distribution",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(GR,{})})})}),e.jsx(tt,{path:"/service-orders/:id/edit",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(Yh,{})})})}),e.jsx(tt,{path:"/service-orders/:id",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(Yh,{})})})}),e.jsx(tt,{path:"/inventory",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(U8,{})})})}),e.jsx(tt,{path:"/inventory/:id",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(D8,{})})})}),e.jsx(tt,{path:"/inventory/create",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(I8,{})})})}),e.jsx(tt,{path:"/reports",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(f1,{})})})}),e.jsx(tt,{path:"/settings",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(R8,{})})})}),e.jsx(tt,{path:"/people",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(Cc,{})})})}),e.jsx(tt,{path:"/users",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(Cc,{})})})}),e.jsx(tt,{path:"/service-catalog",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(J8,{})})})}),e.jsx(tt,{path:"/financial",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(y1,{})})})}),e.jsx(tt,{path:"/client-management",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(aP,{})})})}),e.jsx(tt,{path:"/visual-customization",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(rP,{onPremiumFeature:f})})})}),e.jsx(tt,{path:"/monitoring",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(iP,{onPremiumFeature:f,onEnterpriseFeature:F})})})}),e.jsx(tt,{path:"/calendar",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(cP,{onPremiumFeature:f})})})}),e.jsx(tt,{path:"/projects",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(dP,{onPremiumFeature:f,onEnterpriseFeature:F})})})}),e.jsx(tt,{path:"/profile",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(dv,{})})})}),e.jsx(tt,{path:"/access-codes",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(yP,{})})})}),e.jsx(tt,{path:"/digital-library",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(SP,{})})})}),e.jsx(tt,{path:"/chat",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(kP,{})})})}),e.jsx(tt,{path:"/whatsapp-crm",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(EP,{})})})}),e.jsx(tt,{path:"/thomaz-metrics",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(FP,{})})})}),e.jsx(tt,{path:"/thomaz",element:e.jsx(pt,{children:e.jsx(QM,{})})}),e.jsx(tt,{path:"/financial-management",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(j1,{})})})}),e.jsx(tt,{path:"/salary-management",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(KR,{})})})}),e.jsx(tt,{path:"/financial-analysis",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(N1,{})})})}),e.jsx(tt,{path:"/cfo-dashboard",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(Av,{})})})}),e.jsx(tt,{path:"/reports-advanced",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(M1,{})})})}),e.jsx(tt,{path:"/automacoes",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(Cv,{})})})}),e.jsx(tt,{path:"/automations",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(Cv,{})})})}),e.jsx(tt,{path:"/financeiro",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(NR,{})})})}),e.jsx(tt,{path:"/executivo",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(BR,{})})})}),e.jsx(tt,{path:"/relatorios",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(ER,{})})})}),e.jsx(tt,{path:"/credit-scoring",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(R1,{})})})}),e.jsx(tt,{path:"/customer-rfm",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(FR,{})})})}),e.jsx(tt,{path:"/technician-performance",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(UR,{})})})}),e.jsx(tt,{path:"/financial-categories",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(C1,{})})})}),e.jsx(tt,{path:"/email/settings",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(tM,{})})})}),e.jsx(tt,{path:"/email/compose",element:e.jsx(pt,{children:e.jsx(aM,{})})}),e.jsx(tt,{path:"/email/inbox",element:e.jsx(pt,{children:e.jsx(sM,{})})}),e.jsx(tt,{path:"/audit-logs",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(TP,{})})})}),e.jsx(tt,{path:"/bank-accounts",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(_1,{})})})}),e.jsx(tt,{path:"/access-management",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(Cc,{})})})}),e.jsx(tt,{path:"/funcionarios",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(Cc,{})})})}),e.jsx(tt,{path:"/employees",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(Cc,{})})})}),e.jsx(tt,{path:"/convites-usuarios",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(LP,{})})})}),e.jsx(tt,{path:"/crm-leads",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(QP,{})})})}),e.jsx(tt,{path:"/contracts",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(PP,{})})})}),e.jsx(tt,{path:"/contract-templates",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(MP,{})})})}),e.jsx(tt,{path:"/document-templates",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(RP,{})})})}),e.jsx(tt,{path:"/invoices",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(OP,{})})})}),e.jsx(tt,{path:"/company-settings",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(HP,{})})})}),e.jsx(tt,{path:"/equipments",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(qP,{})})})}),e.jsx(tt,{path:"/suppliers",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx($P,{})})})}),e.jsx(tt,{path:"/purchasing",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(zP,{})})})}),e.jsx(tt,{path:"/google-ads-tracking",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(GP,{})})})}),e.jsx(tt,{path:"/google-ads-settings",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(WP,{})})})}),e.jsx(tt,{path:"/google-ads-oauth",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(JP,{})})})}),e.jsx(tt,{path:"/rotas",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(XP,{})})})}),e.jsx(tt,{path:"/documentos",element:e.jsx(pt,{children:e.jsx(yt,{children:e.jsx(eM,{})})})}),e.jsx(tt,{path:"/homepage",element:e.jsx(uP,{})}),e.jsx(tt,{path:"/home",element:e.jsx(uv,{})}),e.jsx(tt,{path:"/sobre",element:e.jsx(mP,{})}),e.jsx(tt,{path:"/servicos",element:e.jsx(hP,{})}),e.jsx(tt,{path:"/contato",element:e.jsx(xP,{})})]},N.pathname),e.jsx(Y8,{isOpen:a,onComplete:()=>{r(!1),localStorage.setItem("os_system_tutorial_completed","true")}}),e.jsx(pP,{isOpen:n,feature:A,onClose:()=>i(!1)}),e.jsx(fP,{isOpen:o,feature:x,onClose:()=>l(!1)}),e.jsx(wP,{isOpen:c,onClose:()=>d(!1),requiredRole:y}),g&&e.jsx(gP,{feature:A})]}),e.jsx(DM,{}),e.jsx(IM,{}),e.jsx(UU,{isOpen:E,onClose:R}),e.jsx(OU,{isOpen:C,onClose:()=>L(!1)}),e.jsx(IU,{isOpen:_.isOpen,onClose:_.close}),e.jsx(HU,{}),PU()&&e.jsx(TU,{})]})}class JR extends j.Component{constructor(){super(...arguments);zg(this,"state",{hasError:!1,error:null,errorInfo:null})}static getDerivedStateFromError(a){return{hasError:!0,error:a,errorInfo:null}}componentDidCatch(a,r){console.error("Uncaught error:",a,r),this.setState({error:a,errorInfo:r})}render(){var a;return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-2xl w-full",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Ops! Algo deu errado"}),e.jsx("p",{className:"text-gray-600",children:"Ocorreu um erro inesperado ao carregar o sistema."})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[e.jsx("h2",{className:"text-sm font-semibold text-red-800 mb-2",children:"Detalhes do erro:"}),e.jsx("pre",{className:"text-xs text-red-700 overflow-auto max-h-40",children:(a=this.state.error)==null?void 0:a.toString()})]}),this.state.errorInfo&&e.jsxs("details",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6",children:[e.jsx("summary",{className:"text-sm font-semibold text-gray-800 cursor-pointer",children:"Stack Trace (clique para expandir)"}),e.jsx("pre",{className:"text-xs text-gray-700 overflow-auto max-h-60 mt-2",children:this.state.errorInfo.componentStack})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Recarregar Pgina"}),e.jsx("button",{onClick:()=>{this.setState({hasError:!1,error:null,errorInfo:null})},className:"flex-1 bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"Tentar Novamente"})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Dica:"})," Abra o console do navegador (F12) para ver mais detalhes do erro."]})})]})}):this.props.children}}Tx.createRoot(document.getElementById("root")).render(e.jsx(ed.StrictMode,{children:e.jsx(JR,{children:e.jsx(kN,{children:e.jsx(WR,{})})})}));export{hs as _};
